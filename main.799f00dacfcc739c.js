(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{6217:(sn,ht,B)=>{"use strict";B.d(ht,{nm:()=>Hi});var a=B(2122);B(4650),B(259);var st=B(5861),Xe=B(9681),Ze=B(4859),Pe=B(2090),Oe=B(1877);const Q=new Map,et={activated:!1,tokenObservers:[]},ke={initialized:!1,enabled:!1};function He(ot){return Q.get(ot)||Object.assign({},et)}function rt(){return ke}const z="https://content-firebaseappcheck.googleapis.com/v1",Ie="exchangeDebugToken",Ee={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class tt{constructor(Ne,yt,Ut,tn,kn){if(this.operation=Ne,this.retryPolicy=yt,this.getWaitDuration=Ut,this.lowerBound=tn,this.upperBound=kn,this.pending=null,this.nextErrorWaitInterval=tn,tn>kn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ne){var yt=this;return(0,st.Z)(function*(){yt.stop();try{yt.pending=new Pe.BH,yield function $e(ot){return new Promise(Ne=>{setTimeout(Ne,ot)})}(yt.getNextRun(Ne)),yt.pending.resolve(),yield yt.pending.promise,yt.pending=new Pe.BH,yield yt.operation(),yt.pending.resolve(),yield yt.pending.promise,yt.process(!0).catch(()=>{})}catch(Ut){yt.retryPolicy(Ut)?yt.process(!1).catch(()=>{}):yt.stop()}})()}getNextRun(Ne){if(Ne)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const yt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),yt}}}const Ke=new Pe.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Sn(ot,Ne){return En.apply(this,arguments)}function En(){return(En=(0,st.Z)(function*({url:ot,body:Ne},yt){const Ut={"Content-Type":"application/json"},tn=yt.getImmediate({optional:!0});if(tn){const Bn=yield tn.getHeartbeatsHeader();Bn&&(Ut["X-Firebase-Client"]=Bn)}const kn={method:"POST",body:JSON.stringify(Ne),headers:Ut};let zn,Qr;try{zn=yield fetch(ot,kn)}catch(Bn){throw Ke.create("fetch-network-error",{originalErrorMessage:null==Bn?void 0:Bn.message})}if(200!==zn.status)throw Ke.create("fetch-status-error",{httpStatus:zn.status});try{Qr=yield zn.json()}catch(Bn){throw Ke.create("fetch-parse-error",{originalErrorMessage:null==Bn?void 0:Bn.message})}const sr=Qr.ttl.match(/^([\d.]+)(s)$/);if(!sr||!sr[2]||isNaN(Number(sr[1])))throw Ke.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Qr.ttl}`});const br=1e3*Number(sr[1]),Yn=Date.now();return{token:Qr.token,expireTimeMillis:Yn+br,issuedAtTimeMillis:Yn}})).apply(this,arguments)}const Qn="firebase-app-check-database",vr=1,lr="firebase-app-check-store";let _r=null;function Sr(ot,Ne){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,st.Z)(function*(ot,Ne){const Ut=(yield function Wt(){return _r||(_r=new Promise((ot,Ne)=>{try{const yt=indexedDB.open(Qn,vr);yt.onsuccess=Ut=>{ot(Ut.target.result)},yt.onerror=Ut=>{var tn;Ne(Ke.create("storage-open",{originalErrorMessage:null===(tn=Ut.target.error)||void 0===tn?void 0:tn.message}))},yt.onupgradeneeded=Ut=>{0===Ut.oldVersion&&Ut.target.result.createObjectStore(lr,{keyPath:"compositeKey"})}}catch(yt){Ne(Ke.create("storage-open",{originalErrorMessage:null==yt?void 0:yt.message}))}}),_r)}()).transaction(lr,"readwrite"),kn=Ut.objectStore(lr).put({compositeKey:ot,value:Ne});return new Promise((zn,Qr)=>{kn.onsuccess=sr=>{zn()},Ut.onerror=sr=>{var br;Qr(Ke.create("storage-set",{originalErrorMessage:null===(br=sr.target.error)||void 0===br?void 0:br.message}))}})})).apply(this,arguments)}const mr=new Oe.Yd("@firebase/app-check");function yi(ot,Ne){return(0,Pe.hl)()?function Cr(ot,Ne){return Sr(function An(ot){return`${ot.options.appId}-${ot.name}`}(ot),Ne)}(ot,Ne).catch(yt=>{mr.warn(`Failed to write token to IndexedDB. Error: ${yt}`)}):Promise.resolve()}function rr(){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,st.Z)(function*(){const ot=rt();if(ot.enabled&&ot.token)return ot.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const en={error:"UNKNOWN_ERROR"};function $t(ot){return Pe.US.encodeString(JSON.stringify(ot),!1)}function gn(ot){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,st.Z)(function*(ot,Ne=!1){const yt=ot.app;!function At(ot){if(!He(ot).activated)throw Ke.create("use-before-activation",{appName:ot.name})}(yt);const Ut=He(yt);let kn,tn=Ut.token;if(tn&&!ze(tn)&&(Ut.token=void 0,tn=void 0),!tn){const sr=yield Ut.cachedTokenPromise;sr&&(ze(sr)?tn=sr:yield yi(yt,void 0))}if(!Ne&&tn&&ze(tn))return{token:tn.token};let Qr,zn=!1;if(function di(){return rt().enabled}()){Ut.exchangeTokenPromise||(Ut.exchangeTokenPromise=Sn(function Zt(ot,Ne){const{projectId:yt,appId:Ut,apiKey:tn}=ot.options;return{url:`${z}/projects/${yt}/apps/${Ut}:${Ie}?key=${tn}`,body:{debug_token:Ne}}}(yt,yield rr()),ot.heartbeatServiceProvider).finally(()=>{Ut.exchangeTokenPromise=void 0}),zn=!0);const sr=yield Ut.exchangeTokenPromise;return yield yi(yt,sr),Ut.token=sr,{token:sr.token}}try{Ut.exchangeTokenPromise||(Ut.exchangeTokenPromise=Ut.provider.getToken().finally(()=>{Ut.exchangeTokenPromise=void 0}),zn=!0),tn=yield He(yt).exchangeTokenPromise}catch(sr){"appCheck/throttled"===sr.code?mr.warn(sr.message):mr.error(sr),kn=sr}return tn?kn?Qr=ze(tn)?{token:tn.token,internalError:kn}:Mt(kn):(Qr={token:tn.token},Ut.token=tn,yield yi(yt,tn)):Qr=Mt(kn),zn&&function _e(ot,Ne){const yt=He(ot).tokenObservers;for(const Ut of yt)try{"EXTERNAL"===Ut.type&&null!=Ne.error?Ut.error(Ne.error):Ut.next(Ne)}catch(tn){}}(yt,Qr),Qr})).apply(this,arguments)}function Vn(ot,Ne){const yt=He(ot),Ut=yt.tokenObservers.filter(tn=>tn.next!==Ne);0===Ut.length&&yt.tokenRefresher&&yt.tokenRefresher.isRunning()&&yt.tokenRefresher.stop(),yt.tokenObservers=Ut}function xr(ot){const{app:Ne}=ot,yt=He(Ne);let Ut=yt.tokenRefresher;Ut||(Ut=function Re(ot){const{app:Ne}=ot;return new tt((0,st.Z)(function*(){let Ut;if(Ut=He(Ne).token?yield gn(ot,!0):yield gn(ot),Ut.error)throw Ut.error;if(Ut.internalError)throw Ut.internalError}),()=>!0,()=>{const yt=He(Ne);if(yt.token){let Ut=yt.token.issuedAtTimeMillis+.5*(yt.token.expireTimeMillis-yt.token.issuedAtTimeMillis)+3e5;return Ut=Math.min(Ut,yt.token.expireTimeMillis-3e5),Math.max(0,Ut-Date.now())}return 0},Ee.RETRIAL_MIN_WAIT,Ee.RETRIAL_MAX_WAIT)}(ot),yt.tokenRefresher=Ut),!Ut.isRunning()&&yt.isTokenAutoRefreshEnabled&&Ut.start()}function ze(ot){return ot.expireTimeMillis-Date.now()>0}function Mt(ot){return{token:$t(en),error:ot}}class gt{constructor(Ne,yt){this.app=Ne,this.heartbeatServiceProvider=yt}_delete(){const{tokenObservers:Ne}=He(this.app);for(const yt of Ne)Vn(this.app,yt.next);return Promise.resolve()}}const ln="app-check-internal";!function Kn(){(0,Xe._registerComponent)(new Ze.wA("app-check",ot=>function dn(ot,Ne){return new gt(ot,Ne)}(ot.getProvider("app").getImmediate(),ot.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((ot,Ne,yt)=>{ot.getProvider(ln).initialize()})),(0,Xe._registerComponent)(new Ze.wA(ln,ot=>function Le(ot){return{getToken:Ne=>gn(ot,Ne),addTokenListener:Ne=>function On(ot,Ne,yt,Ut){const{app:tn}=ot,kn=He(tn);if(kn.tokenObservers=[...kn.tokenObservers,{next:yt,error:Ut,type:Ne}],kn.token&&ze(kn.token)){const Qr=kn.token;Promise.resolve().then(()=>{yt({token:Qr.token}),xr(ot)}).catch(()=>{})}kn.cachedTokenPromise.then(()=>xr(ot))}(ot,"INTERNAL",Ne),removeTokenListener:Ne=>Vn(ot.app,Ne)}}(ot.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Xe.registerVersion)("@firebase/app-check","0.6.4")}();class Hi{constructor(){return(0,a.vb)("app-check")}}typeof window<"u"&&window},1205:(sn,ht,B)=>{"use strict";B.d(ht,{zQ:()=>z,ww:()=>ft,rT:()=>ke,f7:()=>Ge,L6:()=>Q,_Q:()=>et,lh:()=>He,Qv:()=>Oe,nw:()=>rt});var a=B(4650),J=B(7579),G=B(9646),De=B(9751),Me=B(8996),Ae=B(6451),he=B(5363),xe=B(3900),Ve=B(4004),ge=B(6063);class ce extends J.x{constructor(Ie=1/0,Ee=1/0,be=ge.l){super(),this._bufferSize=Ie,this._windowTime=Ee,this._timestampProvider=be,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Ee===1/0,this._bufferSize=Math.max(1,Ie),this._windowTime=Math.max(1,Ee)}next(Ie){const{isStopped:Ee,_buffer:be,_infiniteTimeWindow:tt,_timestampProvider:$e,_windowTime:Je}=this;Ee||(be.push(Ie),!tt&&be.push($e.now()+Je)),this._trimBuffer(),super.next(Ie)}_subscribe(Ie){this._throwIfClosed(),this._trimBuffer();const Ee=this._innerSubscribe(Ie),{_infiniteTimeWindow:be,_buffer:tt}=this,$e=tt.slice();for(let Je=0;Je<$e.length&&!Ie.closed;Je+=be?1:2)Ie.next($e[Je]);return this._checkFinalizedStatuses(Ie),Ee}_trimBuffer(){const{_bufferSize:Ie,_timestampProvider:Ee,_buffer:be,_infiniteTimeWindow:tt}=this,$e=(tt?1:2)*Ie;if(Ie<1/0&&$e<be.length&&be.splice(0,be.length-$e),!tt){const Je=Ee.now();let Ke=0;for(let Pt=1;Pt<be.length&&be[Pt]<=Je;Pt+=2)Ke=Pt;Ke&&be.splice(0,Ke+1)}}}var de=B(3099);function Ce(nt,Ie,Ee){let be,tt=!1;return nt&&"object"==typeof nt?({bufferSize:be=1/0,windowTime:Ie=1/0,refCount:tt=!1,scheduler:Ee}=nt):be=null!=nt?nt:1/0,(0,de.B)({connector:()=>new ce(be,Ie,Ee),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:tt})}var Fe=B(590),it=B(576);function Ct(nt,Ie){return(0,it.m)(Ie)?(0,xe.w)(()=>nt,Ie):(0,xe.w)(()=>nt)}var Te=B(9468),ye=B(9300),le=B(2122),at=B(2011),st=B(6895),Xe=B(6217),Ze=B(9260);const Oe=new a.OlP("angularfire2.auth.use-emulator"),Q=new a.OlP("angularfire2.auth.settings"),et=new a.OlP("angularfire2.auth.tenant-id"),ke=new a.OlP("angularfire2.auth.langugage-code"),He=new a.OlP("angularfire2.auth.use-device-language"),Ge=new a.OlP("angularfire.auth.persistence"),rt=(nt,Ie,Ee,be,tt,$e,Je,Ke)=>(0,at.cc)(`${nt.name}.auth`,"AngularFireAuth",nt.name,()=>{const Pt=Ie.runOutsideAngular(()=>nt.auth());if(Ee&&Pt.useEmulator(...Ee),be&&(Pt.tenantId=be),Pt.languageCode=tt,$e&&Pt.useDeviceLanguage(),Je)for(const[At,Nt]of Object.entries(Je))Pt.settings[At]=Nt;return Ke&&Pt.setPersistence(Ke),Pt},[Ee,be,tt,$e,Je,Ke]);let z=(()=>{class nt{constructor(Ee,be,tt,$e,Je,Ke,Pt,At,Nt,vt,Sn,En){const Fn=new J.x,$n=(0,G.of)(void 0).pipe((0,he.Q)(Je.outsideAngular),(0,xe.w)(()=>$e.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,8971)))),(0,Ve.U)(()=>(0,at.on)(Ee,$e,be)),(0,Ve.U)(Zt=>rt(Zt,$e,Ke,At,Nt,vt,Pt,Sn)),Ce({bufferSize:1,refCount:!1}));if((0,st.PM)(tt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,G.of)(null);else{$n.pipe((0,Fe.P)()).subscribe();const Qn=$n.pipe((0,xe.w)(hn=>hn.getRedirectResult().then(_r=>_r,()=>null)),le.iC,Ce({bufferSize:1,refCount:!1})),vr=$n.pipe((0,xe.w)(hn=>new De.y(_r=>({unsubscribe:$e.runOutsideAngular(()=>hn.onAuthStateChanged(Wt=>_r.next(Wt),Wt=>_r.error(Wt),()=>_r.complete()))})))),lr=$n.pipe((0,xe.w)(hn=>new De.y(_r=>({unsubscribe:$e.runOutsideAngular(()=>hn.onIdTokenChanged(Wt=>_r.next(Wt),Wt=>_r.error(Wt),()=>_r.complete()))}))));this.authState=Qn.pipe(Ct(vr),(0,Te.R)(Je.outsideAngular),(0,he.Q)(Je.insideAngular)),this.user=Qn.pipe(Ct(lr),(0,Te.R)(Je.outsideAngular),(0,he.Q)(Je.insideAngular)),this.idToken=this.user.pipe((0,xe.w)(hn=>hn?(0,Me.D)(hn.getIdToken()):(0,G.of)(null))),this.idTokenResult=this.user.pipe((0,xe.w)(hn=>hn?(0,Me.D)(hn.getIdTokenResult()):(0,G.of)(null))),this.credential=(0,Ae.T)(Qn,Fn,this.authState.pipe((0,ye.h)(hn=>!hn))).pipe((0,Ve.U)(hn=>null!=hn&&hn.user?hn:null),(0,Te.R)(Je.outsideAngular),(0,he.Q)(Je.insideAngular))}return(0,at.pX)(this,$n,$e,{spy:{apply:(Zt,Qn,vr)=>{(Zt.startsWith("signIn")||Zt.startsWith("createUser"))&&vr.then(lr=>Fn.next(lr))}}})}}return nt.\u0275fac=function(Ee){return new(Ee||nt)(a.LFG(at.Dh),a.LFG(at.xv,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(le.HU),a.LFG(Oe,8),a.LFG(Q,8),a.LFG(et,8),a.LFG(ke,8),a.LFG(He,8),a.LFG(Ge,8),a.LFG(Xe.nm,8))},nt.\u0275prov=a.Yz7({token:nt,factory:nt.\u0275fac,providedIn:"any"}),nt})(),ft=(()=>{class nt{constructor(){Ze.Z.registerVersion("angularfire",le.q4.full,"auth-compat")}}return nt.\u0275fac=function(Ee){return new(Ee||nt)},nt.\u0275mod=a.oAB({type:nt}),nt.\u0275inj=a.cJS({providers:[z]}),nt})()},3101:(sn,ht,B)=>{"use strict";B.d(ht,{ST:()=>av,yb:()=>N_});var a=B(4650),J=B(4986),G=B(9751),De=B(8996),Me=B(9646),Ae=B(2122),he=B(8675),xe=B(4482),Ve=B(5403);function ge(){return(0,xe.e)((i,e)=>{let t,s=!1;i.subscribe((0,Ve.x)(e,u=>{const y=t;t=u,s&&e.next([y,u]),s=!0}))})}var Q,ce=B(4004),de=B(5026),Ce=B(1884),Fe=B(9300),it=B(2011),Ct=B(6895),ye=(B(8971),B(3942)),le=B(5861),at=B(9681),st=B(4859),Xe=B(1877),Ze=B(2090),Pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Oe={},et=et||{},ke=Pe||self;function He(){}function Ge(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function rt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var ft="closure_uid_"+(1e9*Math.random()>>>0),nt=0;function Ie(i,e,t){return i.call.apply(i.bind,arguments)}function Ee(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,s),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function be(i,e,t){return(be=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ie:Ee).apply(null,arguments)}function tt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function $e(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(s,u,y){for(var C=Array(arguments.length-2),O=2;O<arguments.length;O++)C[O-2]=arguments[O];return e.prototype[u].apply(s,C)}}function Je(){this.s=this.s,this.o=this.o}Je.prototype.s=!1,Je.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function z(i){Object.prototype.hasOwnProperty.call(i,ft)&&i[ft]||(i[ft]=++nt)}(this)},Je.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Pt=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function At(i){const e=i.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=i[s];return t}return[]}function Nt(i,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(Ge(s)){const u=i.length||0,y=s.length||0;i.length=u+y;for(let C=0;C<y;C++)i[u+C]=s[C]}else i.push(s)}}function vt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}vt.prototype.h=function(){this.defaultPrevented=!0};var Sn=function(){if(!ke.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ke.addEventListener("test",He,e),ke.removeEventListener("test",He,e)}catch(t){}return i}();function En(i){return/^[\s\xa0]*$/.test(i)}var Fn=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function $n(i,e){return i<e?-1:i>e?1:0}function Zt(){var i=ke.navigator;return i&&(i=i.userAgent)?i:""}function Qn(i){return-1!=Zt().indexOf(i)}function vr(i){return vr[" "](i),i}vr[" "]=He;var Sr,i,hn=Qn("Opera"),_r=Qn("Trident")||Qn("MSIE"),Wt=Qn("Edge"),Jr=Wt||_r,Cr=Qn("Gecko")&&!(-1!=Zt().toLowerCase().indexOf("webkit")&&!Qn("Edge"))&&!(Qn("Trident")||Qn("MSIE"))&&!Qn("Edge"),Er=-1!=Zt().toLowerCase().indexOf("webkit")&&!Qn("Edge");function Zr(){var i=ke.document;return i?i.documentMode:void 0}e:{var Dn="",yn=(i=Zt(),Cr?/rv:([^\);]+)(\)|;)/.exec(i):Wt?/Edge\/([\d\.]+)/.exec(i):_r?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Er?/WebKit\/(\S+)/.exec(i):hn?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(yn&&(Dn=yn?yn[1]:""),_r){var In=Zr();if(null!=In&&In>parseFloat(Dn)){Sr=String(In);break e}}Sr=Dn}var An={};var yi=ke.document&&_r&&(Zr()||parseInt(Sr,10))||void 0;function Li(i,e){if(vt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Cr){e:{try{vr(e.nodeName);var u=!0;break e}catch(y){}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Dr[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Li.X.h.call(this)}}$e(Li,vt);var Dr={2:"touch",3:"pen",4:"mouse"};Li.prototype.h=function(){Li.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var di="closure_listenable_"+(1e6*Math.random()|0),rr=0;function Nn(i,e,t,s,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ha=u,this.key=++rr,this.ba=this.ea=!1}function hi(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function en(i,e,t){for(const s in i)e.call(t,i[s],s,i)}function $t(i){const e={};for(const t in i)e[t]=i[t];return e}const gn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Tn(i,e){let t,s;for(let u=1;u<arguments.length;u++){for(t in s=arguments[u],s)i[t]=s[t];for(let y=0;y<gn.length;y++)t=gn[y],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function On(i){this.src=i,this.g={},this.h=0}function Vn(i,e){var t=e.type;if(t in i.g){var y,s=i.g[t],u=Pt(s,e);(y=0<=u)&&Array.prototype.splice.call(s,u,1),y&&(hi(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function xr(i,e,t,s){for(var u=0;u<i.length;++u){var y=i[u];if(!y.ba&&y.listener==e&&y.capture==!!t&&y.ha==s)return u}return-1}On.prototype.add=function(i,e,t,s,u){var y=i.toString();(i=this.g[y])||(i=this.g[y]=[],this.h++);var C=xr(i,e,s,u);return-1<C?(e=i[C],t||(e.ea=!1)):((e=new Nn(e,this.src,y,!!s,u)).ea=t,i.push(e)),e};var Re="closure_lm_"+(1e6*Math.random()|0),_e={};function ze(i,e,t,s,u){if(s&&s.once)return dn(i,e,t,s,u);if(Array.isArray(e)){for(var y=0;y<e.length;y++)ze(i,e[y],t,s,u);return null}return t=xn(t),i&&i[di]?i.N(e,t,rt(s)?!!s.capture:!!s,u):Mt(i,e,t,!1,s,u)}function Mt(i,e,t,s,u,y){if(!e)throw Error("Invalid event type");var C=rt(u)?!!u.capture:!!u,O=Rt(i);if(O||(i[Re]=O=new On(i)),(t=O.add(e,t,s,C,y)).proxy)return t;if(s=function gt(){const e=mt;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)Sn||(u=C),void 0===u&&(u=!1),i.addEventListener(e.toString(),s,u);else if(i.attachEvent)i.attachEvent(me(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function dn(i,e,t,s,u){if(Array.isArray(e)){for(var y=0;y<e.length;y++)dn(i,e[y],t,s,u);return null}return t=xn(t),i&&i[di]?i.O(e,t,rt(s)?!!s.capture:!!s,u):Mt(i,e,t,!0,s,u)}function Le(i,e,t,s,u){if(Array.isArray(e))for(var y=0;y<e.length;y++)Le(i,e[y],t,s,u);else s=rt(s)?!!s.capture:!!s,t=xn(t),i&&i[di]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=xr(y=i.g[e],t,s,u))&&(hi(y[t]),Array.prototype.splice.call(y,t,1),0==y.length&&(delete i.g[e],i.h--))):i&&(i=Rt(i))&&(e=i.g[e.toString()],i=-1,e&&(i=xr(e,t,s,u)),(t=-1<i?e[i]:null)&&Be(t))}function Be(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[di])Vn(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(me(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Rt(e))?(Vn(t,i),0==t.h&&(t.src=null,e[Re]=null)):hi(i)}}}function me(i){return i in _e?_e[i]:_e[i]="on"+i}function mt(i,e){if(i.ba)i=!0;else{e=new Li(e,this);var t=i.listener,s=i.ha||i.src;i.ea&&Be(i),i=t.call(s,e)}return i}function Rt(i){return(i=i[Re])instanceof On?i:null}var jt="__closure_events_fn_"+(1e9*Math.random()>>>0);function xn(i){return"function"==typeof i?i:(i[jt]||(i[jt]=function(e){return i.handleEvent(e)}),i[jt])}function Hn(){Je.call(this),this.i=new On(this),this.P=this,this.I=null}function fr(i,e){var t,s=i.I;if(s)for(t=[];s;s=s.I)t.push(s);if(i=i.P,s=e.type||e,"string"==typeof e)e=new vt(e,i);else if(e instanceof vt)e.target=e.target||i;else{var u=e;Tn(e=new vt(s,i),u)}if(u=!0,t)for(var y=t.length-1;0<=y;y--){var C=e.g=t[y];u=$i(C,s,!0,e)&&u}if(u=$i(C=e.g=i,s,!0,e)&&u,u=$i(C,s,!1,e)&&u,t)for(y=0;y<t.length;y++)u=$i(C=e.g=t[y],s,!1,e)&&u}function $i(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,y=0;y<e.length;++y){var C=e[y];if(C&&!C.ba&&C.capture==t){var O=C.listener,j=C.ha||C.src;C.ea&&Vn(i.i,C),u=!1!==O.call(j,s)&&u}}return u&&!s.defaultPrevented}$e(Hn,Je),Hn.prototype[di]=!0,Hn.prototype.removeEventListener=function(i,e,t,s){Le(this,i,e,t,s)},Hn.prototype.M=function(){if(Hn.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)hi(t[s]);delete i.g[e],i.h--}}this.I=null},Hn.prototype.N=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},Hn.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var Bi=ke.JSON.stringify;function Yi(){var i=Ei;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Zn,Oi=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Rr,i=>i.reset());class Rr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function is(i){ke.setTimeout(()=>{throw i},0)}function Ui(i,e){Zn||function Wr(){var i=ke.Promise.resolve(void 0);Zn=function(){i.then(ei)}}(),kr||(Zn(),kr=!0),Ei.add(i,e)}var kr=!1,Ei=new class fi{constructor(){this.h=this.g=null}add(e,t){const s=Oi.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function ei(){for(var i;i=Yi();){try{i.h.call(i.g)}catch(t){is(t)}var e=Oi;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}kr=!1}function jr(i,e){Hn.call(this),this.h=i||1,this.g=e||ke,this.j=be(this.lb,this),this.l=Date.now()}function ji(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function Ji(i,e,t){if("function"==typeof i)t&&(i=be(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=be(i.handleEvent,i)}return 2147483647<Number(e)?-1:ke.setTimeout(i,e||0)}function Si(i){i.g=Ji(()=>{i.g=null,i.i&&(i.i=!1,Si(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}$e(jr,Hn),(Q=jr.prototype).ca=!1,Q.R=null,Q.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),fr(this,"tick"),this.ca&&(ji(this),this.start()))}},Q.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Q.M=function(){jr.X.M.call(this),ji(this),delete this.g};class ln extends Je{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Si(this)}M(){super.M(),this.g&&(ke.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kn(i){Je.call(this),this.h=i,this.g={}}$e(Kn,Je);var Tr=[];function ti(i,e,t,s){Array.isArray(t)||(t&&(Tr[0]=t.toString()),t=Tr);for(var u=0;u<t.length;u++){var y=ze(e,t[u],s||i.handleEvent,!1,i.h||i);if(!y)break;i.g[y.key]=y}}function Hi(i){en(i.g,function(e,t){this.g.hasOwnProperty(t)&&Be(e)},i),i.g={}}function ee(){this.g=!0}function lt(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ae(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var u=s[1];if(Array.isArray(u)&&!(1>u.length)){var y=u[0];if("noop"!=y&&"stop"!=y&&"close"!=y)for(var C=1;C<u.length;C++)u[C]=""}}}return Bi(t)}catch(O){return e}}(i,t)+(s?" "+s:"")})}Kn.prototype.M=function(){Kn.X.M.call(this),Hi(this)},Kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ee.prototype.Aa=function(){this.g=!1},ee.prototype.info=function(){};var qe={},pt=null;function Dt(){return pt=pt||new Hn}function Ft(i){vt.call(this,qe.Pa,i)}function Xt(i){const e=Dt();fr(e,new Ft(e))}function wn(i,e){vt.call(this,qe.STAT_EVENT,i),this.stat=e}function Mn(i){const e=Dt();fr(e,new wn(e,i))}function Ir(i,e){vt.call(this,qe.Qa,i),this.size=e}function Kr(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ke.setTimeout(function(){i()},e)}qe.Pa="serverreachability",$e(Ft,vt),qe.STAT_EVENT="statevent",$e(wn,vt),qe.Qa="timingevent",$e(Ir,vt);var ot={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Ne={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function yt(){}function tn(){}yt.prototype.h=null;var sr,kn={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function zn(){vt.call(this,"d")}function Qr(){vt.call(this,"c")}function br(){}function Yn(i,e,t,s){this.l=i,this.j=e,this.m=t,this.U=s||1,this.S=new Kn(this),this.O=qi,this.T=new jr(i=Jr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Bn}function Bn(){this.i=null,this.g="",this.h=!1}$e(zn,vt),$e(Qr,vt),$e(br,yt),br.prototype.g=function(){return new XMLHttpRequest},br.prototype.i=function(){return{}},sr=new br;var qi=45e3,Br={},ds={};function Gi(i,e,t){i.K=1,i.v=Ii(Wi(e)),i.s=t,i.P=!0,Ys(i,null)}function Ys(i,e){i.F=Date.now(),ni(i),i.A=Wi(i.v);var t=i.A,s=i.U;Array.isArray(s)||(s=[String(s)]),Lo(t.i,"t",s),i.C=0,t=i.l.H,i.h=new Bn,i.g=oa(i.l,t?e:null,!i.s),0<i.N&&(i.L=new ln(be(i.La,i,i.g),i.N)),ti(i.S,i.g,"readystatechange",i.ib),e=i.H?$t(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),Xt(),function fe(i,e,t,s,u,y){i.info(function(){if(i.g)if(y)for(var C="",O=y.split("&"),j=0;j<O.length;j++){var Z=O[j].split("=");if(1<Z.length){var ue=Z[0];Z=Z[1];var Ye=ue.split("_");C=2<=Ye.length&&"type"==Ye[1]?C+(ue+"=")+Z+"&":C+(ue+"=redacted&")}}else C=null;else C=y;return"XMLHTTP REQ ("+s+") [attempt "+u+"]: "+e+"\n"+t+"\n"+C})}(i.j,i.u,i.A,i.m,i.U,i.s)}function Eo(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function Fr(i,e,t){let u,s=!0;for(;!i.I&&i.C<t.length;){if(u=qn(i,t),u==ds){4==e&&(i.o=4,Mn(14),s=!1),lt(i.j,i.m,null,"[Incomplete Response]");break}if(u==Br){i.o=4,Mn(15),lt(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}lt(i.j,i.m,u,null),Is(i,u)}Eo(i)&&u!=ds&&u!=Br&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Mn(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Za(e),e.K=!0,Mn(11))):(lt(i.j,i.m,t,"[Invalid Chunked Response]"),Es(i),zi(i))}function qn(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?ds:(t=Number(e.substring(t,s)),isNaN(t)?Br:(s+=1)+t>e.length?ds:(e=e.substr(s,t),i.C=s+t,e))}function ni(i){i.V=Date.now()+i.O,Io(i,i.O)}function Io(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Kr(be(i.gb,i),e)}function qs(i){i.B&&(ke.clearTimeout(i.B),i.B=null)}function zi(i){0==i.l.G||i.I||tu(i.l,i)}function Es(i){qs(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,ji(i.T),Hi(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Is(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||Mi(t.h,i)))if(!i.J&&Mi(t.h,i)&&3==t.G){try{var s=t.Fa.g.parse(e)}catch(Z){s=null}if(Array.isArray(s)&&3==s.length){var u=s;if(0==u[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;$a(t),eo(t)}To(t),Mn(18)}}else t.Ba=u[1],0<t.Ba-t.T&&37500>u[2]&&t.L&&0==t.A&&!t.v&&(t.v=Kr(be(t.cb,t),6e3));if(1>=Hs(t.h)&&t.ja){try{t.ja()}catch(Z){}t.ja=void 0}}else Ho(t,11)}else if((i.J||t.g==i)&&$a(t),!En(e))for(u=t.Fa.g.parse(e),e=0;e<u.length;e++){let Z=u[e];if(t.T=Z[0],Z=Z[1],2==t.G)if("c"==Z[0]){t.I=Z[1],t.ka=Z[2];const ue=Z[3];null!=ue&&(t.ma=ue,t.j.info("VER="+t.ma));const Ye=Z[4];null!=Ye&&(t.Ca=Ye,t.j.info("SVER="+t.Ca));const It=Z[5];null!=It&&"number"==typeof It&&0<It&&(t.J=s=1.5*It,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const Ht=i.g;if(Ht){const nn=Ht.g?Ht.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nn){var y=s.h;y.g||-1==nn.indexOf("spdy")&&-1==nn.indexOf("quic")&&-1==nn.indexOf("h2")||(y.j=y.l,y.g=new Set,y.h&&(as(y,y.h),y.h=null))}if(s.D){const Rn=Ht.g?Ht.g.getResponseHeader("X-HTTP-Session-Id"):null;Rn&&(s.za=Rn,ri(s.F,s.D,Rn))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var C=i;if((s=t).sa=ws(s,s.H?s.ka:null,s.V),C.J){Lr(s.h,C);var O=C,j=s.J;j&&O.setTimeout(j),O.B&&(qs(O),ni(O)),s.g=C}else jo(s);0<t.i.length&&ha(t)}else"stop"!=Z[0]&&"close"!=Z[0]||Ho(t,7);else 3==t.G&&("stop"==Z[0]||"close"==Z[0]?"stop"==Z[0]?Ho(t,7):Do(t):"noop"!=Z[0]&&t.l&&t.l.wa(Z),t.A=0)}Xt()}catch(Z){}}function Qs(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Ge(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function ss(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(Ge(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const s in i)e[t++]=s;return e}}}(i),s=function Zs(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Ge(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),u=s.length,y=0;y<u;y++)e.call(void 0,s[y],t&&t[y],i)}(Q=Yn.prototype).setTimeout=function(i){this.O=i},Q.ib=function(i){i=i.target;const e=this.L;e&&3==pr(i)?e.l():this.La(i)},Q.La=function(i){try{if(i==this.g)e:{const ue=pr(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>ue)&&(3!=ue||Jr||this.g&&(this.h.h||this.g.fa()||ns(this.g)))){this.I||4!=ue||7==e||Xt(),qs(this);var t=this.g.aa();this.Y=t;t:if(Eo(this)){var s=ns(this.g);i="";var u=s.length,y=4==pr(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Es(this),zi(this);var C="";break t}this.h.i=new ke.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:y&&e==u-1});s.splice(0,u),this.h.g+=i,this.C=0,C=this.h.g}else C=this.g.fa();if(this.i=200==t,function We(i,e,t,s,u,y,C){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+y+" "+C})}(this.j,this.u,this.A,this.m,this.U,ue,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var O,j=this.g;if((O=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!En(O)){var Z=O;break t}}Z=null}if(!(t=Z)){this.i=!1,this.o=3,Mn(12),Es(this),zi(this);break e}lt(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Is(this,t)}this.P?(Fr(this,ue,C),Jr&&this.i&&3==ue&&(ti(this.S,this.T,"tick",this.hb),this.T.start())):(lt(this.j,this.m,C,null),Is(this,C)),4==ue&&Es(this),this.i&&!this.I&&(4==ue?tu(this.l,this):(this.i=!1,ni(this)))}else 400==t&&0<C.indexOf("Unknown SID")?(this.o=3,Mn(12)):(this.o=0,Mn(13)),Es(this),zi(this)}}}catch(ue){}},Q.hb=function(){if(this.g){var i=pr(this.g),e=this.g.fa();this.C<e.length&&(qs(this),Fr(this,i,e),this.i&&4!=i&&ni(this))}},Q.cancel=function(){this.I=!0,Es(this)},Q.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function xt(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Xt(),Mn(17)),Es(this),this.o=2,zi(this)):Io(this,this.V-i)};var Xs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ai(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Ai){this.h=void 0!==e?e:i.h,wo(this,i.j),this.s=i.s,this.g=i.g,oo(this,i.m),this.l=i.l,e=i.i;var t=new li;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Bs(this,t),this.o=i.o}else i&&(t=String(i).match(Xs))?(this.h=!!e,wo(this,t[1]||"",!0),this.s=ur(t[2]||""),this.g=ur(t[3]||"",!0),oo(this,t[4]),this.l=ur(t[5]||"",!0),Bs(this,t[6]||"",!0),this.o=ur(t[7]||"")):(this.h=!!e,this.i=new li(null,this.h))}function Wi(i){return new Ai(i)}function wo(i,e,t){i.j=t?ur(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function oo(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Bs(i,e,t){e instanceof li?(i.i=e,function qo(i,e){e&&!i.j&&(Us(i),i.i=null,i.g.forEach(function(t,s){var u=s.toLowerCase();s!=u&&(Or(this,s),Lo(this,u,t))},i)),i.j=e}(i.i,i.h)):(t||(e=es(e,Zi)),i.i=new li(e,i.h))}function ri(i,e,t){i.i.set(e,t)}function Ii(i){return ri(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function ur(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function es(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,os),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function os(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Ai.prototype.toString=function(){var i=[],e=this.j;e&&i.push(es(e,Vs,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(es(e,Vs,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(es(t,"/"==t.charAt(0)?hs:xi,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",es(t,Yo)),i.join("")};var Vs=/[#\/\?@]/g,xi=/[#\?:]/g,hs=/[#\?]/g,Zi=/[#\?@]/g,Yo=/#/g;function li(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Us(i){i.g||(i.g=new Map,i.h=0,i.i&&function $s(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),u=null;if(0<=s){var y=i[t].substring(0,s);u=i[t].substring(s+1)}else y=i[t];e(y,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Or(i,e){Us(i),e=oi(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Rs(i,e){return Us(i),e=oi(i,e),i.g.has(e)}function Lo(i,e,t){Or(i,e),0<t.length&&(i.i=null,i.g.set(oi(i,e),At(t)),i.h+=t.length)}function oi(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function ui(i){this.l=i||$o,i=ke.PerformanceNavigationTiming?0<(i=ke.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ke.g&&ke.g.Ga&&ke.g.Ga()&&ke.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Q=li.prototype).add=function(i,e){Us(this),this.i=null,i=oi(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},Q.forEach=function(i,e){Us(this),this.g.forEach(function(t,s){t.forEach(function(u){i.call(e,u,s,this)},this)},this)},Q.oa=function(){Us(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const u=i[s];for(let y=0;y<u.length;y++)t.push(e[s])}return t},Q.W=function(i){Us(this);let e=[];if("string"==typeof i)Rs(this,i)&&(e=e.concat(this.g.get(oi(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},Q.set=function(i,e){return Us(this),this.i=null,Rs(this,i=oi(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Q.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},Q.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const y=encodeURIComponent(String(s)),C=this.W(s);for(s=0;s<C.length;s++){var u=y;""!==C[s]&&(u+="="+encodeURIComponent(String(C[s]))),i.push(u)}}return this.i=i.join("&")};var $o=10;function Zo(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Hs(i){return i.h?1:i.g?i.g.size:0}function Mi(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function as(i,e){i.g?i.g.add(e):i.h=e}function Lr(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Co(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return At(i.i)}function fs(){}function Bo(){this.g=new fs}function Vo(i,e,t){const s=t||"";try{Qs(i,function(u,y){let C=u;rt(u)&&(C=Bi(u)),e.push(s+y+"="+encodeURIComponent(C))})}catch(u){throw e.push(s+"type="+encodeURIComponent("_badmap")),u}}function ps(i,e,t,s,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(s)}catch(y){}}function Js(i){this.l=i.ac||null,this.j=i.jb||!1}function Jn(i,e){Hn.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=ao,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ui.prototype.cancel=function(){if(this.i=Co(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},fs.prototype.stringify=function(i){return ke.JSON.stringify(i,void 0)},fs.prototype.parse=function(i){return ke.JSON.parse(i,void 0)},$e(Js,yt),Js.prototype.g=function(){return new Jn(this.l,this.j)},Js.prototype.i=function(i){return function(){return i}}({}),$e(Jn,Hn);var ao=0;function Uo(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function Qo(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Vr(i)}function Vr(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Q=Jn.prototype).open=function(i,e){if(this.readyState!=ao)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Vr(this)},Q.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||ke).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Q.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Qo(this)),this.readyState=ao},Q.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Vr(this)),this.g&&(this.readyState=3,Vr(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof ke.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Uo(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},Q.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Qo(this):Vr(this),3==this.readyState&&Uo(this)}},Q.Va=function(i){this.g&&(this.response=this.responseText=i,Qo(this))},Q.Ua=function(i){this.g&&(this.response=i,Qo(this))},Q.ga=function(){this.g&&Qo(this)},Q.setRequestHeader=function(i,e){this.v.append(i,e)},Q.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Q.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Jn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var g=ke.JSON.parse;function E(i){Hn.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=h,this.K=this.L=!1}$e(E,Hn);var h="",D=/^https?$/i,W=["POST","PUT"];function Gt(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,an(i),cr(i)}function an(i){i.D||(i.D=!0,fr(i,"complete"),fr(i,"error"))}function Pn(i){if(i.h&&typeof et<"u"&&(!i.C[1]||4!=pr(i)||2!=i.aa()))if(i.v&&4==pr(i))Ji(i.Ha,0,i);else if(fr(i,"readystatechange"),4==pr(i)){i.h=!1;try{const O=i.aa();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===O){var u=String(i.H).match(Xs)[1]||null;if(!u&&ke.self&&ke.self.location){var y=ke.self.location.protocol;u=y.substr(0,y.length-1)}s=!D.test(u?u.toLowerCase():"")}t=s}if(t)fr(i,"complete"),fr(i,"success");else{i.m=6;try{var C=2<pr(i)?i.g.statusText:""}catch(j){C=""}i.j=C+" ["+i.aa()+"]",an(i)}}finally{cr(i)}}}function cr(i,e){if(i.g){Yr(i);const t=i.g,s=i.C[0]?He:null;i.g=null,i.C=null,e||fr(i,"ready");try{t.onreadystatechange=s}catch(u){}}}function Yr(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ke.clearTimeout(i.A),i.A=null)}function pr(i){return i.g?i.g.readyState:0}function ns(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case h:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function gs(i){let e="";return en(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function ii(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=gs(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):ri(i,e,t))}function Ci(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function bo(i){this.Ca=0,this.i=[],this.j=new ee,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Ci("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Ci("baseRetryDelayMs",5e3,i),this.bb=Ci("retryDelaySeedMs",1e4,i),this.$a=Ci("forwardChannelMaxRetries",2,i),this.ta=Ci("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new ui(i&&i.concurrentRequestLimit),this.Fa=new Bo,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Do(i){if(ia(i),3==i.G){var e=i.U++,t=Wi(i.F);ri(t,"SID",i.I),ri(t,"RID",e),ri(t,"TYPE","terminate"),Os(i,t),(e=new Yn(i,i.j,e,void 0)).K=2,e.v=Ii(Wi(t)),t=!1,ke.navigator&&ke.navigator.sendBeacon&&(t=ke.navigator.sendBeacon(e.v.toString(),"")),!t&&ke.Image&&((new Image).src=e.v,t=!0),t||(e.g=oa(e.l,null),e.g.da(e.v)),e.F=Date.now(),ni(e)}nu(i)}function eo(i){i.g&&(Za(i),i.g.cancel(),i.g=null)}function ia(i){eo(i),i.u&&(ke.clearTimeout(i.u),i.u=null),$a(i),i.h.cancel(),i.m&&("number"==typeof i.m&&ke.clearTimeout(i.m),i.m=null)}function ha(i){Zo(i.h)||i.m||(i.m=!0,Ui(i.Ja,i),i.C=0)}function La(i,e){var t;t=e?e.m:i.U++;const s=Wi(i.F);ri(s,"SID",i.I),ri(s,"RID",t),ri(s,"AID",i.T),Os(i,s),i.o&&i.s&&ii(s,i.o,i.s),t=new Yn(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=sa(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),as(i.h,t),Gi(t,s,e)}function Os(i,e){i.ia&&en(i.ia,function(t,s){ri(e,s,t)}),i.l&&Qs({},function(t,s){ri(e,s,t)})}function sa(i,e,t){t=Math.min(i.i.length,t);var s=i.l?be(i.l.Ra,i.l,i):null;e:{var u=i.i;let y=-1;for(;;){const C=["count="+t];-1==y?0<t?(y=u[0].h,C.push("ofs="+y)):y=0:C.push("ofs="+y);let O=!0;for(let j=0;j<t;j++){let Z=u[j].h;const ue=u[j].g;if(Z-=y,0>Z)y=Math.max(0,u[j].h-100),O=!1;else try{Vo(ue,C,"req"+Z+"_")}catch(Ye){s&&s(ue)}}if(O){s=C.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,s}function jo(i){i.g||i.u||(i.Z=1,Ui(i.Ia,i),i.A=0)}function To(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=Kr(be(i.Ia,i),Xa(i,i.A)),i.A++,0))}function Za(i){null!=i.B&&(ke.clearTimeout(i.B),i.B=null)}function Qa(i){i.g=new Yn(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=Wi(i.sa);ri(e,"RID","rpc"),ri(e,"SID",i.I),ri(e,"CI",i.L?"0":"1"),ri(e,"AID",i.T),ri(e,"TYPE","xmlhttp"),Os(i,e),i.o&&i.s&&ii(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=Ii(Wi(e)),t.s=null,t.P=!0,Ys(t,i)}function $a(i){null!=i.v&&(ke.clearTimeout(i.v),i.v=null)}function tu(i,e){var t=null;if(i.g==e){$a(i),Za(i),i.g=null;var s=2}else{if(!Mi(i.h,e))return;t=e.D,Lr(i.h,e),s=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;fr(s=Dt(),new Ir(s,t)),ha(i)}else jo(i);else if(3==(u=e.o)||0==u&&0<i.pa||!(1==s&&function Fa(i,e){return!(Hs(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=Kr(be(i.Ja,i,e),Xa(i,i.C)),i.C++,0)))}(i,e)||2==s&&To(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),u){case 1:Ho(i,5);break;case 4:Ho(i,10);break;case 3:Ho(i,6);break;default:Ho(i,2)}}function Xa(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function Ho(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var s=be(i.kb,i);t||(t=new Ai("//www.google.com/images/cleardot.gif"),ke.location&&"http"==ke.location.protocol||wo(t,"https"),Ii(t)),function Xn(i,e){const t=new ee;if(ke.Image){const s=new Image;s.onload=tt(ps,t,s,"TestLoadImage: loaded",!0,e),s.onerror=tt(ps,t,s,"TestLoadImage: error",!1,e),s.onabort=tt(ps,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=tt(ps,t,s,"TestLoadImage: timeout",!1,e),ke.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else Mn(2);i.G=0,i.l&&i.l.va(e),nu(i),ia(i)}function nu(i){if(i.G=0,i.la=[],i.l){const e=Co(i.h);(0!=e.length||0!=i.i.length)&&(Nt(i.la,e),Nt(i.la,i.i),i.h.i.length=0,At(i.i),i.i.length=0),i.l.ua()}}function ws(i,e,t){var s=t instanceof Ai?Wi(t):new Ai(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),oo(s,s.m);else{var u=ke.location;s=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var y=new Ai(null,void 0);s&&wo(y,s),e&&(y.g=e),u&&oo(y,u),t&&(y.l=t),s=y}return e=i.za,(t=i.D)&&e&&ri(s,t,e),ri(s,"VER",i.ma),Os(i,s),s}function oa(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new E(t&&i.Da&&!i.ra?new Js({jb:!0}):i.ra)).Ka(i.H),e}function Ja(){}function Vi(){if(_r&&!(10<=Number(yi)))throw Error("Environmental error: no available transport.")}function Pi(i,e){Hn.call(this),this.g=new bo(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!En(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!En(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new bi(this)}function Xr(i){zn.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Go(){Qr.call(this),this.status=1}function bi(i){this.g=i}(Q=E.prototype).Ka=function(i){this.L=i},Q.da=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():sr.g(),this.C=function Ut(i){return i.h||(i.h=i.i())}(this.u?this.u:sr),this.g.onreadystatechange=be(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(y){return void Gt(this,y)}if(i=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var u in s)t.set(u,s[u]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const y of s.keys())t.set(y,s.get(y))}s=Array.from(t.keys()).find(y=>"content-type"==y.toLowerCase()),u=ke.FormData&&i instanceof ke.FormData,!(0<=Pt(W,e))||s||u||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[y,C]of t)this.g.setRequestHeader(y,C);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Yr(this),0<this.B&&((this.K=function Ue(i){return _r&&function mr(){return function lr(i){var e=An;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Fn(String(Sr)).split("."),t=Fn("9").split("."),s=Math.max(e.length,t.length);for(let C=0;0==i&&C<s;C++){var u=e[C]||"",y=t[C]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],y=/(\d*)(\D*)(.*)/.exec(y)||["","","",""],0==u[0].length&&0==y[0].length)break;i=$n(0==u[1].length?0:parseInt(u[1],10),0==y[1].length?0:parseInt(y[1],10))||$n(0==u[2].length,0==y[2].length)||$n(u[2],y[2]),u=u[3],y=y[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=be(this.qa,this)):this.A=Ji(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(y){Gt(this,y)}},Q.qa=function(){typeof et<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,fr(this,"timeout"),this.abort(8))},Q.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,fr(this,"complete"),fr(this,"abort"),cr(this))},Q.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cr(this,!0)),E.X.M.call(this)},Q.Ha=function(){this.s||(this.F||this.v||this.l?Pn(this):this.fb())},Q.fb=function(){Pn(this)},Q.aa=function(){try{return 2<pr(this)?this.g.status:-1}catch(i){return-1}},Q.fa=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},Q.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),g(e)}},Q.Ea=function(){return this.m},Q.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Q=bo.prototype).ma=8,Q.G=1,Q.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const u=new Yn(this,this.j,i,void 0);let y=this.s;if(this.S&&(y?(y=$t(y),Tn(y,this.S)):y=this.S),null!==this.o||this.N||(u.H=y,y=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=sa(this,u,e),ri(t=Wi(this.F),"RID",i),ri(t,"CVER",22),this.D&&ri(t,"X-HTTP-Session-Id",this.D),Os(this,t),y&&(this.N?e="headers="+encodeURIComponent(String(gs(y)))+"&"+e:this.o&&ii(t,this.o,y)),as(this.h,u),this.Ya&&ri(t,"TYPE","init"),this.O?(ri(t,"$req",e),ri(t,"SID","null"),u.Z=!0,Gi(u,t,null)):Gi(u,t,e),this.G=2}}else 3==this.G&&(i?La(this,i):0==this.i.length||Zo(this.h)||La(this))},Q.Ia=function(){if(this.u=null,Qa(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=Kr(be(this.eb,this),i)}},Q.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Mn(10),eo(this),Qa(this))},Q.cb=function(){null!=this.v&&(this.v=null,eo(this),To(this),Mn(19))},Q.kb=function(i){i?(this.j.info("Successfully pinged google.com"),Mn(2)):(this.j.info("Failed to ping google.com"),Mn(1))},(Q=Ja.prototype).xa=function(){},Q.wa=function(){},Q.va=function(){},Q.ua=function(){},Q.Ra=function(){},Vi.prototype.g=function(i,e){return new Pi(i,e)},$e(Pi,Hn),Pi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;Mn(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=ws(i,null,i.V),ha(i)},Pi.prototype.close=function(){Do(this.g)},Pi.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=Bi(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&ha(e)},Pi.prototype.M=function(){this.g.l=null,delete this.j,Do(this.g),delete this.g,Pi.X.M.call(this)},$e(Xr,zn),$e(Go,Qr),$e(bi,Ja),bi.prototype.xa=function(){fr(this.g,"a")},bi.prototype.wa=function(i){fr(this.g,new Xr(i))},bi.prototype.va=function(i){fr(this.g,new Go)},bi.prototype.ua=function(){fr(this.g,"b")},Vi.prototype.createWebChannel=Vi.prototype.g,Pi.prototype.send=Pi.prototype.u,Pi.prototype.open=Pi.prototype.m,Pi.prototype.close=Pi.prototype.close,ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,Ne.COMPLETE="complete",tn.EventType=kn,kn.OPEN="a",kn.CLOSE="b",kn.ERROR="c",kn.MESSAGE="d",Hn.prototype.listen=Hn.prototype.N,E.prototype.listenOnce=E.prototype.O,E.prototype.getLastError=E.prototype.Oa,E.prototype.getLastErrorCode=E.prototype.Ea,E.prototype.getStatus=E.prototype.aa,E.prototype.getResponseJson=E.prototype.Sa,E.prototype.getResponseText=E.prototype.fa,E.prototype.send=E.prototype.da,E.prototype.setWithCredentials=E.prototype.Ka;var aa=Oe.createWebChannelTransport=function(){return new Vi},Cu=Oe.getStatEventTarget=function(){return Dt()},vl=Oe.ErrorCode=ot,Ca=Oe.EventType=Ne,fa=Oe.Event=qe,el=Oe.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},N=Oe.FetchXmlHttpFactory=Js,K=Oe.WebChannel=tn,$=Oe.XhrIo=E;const re="@firebase/firestore";class pe{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pe.UNAUTHENTICATED=new pe(null),pe.GOOGLE_CREDENTIALS=new pe("google-credentials-uid"),pe.FIRST_PARTY=new pe("first-party-uid"),pe.MOCK_USER=new pe("mock-user");let _t="9.18.0";const Bt=new Xe.Yd("@firebase/firestore");function un(){return Bt.logLevel}function kt(i,...e){if(Bt.logLevel<=Xe.in.DEBUG){const t=e.map(Di);Bt.debug(`Firestore (${_t}): ${i}`,...t)}}function er(i,...e){if(Bt.logLevel<=Xe.in.ERROR){const t=e.map(Di);Bt.error(`Firestore (${_t}): ${i}`,...t)}}function dr(i,...e){if(Bt.logLevel<=Xe.in.WARN){const t=e.map(Di);Bt.warn(`Firestore (${_t}): ${i}`,...t)}}function Di(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function Yt(i="Unexpected state"){const e=`FIRESTORE (${_t}) INTERNAL ASSERTION FAILED: `+i;throw er(e),new Error(e)}function mn(i,e){i||Yt()}function cn(i,e){return i}const wt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class zt extends Ze.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class wi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ps{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pe.UNAUTHENTICATED))}shutdown(){}}class pa{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _l{constructor(e){this.t=e,this.currentUser=pe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let u=this.i;const y=Z=>this.i!==u?(u=this.i,t(Z)):Promise.resolve();let C=new wi;this.o=()=>{this.i++,this.currentUser=this.u(),C.resolve(),C=new wi,e.enqueueRetryable(()=>y(this.currentUser))};const O=()=>{const Z=C;e.enqueueRetryable((0,le.Z)(function*(){yield Z.promise,yield y(s.currentUser)}))},j=Z=>{kt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Z,this.auth.addAuthTokenListener(this.o),O()};this.t.onInit(Z=>j(Z)),setTimeout(()=>{if(!this.auth){const Z=this.t.getImmediate({optional:!0});Z?j(Z):(kt("FirebaseAuthCredentialsProvider","Auth not yet detected"),C.resolve(),C=new wi)}},0),O()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(kt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(mn("string"==typeof s.accessToken),new Ps(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return mn(null===e||"string"==typeof e),new pe(e)}}class So{constructor(e,t,s,u){this.h=e,this.l=t,this.m=s,this.g=u,this.type="FirstParty",this.user=pe.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(mn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class nl{constructor(e,t,s,u){this.h=e,this.l=t,this.m=s,this.g=u}getToken(){return Promise.resolve(new So(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(pe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class il{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const s=y=>{null!=y.error&&kt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${y.error.message}`);const C=y.token!==this.A;return this.A=y.token,kt("FirebaseAppCheckTokenProvider",`Received ${C?"new":"existing"} token.`),C?t(y.token):Promise.resolve()};this.o=y=>{e.enqueueRetryable(()=>s(y))};const u=y=>{kt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=y,this.appCheck.addTokenListener(this.o)};this.T.onInit(y=>u(y)),setTimeout(()=>{if(!this.appCheck){const y=this.T.getImmediate({optional:!0});y?u(y):kt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(mn("string"==typeof t.token),this.A=t.token,new rl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ao(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class Fl{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const u=Ao(40);for(let y=0;y<u.length;++y)s.length<20&&u[y]<t&&(s+=e.charAt(u[y]%e.length))}return s}}function hr(i,e){return i<e?-1:i>e?1:0}function la(i,e,t){return i.length===e.length&&i.every((s,u)=>t(s,e[u]))}function Ba(i){return i+"\0"}class Ni{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new zt(wt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new zt(wt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new zt(wt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new zt(wt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ni.fromMillis(Date.now())}static fromDate(e){return Ni.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Ni(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?hr(this.nanoseconds,e.nanoseconds):hr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Gn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Gn(e)}static min(){return new Gn(new Ni(0,0))}static max(){return new Gn(new Ni(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class lo{constructor(e,t,s){void 0===t?t=0:t>e.length&&Yt(),void 0===s?s=e.length-t:s>e.length-t&&Yt(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===lo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lo?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let u=0;u<s;u++){const y=e.get(u),C=t.get(u);if(y<C)return-1;if(y>C)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ur extends lo{construct(e,t,s){return new Ur(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new zt(wt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(u=>u.length>0))}return new Ur(t)}static emptyPath(){return new Ur([])}}const El=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pi extends lo{construct(e,t,s){return new pi(e,t,s)}static isValidIdentifier(e){return El.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pi(["__name__"])}static fromServerFormat(e){const t=[];let s="",u=0;const y=()=>{if(0===s.length)throw new zt(wt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let C=!1;for(;u<e.length;){const O=e[u];if("\\"===O){if(u+1===e.length)throw new zt(wt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const j=e[u+1];if("\\"!==j&&"."!==j&&"`"!==j)throw new zt(wt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=j,u+=2}else"`"===O?(C=!C,u++):"."!==O||C?(s+=O,u++):(y(),u++)}if(y(),C)throw new zt(wt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pi(t)}static emptyPath(){return new pi([])}}class pn{constructor(e){this.path=e}static fromPath(e){return new pn(Ur.fromString(e))}static fromName(e){return new pn(Ur.fromString(e).popFirst(5))}static empty(){return new pn(Ur.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ur.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ur.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pn(new Ur(e.slice()))}}class ms{constructor(e,t,s,u){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=u}}function Xo(i){return i.fields.find(e=>2===e.kind)}function Cs(i){return i.fields.filter(e=>2!==e.kind)}ms.UNKNOWN_ID=-1;class uo{constructor(e,t){this.fieldPath=e,this.kind=t}}class ga{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ga(0,bs.min())}}function qu(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,u=Gn.fromTimestamp(1e9===s?new Ni(t+1,0):new Ni(t,s));return new bs(u,pn.empty(),e)}function ru(i){return new bs(i.readTime,i.key,-1)}class bs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new bs(Gn.min(),pn.empty(),-1)}static max(){return new bs(Gn.max(),pn.empty(),-1)}}function Il(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=pn.comparator(i.documentKey,e.documentKey),0!==t?t:hr(i.largestBatchId,e.largestBatchId))}const Ds="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ba{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ts(i){return sl.apply(this,arguments)}function sl(){return sl=(0,le.Z)(function*(i){if(i.code!==wt.FAILED_PRECONDITION||i.message!==Ds)throw i;kt("LocalStore","Unexpectedly lost primary lease")}),sl.apply(this,arguments)}class bt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Yt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new bt((s,u)=>{this.nextCallback=y=>{this.wrapSuccess(e,y).next(s,u)},this.catchCallback=y=>{this.wrapFailure(t,y).next(s,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof bt?t:bt.resolve(t)}catch(t){return bt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):bt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):bt.reject(t)}static resolve(e){return new bt((t,s)=>{t(e)})}static reject(e){return new bt((t,s)=>{s(e)})}static waitFor(e){return new bt((t,s)=>{let u=0,y=0,C=!1;e.forEach(O=>{++u,O.next(()=>{++y,C&&y===u&&t()},j=>s(j))}),C=!0,y===u&&t()})}static or(e){let t=bt.resolve(!1);for(const s of e)t=t.next(u=>u?bt.resolve(u):s());return t}static forEach(e,t){const s=[];return e.forEach((u,y)=>{s.push(t.call(this,u,y))}),this.waitFor(s)}static mapArray(e,t){return new bt((s,u)=>{const y=e.length,C=new Array(y);let O=0;for(let j=0;j<y;j++){const Z=j;t(e[Z]).next(ue=>{C[Z]=ue,++O,O===y&&s(C)},ue=>u(ue))}})}static doWhile(e,t){return new bt((s,u)=>{const y=()=>{!0===e()?t().next(()=>{y()},u):s()};y()})}}class xo{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new wi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Ll(e,t.error)):this.P.resolve()},this.transaction.onerror=s=>{const u=iu(s.target.error);this.P.reject(new Ll(e,u))}}static open(e,t,s,u){try{return new xo(t,e.transaction(u,s))}catch(y){throw new Ll(t,y)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(kt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new vi(t)}}class co{constructor(e,t,s){this.name=e,this.version=t,this.S=s,12.2===co.D((0,Ze.z$)())&&er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return kt("SimpleDb","Removing database:",e),Va(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ze.hl)())return!1;if(co.N())return!0;const e=(0,Ze.z$)(),t=co.D(e),s=0<t&&t<10,u=co.k(e),y=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||y)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.$)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static k(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}O(e){var t=this;return(0,le.Z)(function*(){return t.db||(kt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,u)=>{const y=indexedDB.open(t.name,t.version);y.onsuccess=C=>{s(C.target.result)},y.onblocked=()=>{u(new Ll(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},y.onerror=C=>{const O=C.target.error;u("VersionError"===O.name?new zt(wt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===O.name?new zt(wt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+O):new Ll(e,O))},y.onupgradeneeded=C=>{kt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',C.oldVersion),t.S.F(C.target.result,y.transaction,C.oldVersion,t.version).next(()=>{kt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=s=>t.B(s)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,u){var y=this;return(0,le.Z)(function*(){const C="readonly"===t;let O=0;for(;;){++O;try{y.db=yield y.O(e);const j=xo.open(y.db,e,C?"readonly":"readwrite",s),Z=u(j).next(ue=>(j.V(),ue)).catch(ue=>(j.abort(ue),bt.reject(ue))).toPromise();return Z.catch(()=>{}),yield j.v,Z}catch(j){const Z=j,ue="FirebaseError"!==Z.name&&O<3;if(kt("SimpleDb","Transaction failed with error:",Z.message,"Retrying:",ue),y.close(),!ue)return Promise.reject(Z)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ol{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Va(this.q.delete())}}class Ll extends zt{constructor(e,t){super(wt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Da(i){return"IndexedDbTransactionError"===i.name}class vi{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(kt("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(kt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Va(s)}add(e){return kt("SimpleDb","ADD",this.store.name,e,e),Va(this.store.add(e))}get(e){return Va(this.store.get(e)).next(t=>(void 0===t&&(t=null),kt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return kt("SimpleDb","DELETE",this.store.name,e),Va(this.store.delete(e))}count(){return kt("SimpleDb","COUNT",this.store.name),Va(this.store.count())}W(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const u=this.cursor(s),y=[];return this.H(u,(C,O)=>{y.push(O)}).next(()=>y)}{const u=this.store.getAll(s.range);return new bt((y,C)=>{u.onerror=O=>{C(O.target.error)},u.onsuccess=O=>{y(O.target.result)}})}}J(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new bt((u,y)=>{s.onerror=C=>{y(C.target.error)},s.onsuccess=C=>{u(C.target.result)}})}Y(e,t){kt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Z=!1;const u=this.cursor(s);return this.H(u,(y,C,O)=>O.delete())}X(e,t){let s;t?s=e:(s={},t=e);const u=this.cursor(s);return this.H(u,t)}tt(e){const t=this.cursor({});return new bt((s,u)=>{t.onerror=y=>{const C=iu(y.target.error);u(C)},t.onsuccess=y=>{const C=y.target.result;C?e(C.primaryKey,C.value).next(O=>{O?C.continue():s()}):s()}})}H(e,t){const s=[];return new bt((u,y)=>{e.onerror=C=>{y(C.target.error)},e.onsuccess=C=>{const O=C.target.result;if(!O)return void u();const j=new ol(O),Z=t(O.primaryKey,O.value,j);if(Z instanceof bt){const ue=Z.catch(Ye=>(j.done(),bt.reject(Ye)));s.push(ue)}j.isDone?u():null===j.G?O.continue():O.continue(j.G)}}).next(()=>bt.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Z?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Va(i){return new bt((e,t)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const u=iu(s.target.error);t(u)}})}let wl=!1;function iu(i){const e=co.D((0,Ze.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const s=new zt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wl||(wl=!0,setTimeout(()=>{throw s},0)),s}}return i}class Du{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;kt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,le.Z)(function*(){t.task=null;try{kt("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(s){Da(s)?kt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield Ts(s)}yield t.nt(6e4)}))}}class $l{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,le.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.it(s,e))})()}it(e,t){const s=new Set;let u=t,y=!0;return bt.doWhile(()=>!0===y&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(C=>{if(null!==C&&!s.has(C))return kt("IndexBackiller",`Processing collection: ${C}`),this.rt(e,C,u).next(O=>{u-=O,s.add(C)});y=!1})).next(()=>t-u)}rt(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(u=>this.localStore.localDocuments.getNextDocuments(e,t,u,s).next(y=>{const C=y.changes;return this.localStore.indexManager.updateIndexEntries(e,C).next(()=>this.ot(u,y)).next(O=>(kt("IndexBackiller",`Updating offset: ${O}`),this.localStore.indexManager.updateCollectionGroup(e,t,O))).next(()=>C.size)}))}ot(e,t){let s=e;return t.changes.forEach((u,y)=>{const C=ru(y);Il(C,s)>0&&(s=C)}),new bs(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Gs=(()=>{class i{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=u=>this.ut(u),this.ct=u=>s.writeSequenceNumber(u))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return i.at=-1,i})();class ll{constructor(e,t,s,u,y,C,O,j){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=u,this.ssl=y,this.forceLongPolling=C,this.autoDetectLongPolling=O,this.useFetchStreams=j}}class ci{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ci("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ci&&e.projectId===this.projectId&&e.database===this.database}}function su(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function ho(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function ul(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function rs(i){return null==i}function fo(i){return 0===i&&1/i==-1/0}function Cl(i){return"number"==typeof i&&Number.isInteger(i)&&!fo(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class Ua extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ys{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(u){throw u instanceof DOMException?new Ua("Invalid base64 string: "+u):u}}(e);return new ys(t)}static fromUint8Array(e){const t=function(s){let u="";for(let y=0;y<s.length;++y)u+=String.fromCharCode(s[y]);return u}(e);return new ys(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return hr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ys.EMPTY_BYTE_STRING=new ys("");const Tu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function to(i){if(mn(!!i),"string"==typeof i){let e=0;const t=Tu.exec(i);if(mn(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ki(i.seconds),nanos:ki(i.nanos)}}function ki(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Qi(i){return"string"==typeof i?ys.fromBase64String(i):ys.fromUint8Array(i)}function S(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function x(i){const e=i.mapValue.fields.__previous_value__;return S(e)?x(e):e}function w(i){const e=to(i.mapValue.fields.__local_write_time__.timestampValue);return new Ni(e.seconds,e.nanos)}const R={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},V={nullValue:"NULL_VALUE"};function X(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?S(i)?4:Jt(i)?9007199254740991:10:Yt()}function ne(i,e){if(i===e)return!0;const t=X(i);if(t!==X(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return w(i).isEqual(w(e));case 3:return function(s,u){if("string"==typeof s.timestampValue&&"string"==typeof u.timestampValue&&s.timestampValue.length===u.timestampValue.length)return s.timestampValue===u.timestampValue;const y=to(s.timestampValue),C=to(u.timestampValue);return y.seconds===C.seconds&&y.nanos===C.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,Qi(i.bytesValue).isEqual(Qi(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,u){return ki(s.geoPointValue.latitude)===ki(u.geoPointValue.latitude)&&ki(s.geoPointValue.longitude)===ki(u.geoPointValue.longitude)}(i,e);case 2:return function(s,u){if("integerValue"in s&&"integerValue"in u)return ki(s.integerValue)===ki(u.integerValue);if("doubleValue"in s&&"doubleValue"in u){const y=ki(s.doubleValue),C=ki(u.doubleValue);return y===C?fo(y)===fo(C):isNaN(y)&&isNaN(C)}return!1}(i,e);case 9:return la(i.arrayValue.values||[],e.arrayValue.values||[],ne);case 10:return function(s,u){const y=s.mapValue.fields||{},C=u.mapValue.fields||{};if(su(y)!==su(C))return!1;for(const O in y)if(y.hasOwnProperty(O)&&(void 0===C[O]||!ne(y[O],C[O])))return!1;return!0}(i,e);default:return Yt()}var u}function Qe(i,e){return void 0!==(i.values||[]).find(t=>ne(t,e))}function Tt(i,e){if(i===e)return 0;const t=X(i),s=X(e);if(t!==s)return hr(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return hr(i.booleanValue,e.booleanValue);case 2:return function(u,y){const C=ki(u.integerValue||u.doubleValue),O=ki(y.integerValue||y.doubleValue);return C<O?-1:C>O?1:C===O?0:isNaN(C)?isNaN(O)?0:-1:1}(i,e);case 3:return on(i.timestampValue,e.timestampValue);case 4:return on(w(i),w(e));case 5:return hr(i.stringValue,e.stringValue);case 6:return function(u,y){const C=Qi(u),O=Qi(y);return C.compareTo(O)}(i.bytesValue,e.bytesValue);case 7:return function(u,y){const C=u.split("/"),O=y.split("/");for(let j=0;j<C.length&&j<O.length;j++){const Z=hr(C[j],O[j]);if(0!==Z)return Z}return hr(C.length,O.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,y){const C=hr(ki(u.latitude),ki(y.latitude));return 0!==C?C:hr(ki(u.longitude),ki(y.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,y){const C=u.values||[],O=y.values||[];for(let j=0;j<C.length&&j<O.length;++j){const Z=Tt(C[j],O[j]);if(Z)return Z}return hr(C.length,O.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,y){if(u===R.mapValue&&y===R.mapValue)return 0;if(u===R.mapValue)return 1;if(y===R.mapValue)return-1;const C=u.fields||{},O=Object.keys(C),j=y.fields||{},Z=Object.keys(j);O.sort(),Z.sort();for(let ue=0;ue<O.length&&ue<Z.length;++ue){const Ye=hr(O[ue],Z[ue]);if(0!==Ye)return Ye;const It=Tt(C[O[ue]],j[Z[ue]]);if(0!==It)return It}return hr(O.length,Z.length)}(i.mapValue,e.mapValue);default:throw Yt()}}function on(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return hr(i,e);const t=to(i),s=to(e),u=hr(t.seconds,s.seconds);return 0!==u?u:hr(t.nanos,s.nanos)}function Cn(i){return _n(i)}function _n(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const u=to(s);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Qi(i.bytesValue).toBase64():"referenceValue"in i?pn.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let u="[",y=!0;for(const C of s.values||[])y?y=!1:u+=",",u+=_n(C);return u+"]"}(i.arrayValue):"mapValue"in i?function(s){const u=Object.keys(s.fields||{}).sort();let y="{",C=!0;for(const O of u)C?C=!1:y+=",",y+=`${O}:${_n(s.fields[O])}`;return y+"}"}(i.mapValue):Yt();var e}function Hr(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function F(i){return!!i&&"integerValue"in i}function U(i){return!!i&&"arrayValue"in i}function te(i){return!!i&&"nullValue"in i}function Se(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function ut(i){return!!i&&"mapValue"in i}function Et(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return ho(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Et(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Et(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Jt(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function bn(i){return"nullValue"in i?V:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Hr(ci.empty(),pn.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Yt()}function Wn(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Hr(ci.empty(),pn.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?R:Yt()}function tr(i,e){const t=Tt(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Mr(i,e){const t=Tt(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class nr{constructor(e,t){this.position=e,this.inclusive=t}}function no(i,e,t){let s=0;for(let u=0;u<i.position.length;u++){const y=e[u],C=i.position[u];if(s=y.field.isKeyField()?pn.comparator(pn.fromName(C.referenceValue),t.key):Tt(C,t.data.field(y.field)),"desc"===y.dir&&(s*=-1),0!==s)break}return s}function ro(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!ne(i.position[t],e.position[t]))return!1;return!0}class ya{}class Gr extends ya{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Mc(e,t,s):"array-contains"===t?new bl(e,s):"in"===t?new ud(e,s):"not-in"===t?new Ph(e,s):"array-contains-any"===t?new cd(e,s):new Gr(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new ad(e,s):new ld(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Tt(t,this.value)):null!==t&&X(this.value)===X(t)&&this.matchesComparison(Tt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Yt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class gi extends ya{constructor(e,t){super(),this.filters=e,this.op=t,this.ft=null}static create(e,t){return new gi(e,t)}matches(e){return po(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(t=>t.isInequality());return null!==e?e.field:null}dt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function po(i){return"and"===i.op}function Jo(i){return"or"===i.op}function cl(i){return Zu(i)&&po(i)}function Zu(i){for(const e of i.filters)if(e instanceof gi)return!1;return!0}function Qu(i){if(i instanceof Gr)return i.field.canonicalString()+i.op.toString()+Cn(i.value);if(cl(i))return i.filters.map(e=>Qu(e)).join(",");{const e=i.filters.map(t=>Qu(t)).join(",");return`${i.op}(${e})`}}function Gd(i,e){return i instanceof Gr?(t=i,(s=e)instanceof Gr&&t.op===s.op&&t.field.isEqual(s.field)&&ne(t.value,s.value)):i instanceof gi?function(t,s){return s instanceof gi&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((u,y,C)=>u&&Gd(y,s.filters[C]),!0)}(i,e):void Yt();var t,s}function Xu(i,e){const t=i.filters.concat(e);return gi.create(t,i.op)}function zd(i){return i instanceof Gr?`${(e=i).field.canonicalString()} ${e.op} ${Cn(e.value)}`:i instanceof gi?function(e){return e.op.toString()+" {"+e.getFilters().map(zd).join(" ,")+"}"}(i):"Filter";var e}class Mc extends Gr{constructor(e,t,s){super(e,t,s),this.key=pn.fromName(s.referenceValue)}matches(e){const t=pn.comparator(e.key,this.key);return this.matchesComparison(t)}}class ad extends Gr{constructor(e,t){super(e,"in",t),this.keys=Bl(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ld extends Gr{constructor(e,t){super(e,"not-in",t),this.keys=Bl(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Bl(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>pn.fromName(s.referenceValue))}class bl extends Gr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return U(t)&&Qe(t.arrayValue,this.value)}}class ud extends Gr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Qe(this.value.arrayValue,t)}}class Ph extends Gr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qe(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Qe(this.value.arrayValue,t)}}class cd extends Gr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!U(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Qe(this.value.arrayValue,s))}}class Vl{constructor(e,t="asc"){this.field=e,this.dir=t}}function Nh(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Ns{constructor(e,t){this.comparator=e,this.root=t||Ws.EMPTY}insert(e,t){return new Ns(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ws.BLACK,null,null))}remove(e){return new Ns(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ws.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(e,s.key);if(0===u)return t+s.left.size;u<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ou(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ou(this.root,e,this.comparator,!1)}getReverseIterator(){return new ou(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ou(this.root,e,this.comparator,!0)}}class ou{constructor(e,t,s,u){this.isReverse=u,this.nodeStack=[];let y=1;for(;!e.isEmpty();)if(y=t?s(e.key,t):1,t&&u&&(y*=-1),y<0)e=this.isReverse?e.left:e.right;else{if(0===y){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ws{constructor(e,t,s,u,y){this.key=e,this.value=t,this.color=null!=s?s:Ws.RED,this.left=null!=u?u:Ws.EMPTY,this.right=null!=y?y:Ws.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,u,y){return new Ws(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=u?u:this.left,null!=y?y:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let u=this;const y=s(e,u.key);return u=y<0?u.copy(null,null,null,u.left.insert(e,t,s),null):0===y?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Ws.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return Ws.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ws.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ws.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Yt();const e=this.left.check();if(e!==this.right.check())throw Yt();return e+(this.isRed()?0:1)}}Ws.EMPTY=null,Ws.RED=!0,Ws.BLACK=!1,Ws.EMPTY=new class{constructor(){this.size=0}get key(){throw Yt()}get value(){throw Yt()}get color(){throw Yt()}get left(){throw Yt()}get right(){throw Yt()}copy(i,e,t,s,u){return this}insert(i,e,t){return new Ws(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ki{constructor(e){this.comparator=e,this.data=new Ns(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dd(this.data.getIterator())}getIteratorFrom(e){return new dd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Ki)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,y=s.getNext().key;if(0!==this.comparator(u,y))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ki(this.comparator);return t.data=e,t}}class dd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ul(i){return i.hasNext()?i.getNext():void 0}class Mo{constructor(e){this.fields=e,e.sort(pi.comparator)}static empty(){return new Mo([])}unionWith(e){let t=new Ki(pi.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Mo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return la(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Ss{constructor(e){this.value=e}static empty(){return new Ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ut(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Et(t)}setAll(e){let t=pi.emptyPath(),s={},u=[];e.forEach((C,O)=>{if(!t.isImmediateParentOf(O)){const j=this.getFieldsMap(t);this.applyChanges(j,s,u),s={},u=[],t=O.popLast()}C?s[O.lastSegment()]=Et(C):u.push(O.lastSegment())});const y=this.getFieldsMap(t);this.applyChanges(y,s,u)}delete(e){const t=this.field(e.popLast());ut(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ne(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let u=t.mapValue.fields[e.get(s)];ut(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,s){ho(t,(u,y)=>e[u]=y);for(const u of s)delete e[u]}clone(){return new Ss(Et(this.value))}}function Ju(i){const e=[];return ho(i.fields,(t,s)=>{const u=new pi([t]);if(ut(s)){const y=Ju(s.mapValue).fields;if(0===y.length)e.push(u);else for(const C of y)e.push(u.child(C))}else e.push(u)}),new Mo(e)}class _i{constructor(e,t,s,u,y,C,O){this.key=e,this.documentType=t,this.version=s,this.readTime=u,this.createTime=y,this.data=C,this.documentState=O}static newInvalidDocument(e){return new _i(e,0,Gn.min(),Gn.min(),Gn.min(),Ss.empty(),0)}static newFoundDocument(e,t,s,u){return new _i(e,1,t,Gn.min(),s,u,0)}static newNoDocument(e,t){return new _i(e,2,t,Gn.min(),Gn.min(),Ss.empty(),0)}static newUnknownDocument(e,t){return new _i(e,3,t,Gn.min(),Gn.min(),Ss.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Gn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof _i&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _i(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ec{constructor(e,t=null,s=[],u=[],y=null,C=null,O=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=u,this.limit=y,this.startAt=C,this.endAt=O,this._t=null}}function Ta(i,e=null,t=[],s=[],u=null,y=null,C=null){return new ec(i,e,t,s,u,y,C)}function ja(i){const e=cn(i);if(null===e._t){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Qu(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(u=s).field.canonicalString()+u.dir;var u}).join(","),rs(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Cn(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Cn(s)).join(",")),e._t=t}return e._t}function jl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!Nh(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Gd(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!ro(i.startAt,e.startAt)&&ro(i.endAt,e.endAt)}function au(i){return pn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Hl(i,e){return i.filters.filter(t=>t instanceof Gr&&t.field.isEqual(e))}function Su(i,e,t){let s=V,u=!0;for(const y of Hl(i,e)){let C=V,O=!0;switch(y.op){case"<":case"<=":C=bn(y.value);break;case"==":case"in":case">=":C=y.value;break;case">":C=y.value,O=!1;break;case"!=":case"not-in":C=V}tr({value:s,inclusive:u},{value:C,inclusive:O})<0&&(s=C,u=O)}if(null!==t)for(let y=0;y<i.orderBy.length;++y)if(i.orderBy[y].field.isEqual(e)){const C=t.position[y];tr({value:s,inclusive:u},{value:C,inclusive:t.inclusive})<0&&(s=C,u=t.inclusive);break}return{value:s,inclusive:u}}function lu(i,e,t){let s=R,u=!0;for(const y of Hl(i,e)){let C=R,O=!0;switch(y.op){case">=":case">":C=Wn(y.value),O=!1;break;case"==":case"in":case"<=":C=y.value;break;case"<":C=y.value,O=!1;break;case"!=":case"not-in":C=R}Mr({value:s,inclusive:u},{value:C,inclusive:O})>0&&(s=C,u=O)}if(null!==t)for(let y=0;y<i.orderBy.length;++y)if(i.orderBy[y].field.isEqual(e)){const C=t.position[y];Mr({value:s,inclusive:u},{value:C,inclusive:t.inclusive})>0&&(s=C,u=t.inclusive);break}return{value:s,inclusive:u}}class dl{constructor(e,t=null,s=[],u=[],y=null,C="F",O=null,j=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=u,this.limit=y,this.limitType=C,this.startAt=O,this.endAt=j,this.wt=null,this.gt=null}}function ea(i,e,t,s,u,y,C,O){return new dl(i,e,t,s,u,y,C,O)}function uu(i){return new dl(i)}function zo(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Dl(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Au(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Ro(i){return null!==i.collectionGroup}function vs(i){const e=cn(i);if(null===e.wt){e.wt=[];const t=Au(e),s=Dl(e);if(null!==t&&null===s)t.isKeyField()||e.wt.push(new Vl(t)),e.wt.push(new Vl(pi.keyField(),"asc"));else{let u=!1;for(const y of e.explicitOrderBy)e.wt.push(y),y.field.isKeyField()&&(u=!0);if(!u){const y=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Vl(pi.keyField(),y))}}}return e.wt}function io(i){const e=cn(i);if(!e.gt)if("F"===e.limitType)e.gt=Ta(e.path,e.collectionGroup,vs(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const y of vs(e))t.push(new Vl(y.field,"desc"===y.dir?"asc":"desc"));const s=e.endAt?new nr(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new nr(e.startAt.position,e.startAt.inclusive):null;e.gt=Ta(e.path,e.collectionGroup,t,e.filters,e.limit,s,u)}return e.gt}function tc(i,e){e.getFirstInequalityField(),Au(i);const t=i.filters.concat([e]);return new dl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function xu(i,e,t){return new dl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function nc(i,e){return jl(io(i),io(e))&&i.limitType===e.limitType}function Wd(i){return`${ja(io(i))}|lt:${i.limitType}`}function hl(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>zd(s)).join(", ")}]`),rs(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(u=s).field.canonicalString()} (${u.dir})`;var u}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Cn(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Cn(s)).join(",")),`Target(${t})`}(io(i))}; limitType=${i.limitType})`}function fl(i,e){return e.isFoundDocument()&&function(t,s){const u=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):pn.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,s){for(const u of vs(t))if(!u.field.isKeyField()&&null===s.data.field(u.field))return!1;return!0}(i,e)&&function(t,s){for(const u of t.filters)if(!u.matches(s))return!1;return!0}(i,e)&&(s=e,!((t=i).startAt&&!function(u,y,C){const O=no(u,y,C);return u.inclusive?O<=0:O<0}(t.startAt,vs(t),s)||t.endAt&&!function(u,y,C){const O=no(u,y,C);return u.inclusive?O>=0:O>0}(t.endAt,vs(t),s)));var t,s}function hd(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Mu(i){return(e,t)=>{let s=!1;for(const u of vs(i)){const y=kh(u,e,t);if(0!==y)return y;s=s||u.field.isKeyField()}return 0}}function kh(i,e,t){const s=i.field.isKeyField()?pn.comparator(e.key,t.key):function(u,y,C){const O=y.data.field(u),j=C.data.field(u);return null!==O&&null!==j?Tt(O,j):Yt()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Yt()}}function Ru(i,e){if(i.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fo(e)?"-0":e}}function cu(i){return{integerValue:""+i}}function Rc(i,e){return Cl(e)?cu(e):Ru(i,e)}class Gl{constructor(){this._=void 0}}function rc(i,e,t){return i instanceof Tl?function(s,u){const y={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return u&&(y.fields.__previous_value__=u),{mapValue:y}}(t,e):i instanceof Sl?fd(i,e):i instanceof Sa?Ou(i,e):function(s,u){const y=Oc(s,u),C=Pc(y)+Pc(s.It);return F(y)&&F(s.It)?cu(C):Ru(s.Tt,C)}(i,e)}function Fh(i,e,t){return i instanceof Sl?fd(i,e):i instanceof Sa?Ou(i,e):t}function Oc(i,e){return i instanceof Al?F(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Tl extends Gl{}class Sl extends Gl{constructor(e){super(),this.elements=e}}function fd(i,e){const t=xl(e);for(const s of i.elements)t.some(u=>ne(u,s))||t.push(s);return{arrayValue:{values:t}}}class Sa extends Gl{constructor(e){super(),this.elements=e}}function Ou(i,e){let t=xl(e);for(const s of i.elements)t=t.filter(u=>!ne(u,s));return{arrayValue:{values:t}}}class Al extends Gl{constructor(e,t){super(),this.Tt=e,this.It=t}}function Pc(i){return ki(i.integerValue||i.doubleValue)}function xl(i){return U(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Aa{constructor(e,t){this.field=e,this.transform=t}}class ic{constructor(e,t){this.version=e,this.transformResults=t}}class Xi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xi}static exists(e){return new Xi(void 0,e)}static updateTime(e){return new Xi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nc(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class xa{}function gd(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Wl(i.key,Xi.none()):new zl(i.key,i.data,Xi.none());{const t=i.data,s=Ss.empty();let u=new Ki(pi.comparator);for(let y of e.fields)if(!u.has(y)){let C=t.field(y);null===C&&y.length>1&&(y=y.popLast(),C=t.field(y)),null===C?s.delete(y):s.set(y,C),u=u.add(y)}return new Ma(i.key,s,new Mo(u.toArray()),Xi.none())}}function kc(i,e,t){i instanceof zl?function(s,u,y){const C=s.value.clone(),O=Ra(s.fieldTransforms,u,y.transformResults);C.setAll(O),u.convertToFoundDocument(y.version,C).setHasCommittedMutations()}(i,e,t):i instanceof Ma?function(s,u,y){if(!Nc(s.precondition,u))return void u.convertToUnknownDocument(y.version);const C=Ra(s.fieldTransforms,u,y.transformResults),O=u.data;O.setAll(md(s)),O.setAll(C),u.convertToFoundDocument(y.version,O).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function du(i,e,t,s){return i instanceof zl?function(u,y,C,O){if(!Nc(u.precondition,y))return C;const j=u.value.clone(),Z=ac(u.fieldTransforms,O,y);return j.setAll(Z),y.convertToFoundDocument(y.version,j).setHasLocalMutations(),null}(i,e,t,s):i instanceof Ma?function(u,y,C,O){if(!Nc(u.precondition,y))return C;const j=ac(u.fieldTransforms,O,y),Z=y.data;return Z.setAll(md(u)),Z.setAll(j),y.convertToFoundDocument(y.version,Z).setHasLocalMutations(),null===C?null:C.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(ue=>ue.field))}(i,e,t,s):(C=t,Nc(i.precondition,y=e)?(y.convertToNoDocument(y.version).setHasLocalMutations(),null):C);var y,C}function sc(i,e){let t=null;for(const s of i.fieldTransforms){const u=e.data.field(s.field),y=Oc(s.transform,u||null);null!=y&&(null===t&&(t=Ss.empty()),t.set(s.field,y))}return t||null}function oc(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&la(t,s,(u,y)=>function pd(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(t=i.transform)instanceof Sl&&s instanceof Sl||t instanceof Sa&&s instanceof Sa?la(t.elements,s.elements,ne):t instanceof Al&&s instanceof Al?ne(t.It,s.It):t instanceof Tl&&s instanceof Tl);var t,s}(u,y))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}class zl extends xa{constructor(e,t,s,u=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Ma extends xa{constructor(e,t,s,u,y=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=u,this.fieldTransforms=y,this.type=1}getFieldMask(){return this.fieldMask}}function md(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function Ra(i,e,t){const s=new Map;mn(i.length===t.length);for(let u=0;u<t.length;u++){const y=i[u],C=y.transform,O=e.data.field(y.field);s.set(y.field,Fh(C,O,t[u]))}return s}function ac(i,e,t){const s=new Map;for(const u of i){const y=u.transform,C=t.data.field(u.field);s.set(u.field,rc(y,C,e))}return s}class Wl extends xa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fc extends xa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class xf{constructor(e){this.count=e}}var us,mi;function Pu(i){switch(i){default:return Yt();case wt.CANCELLED:case wt.UNKNOWN:case wt.DEADLINE_EXCEEDED:case wt.RESOURCE_EXHAUSTED:case wt.INTERNAL:case wt.UNAVAILABLE:case wt.UNAUTHENTICATED:return!1;case wt.INVALID_ARGUMENT:case wt.NOT_FOUND:case wt.ALREADY_EXISTS:case wt.PERMISSION_DENIED:case wt.FAILED_PRECONDITION:case wt.ABORTED:case wt.OUT_OF_RANGE:case wt.UNIMPLEMENTED:case wt.DATA_LOSS:return!0}}function Nu(i){if(void 0===i)return er("GRPC error has no .code"),wt.UNKNOWN;switch(i){case us.OK:return wt.OK;case us.CANCELLED:return wt.CANCELLED;case us.UNKNOWN:return wt.UNKNOWN;case us.DEADLINE_EXCEEDED:return wt.DEADLINE_EXCEEDED;case us.RESOURCE_EXHAUSTED:return wt.RESOURCE_EXHAUSTED;case us.INTERNAL:return wt.INTERNAL;case us.UNAVAILABLE:return wt.UNAVAILABLE;case us.UNAUTHENTICATED:return wt.UNAUTHENTICATED;case us.INVALID_ARGUMENT:return wt.INVALID_ARGUMENT;case us.NOT_FOUND:return wt.NOT_FOUND;case us.ALREADY_EXISTS:return wt.ALREADY_EXISTS;case us.PERMISSION_DENIED:return wt.PERMISSION_DENIED;case us.FAILED_PRECONDITION:return wt.FAILED_PRECONDITION;case us.ABORTED:return wt.ABORTED;case us.OUT_OF_RANGE:return wt.OUT_OF_RANGE;case us.UNIMPLEMENTED:return wt.UNIMPLEMENTED;case us.DATA_LOSS:return wt.DATA_LOSS;default:return Yt()}}(mi=us||(us={}))[mi.OK=0]="OK",mi[mi.CANCELLED=1]="CANCELLED",mi[mi.UNKNOWN=2]="UNKNOWN",mi[mi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mi[mi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mi[mi.NOT_FOUND=5]="NOT_FOUND",mi[mi.ALREADY_EXISTS=6]="ALREADY_EXISTS",mi[mi.PERMISSION_DENIED=7]="PERMISSION_DENIED",mi[mi.UNAUTHENTICATED=16]="UNAUTHENTICATED",mi[mi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mi[mi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mi[mi.ABORTED=10]="ABORTED",mi[mi.OUT_OF_RANGE=11]="OUT_OF_RANGE",mi[mi.UNIMPLEMENTED=12]="UNIMPLEMENTED",mi[mi.INTERNAL=13]="INTERNAL",mi[mi.UNAVAILABLE=14]="UNAVAILABLE",mi[mi.DATA_LOSS=15]="DATA_LOSS";class cs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[u,y]of s)if(this.equalsFn(u,e))return y}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),u=this.inner[s];if(void 0===u)return this.inner[s]=[[e,t]],void this.innerSize++;for(let y=0;y<u.length;y++)if(this.equalsFn(u[y][0],e))return void(u[y]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return 1===s.length?delete this.inner[t]:s.splice(u,1),this.innerSize--,!0;return!1}forEach(e){ho(this.inner,(t,s)=>{for(const[u,y]of s)e(u,y)})}isEmpty(){return ul(this.inner)}size(){return this.innerSize}}const hu=new Ns(pn.comparator);function As(){return hu}const pl=new Ns(pn.comparator);function so(...i){let e=pl;for(const t of i)e=e.insert(t.key,t);return e}function ks(i){let e=pl;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Oo(){return va()}function ku(){return va()}function va(){return new cs(i=>i.toString(),(i,e)=>i.isEqual(e))}const Fu=new Ns(pn.comparator),yd=new Ki(pn.comparator);function $r(...i){let e=yd;for(const t of i)e=e.add(t);return e}const Lc=new Ki(hr);function $c(){return Lc}class Oa{constructor(e,t,s,u,y){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=u,this.resolvedLimboDocuments=y}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const u=new Map;return u.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Oa(Gn.min(),u,$c(),As(),$r())}}class fu{constructor(e,t,s,u,y){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=u,this.removedDocuments=y}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new fu(s,t,$r(),$r(),$r())}}class lc{constructor(e,t,s,u){this.Et=e,this.removedTargetIds=t,this.key=s,this.At=u}}class Ml{constructor(e,t){this.targetId=e,this.Rt=t}}class pu{constructor(e,t,s=ys.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=u}}class Pa{constructor(){this.Pt=0,this.vt=Bc(),this.bt=ys.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.bt}get Dt(){return 0!==this.Pt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}Nt(){let e=$r(),t=$r(),s=$r();return this.vt.forEach((u,y)=>{switch(y){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:s=s.add(u);break;default:Yt()}}),new fu(this.bt,this.Vt,e,t,s)}kt(){this.St=!1,this.vt=Bc()}$t(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ot(){this.Pt+=1}Ft(){this.Pt-=1}Bt(){this.St=!0,this.Vt=!0}}class Wo{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=As(),this.Kt=uc(),this.Gt=new Ki(hr)}Qt(e){for(const t of e.Et)e.At&&e.At.isFoundDocument()?this.jt(t,e.At):this.zt(t,e.key,e.At);for(const t of e.removedTargetIds)this.zt(t,e.key,e.At)}Wt(e){this.forEachTarget(e,t=>{const s=this.Ht(t);switch(e.state){case 0:this.Jt(t)&&s.xt(e.resumeToken);break;case 1:s.Ft(),s.Dt||s.kt(),s.xt(e.resumeToken);break;case 2:s.Ft(),s.Dt||this.removeTarget(t);break;case 3:this.Jt(t)&&(s.Bt(),s.xt(e.resumeToken));break;case 4:this.Jt(t)&&(this.Yt(t),s.xt(e.resumeToken));break;default:Yt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((s,u)=>{this.Jt(u)&&t(u)})}Zt(e){const t=e.targetId,s=e.Rt.count,u=this.Xt(t);if(u){const y=u.target;if(au(y))if(0===s){const C=new pn(y.path);this.zt(t,C,_i.newNoDocument(C,Gn.min()))}else mn(1===s);else this.te(t)!==s&&(this.Yt(t),this.Gt=this.Gt.add(t))}}ee(e){const t=new Map;this.qt.forEach((y,C)=>{const O=this.Xt(C);if(O){if(y.current&&au(O.target)){const j=new pn(O.target.path);null!==this.Ut.get(j)||this.ne(C,j)||this.zt(C,j,_i.newNoDocument(j,e))}y.Ct&&(t.set(C,y.Nt()),y.kt())}});let s=$r();this.Kt.forEach((y,C)=>{let O=!0;C.forEachWhile(j=>{const Z=this.Xt(j);return!Z||2===Z.purpose||(O=!1,!1)}),O&&(s=s.add(y))}),this.Ut.forEach((y,C)=>C.setReadTime(e));const u=new Oa(e,t,this.Gt,this.Ut,s);return this.Ut=As(),this.Kt=uc(),this.Gt=new Ki(hr),u}jt(e,t){if(!this.Jt(e))return;const s=this.ne(e,t.key)?2:0;this.Ht(e).$t(t.key,s),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}zt(e,t,s){if(!this.Jt(e))return;const u=this.Ht(e);this.ne(e,t)?u.$t(t,1):u.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),s&&(this.Ut=this.Ut.insert(t,s))}removeTarget(e){this.qt.delete(e)}te(e){const t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Ht(e).Ot()}Ht(e){let t=this.qt.get(e);return t||(t=new Pa,this.qt.set(e,t)),t}se(e){let t=this.Kt.get(e);return t||(t=new Ki(hr),this.Kt=this.Kt.insert(e,t)),t}Jt(e){const t=null!==this.Xt(e);return t||kt("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new Pa),this.Lt.getRemoteKeysForTarget(e).forEach(t=>{this.zt(e,t,null)})}ne(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}function uc(){return new Ns(pn.comparator)}function Bc(){return new Ns(pn.comparator)}const Kd={asc:"ASCENDING",desc:"DESCENDING"},Na={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lu={and:"AND",or:"OR"};class _a{constructor(e,t){this.databaseId=e,this.yt=t}}function Ha(i,e){return i.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vc(i,e){return i.yt?e.toBase64():e.toUint8Array()}function Uc(i,e){return Ha(i,e.toTimestamp())}function xs(i){return mn(!!i),Gn.fromTimestamp(function(e){const t=to(e);return new Ni(t.seconds,t.nanos)}(i))}function cc(i,e){return(t=i,new Ur(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function vd(i){const e=Ur.fromString(i);return mn($h(e)),e}function dc(i,e){return cc(i.databaseId,e.path)}function b(i,e){const t=vd(e);if(t.get(1)!==i.databaseId.projectId)throw new zt(wt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new zt(wt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new pn(Y(t))}function m(i,e){return cc(i.databaseId,e)}function I(i){const e=vd(i);return 4===e.length?Ur.emptyPath():Y(e)}function M(i){return new Ur(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Y(i){return mn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function oe(i,e,t){return{name:dc(i,e),fields:t.value.mapValue.fields}}function dt(i,e,t){const s=b(i,e.name),u=xs(e.updateTime),y=e.createTime?xs(e.createTime):Gn.min(),C=new Ss({mapValue:{fields:e.fields}}),O=_i.newFoundDocument(s,u,y,C);return t&&O.setHasCommittedMutations(),t?O.setHasCommittedMutations():O}function Un(i,e){let t;if(e instanceof zl)t={update:oe(i,e.key,e.value)};else if(e instanceof Wl)t={delete:dc(i,e.key)};else if(e instanceof Ma)t={update:oe(i,e.key,e.data),updateMask:Lh(e.fieldMask)};else{if(!(e instanceof Fc))return Yt();t={verify:dc(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(u,y){const C=y.transform;if(C instanceof Tl)return{fieldPath:y.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(C instanceof Sl)return{fieldPath:y.field.canonicalString(),appendMissingElements:{values:C.elements}};if(C instanceof Sa)return{fieldPath:y.field.canonicalString(),removeAllFromArray:{values:C.elements}};if(C instanceof Al)return{fieldPath:y.field.canonicalString(),increment:C.It};throw Yt()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:Uc(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:Yt()),t;var u}function wr(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?Xi.updateTime(xs(u.updateTime)):void 0!==u.exists?Xi.exists(u.exists):Xi.none():Xi.none(),s=e.updateTransforms?e.updateTransforms.map(u=>function(y,C){let O=null;"setToServerValue"in C?(mn("REQUEST_TIME"===C.setToServerValue),O=new Tl):"appendMissingElements"in C?O=new Sl(C.appendMissingElements.values||[]):"removeAllFromArray"in C?O=new Sa(C.removeAllFromArray.values||[]):"increment"in C?O=new Al(y,C.increment):Yt();const j=pi.fromServerFormat(C.fieldPath);return new Aa(j,O)}(i,u)):[];var u;if(e.update){const u=b(i,e.update.name),y=new Ss({mapValue:{fields:e.update.fields}});if(e.updateMask){const C=new Mo((e.updateMask.fieldPaths||[]).map(Z=>pi.fromServerFormat(Z)));return new Ma(u,y,C,t,s)}return new zl(u,y,t,s)}if(e.delete){const u=b(i,e.delete);return new Wl(u,t)}if(e.verify){const u=b(i,e.verify);return new Fc(u,t)}return Yt()}function Fs(i,e){return{documents:[m(i,e.path)]}}function Ea(i,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=m(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=m(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const u=function(j){if(0!==j.length)return fc(gi.create(j,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const y=function(j){if(0!==j.length)return j.map(Z=>{return{field:za((ue=Z).field),direction:$u(ue.dir)};var ue})}(e.orderBy);y&&(t.structuredQuery.orderBy=y);const C=(Z=e.limit,i.yt||rs(Z)?Z:{value:Z});var Z,O,j;return null!==C&&(t.structuredQuery.limit=C),e.startAt&&(t.structuredQuery.startAt={before:(O=e.startAt).inclusive,values:O.position}),e.endAt&&(t.structuredQuery.endAt={before:!(j=e.endAt).inclusive,values:j.position}),t}function hc(i){let e=I(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let u=null;if(s>0){mn(1===s);const ue=t.from[0];ue.allDescendants?u=ue.collectionId:e=e.child(ue.collectionId)}let y=[];t.where&&(y=function(ue){const Ye=jc(ue);return Ye instanceof gi&&cl(Ye)?Ye.getFilters():[Ye]}(t.where));let C=[];t.orderBy&&(C=t.orderBy.map(ue=>{return new Vl(Kl((Ye=ue).field),function(It){switch(It){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ye.direction));var Ye}));let O=null;t.limit&&(O=function(ue){let Ye;return Ye="object"==typeof ue?ue.value:ue,rs(Ye)?null:Ye}(t.limit));let j=null;var ue;t.startAt&&(j=new nr((ue=t.startAt).values||[],!!ue.before));let Z=null;return t.endAt&&(Z=function(ue){return new nr(ue.values||[],!ue.before)}(t.endAt)),ea(e,u,C,y,O,"F",j,Z)}function jc(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Kl(e.unaryFilter.field);return Gr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=Kl(e.unaryFilter.field);return Gr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Kl(e.unaryFilter.field);return Gr.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const y=Kl(e.unaryFilter.field);return Gr.create(y,"!=",{nullValue:"NULL_VALUE"});default:return Yt()}}(i):void 0!==i.fieldFilter?Gr.create(Kl((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Yt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return gi.create(e.compositeFilter.filters.map(t=>jc(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Yt()}}(e.compositeFilter.op))}(i):Yt();var e}function $u(i){return Kd[i]}function Ga(i){return Na[i]}function gu(i){return Lu[i]}function za(i){return{fieldPath:i.canonicalString()}}function Kl(i){return pi.fromServerFormat(i.fieldPath)}function fc(i){return i instanceof Gr?function(e){if("=="===e.op){if(Se(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NAN"}};if(te(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Se(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NOT_NAN"}};if(te(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:za(e.field),op:Ga(e.op),value:e.value}}}(i):i instanceof gi?function(e){const t=e.getFilters().map(s=>fc(s));return 1===t.length?t[0]:{compositeFilter:{op:gu(e.op),filters:t}}}(i):Yt()}function Lh(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $h(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Po(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Yd(e)),e=_d(i.get(t),e);return Yd(e)}function _d(i,e){let t=e;const s=i.length;for(let u=0;u<s;u++){const y=i.charAt(u);switch(y){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=y}}return t}function Yd(i){return i+"\x01\x01"}function Bu(i){const e=i.length;if(mn(e>=2),2===e)return mn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Ur.emptyPath();const t=e-2,s=[];let u="";for(let y=0;y<e;){const C=i.indexOf("\x01",y);switch((C<0||C>t)&&Yt(),i.charAt(C+1)){case"\x01":const O=i.substring(y,C);let j;0===u.length?j=O:(u+=O,j=u,u=""),s.push(j);break;case"\x10":u+=i.substring(y,C),u+="\0";break;case"\x11":u+=i.substring(y,C+1);break;default:Yt()}y=C+2}return new Ur(s)}const Mf=["userId","batchId"];function Ed(i,e){return[i,Po(e)]}function Rf(i,e,t){return[i,Po(e),t]}const Fp={},Lp=["prefixPath","collectionGroup","readTime","documentId"],$p=["prefixPath","collectionGroup","documentId"],Of=["collectionGroup","readTime","prefixPath","documentId"],qd=["canonicalId","targetId"],Bp=["targetId","path"],Bh=["path","targetId"],ym=["collectionId","parent"],No=["indexId","uid"],Vp=["uid","sequenceNumber"],Up=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Pf=["indexId","uid","orderedDocumentKey"],Vh=["userId","collectionPath","documentId"],jp=["userId","collectionPath","largestBatchId"],Hp=["userId","collectionGroup","largestBatchId"],Nf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Gp=[...Nf,"documentOverlays"],Yl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ta=Yl,gl=[...ta,"indexConfiguration","indexState","indexEntries"];class Rl extends ba{constructor(e,t){super(),this.re=e,this.currentSequenceNumber=t}}function go(i,e){const t=cn(i);return co.M(t.re,e)}class Zd{constructor(e,t,s,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const y=this.mutations[u];y.key.isEqual(e.key)&&kc(y,e,s[u])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=du(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=du(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=ku();return this.mutations.forEach(u=>{const y=e.get(u.key),C=y.overlayedDocument;let O=this.applyToLocalView(C,y.mutatedFields);O=t.has(u.key)?null:O;const j=gd(C,O);null!==j&&s.set(u.key,j),C.isValidDocument()||C.convertToNoDocument(Gn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$r())}isEqual(e){return this.batchId===e.batchId&&la(this.mutations,e.mutations,(t,s)=>oc(t,s))&&la(this.baseMutations,e.baseMutations,(t,s)=>oc(t,s))}}class Qd{constructor(e,t,s,u){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=u}static from(e,t,s){mn(e.mutations.length===s.length);let u=Fu;const y=e.mutations;for(let C=0;C<y.length;C++)u=u.insert(y[C].key,s[C].version);return new Qd(e,t,s,u)}}class Xd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class pc{constructor(e,t,s,u,y=Gn.min(),C=Gn.min(),O=ys.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=u,this.snapshotVersion=y,this.lastLimboFreeSnapshotVersion=C,this.resumeToken=O}withSequenceNumber(e){return new pc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new pc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new pc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class kf{constructor(e){this.oe=e}}function Uh(i,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:gc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:dc(u=i.oe,(y=e).key),fields:y.data.value.mapValue.fields,updateTime:Ha(u,y.version.toTimestamp()),createTime:Ha(u,y.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:mc(e.version)};else{if(!e.isUnknownDocument())return Yt();s.unknownDocument={path:t.path.toArray(),version:mc(e.version)}}var u,y;return s}function gc(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function mc(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ql(i){const e=new Ni(i.seconds,i.nanoseconds);return Gn.fromTimestamp(e)}function Vu(i,e){const t=(e.baseMutations||[]).map(y=>wr(i.oe,y));for(let y=0;y<e.mutations.length-1;++y)y+1<e.mutations.length&&void 0!==e.mutations[y+1].transform&&(e.mutations[y].updateTransforms=e.mutations[y+1].transform.fieldTransforms,e.mutations.splice(y+1,1),++y);const s=e.mutations.map(y=>wr(i.oe,y)),u=Ni.fromMillis(e.localWriteTimeMs);return new Zd(e.batchId,u,t,s)}function Ol(i){const e=ql(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?ql(i.lastLimboFreeSnapshotVersion):Gn.min();let s;var u;return void 0!==i.query.documents?(mn(1===(u=i.query).documents.length),s=io(uu(I(u.documents[0])))):s=io(hc(i.query)),new pc(s,i.targetId,0,i.lastListenSequenceNumber,e,t,ys.fromBase64String(i.resumeToken))}function jh(i,e){const t=mc(e.snapshotVersion),s=mc(e.lastLimboFreeSnapshotVersion);let u;u=au(e.target)?Fs(i.oe,e.target):Ea(i.oe,e.target);const y=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ja(e.target),readTime:t,resumeToken:y,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:u}}function Id(i){const e=hc({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?xu(e,e.limit,"L"):e}function mu(i,e){return new Xd(e.largestBatchId,wr(i.oe,e.overlayMutation))}function Lf(i,e){const t=e.path.lastSegment();return[i,Po(e.path.popLast()),t]}function wd(i,e,t,s){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:mc(s.readTime),documentKey:Po(s.documentKey.path),largestBatchId:s.largestBatchId}}class Cd{getBundleMetadata(e,t){return Hh(e).get(t).next(s=>{if(s)return{id:(u=s).bundleId,createTime:ql(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return Hh(e).put({bundleId:(s=t).id,createTime:mc(xs(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return Jd(e).get(t).next(s=>{if(s)return{name:(u=s).name,query:Id(u.bundledQuery),readTime:ql(u.readTime)};var u})}saveNamedQuery(e,t){return Jd(e).put({name:(s=t).name,readTime:mc(xs(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Hh(i){return go(i,"bundles")}function Jd(i){return go(i,"namedQueries")}class yc{constructor(e,t){this.Tt=e,this.userId=t}static ue(e,t){return new yc(e,t.uid||"")}getOverlay(e,t){return Pl(e).get(Lf(this.userId,t)).next(s=>s?mu(this.Tt,s):null)}getOverlays(e,t){const s=Oo();return bt.forEach(t,u=>this.getOverlay(e,u).next(y=>{null!==y&&s.set(u,y)})).next(()=>s)}saveOverlays(e,t,s){const u=[];return s.forEach((y,C)=>{const O=new Xd(t,C);u.push(this.ce(e,O))}),bt.waitFor(u)}removeOverlaysForBatchId(e,t,s){const u=new Set;t.forEach(C=>u.add(Po(C.getCollectionPath())));const y=[];return u.forEach(C=>{const O=IDBKeyRange.bound([this.userId,C,s],[this.userId,C,s+1],!1,!0);y.push(Pl(e).Y("collectionPathOverlayIndex",O))}),bt.waitFor(y)}getOverlaysForCollection(e,t,s){const u=Oo(),y=Po(t),C=IDBKeyRange.bound([this.userId,y,s],[this.userId,y,Number.POSITIVE_INFINITY],!0);return Pl(e).W("collectionPathOverlayIndex",C).next(O=>{for(const j of O){const Z=mu(this.Tt,j);u.set(Z.getKey(),Z)}return u})}getOverlaysForCollectionGroup(e,t,s,u){const y=Oo();let C;const O=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Pl(e).X({index:"collectionGroupOverlayIndex",range:O},(j,Z,ue)=>{const Ye=mu(this.Tt,Z);y.size()<u||Ye.largestBatchId===C?(y.set(Ye.getKey(),Ye),C=Ye.largestBatchId):ue.done()}).next(()=>y)}ce(e,t){return Pl(e).put(function(s,u,y){const[C,O,j]=Lf(u,y.mutation.key);return{userId:u,collectionPath:O,documentId:j,collectionGroup:y.mutation.key.getCollectionGroup(),largestBatchId:y.largestBatchId,overlayMutation:Un(s.oe,y.mutation)}}(this.Tt,this.userId,t))}}function Pl(i){return go(i,"documentOverlays")}class yu{constructor(){}ae(e,t){this.he(e,t),t.le()}he(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(ki(e.integerValue));else if("doubleValue"in e){const s=ki(e.doubleValue);isNaN(s)?this.fe(t,13):(this.fe(t,15),fo(s)?t.de(0):t.de(s))}else if("timestampValue"in e){const s=e.timestampValue;this.fe(t,20),"string"==typeof s?t._e(s):(t._e(`${s.seconds||""}`),t.de(s.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(Qi(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.fe(t,45),t.de(s.latitude||0),t.de(s.longitude||0)}else"mapValue"in e?Jt(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):Yt()}we(e,t){this.fe(t,25),this.Te(e,t)}Te(e,t){t._e(e)}pe(e,t){const s=e.fields||{};this.fe(t,55);for(const u of Object.keys(s))this.we(u,t),this.he(s[u],t)}Ie(e,t){const s=e.values||[];this.fe(t,50);for(const u of s)this.he(u,t)}ye(e,t){this.fe(t,37),pn.fromName(e).path.forEach(s=>{this.fe(t,60),this.Te(s,t)})}fe(e,t){e.de(t)}me(e){e.de(2)}}function Gh(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function $f(i){const e=64-function(t){let s=0;for(let u=0;u<8;++u){const y=Gh(255&t[u]);if(s+=y,8!==y)break}return s}(i);return Math.ceil(e/8)}yu.Ee=new yu;class Bf{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Re(s.value),s=t.next();this.Pe()}ve(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.be(s.value),s=t.next();this.Ve()}Se(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Re(s);else if(s<2048)this.Re(960|s>>>6),this.Re(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Re(480|s>>>12),this.Re(128|63&s>>>6),this.Re(128|63&s);else{const u=t.codePointAt(0);this.Re(240|u>>>18),this.Re(128|63&u>>>12),this.Re(128|63&u>>>6),this.Re(128|63&u)}}this.Pe()}De(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.be(s);else if(s<2048)this.be(960|s>>>6),this.be(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.be(480|s>>>12),this.be(128|63&s>>>6),this.be(128|63&s);else{const u=t.codePointAt(0);this.be(240|u>>>18),this.be(128|63&u>>>12),this.be(128|63&u>>>6),this.be(128|63&u)}}this.Ve()}Ce(e){const t=this.xe(e),s=$f(t);this.Ne(1+s),this.buffer[this.position++]=255&s;for(let u=t.length-s;u<t.length;++u)this.buffer[this.position++]=255&t[u]}ke(e){const t=this.xe(e),s=$f(t);this.Ne(1+s),this.buffer[this.position++]=~(255&s);for(let u=t.length-s;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}$e(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const t=function(u){const y=new DataView(new ArrayBuffer(8));return y.setFloat64(0,u,!1),new Uint8Array(y.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let u=1;u<t.length;++u)t[u]^=s?255:0;return t}Re(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}be(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Pe(){this.Me(0),this.Me(1)}Ve(){this.Fe(0),this.Fe(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}Fe(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const u=new Uint8Array(s);u.set(this.buffer),this.buffer=u}}class Vf{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.$e()}}class Hc{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Oe()}}class bd{constructor(){this.Le=new Bf,this.qe=new Vf(this.Le),this.Ue=new Hc(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class vc{constructor(e,t,s,u){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=u}Ge(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new vc(this.indexId,this.documentKey,this.arrayValue,s)}}function Uu(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=eh(i.arrayValue,e.arrayValue),0!==t?t:(t=eh(i.directionalValue,e.directionalValue),0!==t?t:pn.comparator(i.documentKey,e.documentKey)))}function eh(i,e){for(let t=0;t<i.length&&t<e.length;++t){const s=i[t]-e[t];if(0!==s)return s}return i.length-e.length}class Uf{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const t of e.filters){const s=t;s.isInequality()?this.ze=s:this.je.push(s)}}We(e){mn(e.collectionGroup===this.collectionId);const t=Xo(e);if(void 0!==t&&!this.He(t))return!1;const s=Cs(e);let u=0,y=0;for(;u<s.length&&this.He(s[u]);++u);if(u===s.length)return!0;if(void 0!==this.ze){const C=s[u];if(!this.Je(this.ze,C)||!this.Ye(this.Qe[y++],C))return!1;++u}for(;u<s.length;++u)if(y>=this.Qe.length||!this.Ye(this.Qe[y++],s[u]))return!1;return!0}He(e){for(const t of this.je)if(this.Je(t,e))return!0;return!1}Je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function jf(i){var e,t;if(mn(i instanceof Gr||i instanceof gi),i instanceof Gr){if(i instanceof ud){const u=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(y=>Gr.create(i.field,"==",y)))||[];return gi.create(u,"or")}return i}const s=i.filters.map(u=>jf(u));return gi.create(s,i.op)}function zp(i){if(0===i.getFilters().length)return[];const e=_c(jf(i));return mn(Gf(e)),th(e)||Hf(e)?[e]:e.getFilters()}function th(i){return i instanceof Gr}function Hf(i){return i instanceof gi&&cl(i)}function Gf(i){return th(i)||Hf(i)||function(e){if(e instanceof gi&&Jo(e)){for(const t of e.getFilters())if(!th(t)&&!Hf(t))return!1;return!0}return!1}(i)}function _c(i){if(mn(i instanceof Gr||i instanceof gi),i instanceof Gr)return i;if(1===i.filters.length)return _c(i.filters[0]);const e=i.filters.map(s=>_c(s));let t=gi.create(e,i.op);return t=f(t),Gf(t)?t:(mn(t instanceof gi),mn(po(t)),mn(t.filters.length>1),t.filters.reduce((s,u)=>zh(s,u)))}function zh(i,e){let t;return mn(i instanceof Gr||i instanceof gi),mn(e instanceof Gr||e instanceof gi),t=i instanceof Gr?e instanceof Gr?gi.create([i,e],"and"):Ec(i,e):e instanceof Gr?Ec(e,i):function(s,u){if(mn(s.filters.length>0&&u.filters.length>0),po(s)&&po(u))return Xu(s,u.getFilters());const y=Jo(s)?s:u,C=Jo(s)?u:s,O=y.filters.map(j=>zh(j,C));return gi.create(O,"or")}(i,e),f(t)}function Ec(i,e){if(po(e))return Xu(e,i.getFilters());{const t=e.filters.map(s=>zh(i,s));return gi.create(t,"or")}}function f(i){if(mn(i instanceof Gr||i instanceof gi),i instanceof Gr)return i;const e=i.getFilters();if(1===e.length)return f(e[0]);if(Zu(i))return i;const t=e.map(u=>f(u)),s=[];return t.forEach(u=>{u instanceof Gr?s.push(u):u instanceof gi&&(u.op===i.op?s.push(...u.filters):s.push(u))}),1===s.length?s[0]:gi.create(s,i.op)}class c{constructor(){this.Ze=new d}addToCollectionParentIndex(e,t){return this.Ze.add(t),bt.resolve()}getCollectionParents(e,t){return bt.resolve(this.Ze.getEntries(t))}addFieldIndex(e,t){return bt.resolve()}deleteFieldIndex(e,t){return bt.resolve()}getDocumentsMatchingTarget(e,t){return bt.resolve(null)}getIndexType(e,t){return bt.resolve(0)}getFieldIndexes(e,t){return bt.resolve([])}getNextCollectionGroupToUpdate(e){return bt.resolve(null)}getMinOffset(e,t){return bt.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,t){return bt.resolve(bs.min())}updateCollectionGroup(e,t,s){return bt.resolve()}updateIndexEntries(e,t){return bt.resolve()}}class d{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),u=this.index[t]||new Ki(Ur.comparator),y=!u.has(s);return this.index[t]=u.add(s),y}has(e){const t=e.lastSegment(),s=e.popLast(),u=this.index[t];return u&&u.has(s)}getEntries(e){return(this.index[e]||new Ki(Ur.comparator)).toArray()}}const v=new Uint8Array(0);class A{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new d,this.tn=new cs(s=>ja(s),(s,u)=>jl(s,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const s=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const y={collectionId:s,parent:Po(u)};return k(e).put(y)}return bt.resolve()}getCollectionParents(e,t){const s=[],u=IDBKeyRange.bound([t,""],[Ba(t),""],!1,!0);return k(e).W(u).next(y=>{for(const C of y){if(C.collectionId!==t)break;s.push(Bu(C.parent))}return s})}addFieldIndex(e,t){const s=ie(e),u={indexId:(C=t).indexId,collectionGroup:C.collectionGroup,fields:C.fields.map(O=>[O.fieldPath.canonicalString(),O.kind])};var C;delete u.indexId;const y=s.add(u);if(t.indexState){const C=ve(e);return y.next(O=>{C.put(wd(O,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return y.next()}deleteFieldIndex(e,t){const s=ie(e),u=ve(e),y=H(e);return s.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>y.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=H(e);let u=!0;const y=new Map;return bt.forEach(this.en(t),C=>this.nn(e,C).next(O=>{u&&(u=!!O),y.set(C,O)})).next(()=>{if(u){let C=$r();const O=[];return bt.forEach(y,(j,Z)=>{var ue;kt("IndexedDbIndexManager",`Using index ${ue=j,`id=${ue.indexId}|cg=${ue.collectionGroup}|f=${ue.fields.map(ai=>`${ai.fieldPath}:${ai.kind}`).join(",")}`} to execute ${ja(t)}`);const Ye=function(ai,_o){const Ri=Xo(_o);if(void 0===Ri)return null;for(const Fi of Hl(ai,Ri.fieldPath))switch(Fi.op){case"array-contains-any":return Fi.value.arrayValue.values||[];case"array-contains":return[Fi.value]}return null}(Z,j),It=function(ai,_o){const Ri=new Map;for(const Fi of Cs(_o))for(const ra of Hl(ai,Fi.fieldPath))switch(ra.op){case"==":case"in":Ri.set(Fi.fieldPath.canonicalString(),ra.value);break;case"not-in":case"!=":return Ri.set(Fi.fieldPath.canonicalString(),ra.value),Array.from(Ri.values())}return null}(Z,j),Ht=function(ai,_o){const Ri=[];let Fi=!0;for(const ra of Cs(_o)){const id=0===ra.kind?Su(ai,ra.fieldPath,ai.startAt):lu(ai,ra.fieldPath,ai.startAt);Ri.push(id.value),Fi&&(Fi=id.inclusive)}return new nr(Ri,Fi)}(Z,j),nn=function(ai,_o){const Ri=[];let Fi=!0;for(const ra of Cs(_o)){const id=0===ra.kind?lu(ai,ra.fieldPath,ai.endAt):Su(ai,ra.fieldPath,ai.endAt);Ri.push(id.value),Fi&&(Fi=id.inclusive)}return new nr(Ri,Fi)}(Z,j),Rn=this.sn(j,Z,Ht),ir=this.sn(j,Z,nn),ts=this.rn(j,Z,It),vo=this.on(j.indexId,Ye,Rn,Ht.inclusive,ir,nn.inclusive,ts);return bt.forEach(vo,ai=>s.J(ai,t.limit).next(_o=>{_o.forEach(Ri=>{const Fi=pn.fromSegments(Ri.documentKey);C.has(Fi)||(C=C.add(Fi),O.push(Fi))})}))}).next(()=>O)}return bt.resolve(null)})}en(e){let t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:zp(gi.create(e.filters,"and")).map(s=>Ta(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,t),t)}on(e,t,s,u,y,C,O){const j=(null!=t?t.length:1)*Math.max(s.length,y.length),Z=j/(null!=t?t.length:1),ue=[];for(let Ye=0;Ye<j;++Ye){const It=t?this.un(t[Ye/Z]):v,Ht=this.cn(e,It,s[Ye%Z],u),nn=this.an(e,It,y[Ye%Z],C),Rn=O.map(ir=>this.cn(e,It,ir,!0));ue.push(...this.createRange(Ht,nn,Rn))}return ue}cn(e,t,s,u){const y=new vc(e,pn.empty(),t,s);return u?y:y.Ge()}an(e,t,s,u){const y=new vc(e,pn.empty(),t,s);return u?y.Ge():y}nn(e,t){const s=new Uf(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(y=>{let C=null;for(const O of y)s.We(O)&&(!C||O.fields.length>C.fields.length)&&(C=O);return C})}getIndexType(e,t){let s=2;const u=this.en(t);return bt.forEach(u,y=>this.nn(e,y).next(C=>{C?0!==s&&C.fields.length<function(O){let j=new Ki(pi.comparator),Z=!1;for(const ue of O.filters)for(const Ye of ue.getFlattenedFilters())Ye.field.isKeyField()||("array-contains"===Ye.op||"array-contains-any"===Ye.op?Z=!0:j=j.add(Ye.field));for(const ue of O.orderBy)ue.field.isKeyField()||(j=j.add(ue.field));return j.size+(Z?1:0)}(y)&&(s=1):s=0})).next(()=>null!==t.limit&&u.length>1&&2===s?1:s)}hn(e,t){const s=new bd;for(const u of Cs(e)){const y=t.data.field(u.fieldPath);if(null==y)return null;const C=s.Ke(u.kind);yu.Ee.ae(y,C)}return s.Be()}un(e){const t=new bd;return yu.Ee.ae(e,t.Ke(0)),t.Be()}ln(e,t){const s=new bd;return yu.Ee.ae(Hr(this.databaseId,t),s.Ke(function(u){const y=Cs(u);return 0===y.length?0:y[y.length-1].kind}(e))),s.Be()}rn(e,t,s){if(null===s)return[];let u=[];u.push(new bd);let y=0;for(const C of Cs(e)){const O=s[y++];for(const j of u)if(this.fn(t,C.fieldPath)&&U(O))u=this.dn(u,C,O);else{const Z=j.Ke(C.kind);yu.Ee.ae(O,Z)}}return this._n(u)}sn(e,t,s){return this.rn(e,t,s.position)}_n(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Be();return t}dn(e,t,s){const u=[...e],y=[];for(const C of s.arrayValue.values||[])for(const O of u){const j=new bd;j.seed(O.Be()),yu.Ee.ae(C,j.Ke(t.kind)),y.push(j)}return y}fn(e,t){return!!e.filters.find(s=>s instanceof Gr&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=ie(e),u=ve(e);return(t?s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.W()).next(y=>{const C=[];return bt.forEach(y,O=>u.get([O.indexId,this.uid]).next(j=>{C.push(function(Z,ue){const Ye=ue?new ga(ue.sequenceNumber,new bs(ql(ue.readTime),new pn(Bu(ue.documentKey)),ue.largestBatchId)):ga.empty(),It=Z.fields.map(([Ht,nn])=>new uo(pi.fromServerFormat(Ht),nn));return new ms(Z.indexId,Z.collectionGroup,It,Ye)}(O,j))})).next(()=>C)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,u)=>{const y=s.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==y?y:hr(s.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const u=ie(e),y=ve(e);return this.wn(e).next(C=>u.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(O=>bt.forEach(O,j=>y.put(wd(j.indexId,this.user,C,s)))))}updateIndexEntries(e,t){const s=new Map;return bt.forEach(t,(u,y)=>{const C=s.get(u.collectionGroup);return(C?bt.resolve(C):this.getFieldIndexes(e,u.collectionGroup)).next(O=>(s.set(u.collectionGroup,O),bt.forEach(O,j=>this.mn(e,u,j).next(Z=>{const ue=this.gn(y,j);return Z.isEqual(ue)?bt.resolve():this.yn(e,y,j,Z,ue)}))))})}pn(e,t,s,u){return H(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.ln(s,t.key),documentKey:t.key.path.toArray()})}In(e,t,s,u){return H(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.ln(s,t.key),t.key.path.toArray()])}mn(e,t,s){const u=H(e);let y=new Ki(Uu);return u.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.ln(s,t)])},(C,O)=>{y=y.add(new vc(s.indexId,t,O.arrayValue,O.directionalValue))}).next(()=>y)}gn(e,t){let s=new Ki(Uu);const u=this.hn(t,e);if(null==u)return s;const y=Xo(t);if(null!=y){const C=e.data.field(y.fieldPath);if(U(C))for(const O of C.arrayValue.values||[])s=s.add(new vc(t.indexId,e.key,this.un(O),u))}else s=s.add(new vc(t.indexId,e.key,v,u));return s}yn(e,t,s,u,y){kt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const C=[];return function(O,j,Z,ue,Ye){const It=O.getIterator(),Ht=j.getIterator();let nn=Ul(It),Rn=Ul(Ht);for(;nn||Rn;){let ir=!1,ts=!1;if(nn&&Rn){const vo=Z(nn,Rn);vo<0?ts=!0:vo>0&&(ir=!0)}else null!=nn?ts=!0:ir=!0;ir?(ue(Rn),Rn=Ul(Ht)):ts?(Ye(nn),nn=Ul(It)):(nn=Ul(It),Rn=Ul(Ht))}}(u,y,Uu,O=>{C.push(this.pn(e,t,s,O))},O=>{C.push(this.In(e,t,s,O))}),bt.waitFor(C)}wn(e){let t=1;return ve(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,u,y)=>{y.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((C,O)=>Uu(C,O)).filter((C,O,j)=>!O||0!==Uu(C,j[O-1]));const u=[];u.push(e);for(const C of s){const O=Uu(C,e),j=Uu(C,t);if(0===O)u[0]=e.Ge();else if(O>0&&j<0)u.push(C),u.push(C.Ge());else if(j>0)break}u.push(t);const y=[];for(let C=0;C<u.length;C+=2){if(this.Tn(u[C],u[C+1]))return[];y.push(IDBKeyRange.bound([u[C].indexId,this.uid,u[C].arrayValue,u[C].directionalValue,v,[]],[u[C+1].indexId,this.uid,u[C+1].arrayValue,u[C+1].directionalValue,v,[]]))}return y}Tn(e,t){return Uu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(je)}getMinOffset(e,t){return bt.mapArray(this.en(t),s=>this.nn(e,s).next(u=>u||Yt())).next(je)}}function k(i){return go(i,"collectionParents")}function H(i){return go(i,"indexEntries")}function ie(i){return go(i,"indexConfiguration")}function ve(i){return go(i,"indexState")}function je(i){mn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<i.length;s++){const u=i[s].indexState.offset;Il(u,e)<0&&(e=u),t<u.largestBatchId&&(t=u.largestBatchId)}return new bs(e.readTime,e.documentKey,t)}const Lt={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ot{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Ot(e,Ot.DEFAULT_COLLECTION_PERCENTILE,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function qt(i,e,t){const s=i.store("mutations"),u=i.store("documentMutations"),y=[],C=IDBKeyRange.only(t.batchId);let O=0;const j=s.X({range:C},(ue,Ye,It)=>(O++,It.delete()));y.push(j.next(()=>{mn(1===O)}));const Z=[];for(const ue of t.mutations){const Ye=Rf(e,ue.key.path,t.batchId);y.push(u.delete(Ye)),Z.push(ue.key)}return bt.waitFor(y).next(()=>Z)}function Ln(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Yt();e=i.noDocument}return JSON.stringify(e).length}Ot.DEFAULT_COLLECTION_PERCENTILE=10,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ot.DEFAULT=new Ot(41943040,Ot.DEFAULT_COLLECTION_PERCENTILE,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ot.DISABLED=new Ot(-1,0,0);class ar{constructor(e,t,s,u){this.userId=e,this.Tt=t,this.indexManager=s,this.referenceDelegate=u,this.En={}}static ue(e,t,s,u){mn(""!==e.uid);const y=e.isAuthenticated()?e.uid:"";return new ar(y,t,s,u)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _s(e).X({index:"userMutationsIndex",range:s},(u,y,C)=>{t=!1,C.done()}).next(()=>t)}addMutationBatch(e,t,s,u){const y=Ia(e),C=_s(e);return C.add({}).next(O=>{mn("number"==typeof O);const j=new Zd(O,t,s,u),Z=function(It,Ht,nn){const Rn=nn.baseMutations.map(ts=>Un(It.oe,ts)),ir=nn.mutations.map(ts=>Un(It.oe,ts));return{userId:Ht,batchId:nn.batchId,localWriteTimeMs:nn.localWriteTime.toMillis(),baseMutations:Rn,mutations:ir}}(this.Tt,this.userId,j),ue=[];let Ye=new Ki((It,Ht)=>hr(It.canonicalString(),Ht.canonicalString()));for(const It of u){const Ht=Rf(this.userId,It.key.path,O);Ye=Ye.add(It.key.path.popLast()),ue.push(C.put(Z)),ue.push(y.put(Ht,Fp))}return Ye.forEach(It=>{ue.push(this.indexManager.addToCollectionParentIndex(e,It))}),e.addOnCommittedListener(()=>{this.En[O]=j.keys()}),bt.waitFor(ue).next(()=>j)})}lookupMutationBatch(e,t){return _s(e).get(t).next(s=>s?(mn(s.userId===this.userId),Vu(this.Tt,s)):null)}An(e,t){return this.En[t]?bt.resolve(this.En[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const u=s.keys();return this.En[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,u=IDBKeyRange.lowerBound([this.userId,s]);let y=null;return _s(e).X({index:"userMutationsIndex",range:u},(C,O,j)=>{O.userId===this.userId&&(mn(O.batchId>=s),y=Vu(this.Tt,O)),j.done()}).next(()=>y)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return _s(e).X({index:"userMutationsIndex",range:t,reverse:!0},(u,y,C)=>{s=y.batchId,C.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _s(e).W("userMutationsIndex",t).next(s=>s.map(u=>Vu(this.Tt,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=Ed(this.userId,t.path),u=IDBKeyRange.lowerBound(s),y=[];return Ia(e).X({range:u},(C,O,j)=>{const[Z,ue,Ye]=C,It=Bu(ue);if(Z===this.userId&&t.path.isEqual(It))return _s(e).get(Ye).next(Ht=>{if(!Ht)throw Yt();mn(Ht.userId===this.userId),y.push(Vu(this.Tt,Ht))});j.done()}).next(()=>y)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ki(hr);const u=[];return t.forEach(y=>{const C=Ed(this.userId,y.path),O=IDBKeyRange.lowerBound(C),j=Ia(e).X({range:O},(Z,ue,Ye)=>{const[It,Ht,nn]=Z,Rn=Bu(Ht);It===this.userId&&y.path.isEqual(Rn)?s=s.add(nn):Ye.done()});u.push(j)}),bt.waitFor(u).next(()=>this.Rn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,u=s.length+1,y=Ed(this.userId,s),C=IDBKeyRange.lowerBound(y);let O=new Ki(hr);return Ia(e).X({range:C},(j,Z,ue)=>{const[Ye,It,Ht]=j,nn=Bu(It);Ye===this.userId&&s.isPrefixOf(nn)?nn.length===u&&(O=O.add(Ht)):ue.done()}).next(()=>this.Rn(e,O))}Rn(e,t){const s=[],u=[];return t.forEach(y=>{u.push(_s(e).get(y).next(C=>{if(null===C)throw Yt();mn(C.userId===this.userId),s.push(Vu(this.Tt,C))}))}),bt.waitFor(u).next(()=>s)}removeMutationBatch(e,t){return qt(e.re,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Pn(t.batchId)}),bt.forEach(s,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Pn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return bt.resolve();const s=IDBKeyRange.lowerBound([this.userId]),u=[];return Ia(e).X({range:s},(y,C,O)=>{if(y[0]===this.userId){const j=Bu(y[1]);u.push(j)}else O.done()}).next(()=>{mn(0===u.length)})})}containsKey(e,t){return Ti(e,this.userId,t)}vn(e){return Zl(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ti(i,e,t){const s=Ed(e,t.path),u=s[1],y=IDBKeyRange.lowerBound(s);let C=!1;return Ia(i).X({range:y,Z:!0},(O,j,Z)=>{const[ue,Ye,It]=O;ue===e&&Ye===u&&(C=!0),Z.done()}).next(()=>C)}function _s(i){return go(i,"mutations")}function Ia(i){return go(i,"documentMutations")}function Zl(i){return go(i,"mutationQueues")}class ml{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Vn(){return new ml(0)}static Sn(){return new ml(-1)}}class Gc{constructor(e,t){this.referenceDelegate=e,this.Tt=t}allocateTargetId(e){return this.Dn(e).next(t=>{const s=new ml(t.highestTargetId);return t.highestTargetId=s.next(),this.Cn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(t=>Gn.fromTimestamp(new Ni(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Dn(e).next(u=>(u.highestListenSequenceNumber=t,s&&(u.lastRemoteSnapshotVersion=s.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.Cn(e,u)))}addTargetData(e,t){return this.xn(e,t).next(()=>this.Dn(e).next(s=>(s.targetCount+=1,this.Nn(t,s),this.Cn(e,s))))}updateTargetData(e,t){return this.xn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>yl(e).delete(t.targetId)).next(()=>this.Dn(e)).next(s=>(mn(s.targetCount>0),s.targetCount-=1,this.Cn(e,s)))}removeTargets(e,t,s){let u=0;const y=[];return yl(e).X((C,O)=>{const j=Ol(O);j.sequenceNumber<=t&&null===s.get(j.targetId)&&(u++,y.push(this.removeTargetData(e,j)))}).next(()=>bt.waitFor(y)).next(()=>u)}forEachTarget(e,t){return yl(e).X((s,u)=>{const y=Ol(u);t(y)})}Dn(e){return vm(e).get("targetGlobalKey").next(t=>(mn(null!==t),t))}Cn(e,t){return vm(e).put("targetGlobalKey",t)}xn(e,t){return yl(e).put(jh(this.Tt,t))}Nn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Dn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=ja(t),u=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let y=null;return yl(e).X({range:u,index:"queryTargetsIndex"},(C,O,j)=>{const Z=Ol(O);jl(t,Z.target)&&(y=Z,j.done())}).next(()=>y)}addMatchingKeys(e,t,s){const u=[],y=zc(e);return t.forEach(C=>{const O=Po(C.path);u.push(y.put({targetId:s,path:O})),u.push(this.referenceDelegate.addReference(e,s,C))}),bt.waitFor(u)}removeMatchingKeys(e,t,s){const u=zc(e);return bt.forEach(t,y=>{const C=Po(y.path);return bt.waitFor([u.delete([s,C]),this.referenceDelegate.removeReference(e,s,y)])})}removeMatchingKeysForTargetId(e,t){const s=zc(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(u)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),u=zc(e);let y=$r();return u.X({range:s,Z:!0},(C,O,j)=>{const Z=Bu(C[1]),ue=new pn(Z);y=y.add(ue)}).next(()=>y)}containsKey(e,t){const s=Po(t.path),u=IDBKeyRange.bound([s],[Ba(s)],!1,!0);let y=0;return zc(e).X({index:"documentTargetsIndex",Z:!0,range:u},([C,O],j,Z)=>{0!==C&&(y++,Z.done())}).next(()=>y>0)}ie(e,t){return yl(e).get(t).next(s=>s?Ol(s):null)}}function yl(i){return go(i,"targets")}function vm(i){return go(i,"targetGlobal")}function zc(i){return go(i,"targetDocuments")}function vv([i,e],[t,s]){const u=hr(i,t);return 0===u?hr(e,s):u}class l0{constructor(e){this.kn=e,this.buffer=new Ki(vv),this.$n=0}Mn(){return++this.$n}On(e){const t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();vv(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _m{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Fn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}get started(){return null!==this.Fn}Bn(e){var t=this;kt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,le.Z)(function*(){t.Fn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){Da(s)?kt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Ts(s)}yield t.Bn(3e5)}))}}class u0{constructor(e,t){this.Ln=e,this.params=t}calculateTargetCount(e,t){return this.Ln.qn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return bt.resolve(Gs.at);const s=new l0(t);return this.Ln.forEachTarget(e,u=>s.On(u.sequenceNumber)).next(()=>this.Ln.Un(e,u=>s.On(u))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Ln.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Ln.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(kt("LruGarbageCollector","Garbage collection skipped; disabled"),bt.resolve(Lt)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(kt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lt):this.Kn(e,t))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,t){let s,u,y,C,O,j,Z;const ue=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ye=>(Ye>this.params.maximumSequenceNumbersToCollect?(kt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ye}`),u=this.params.maximumSequenceNumbersToCollect):u=Ye,C=Date.now(),this.nthSequenceNumber(e,u))).next(Ye=>(s=Ye,O=Date.now(),this.removeTargets(e,s,t))).next(Ye=>(y=Ye,j=Date.now(),this.removeOrphanedDocuments(e,s))).next(Ye=>(Z=Date.now(),un()<=Xe.in.DEBUG&&kt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${C-ue}ms\n\tDetermined least recently used ${u} in `+(O-C)+`ms\n\tRemoved ${y} targets in `+(j-O)+`ms\n\tRemoved ${Ye} documents in `+(Z-j)+`ms\nTotal Duration: ${Z-ue}ms`),bt.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:y,documentsRemoved:Ye})))}}class Em{constructor(e,t){this.db=e,this.garbageCollector=new u0(this,t)}qn(e){const t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(u=>s+u))}Gn(e){let t=0;return this.Un(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Un(e,t){return this.Qn(e,(s,u)=>t(u))}addReference(e,t,s){return Wh(e,s)}removeReference(e,t,s){return Wh(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Wh(e,t)}jn(e,t){return function(s,u){let y=!1;return Zl(s).tt(C=>Ti(s,C,u).next(O=>(O&&(y=!0),bt.resolve(!O)))).next(()=>y)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let y=0;return this.Qn(e,(C,O)=>{if(O<=t){const j=this.jn(e,C).next(Z=>{if(!Z)return y++,s.getEntry(e,C).next(()=>(s.removeEntry(C,Gn.min()),zc(e).delete([0,Po(C.path)])))});u.push(j)}}).next(()=>bt.waitFor(u)).next(()=>s.apply(e)).next(()=>y)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Wh(e,t)}Qn(e,t){const s=zc(e);let u,y=Gs.at;return s.X({index:"documentTargetsIndex"},([C,O],{path:j,sequenceNumber:Z})=>{0===C?(y!==Gs.at&&t(new pn(Bu(u)),y),y=Z,u=j):y=Gs.at}).next(()=>{y!==Gs.at&&t(new pn(Bu(u)),y)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Wh(i,e){return zc(i).put((s=i.currentSequenceNumber,{targetId:0,path:Po(e.path),sequenceNumber:s}));var s}class Im{constructor(){this.changes=new cs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_i.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?bt.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wm{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Dd(e).put(s)}removeEntry(e,t,s){return Dd(e).delete(function(u,y){const C=u.path.toArray();return[C.slice(0,C.length-2),C[C.length-2],gc(y),C[C.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.zn(e,s)))}getEntry(e,t){let s=_i.newInvalidDocument(t);return Dd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(nh(t))},(u,y)=>{s=this.Wn(t,y)}).next(()=>s)}Hn(e,t){let s={size:0,document:_i.newInvalidDocument(t)};return Dd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(nh(t))},(u,y)=>{s={document:this.Wn(t,y),size:Ln(y)}}).next(()=>s)}getEntries(e,t){let s=As();return this.Jn(e,t,(u,y)=>{const C=this.Wn(u,y);s=s.insert(u,C)}).next(()=>s)}Yn(e,t){let s=As(),u=new Ns(pn.comparator);return this.Jn(e,t,(y,C)=>{const O=this.Wn(y,C);s=s.insert(y,O),u=u.insert(y,Ln(C))}).next(()=>({documents:s,Zn:u}))}Jn(e,t,s){if(t.isEmpty())return bt.resolve();let u=new Ki(Dm);t.forEach(j=>u=u.add(j));const y=IDBKeyRange.bound(nh(u.first()),nh(u.last())),C=u.getIterator();let O=C.getNext();return Dd(e).X({index:"documentKeyIndex",range:y},(j,Z,ue)=>{const Ye=pn.fromSegments([...Z.prefixPath,Z.collectionGroup,Z.documentId]);for(;O&&Dm(O,Ye)<0;)s(O,null),O=C.getNext();O&&O.isEqual(Ye)&&(s(O,Z),O=C.hasNext()?C.getNext():null),O?ue.j(nh(O)):ue.done()}).next(()=>{for(;O;)s(O,null),O=C.hasNext()?C.getNext():null})}getDocumentsMatchingQuery(e,t,s,u){const y=t.path,C=[y.popLast().toArray(),y.lastSegment(),gc(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],O=[y.popLast().toArray(),y.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Dd(e).W(IDBKeyRange.bound(C,O,!0)).next(j=>{let Z=As();for(const ue of j){const Ye=this.Wn(pn.fromSegments(ue.prefixPath.concat(ue.collectionGroup,ue.documentId)),ue);Ye.isFoundDocument()&&(fl(t,Ye)||u.has(Ye.key))&&(Z=Z.insert(Ye.key,Ye))}return Z})}getAllFromCollectionGroup(e,t,s,u){let y=As();const C=bm(t,s),O=bm(t,bs.max());return Dd(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(C,O,!0)},(j,Z,ue)=>{const Ye=this.Wn(pn.fromSegments(Z.prefixPath.concat(Z.collectionGroup,Z.documentId)),Z);y=y.insert(Ye.key,Ye),y.size===u&&ue.done()}).next(()=>y)}newChangeBuffer(e){return new _v(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Ql(e).get("remoteDocumentGlobalKey").next(t=>(mn(!!t),t))}zn(e,t){return Ql(e).put("remoteDocumentGlobalKey",t)}Wn(e,t){if(t){const s=function Ff(i,e){let t;if(e.document)t=dt(i.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=pn.fromSegments(e.noDocument.path),u=ql(e.noDocument.readTime);t=_i.newNoDocument(s,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Yt();{const s=pn.fromSegments(e.unknownDocument.path),u=ql(e.unknownDocument.version);t=_i.newUnknownDocument(s,u)}}return e.readTime&&t.setReadTime(function(s){const u=new Ni(s[0],s[1]);return Gn.fromTimestamp(u)}(e.readTime)),t}(this.Tt,t);if(!s.isNoDocument()||!s.version.isEqual(Gn.min()))return s}return _i.newInvalidDocument(e)}}function Cm(i){return new wm(i)}class _v extends Im{constructor(e,t){super(),this.Xn=e,this.trackRemovals=t,this.ts=new cs(s=>s.toString(),(s,u)=>s.isEqual(u))}applyChanges(e){const t=[];let s=0,u=new Ki((y,C)=>hr(y.canonicalString(),C.canonicalString()));return this.changes.forEach((y,C)=>{const O=this.ts.get(y);if(t.push(this.Xn.removeEntry(e,y,O.readTime)),C.isValidDocument()){const j=Uh(this.Xn.Tt,C);u=u.add(y.path.popLast());const Z=Ln(j);s+=Z-O.size,t.push(this.Xn.addEntry(e,y,j))}else if(s-=O.size,this.trackRemovals){const j=Uh(this.Xn.Tt,C.convertToNoDocument(Gn.min()));t.push(this.Xn.addEntry(e,y,j))}}),u.forEach(y=>{t.push(this.Xn.indexManager.addToCollectionParentIndex(e,y))}),t.push(this.Xn.updateMetadata(e,s)),bt.waitFor(t)}getFromCache(e,t){return this.Xn.Hn(e,t).next(s=>(this.ts.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.Xn.Yn(e,t).next(({documents:s,Zn:u})=>(u.forEach((y,C)=>{this.ts.set(y,{size:C,readTime:s.get(y).readTime})}),s))}}function Ql(i){return go(i,"remoteDocumentGlobal")}function Dd(i){return go(i,"remoteDocumentsV14")}function nh(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function bm(i,e){const t=e.documentKey.path.toArray();return[i,gc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Dm(i,e){const t=i.path.toArray(),s=e.path.toArray();let u=0;for(let y=0;y<t.length-2&&y<s.length-2;++y)if(u=hr(t[y],s[y]),u)return u;return u=hr(t.length,s.length),u||(u=hr(t[t.length-2],s[s.length-2]),u||hr(t[t.length-1],s[s.length-1]))}class Ev{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Tm{constructor(e,t,s,u){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=u}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(u=>(s=u,this.remoteDocumentCache.getEntry(e,t))).next(u=>(null!==s&&du(s.mutation,u,Mo.empty(),Ni.now()),u))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,$r()).next(()=>s))}getLocalViewOfDocuments(e,t,s=$r()){const u=Oo();return this.populateOverlays(e,u,t).next(()=>this.computeViews(e,t,u,s).next(y=>{let C=so();return y.forEach((O,j)=>{C=C.insert(O,j.overlayedDocument)}),C}))}getOverlayedDocuments(e,t){const s=Oo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,$r()))}populateOverlays(e,t,s){const u=[];return s.forEach(y=>{t.has(y)||u.push(y)}),this.documentOverlayCache.getOverlays(e,u).next(y=>{y.forEach((C,O)=>{t.set(C,O)})})}computeViews(e,t,s,u){let y=As();const C=va(),O=va();return t.forEach((j,Z)=>{const ue=s.get(Z.key);u.has(Z.key)&&(void 0===ue||ue.mutation instanceof Ma)?y=y.insert(Z.key,Z):void 0!==ue?(C.set(Z.key,ue.mutation.getFieldMask()),du(ue.mutation,Z,ue.mutation.getFieldMask(),Ni.now())):C.set(Z.key,Mo.empty())}),this.recalculateAndSaveOverlays(e,y).next(j=>(j.forEach((Z,ue)=>C.set(Z,ue)),t.forEach((Z,ue)=>{var Ye;return O.set(Z,new Ev(ue,null!==(Ye=C.get(Z))&&void 0!==Ye?Ye:null))}),O))}recalculateAndSaveOverlays(e,t){const s=va();let u=new Ns((C,O)=>C-O),y=$r();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(C=>{for(const O of C)O.keys().forEach(j=>{const Z=t.get(j);if(null===Z)return;let ue=s.get(j)||Mo.empty();ue=O.applyToLocalView(Z,ue),s.set(j,ue);const Ye=(u.get(O.batchId)||$r()).add(j);u=u.insert(O.batchId,Ye)})}).next(()=>{const C=[],O=u.getReverseIterator();for(;O.hasNext();){const j=O.getNext(),Z=j.key,ue=j.value,Ye=ku();ue.forEach(It=>{if(!y.has(It)){const Ht=gd(t.get(It),s.get(It));null!==Ht&&Ye.set(It,Ht),y=y.add(It)}}),C.push(this.documentOverlayCache.saveOverlays(e,Z,Ye))}return bt.waitFor(C)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return pn.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ro(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var u}getNextDocuments(e,t,s,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,u).next(y=>{const C=u-y.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,u-y.size):bt.resolve(Oo());let O=-1,j=y;return C.next(Z=>bt.forEach(Z,(ue,Ye)=>(O<Ye.largestBatchId&&(O=Ye.largestBatchId),y.get(ue)?bt.resolve():this.remoteDocumentCache.getEntry(e,ue).next(It=>{j=j.insert(ue,It)}))).next(()=>this.populateOverlays(e,Z,y)).next(()=>this.computeViews(e,j,Z,$r())).next(ue=>({batchId:O,changes:ks(ue)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pn(t)).next(s=>{let u=so();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const u=t.collectionGroup;let y=so();return this.indexManager.getCollectionParents(e,u).next(C=>bt.forEach(C,O=>{const j=(Z=t,ue=O.child(u),new dl(ue,null,Z.explicitOrderBy.slice(),Z.filters.slice(),Z.limit,Z.limitType,Z.startAt,Z.endAt));var Z,ue;return this.getDocumentsMatchingCollectionQuery(e,j,s).next(Z=>{Z.forEach((ue,Ye)=>{y=y.insert(ue,Ye)})})}).next(()=>y))}getDocumentsMatchingCollectionQuery(e,t,s){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(y=>(u=y,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,u))).next(y=>{u.forEach((O,j)=>{const Z=j.getKey();null===y.get(Z)&&(y=y.insert(Z,_i.newInvalidDocument(Z)))});let C=so();return y.forEach((O,j)=>{const Z=u.get(O);void 0!==Z&&du(Z.mutation,j,Mo.empty(),Ni.now()),fl(t,j)&&(C=C.insert(O,j))}),C})}}class Sm{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,t){return bt.resolve(this.es.get(t))}saveBundleMetadata(e,t){var s;return this.es.set(t.id,{id:(s=t).id,version:s.version,createTime:xs(s.createTime)}),bt.resolve()}getNamedQuery(e,t){return bt.resolve(this.ns.get(t))}saveNamedQuery(e,t){return this.ns.set(t.name,{name:(s=t).name,query:Id(s.bundledQuery),readTime:xs(s.readTime)}),bt.resolve();var s}}class Iv{constructor(){this.overlays=new Ns(pn.comparator),this.ss=new Map}getOverlay(e,t){return bt.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Oo();return bt.forEach(t,u=>this.getOverlay(e,u).next(y=>{null!==y&&s.set(u,y)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((u,y)=>{this.ce(e,t,y)}),bt.resolve()}removeOverlaysForBatchId(e,t,s){const u=this.ss.get(s);return void 0!==u&&(u.forEach(y=>this.overlays=this.overlays.remove(y)),this.ss.delete(s)),bt.resolve()}getOverlaysForCollection(e,t,s){const u=Oo(),y=t.length+1,C=new pn(t.child("")),O=this.overlays.getIteratorFrom(C);for(;O.hasNext();){const j=O.getNext().value,Z=j.getKey();if(!t.isPrefixOf(Z.path))break;Z.path.length===y&&j.largestBatchId>s&&u.set(j.getKey(),j)}return bt.resolve(u)}getOverlaysForCollectionGroup(e,t,s,u){let y=new Ns((Z,ue)=>Z-ue);const C=this.overlays.getIterator();for(;C.hasNext();){const Z=C.getNext().value;if(Z.getKey().getCollectionGroup()===t&&Z.largestBatchId>s){let ue=y.get(Z.largestBatchId);null===ue&&(ue=Oo(),y=y.insert(Z.largestBatchId,ue)),ue.set(Z.getKey(),Z)}}const O=Oo(),j=y.getIterator();for(;j.hasNext()&&(j.getNext().value.forEach((Z,ue)=>O.set(Z,ue)),!(O.size()>=u)););return bt.resolve(O)}ce(e,t,s){const u=this.overlays.get(s.key);if(null!==u){const C=this.ss.get(u.largestBatchId).delete(s.key);this.ss.set(u.largestBatchId,C)}this.overlays=this.overlays.insert(s.key,new Xd(t,s));let y=this.ss.get(t);void 0===y&&(y=$r(),this.ss.set(t,y)),this.ss.set(t,y.add(s.key))}}class Wp{constructor(){this.rs=new Ki(ca.os),this.us=new Ki(ca.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,t){const s=new ca(e,t);this.rs=this.rs.add(s),this.us=this.us.add(s)}hs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.ls(new ca(e,t))}fs(e,t){e.forEach(s=>this.removeReference(s,t))}ds(e){const t=new pn(new Ur([])),s=new ca(t,e),u=new ca(t,e+1),y=[];return this.us.forEachInRange([s,u],C=>{this.ls(C),y.push(C.key)}),y}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const t=new pn(new Ur([])),s=new ca(t,e),u=new ca(t,e+1);let y=$r();return this.us.forEachInRange([s,u],C=>{y=y.add(C.key)}),y}containsKey(e){const t=new ca(e,0),s=this.rs.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class ca{constructor(e,t){this.key=e,this.gs=t}static os(e,t){return pn.comparator(e.key,t.key)||hr(e.gs,t.gs)}static cs(e,t){return hr(e.gs,t.gs)||pn.comparator(e.key,t.key)}}class qr{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ys=1,this.ps=new Ki(ca.os)}checkEmpty(e){return bt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,u){const y=this.ys;this.ys++;const C=new Zd(y,t,s,u);this.mutationQueue.push(C);for(const O of u)this.ps=this.ps.add(new ca(O.key,y)),this.indexManager.addToCollectionParentIndex(e,O.key.path.popLast());return bt.resolve(C)}lookupMutationBatch(e,t){return bt.resolve(this.Is(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.Ts(t+1),y=u<0?0:u;return bt.resolve(this.mutationQueue.length>y?this.mutationQueue[y]:null)}getHighestUnacknowledgedBatchId(){return bt.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return bt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new ca(t,0),u=new ca(t,Number.POSITIVE_INFINITY),y=[];return this.ps.forEachInRange([s,u],C=>{const O=this.Is(C.gs);y.push(O)}),bt.resolve(y)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ki(hr);return t.forEach(u=>{const y=new ca(u,0),C=new ca(u,Number.POSITIVE_INFINITY);this.ps.forEachInRange([y,C],O=>{s=s.add(O.gs)})}),bt.resolve(this.Es(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,u=s.length+1;let y=s;pn.isDocumentKey(y)||(y=y.child(""));const C=new ca(new pn(y),0);let O=new Ki(hr);return this.ps.forEachWhile(j=>{const Z=j.key.path;return!!s.isPrefixOf(Z)&&(Z.length===u&&(O=O.add(j.gs)),!0)},C),bt.resolve(this.Es(O))}Es(e){const t=[];return e.forEach(s=>{const u=this.Is(s);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){mn(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();let s=this.ps;return bt.forEach(t.mutations,u=>{const y=new ca(u.key,t.batchId);return s=s.delete(y),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.ps=s})}Pn(e){}containsKey(e,t){const s=new ca(t,0),u=this.ps.firstAfterOrEqual(s);return bt.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return bt.resolve()}As(e,t){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Am{constructor(e){this.Rs=e,this.docs=new Ns(pn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,u=this.docs.get(s),y=u?u.size:0,C=this.Rs(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:C}),this.size+=C-y,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return bt.resolve(s?s.document.mutableCopy():_i.newInvalidDocument(t))}getEntries(e,t){let s=As();return t.forEach(u=>{const y=this.docs.get(u);s=s.insert(u,y?y.document.mutableCopy():_i.newInvalidDocument(u))}),bt.resolve(s)}getDocumentsMatchingQuery(e,t,s,u){let y=As();const C=t.path,O=new pn(C.child("")),j=this.docs.getIteratorFrom(O);for(;j.hasNext();){const{key:Z,value:{document:ue}}=j.getNext();if(!C.isPrefixOf(Z.path))break;Z.path.length>C.length+1||Il(ru(ue),s)<=0||(u.has(ue.key)||fl(t,ue))&&(y=y.insert(ue.key,ue.mutableCopy()))}return bt.resolve(y)}getAllFromCollectionGroup(e,t,s,u){Yt()}Ps(e,t){return bt.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new xm(this)}getSize(e){return bt.resolve(this.size)}}class xm extends Im{constructor(e){super(),this.Xn=e}applyChanges(e){const t=[];return this.changes.forEach((s,u)=>{u.isValidDocument()?t.push(this.Xn.addEntry(e,u)):this.Xn.removeEntry(s)}),bt.waitFor(t)}getFromCache(e,t){return this.Xn.getEntry(e,t)}getAllFromCache(e,t){return this.Xn.getEntries(e,t)}}class Mm{constructor(e){this.persistence=e,this.vs=new cs(t=>ja(t),jl),this.lastRemoteSnapshotVersion=Gn.min(),this.highestTargetId=0,this.bs=0,this.Vs=new Wp,this.targetCount=0,this.Ss=ml.Vn()}forEachTarget(e,t){return this.vs.forEach((s,u)=>t(u)),bt.resolve()}getLastRemoteSnapshotVersion(e){return bt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return bt.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),bt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.bs&&(this.bs=t),bt.resolve()}xn(e){this.vs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ss=new ml(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.xn(t),this.targetCount+=1,bt.resolve()}updateTargetData(e,t){return this.xn(t),bt.resolve()}removeTargetData(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,bt.resolve()}removeTargets(e,t,s){let u=0;const y=[];return this.vs.forEach((C,O)=>{O.sequenceNumber<=t&&null===s.get(O.targetId)&&(this.vs.delete(C),y.push(this.removeMatchingKeysForTargetId(e,O.targetId)),u++)}),bt.waitFor(y).next(()=>u)}getTargetCount(e){return bt.resolve(this.targetCount)}getTargetData(e,t){const s=this.vs.get(t)||null;return bt.resolve(s)}addMatchingKeys(e,t,s){return this.Vs.hs(t,s),bt.resolve()}removeMatchingKeys(e,t,s){this.Vs.fs(t,s);const u=this.persistence.referenceDelegate,y=[];return u&&t.forEach(C=>{y.push(u.markPotentiallyOrphaned(e,C))}),bt.waitFor(y)}removeMatchingKeysForTargetId(e,t){return this.Vs.ds(t),bt.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Vs.ws(t);return bt.resolve(s)}containsKey(e,t){return bt.resolve(this.Vs.containsKey(t))}}class Rm{constructor(e,t){this.Ds={},this.overlays={},this.Cs=new Gs(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new Mm(this),this.indexManager=new c,this.remoteDocumentCache=new Am(s=>this.referenceDelegate.ks(s)),this.Tt=new kf(t),this.$s=new Sm(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Iv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Ds[e.toKey()];return s||(s=new qr(t,this.referenceDelegate),this.Ds[e.toKey()]=s),s}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$s}runTransaction(e,t,s){kt("MemoryPersistence","Starting transaction:",e);const u=new wv(this.Cs.next());return this.referenceDelegate.Ms(),s(u).next(y=>this.referenceDelegate.Os(u).next(()=>y)).toPromise().then(y=>(u.raiseOnCommittedEvent(),y))}Fs(e,t){return bt.or(Object.values(this.Ds).map(s=>()=>s.containsKey(e,t)))}}class wv extends ba{constructor(e){super(),this.currentSequenceNumber=e}}class Kh{constructor(e){this.persistence=e,this.Bs=new Wp,this.Ls=null}static qs(e){return new Kh(e)}get Us(){if(this.Ls)return this.Ls;throw Yt()}addReference(e,t,s){return this.Bs.addReference(s,t),this.Us.delete(s.toString()),bt.resolve()}removeReference(e,t,s){return this.Bs.removeReference(s,t),this.Us.add(s.toString()),bt.resolve()}markPotentiallyOrphaned(e,t){return this.Us.add(t.toString()),bt.resolve()}removeTarget(e,t){this.Bs.ds(t.targetId).forEach(u=>this.Us.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(y=>this.Us.add(y.toString()))}).next(()=>s.removeTargetData(e,t))}Ms(){this.Ls=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bt.forEach(this.Us,s=>{const u=pn.fromPath(s);return this.Ks(e,u).next(y=>{y||t.removeEntry(u,Gn.min())})}).next(()=>(this.Ls=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ks(e,t).next(s=>{s?this.Us.delete(t.toString()):this.Us.add(t.toString())})}ks(e){return 0}Ks(e,t){return bt.or([()=>bt.resolve(this.Bs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Fs(e,t)])}}class Cv{constructor(e){this.Tt=e}F(e,t,s,u){const y=new xo("createOrUpgrade",t);var O;s<1&&u>=1&&(e.createObjectStore("owner"),(O=e).createObjectStore("mutationQueues",{keyPath:"userId"}),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Mf,{unique:!0}),O.createObjectStore("documentMutations"),Kp(e),function(O){O.createObjectStore("remoteDocuments")}(e));let C=bt.resolve();return s<3&&u>=3&&(0!==s&&(function(O){O.deleteObjectStore("targetDocuments"),O.deleteObjectStore("targets"),O.deleteObjectStore("targetGlobal")}(e),Kp(e)),C=C.next(()=>function(O){const j=O.store("targetGlobal"),Z={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Gn.min().toTimestamp(),targetCount:0};return j.put("targetGlobalKey",Z)}(y))),s<4&&u>=4&&(0!==s&&(C=C.next(()=>function(O,j){return j.store("mutations").W().next(Z=>{O.deleteObjectStore("mutations"),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Mf,{unique:!0});const ue=j.store("mutations"),Ye=Z.map(It=>ue.put(It));return bt.waitFor(Ye)})}(e,y))),C=C.next(()=>{!function(O){O.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&u>=5&&(C=C.next(()=>this.Gs(y))),s<6&&u>=6&&(C=C.next(()=>(function(O){O.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(y)))),s<7&&u>=7&&(C=C.next(()=>this.js(y))),s<8&&u>=8&&(C=C.next(()=>this.zs(e,y))),s<9&&u>=9&&(C=C.next(()=>{!function(O){O.objectStoreNames.contains("remoteDocumentChanges")&&O.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&u>=10&&(C=C.next(()=>this.Ws(y))),s<11&&u>=11&&(C=C.next(()=>{(function(O){O.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(O){O.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&u>=12&&(C=C.next(()=>{!function(O){const j=O.createObjectStore("documentOverlays",{keyPath:Vh});j.createIndex("collectionPathOverlayIndex",jp,{unique:!1}),j.createIndex("collectionGroupOverlayIndex",Hp,{unique:!1})}(e)})),s<13&&u>=13&&(C=C.next(()=>function(O){const j=O.createObjectStore("remoteDocumentsV14",{keyPath:Lp});j.createIndex("documentKeyIndex",$p),j.createIndex("collectionGroupIndex",Of)}(e)).next(()=>this.Hs(e,y)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&u>=14&&(C=C.next(()=>this.Js(e,y))),s<15&&u>=15&&(C=C.next(()=>function(O){O.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),O.createObjectStore("indexState",{keyPath:No}).createIndex("sequenceNumberIndex",Vp,{unique:!1}),O.createObjectStore("indexEntries",{keyPath:Up}).createIndex("documentKeyIndex",Pf,{unique:!1})}(e))),C}Qs(e){let t=0;return e.store("remoteDocuments").X((s,u)=>{t+=Ln(u)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Gs(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.W().next(u=>bt.forEach(u,y=>{const C=IDBKeyRange.bound([y.userId,-1],[y.userId,y.lastAcknowledgedBatchId]);return s.W("userMutationsIndex",C).next(O=>bt.forEach(O,j=>{mn(j.userId===y.userId);const Z=Vu(this.Tt,j);return qt(e,y.userId,Z).next(()=>{})}))}))}js(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const y=[];return s.X((C,O)=>{const j=new Ur(C),Z=[0,Po(j)];y.push(t.get(Z).next(ue=>ue?bt.resolve():t.put({targetId:0,path:Po(j),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>bt.waitFor(y))})}zs(e,t){e.createObjectStore("collectionParents",{keyPath:ym});const s=t.store("collectionParents"),u=new d,y=C=>{if(u.add(C)){const O=C.lastSegment(),j=C.popLast();return s.put({collectionId:O,parent:Po(j)})}};return t.store("remoteDocuments").X({Z:!0},(C,O)=>{const j=new Ur(C);return y(j.popLast())}).next(()=>t.store("documentMutations").X({Z:!0},([C,O,j],Z)=>{const ue=Bu(O);return y(ue.popLast())}))}Ws(e){const t=e.store("targets");return t.X((s,u)=>{const y=Ol(u),C=jh(this.Tt,y);return t.put(C)})}Hs(e,t){const s=t.store("remoteDocuments"),u=[];return s.X((y,C)=>{const O=t.store("remoteDocumentsV14"),j=(Z=C,Z.document?new pn(Ur.fromString(Z.document.name).popFirst(5)):Z.noDocument?pn.fromSegments(Z.noDocument.path):Z.unknownDocument?pn.fromSegments(Z.unknownDocument.path):Yt()).path.toArray();var Z;const ue={prefixPath:j.slice(0,j.length-2),collectionGroup:j[j.length-2],documentId:j[j.length-1],readTime:C.readTime||[0,0],unknownDocument:C.unknownDocument,noDocument:C.noDocument,document:C.document,hasCommittedMutations:!!C.hasCommittedMutations};u.push(O.put(ue))}).next(()=>bt.waitFor(u))}Js(e,t){const s=t.store("mutations"),u=Cm(this.Tt),y=new Rm(Kh.qs,this.Tt.oe);return s.W().next(C=>{const O=new Map;return C.forEach(j=>{var Z;let ue=null!==(Z=O.get(j.userId))&&void 0!==Z?Z:$r();Vu(this.Tt,j).keys().forEach(Ye=>ue=ue.add(Ye)),O.set(j.userId,ue)}),bt.forEach(O,(j,Z)=>{const ue=new pe(Z),Ye=yc.ue(this.Tt,ue),It=y.getIndexManager(ue),Ht=ar.ue(ue,this.Tt,It,y.referenceDelegate);return new Tm(u,Ht,Ye,It).recalculateAndSaveOverlaysForDocumentKeys(new Rl(t,Gs.at),j).next()})})}}function Kp(i){i.createObjectStore("targetDocuments",{keyPath:Bp}).createIndex("documentTargetsIndex",Bh,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qd,{unique:!0}),i.createObjectStore("targetGlobal")}const Yp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class qp{constructor(e,t,s,u,y,C,O,j,Z,ue,Ye=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Ys=y,this.window=C,this.document=O,this.Zs=Z,this.Xs=ue,this.ti=Ye,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=It=>Promise.resolve(),!qp.C())throw new zt(wt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Em(this,u),this.oi=t+"main",this.Tt=new kf(j),this.ui=new co(this.oi,this.ti,new Cv(this.Tt)),this.Ns=new Gc(this.referenceDelegate,this.Tt),this.remoteDocumentCache=Cm(this.Tt),this.$s=new Cd,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===ue&&er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new zt(wt.FAILED_PRECONDITION,Yp);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new Gs(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var t=this;return this.ri=function(){var s=(0,le.Z)(function*(u){if(t.started)return e(u)});return function(u){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var t=(0,le.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,le.Z)(function*(){t.started&&(yield t.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Yh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(t=>{t||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.mi(e).next(()=>!1):!!t&&this.gi(e).next(()=>!0))).catch(e=>{if(Da(e))return kt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return kt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return zf(e).get("owner").next(t=>bt.resolve(this.yi(t)))}pi(e){return Yh(e).delete(this.clientId)}Ii(){var e=this;return(0,le.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const u=go(s,"clientMetadata");return u.W().next(y=>{const C=e.Ei(y,18e5),O=y.filter(j=>-1===C.indexOf(j));return bt.forEach(O,j=>u.delete(j.clientId)).next(()=>O)})}).catch(()=>[]);if(e.ci)for(const s of t)e.ci.removeItem(e.Ai(s.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?bt.resolve(!0):zf(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)){if(this.yi(t)&&this.networkEnabled)return!0;if(!this.yi(t)){if(!t.allowTabSynchronization)throw new zt(wt.FAILED_PRECONDITION,Yp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yh(e).W().next(s=>void 0===this.Ei(s,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(t=>(this.isPrimary!==t&&kt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,le.Z)(function*(){e.xs=!1,e.Pi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.bi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Rl(t,Gs.at);return e.mi(s).next(()=>e.pi(s))}),e.ui.close(),e.Vi()})()}Ei(e,t){return e.filter(s=>this.Ti(s.updateTimeMs,t)&&!this.Ri(s.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>Yh(e).W().next(t=>this.Ei(t,18e5).map(s=>s.clientId)))}get started(){return this.xs}getMutationQueue(e,t){return ar.ue(e,this.Tt,t,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new A(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return yc.ue(this.Tt,e)}getBundleCache(){return this.$s}runTransaction(e,t,s){kt("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",y=15===(C=this.ti)?gl:14===C?ta:13===C?Yl:12===C?Gp:11===C?Nf:void Yt();var C;let O;return this.ui.runTransaction(e,u,y,j=>(O=new Rl(j,this.Cs?this.Cs.next():Gs.at),"readwrite-primary"===t?this._i(O).next(Z=>!!Z||this.wi(O)).next(Z=>{if(!Z)throw er(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new zt(wt.FAILED_PRECONDITION,Ds);return s(O)}).next(Z=>this.gi(O).next(()=>Z)):this.Di(O).next(()=>s(O)))).then(j=>(O.raiseOnCommittedEvent(),j))}Di(e){return zf(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)&&!this.yi(t)&&!(this.Xs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new zt(wt.FAILED_PRECONDITION,Yp)})}gi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zf(e).put("owner",t)}static C(){return co.C()}mi(e){const t=zf(e);return t.get("owner").next(s=>this.yi(s)?(kt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):bt.resolve())}Ti(e,t){const s=Date.now();return!(e<s-t||e>s&&(er(`Detected an update time that is in the future: ${e} > ${s}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.Pi();const t=/(?:Version|Mobile)\/1[456]/;(0,Ze.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}bi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var t;try{const s=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return kt("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return er("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Pi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){er("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch(e){}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function zf(i){return go(i,"owner")}function Yh(i){return go(i,"clientMetadata")}function Wf(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Ic{constructor(e,t,s,u){this.targetId=e,this.fromCache=t,this.Ci=s,this.xi=u}static Ni(e,t){let s=$r(),u=$r();for(const y of t.docChanges)switch(y.type){case 0:s=s.add(y.doc.key);break;case 1:u=u.add(y.doc.key)}return new Ic(e,t.fromCache,s,u)}}class Om{constructor(){this.ki=!1}initialize(e,t){this.$i=e,this.indexManager=t,this.ki=!0}getDocumentsMatchingQuery(e,t,s,u){return this.Mi(e,t).next(y=>y||this.Oi(e,t,u,s)).next(y=>y||this.Fi(e,t))}Mi(e,t){if(zo(t))return bt.resolve(null);let s=io(t);return this.indexManager.getIndexType(e,s).next(u=>0===u?null:(null!==t.limit&&1===u&&(t=xu(t,null,"F"),s=io(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(y=>{const C=$r(...y);return this.$i.getDocuments(e,C).next(O=>this.indexManager.getMinOffset(e,s).next(j=>{const Z=this.Bi(t,O);return this.Li(t,Z,C,j.readTime)?this.Mi(e,xu(t,null,"F")):this.qi(e,Z,t,j)}))})))}Oi(e,t,s,u){return zo(t)||u.isEqual(Gn.min())?this.Fi(e,t):this.$i.getDocuments(e,s).next(y=>{const C=this.Bi(t,y);return this.Li(t,C,s,u)?this.Fi(e,t):(un()<=Xe.in.DEBUG&&kt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),hl(t)),this.qi(e,C,t,qu(u,-1)))})}Bi(e,t){let s=new Ki(Mu(e));return t.forEach((u,y)=>{fl(e,y)&&(s=s.add(y))}),s}Li(e,t,s,u){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const y="F"===e.limitType?t.last():t.first();return!!y&&(y.hasPendingWrites||y.version.compareTo(u)>0)}Fi(e,t){return un()<=Xe.in.DEBUG&&kt("QueryEngine","Using full collection scan to execute query:",hl(t)),this.$i.getDocumentsMatchingQuery(e,t,bs.min())}qi(e,t,s,u){return this.$i.getDocumentsMatchingQuery(e,s,u).next(y=>(t.forEach(C=>{y=y.insert(C.key,C)}),y))}}class Zp{constructor(e,t,s,u){this.persistence=e,this.Ui=t,this.Tt=u,this.Ki=new Ns(hr),this.Gi=new cs(y=>ja(y),jl),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.$s=e.getBundleCache(),this.zi(s)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tm(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ki))}}function Kf(i,e,t,s){return new Zp(i,e,t,s)}function Pm(i,e){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,le.Z)(function*(i,e){const t=cn(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let u;return t.mutationQueue.getAllMutationBatches(s).next(y=>(u=y,t.zi(e),t.mutationQueue.getAllMutationBatches(s))).next(y=>{const C=[],O=[];let j=$r();for(const Z of u){C.push(Z.batchId);for(const ue of Z.mutations)j=j.add(ue.key)}for(const Z of y){O.push(Z.batchId);for(const ue of Z.mutations)j=j.add(ue.key)}return t.localDocuments.getDocuments(s,j).next(Z=>({Wi:Z,removedBatchIds:C,addedBatchIds:O}))})})}),Nm.apply(this,arguments)}function bv(i){const e=cn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ns.getLastRemoteSnapshotVersion(t))}function Qp(i,e,t){let s=$r(),u=$r();return t.forEach(y=>s=s.add(y)),e.getEntries(i,s).next(y=>{let C=As();return t.forEach((O,j)=>{const Z=y.get(O);j.isFoundDocument()!==Z.isFoundDocument()&&(u=u.add(O)),j.isNoDocument()&&j.version.isEqual(Gn.min())?(e.removeEntry(O,j.readTime),C=C.insert(O,j)):!Z.isValidDocument()||j.version.compareTo(Z.version)>0||0===j.version.compareTo(Z.version)&&Z.hasPendingWrites?(e.addEntry(j),C=C.insert(O,j)):kt("LocalStore","Ignoring outdated watch update for ",O,". Current version:",Z.version," Watch version:",j.version)}),{Hi:C,Ji:u}})}function d0(i,e){const t=cn(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function rh(i,e){const t=cn(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return t.Ns.getTargetData(s,e).next(y=>y?(u=y,bt.resolve(u)):t.Ns.allocateTargetId(s).next(C=>(u=new pc(e,C,0,s.currentSequenceNumber),t.Ns.addTargetData(s,u).next(()=>u))))}).then(s=>{const u=t.Ki.get(s.targetId);return(null===u||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.Ki=t.Ki.insert(s.targetId,s),t.Gi.set(e,s.targetId)),s})}function vu(i,e,t){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,le.Z)(function*(i,e,t){const s=cn(i),u=s.Ki.get(e),y=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",y,C=>s.persistence.referenceDelegate.removeTarget(C,u)))}catch(C){if(!Da(C))throw C;kt("LocalStore",`Failed to update sequence numbers for target ${e}: ${C}`)}s.Ki=s.Ki.remove(e),s.Gi.delete(u.target)}),Xp.apply(this,arguments)}function qh(i,e,t){const s=cn(i);let u=Gn.min(),y=$r();return s.persistence.runTransaction("Execute query","readonly",C=>function(O,j,Z){const ue=cn(O),Ye=ue.Gi.get(Z);return void 0!==Ye?bt.resolve(ue.Ki.get(Ye)):ue.Ns.getTargetData(j,Z)}(s,C,io(e)).next(O=>{if(O)return u=O.lastLimboFreeSnapshotVersion,s.Ns.getMatchingKeysForTargetId(C,O.targetId).next(j=>{y=j})}).next(()=>s.Ui.getDocumentsMatchingQuery(C,e,t?u:Gn.min(),t?y:$r())).next(O=>(Jp(s,hd(e),O),{documents:O,Yi:y})))}function Zh(i,e){const t=cn(i),s=cn(t.Ns),u=t.Ki.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",y=>s.ie(y,e).next(C=>C?C.target:null))}function km(i,e){const t=cn(i),s=t.Qi.get(e)||Gn.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.ji.getAllFromCollectionGroup(u,e,qu(s,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Jp(t,e,u),u))}function Jp(i,e,t){let s=i.Qi.get(e)||Gn.min();t.forEach((u,y)=>{y.readTime.compareTo(s)>0&&(s=y.readTime)}),i.Qi.set(e,s)}function eg(){return eg=(0,le.Z)(function*(i,e,t,s){const u=cn(i);let y=$r(),C=As();for(const Z of t){const ue=e.Zi(Z.metadata.name);Z.document&&(y=y.add(ue));const Ye=e.Xi(Z);Ye.setReadTime(e.tr(Z.metadata.readTime)),C=C.insert(ue,Ye)}const O=u.ji.newChangeBuffer({trackRemovals:!0}),j=yield rh(u,(Z=s,io(uu(Ur.fromString(`__bundle__/docs/${Z}`)))));var Z;return u.persistence.runTransaction("Apply bundle documents","readwrite",Z=>Qp(Z,O,C).next(ue=>(O.apply(Z),ue)).next(ue=>u.Ns.removeMatchingKeysForTargetId(Z,j.targetId).next(()=>u.Ns.addMatchingKeys(Z,y,j.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(Z,ue.Hi,ue.Ji)).next(()=>ue.Hi)))}),eg.apply(this,arguments)}function Sv(i,e){return tg.apply(this,arguments)}function tg(){return tg=(0,le.Z)(function*(i,e,t=$r()){const s=yield rh(i,io(Id(e.bundledQuery))),u=cn(i);return u.persistence.runTransaction("Save named query","readwrite",y=>{const C=xs(e.readTime);if(s.snapshotVersion.compareTo(C)>=0)return u.$s.saveNamedQuery(y,e);const O=s.withResumeToken(ys.EMPTY_BYTE_STRING,C);return u.Ki=u.Ki.insert(O.targetId,O),u.Ns.updateTargetData(y,O).next(()=>u.Ns.removeMatchingKeysForTargetId(y,s.targetId)).next(()=>u.Ns.addMatchingKeys(y,t,s.targetId)).next(()=>u.$s.saveNamedQuery(y,e))})}),tg.apply(this,arguments)}function Fm(i,e){return`firestore_clients_${i}_${e}`}function ng(i,e,t){let s=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function rg(i,e){return`firestore_targets_${i}_${e}`}class Qh{constructor(e,t,s,u){this.user=e,this.batchId=t,this.state=s,this.error=u}static er(e,t,s){const u=JSON.parse(s);let y,C="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return C&&u.error&&(C="string"==typeof u.error.message&&"string"==typeof u.error.code,C&&(y=new zt(u.error.code,u.error.message))),C?new Qh(e,t,u.state,y):(er("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ih{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static er(e,t){const s=JSON.parse(t);let u,y="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return y&&s.error&&(y="string"==typeof s.error.message&&"string"==typeof s.error.code,y&&(u=new zt(s.error.code,s.error.message))),y?new ih(e,s.state,u):(er("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static er(e,t){const s=JSON.parse(t);let u="object"==typeof s&&s.activeTargetIds instanceof Array,y=$c();for(let C=0;u&&C<s.activeTargetIds.length;++C)u=Cl(s.activeTargetIds[C]),y=y.add(s.activeTargetIds[C]);return u?new sh(e,y):(er("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Lm{constructor(e,t){this.clientId=e,this.onlineState=t}static er(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Lm(t.clientId,t.onlineState):(er("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Xh{constructor(){this.activeTargetIds=$c()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ig{constructor(e,t,s,u,y){this.window=e,this.Ys=t,this.persistenceKey=s,this.rr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new Ns(hr),this.started=!1,this.hr=[];const C=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=y,this.lr=Fm(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new Xh),this._r=new RegExp(`^firestore_clients_${C}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${C}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${C}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(O){return`firestore_bundle_loaded_v2_${O}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,le.Z)(function*(){const t=yield e.syncEngine.Si();for(const u of t){if(u===e.rr)continue;const y=e.getItem(Fm(e.persistenceKey,u));if(y){const C=sh.er(u,y);C&&(e.ar=e.ar.insert(C.clientId,C))}}e.pr();const s=e.storage.getItem(e.gr);if(s){const u=e.Ir(s);u&&e.Tr(u)}for(const u of e.hr)e.cr(u);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((s,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,t,s){this.Ar(e,t,s),this.Rr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(rg(this.persistenceKey,e));if(s){const u=ih.er(e,s);u&&(t=u.state)}}return this.Pr.sr(e),this.pr(),t}removeLocalQueryTarget(e){this.Pr.ir(e),this.pr()}isLocalQueryTarget(e){return this.Pr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(rg(this.persistenceKey,e))}updateQueryState(e,t,s){this.vr(e,t,s)}handleUserChange(e,t,s){t.forEach(u=>{this.Rr(u)}),this.currentUser=e,s.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return kt("SharedClientState","READ",e,t),t}setItem(e,t){kt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){kt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(kt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.lr)return void er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,le.Z)(function*(){if(t.started){if(null!==s.key)if(t._r.test(s.key)){if(null==s.newValue){const u=t.Sr(s.key);return t.Dr(u,null)}{const u=t.Cr(s.key,s.newValue);if(u)return t.Dr(u.clientId,u)}}else if(t.wr.test(s.key)){if(null!==s.newValue){const u=t.Nr(s.key,s.newValue);if(u)return t.kr(u)}}else if(t.mr.test(s.key)){if(null!==s.newValue){const u=t.$r(s.key,s.newValue);if(u)return t.Mr(u)}}else if(s.key===t.gr){if(null!==s.newValue){const u=t.Ir(s.newValue);if(u)return t.Tr(u)}}else if(s.key===t.dr){const u=function(y){let C=Gs.at;if(null!=y)try{const O=JSON.parse(y);mn("number"==typeof O),C=O}catch(O){er("SharedClientState","Failed to read sequence number from WebStorage",O)}return C}(s.newValue);u!==Gs.at&&t.sequenceNumberHandler(u)}else if(s.key===t.yr){const u=t.Or(s.newValue);yield Promise.all(u.map(y=>t.syncEngine.Fr(y)))}}else t.hr.push(s)}))}}get Pr(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.Pr.nr())}Ar(e,t,s){const u=new Qh(this.currentUser,e,t,s),y=ng(this.persistenceKey,this.currentUser,e);this.setItem(y,u.nr())}Rr(e){const t=ng(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,t,s){const u=rg(this.persistenceKey,e),y=new ih(e,t,s);this.setItem(u,y.nr())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}Sr(e){const t=this._r.exec(e);return t?t[1]:null}Cr(e,t){const s=this.Sr(e);return sh.er(s,t)}Nr(e,t){const s=this.wr.exec(e),u=Number(s[1]);return Qh.er(new pe(void 0!==s[2]?s[2]:null),u,t)}$r(e,t){const s=this.mr.exec(e),u=Number(s[1]);return ih.er(u,t)}Ir(e){return Lm.er(e)}Or(e){return JSON.parse(e)}kr(e){var t=this;return(0,le.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Br(e.batchId,e.state,e.error);kt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,t){const s=t?this.ar.insert(e,t):this.ar.remove(e),u=this.Er(this.ar),y=this.Er(s),C=[],O=[];return y.forEach(j=>{u.has(j)||C.push(j)}),u.forEach(j=>{y.has(j)||O.push(j)}),this.syncEngine.qr(C,O).then(()=>{this.ar=s})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let t=$c();return e.forEach((s,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class Av{constructor(){this.Ur=new Xh,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,t,s){this.Kr[e]=t}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Xh,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class oh{Gr(e){}shutdown(){}}class sg{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){kt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){kt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Yf=null;function qf(){return null===Yf?Yf=268435456+Math.round(2147483648*Math.random()):Yf++,"0x"+Yf.toString(16)}const xv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Mv{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}const na="WebChannelConnection";class ah extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,t,s,u,y){const C=qf(),O=this.fo(e,t);kt("RestConnection",`Sending RPC '${e}' ${C}:`,O,s);const j={};return this._o(j,u,y),this.wo(e,O,j,s).then(Z=>(kt("RestConnection",`Received RPC '${e}' ${C}: `,Z),Z),Z=>{throw dr("RestConnection",`RPC '${e}' ${C} failed with error: `,Z,"url: ",O,"request:",s),Z})}mo(e,t,s,u,y,C){return this.lo(e,t,s,u,y)}_o(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+_t,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,y)=>e[y]=u),s&&s.headers.forEach((u,y)=>e[y]=u)}fo(e,t){return`${this.co}/v1/${t}:${xv[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,t,s,u){const y=qf();return new Promise((C,O)=>{const j=new $;j.setWithCredentials(!0),j.listenOnce(Ca.COMPLETE,()=>{try{switch(j.getLastErrorCode()){case vl.NO_ERROR:const ue=j.getResponseJson();kt(na,`XHR for RPC '${e}' ${y} received:`,JSON.stringify(ue)),C(ue);break;case vl.TIMEOUT:kt(na,`RPC '${e}' ${y} timed out`),O(new zt(wt.DEADLINE_EXCEEDED,"Request time out"));break;case vl.HTTP_ERROR:const Ye=j.getStatus();if(kt(na,`RPC '${e}' ${y} failed with status:`,Ye,"response text:",j.getResponseText()),Ye>0){let It=j.getResponseJson();Array.isArray(It)&&(It=It[0]);const Ht=null==It?void 0:It.error;if(Ht&&Ht.status&&Ht.message){const nn=function(Rn){const ir=Rn.toLowerCase().replace(/_/g,"-");return Object.values(wt).indexOf(ir)>=0?ir:wt.UNKNOWN}(Ht.status);O(new zt(nn,Ht.message))}else O(new zt(wt.UNKNOWN,"Server responded with status "+j.getStatus()))}else O(new zt(wt.UNAVAILABLE,"Connection failed."));break;default:Yt()}}finally{kt(na,`RPC '${e}' ${y} completed.`)}});const Z=JSON.stringify(u);kt(na,`RPC '${e}' ${y} sending request:`,u),j.send(t,"POST",Z,s,15)})}yo(e,t,s){const u=qf(),y=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],C=aa(),O=Cu(),j={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(j.xmlHttpFactory=new N({})),this._o(j.initMessageHeaders,t,s),j.encodeInitMessageHeaders=!0;const Z=y.join("");kt(na,`Creating RPC '${e}' stream ${u}: ${Z}`,j);const ue=C.createWebChannel(Z,j);let Ye=!1,It=!1;const Ht=new Mv({Yr:Rn=>{It?kt(na,`Not sending because RPC '${e}' stream ${u} is closed:`,Rn):(Ye||(kt(na,`Opening RPC '${e}' stream ${u} transport.`),ue.open(),Ye=!0),kt(na,`RPC '${e}' stream ${u} sending:`,Rn),ue.send(Rn))},Zr:()=>ue.close()}),nn=(Rn,ir,ts)=>{Rn.listen(ir,vo=>{try{ts(vo)}catch(ai){setTimeout(()=>{throw ai},0)}})};return nn(ue,K.EventType.OPEN,()=>{It||kt(na,`RPC '${e}' stream ${u} transport opened.`)}),nn(ue,K.EventType.CLOSE,()=>{It||(It=!0,kt(na,`RPC '${e}' stream ${u} transport closed`),Ht.oo())}),nn(ue,K.EventType.ERROR,Rn=>{It||(It=!0,dr(na,`RPC '${e}' stream ${u} transport errored:`,Rn),Ht.oo(new zt(wt.UNAVAILABLE,"The operation could not be completed")))}),nn(ue,K.EventType.MESSAGE,Rn=>{var ir;if(!It){const ts=Rn.data[0];mn(!!ts);const ai=ts.error||(null===(ir=ts[0])||void 0===ir?void 0:ir.error);if(ai){kt(na,`RPC '${e}' stream ${u} received error:`,ai);const _o=ai.status;let Ri=function(ra){const id=us[ra];if(void 0!==id)return Nu(id)}(_o),Fi=ai.message;void 0===Ri&&(Ri=wt.INTERNAL,Fi="Unknown error status: "+_o+" with message "+ai.message),It=!0,Ht.oo(new zt(Ri,Fi)),ue.close()}else kt(na,`RPC '${e}' stream ${u} received:`,ts),Ht.uo(ts)}}),nn(O,fa.STAT_EVENT,Rn=>{Rn.stat===el.PROXY?kt(na,`RPC '${e}' stream ${u} detected buffering proxy`):Rn.stat===el.NOPROXY&&kt(na,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{Ht.ro()},0),Ht}}function Zf(){return typeof window<"u"?window:null}function Wc(){return typeof document<"u"?document:null}function Td(i){return new _a(i,!0)}class lh{constructor(e,t,s=1e3,u=1.5,y=6e4){this.Ys=e,this.timerId=t,this.po=s,this.Io=u,this.To=y,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(e){this.cancel();const t=Math.floor(this.Eo+this.bo()),s=Math.max(0,Date.now()-this.Ro),u=Math.max(0,t-s);u>0&&kt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Eo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,u,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}class og{constructor(e,t,s,u,y,C,O,j){this.Ys=e,this.So=s,this.Do=u,this.connection=y,this.authCredentialsProvider=C,this.appCheckCredentialsProvider=O,this.listener=j,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new lh(e,t)}$o(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,le.Z)(function*(){e.$o()&&(yield e.close(0))})()}Fo(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,le.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,t){var s=this;return(0,le.Z)(function*(){s.Uo(),s.Ko(),s.ko.cancel(),s.Co++,4!==e?s.ko.reset():t&&t.code===wt.RESOURCE_EXHAUSTED?(er(t.toString()),er("Using maximum backoff delay to prevent overloading the backend."),s.ko.Po()):t&&t.code===wt.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Go(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.no(t)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),t=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,u])=>{this.Co===t&&this.jo(s,u)},s=>{e(()=>{const u=new zt(wt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.zo(u)})})}jo(e,t){const s=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr(()=>{s(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(u=>{s(()=>this.zo(u))}),this.stream.onMessage(u=>{s(()=>this.onMessage(u))})}Oo(){var e=this;this.state=5,this.ko.vo((0,le.Z)(function*(){e.state=0,e.start()}))}zo(e){return kt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return t=>{this.Ys.enqueueAndForget(()=>this.Co===e?t():(kt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ag extends og{constructor(e,t,s,u,y,C){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,u,C),this.Tt=y}Wo(e,t){return this.connection.yo("Listen",e,t)}onMessage(e){this.ko.reset();const t=function vn(i,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(j=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===j?1:"REMOVE"===j?2:"CURRENT"===j?3:"RESET"===j?4:Yt(),u=e.targetChange.targetIds||[],y=function(j,Z){return j.yt?(mn(void 0===Z||"string"==typeof Z),ys.fromBase64String(Z||"")):(mn(void 0===Z||Z instanceof Uint8Array),ys.fromUint8Array(Z||new Uint8Array))}(i,e.targetChange.resumeToken),C=e.targetChange.cause,O=C&&function(j){const Z=void 0===j.code?wt.UNKNOWN:Nu(j.code);return new zt(Z,j.message||"")}(C);t=new pu(s,u,y,O||null)}else if("documentChange"in e){const s=e.documentChange,u=b(i,s.document.name),y=xs(s.document.updateTime),C=s.document.createTime?xs(s.document.createTime):Gn.min(),O=new Ss({mapValue:{fields:s.document.fields}}),j=_i.newFoundDocument(u,y,C,O);t=new lc(s.targetIds||[],s.removedTargetIds||[],j.key,j)}else if("documentDelete"in e){const s=e.documentDelete,u=b(i,s.document),y=s.readTime?xs(s.readTime):Gn.min(),C=_i.newNoDocument(u,y);t=new lc([],s.removedTargetIds||[],C.key,C)}else if("documentRemove"in e){const s=e.documentRemove,u=b(i,s.document);t=new lc([],s.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Yt();{const s=e.filter,y=new xf(s.count||0);t=new Ml(s.targetId,y)}}var j;return t}(this.Tt,e),s=function(u){if(!("targetChange"in u))return Gn.min();const y=u.targetChange;return y.targetIds&&y.targetIds.length?Gn.min():y.readTime?xs(y.readTime):Gn.min()}(e);return this.listener.Ho(t,s)}Jo(e){const t={};t.database=M(this.Tt),t.addTarget=function(u,y){let C;const O=y.target;return C=au(O)?{documents:Fs(u,O)}:{query:Ea(u,O)},C.targetId=y.targetId,y.resumeToken.approximateByteSize()>0?C.resumeToken=Vc(u,y.resumeToken):y.snapshotVersion.compareTo(Gn.min())>0&&(C.readTime=Ha(u,y.snapshotVersion.toTimestamp())),C}(this.Tt,e);const s=function ka(i,e){const t=function(s,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Yt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.qo(t)}Yo(e){const t={};t.database=M(this.Tt),t.removeTarget=e,this.qo(t)}}class lg extends og{constructor(e,t,s,u,y,C){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,u,C),this.Tt=y,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,t){return this.connection.yo("Write",e,t)}onMessage(e){if(mn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const t=function yr(i,e){return i&&i.length>0?(mn(void 0!==e),i.map(t=>function(s,u){let y=xs(s.updateTime?s.updateTime:u);return y.isEqual(Gn.min())&&(y=xs(u)),new ic(y,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=xs(e.commitTime);return this.listener.eu(s,t)}return mn(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=M(this.Tt),this.qo(e)}tu(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Un(this.Tt,s))};this.qo(t)}}class ug extends class{}{constructor(e,t,s,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.Tt=u,this.iu=!1}ru(){if(this.iu)throw new zt(wt.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,t,s){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,y])=>this.connection.lo(e,t,s,u,y)).catch(u=>{throw"FirebaseError"===u.name?(u.code===wt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new zt(wt.UNKNOWN,u.toString())})}mo(e,t,s,u){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([y,C])=>this.connection.mo(e,t,s,y,C,u)).catch(y=>{throw"FirebaseError"===y.name?(y.code===wt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),y):new zt(wt.UNKNOWN,y.toString())})}terminate(){this.iu=!0}}class Rv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(er(t),this.cu=!1):kt("OnlineStateTracker",t)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class Ov{constructor(e,t,s,u,y){var C=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=y,this.yu.Gr(O=>{s.enqueueAndForget((0,le.Z)(function*(){var j;_u(C)&&(kt("RemoteStore","Restarting streams for network reachability change."),yield(j=(0,le.Z)(function*(Z){const ue=cn(Z);ue.mu.add(4),yield Sd(ue),ue.pu.set("Unknown"),ue.mu.delete(4),yield uh(ue)}),function(Z){return j.apply(this,arguments)})(C))}))}),this.pu=new Rv(s,u)}}function uh(i){return cg.apply(this,arguments)}function cg(){return cg=(0,le.Z)(function*(i){if(_u(i))for(const e of i.gu)yield e(!0)}),cg.apply(this,arguments)}function Sd(i){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,le.Z)(function*(i){for(const e of i.gu)yield e(!1)}),Qf.apply(this,arguments)}function Xf(i,e){const t=cn(i);t.wu.has(e.targetId)||(t.wu.set(e.targetId,e),Bm(t)?hg(t):Kc(t).Mo()&&Wa(t,e))}function ef(i,e){const t=cn(i),s=Kc(t);t.wu.delete(e),s.Mo()&&dg(t,e),0===t.wu.size&&(s.Mo()?s.Bo():_u(t)&&t.pu.set("Unknown"))}function Wa(i,e){i.Iu.Ot(e.targetId),Kc(i).Jo(e)}function dg(i,e){i.Iu.Ot(e),Kc(i).Yo(e)}function hg(i){i.Iu=new Wo({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>i.wu.get(e)||null}),Kc(i).start(),i.pu.au()}function Bm(i){return _u(i)&&!Kc(i).$o()&&i.wu.size>0}function _u(i){return 0===cn(i).mu.size}function fg(i){i.Iu=void 0}function Pv(i){return pg.apply(this,arguments)}function pg(){return pg=(0,le.Z)(function*(i){i.wu.forEach((e,t)=>{Wa(i,e)})}),pg.apply(this,arguments)}function Nv(i,e){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,le.Z)(function*(i,e){fg(i),Bm(i)?(i.pu.fu(e),hg(i)):i.pu.set("Unknown")}),Jf.apply(this,arguments)}function kv(i,e,t){return gg.apply(this,arguments)}function gg(){return gg=(0,le.Z)(function*(i,e,t){if(i.pu.set("Online"),e instanceof pu&&2===e.state&&e.cause)try{yield(s=(0,le.Z)(function*(u,y){const C=y.cause;for(const O of y.targetIds)u.wu.has(O)&&(yield u.remoteSyncer.rejectListen(O,C),u.wu.delete(O),u.Iu.removeTarget(O))}),function(u,y){return s.apply(this,arguments)})(i,e)}catch(s){kt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield ch(i,s)}else if(e instanceof lc?i.Iu.Qt(e):e instanceof Ml?i.Iu.Zt(e):i.Iu.Wt(e),!t.isEqual(Gn.min()))try{const s=yield bv(i.localStore);t.compareTo(s)>=0&&(yield function(u,y){const C=u.Iu.ee(y);return C.targetChanges.forEach((O,j)=>{if(O.resumeToken.approximateByteSize()>0){const Z=u.wu.get(j);Z&&u.wu.set(j,Z.withResumeToken(O.resumeToken,y))}}),C.targetMismatches.forEach(O=>{const j=u.wu.get(O);if(!j)return;u.wu.set(O,j.withResumeToken(ys.EMPTY_BYTE_STRING,j.snapshotVersion)),dg(u,O);const Z=new pc(j.target,O,1,j.sequenceNumber);Wa(u,Z)}),u.remoteSyncer.applyRemoteEvent(C)}(i,t))}catch(s){kt("RemoteStore","Failed to raise snapshot:",s),yield ch(i,s)}var s}),gg.apply(this,arguments)}function ch(i,e,t){return mg.apply(this,arguments)}function mg(){return mg=(0,le.Z)(function*(i,e,t){if(!Da(e))throw e;i.mu.add(1),yield Sd(i),i.pu.set("Offline"),t||(t=()=>bv(i.localStore)),i.asyncQueue.enqueueRetryable((0,le.Z)(function*(){kt("RemoteStore","Retrying IndexedDB access"),yield t(),i.mu.delete(1),yield uh(i)}))}),mg.apply(this,arguments)}function Vm(i,e){return e().catch(t=>ch(i,t,e))}function dh(i){return yg.apply(this,arguments)}function yg(){return yg=(0,le.Z)(function*(i){const e=cn(i),t=Ad(e);let s=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;Fv(e);)try{const u=yield d0(e.localStore,s);if(null===u){0===e._u.length&&t.Bo();break}s=u.batchId,ju(e,u)}catch(u){yield ch(e,u)}ep(e)&&Um(e)}),yg.apply(this,arguments)}function Fv(i){return _u(i)&&i._u.length<10}function ju(i,e){i._u.push(e);const t=Ad(i);t.Mo()&&t.Xo&&t.tu(e.mutations)}function ep(i){return _u(i)&&!Ad(i).$o()&&i._u.length>0}function Um(i){Ad(i).start()}function Lv(i){return tp.apply(this,arguments)}function tp(){return tp=(0,le.Z)(function*(i){Ad(i).su()}),tp.apply(this,arguments)}function $v(i){return vg.apply(this,arguments)}function vg(){return vg=(0,le.Z)(function*(i){const e=Ad(i);for(const t of i._u)e.tu(t.mutations)}),vg.apply(this,arguments)}function Bv(i,e,t){return tf.apply(this,arguments)}function tf(){return tf=(0,le.Z)(function*(i,e,t){const s=i._u.shift(),u=Qd.from(s,e,t);yield Vm(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield dh(i)}),tf.apply(this,arguments)}function Vv(i,e){return _g.apply(this,arguments)}function _g(){return _g=(0,le.Z)(function*(i,e){var t;e&&Ad(i).Xo&&(yield(t=(0,le.Z)(function*(s,u){if(Pu(y=u.code)&&y!==wt.ABORTED){const C=s._u.shift();Ad(s).Fo(),yield Vm(s,()=>s.remoteSyncer.rejectFailedWrite(C.batchId,u)),yield dh(s)}var y}),function(s,u){return t.apply(this,arguments)})(i,e)),ep(i)&&Um(i)}),_g.apply(this,arguments)}function nf(i,e){return rf.apply(this,arguments)}function rf(){return rf=(0,le.Z)(function*(i,e){const t=cn(i);t.asyncQueue.verifyOperationInProgress(),kt("RemoteStore","RemoteStore received new credentials");const s=_u(t);t.mu.add(3),yield Sd(t),s&&t.pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.mu.delete(3),yield uh(t)}),rf.apply(this,arguments)}function hh(i,e){return jm.apply(this,arguments)}function jm(){return jm=(0,le.Z)(function*(i,e){const t=cn(i);e?(t.mu.delete(2),yield uh(t)):e||(t.mu.add(2),yield Sd(t),t.pu.set("Unknown"))}),jm.apply(this,arguments)}function Kc(i){return i.Tu||(i.Tu=function(e,t,s){const u=cn(e);return u.ru(),new ag(t,u.connection,u.authCredentials,u.appCheckCredentials,u.Tt,s)}(i.datastore,i.asyncQueue,{Xr:Pv.bind(null,i),no:Nv.bind(null,i),Ho:kv.bind(null,i)}),i.gu.push(function(){var e=(0,le.Z)(function*(t){t?(i.Tu.Fo(),Bm(i)?hg(i):i.pu.set("Unknown")):(yield i.Tu.stop(),fg(i))});return function(t){return e.apply(this,arguments)}}())),i.Tu}function Ad(i){return i.Eu||(i.Eu=function(e,t,s){const u=cn(e);return u.ru(),new lg(t,u.connection,u.authCredentials,u.appCheckCredentials,u.Tt,s)}(i.datastore,i.asyncQueue,{Xr:Lv.bind(null,i),no:Vv.bind(null,i),nu:$v.bind(null,i),eu:Bv.bind(null,i)}),i.gu.push(function(){var e=(0,le.Z)(function*(t){t?(i.Eu.Fo(),yield dh(i)):(yield i.Eu.stop(),i._u.length>0&&(kt("RemoteStore",`Stopping write stream with ${i._u.length} pending writes`),i._u=[]))});return function(t){return e.apply(this,arguments)}}())),i.Eu}class np{constructor(e,t,s,u,y){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=u,this.removalCallback=y,this.deferred=new wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(C=>{})}static createAndSchedule(e,t,s,u,y){const C=Date.now()+s,O=new np(e,t,C,u,y);return O.start(s),O}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new zt(wt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xd(i,e){if(er("AsyncQueue",`${e}: ${i}`),Da(i))return new zt(wt.UNAVAILABLE,`${e}: ${i}`);throw i}class Md{constructor(e){this.comparator=e?(t,s)=>e(t,s)||pn.comparator(t.key,s.key):(t,s)=>pn.comparator(t.key,s.key),this.keyedMap=so(),this.sortedSet=new Ns(this.comparator)}static emptySet(e){return new Md(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Md)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,y=s.getNext().key;if(!u.isEqual(y))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Md;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Eg{constructor(){this.Au=new Ns(pn.comparator)}track(e){const t=e.doc.key,s=this.Au.get(t);s?0!==e.type&&3===s.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==s.type?this.Au=this.Au.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Au=this.Au.remove(t):1===e.type&&2===s.type?this.Au=this.Au.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):Yt():this.Au=this.Au.insert(t,e)}Ru(){const e=[];return this.Au.inorderTraversal((t,s)=>{e.push(s)}),e}}class Yc{constructor(e,t,s,u,y,C,O,j,Z){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=u,this.mutatedKeys=y,this.fromCache=C,this.syncStateChanged=O,this.excludesMetadataChanges=j,this.hasCachedResults=Z}static fromInitialDocuments(e,t,s,u,y){const C=[];return t.forEach(O=>{C.push({type:0,doc:O})}),new Yc(e,t,Md.emptySet(t),C,s,u,!0,!1,y)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==s[u].type||!t[u].doc.isEqual(s[u].doc))return!1;return!0}}class wc{constructor(){this.Pu=void 0,this.listeners=[]}}class rp{constructor(){this.queries=new cs(e=>Wd(e),nc),this.onlineState="Unknown",this.vu=new Set}}function fh(i,e){return Rd.apply(this,arguments)}function Rd(){return Rd=(0,le.Z)(function*(i,e){const t=cn(i),s=e.query;let u=!1,y=t.queries.get(s);if(y||(u=!0,y=new wc),u)try{y.Pu=yield t.onListen(s)}catch(C){const O=xd(C,`Initialization of query '${hl(e.query)}' failed`);return void e.onError(O)}t.queries.set(s,y),y.listeners.push(e),e.bu(t.onlineState),y.Pu&&e.Vu(y.Pu)&&wg(t)}),Rd.apply(this,arguments)}function Ig(i,e){return ip.apply(this,arguments)}function ip(){return ip=(0,le.Z)(function*(i,e){const t=cn(i),s=e.query;let u=!1;const y=t.queries.get(s);if(y){const C=y.listeners.indexOf(e);C>=0&&(y.listeners.splice(C,1),u=0===y.listeners.length)}if(u)return t.queries.delete(s),t.onUnlisten(s)}),ip.apply(this,arguments)}function Hm(i,e){const t=cn(i);let s=!1;for(const u of e){const C=t.queries.get(u.query);if(C){for(const O of C.listeners)O.Vu(u)&&(s=!0);C.Pu=u}}s&&wg(t)}function Uv(i,e,t){const s=cn(i),u=s.queries.get(e);if(u)for(const y of u.listeners)y.onError(t);s.queries.delete(e)}function wg(i){i.vu.forEach(e=>{e.next()})}class Od{constructor(e,t,s){this.query=e,this.Su=t,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=s||{}}Vu(e){if(!this.options.includeMetadataChanges){const s=[];for(const u of e.docChanges)3!==u.type&&s.push(u);e=new Yc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Du?this.xu(e)&&(this.Su.next(e),t=!0):this.Nu(e,this.onlineState)&&(this.ku(e),t=!0),this.Cu=e,t}onError(e){this.Su.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}Nu(e,t){return!e.fromCache||(!this.options.$u||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=Yc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class jv{constructor(e,t){this.Mu=e,this.byteLength=t}Ou(){return"metadata"in this.Mu}}class Hv{constructor(e){this.Tt=e}Zi(e){return b(this.Tt,e)}Xi(e){return e.metadata.exists?dt(this.Tt,e.document,!1):_i.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return xs(e)}}class Gv{constructor(e,t,s){this.Fu=e,this.localStore=t,this.Tt=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Gm(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;const s=Ur.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Lu(e){const t=new Map,s=new Hv(this.Tt);for(const u of e)if(u.metadata.queries){const y=s.Zi(u.metadata.name);for(const C of u.metadata.queries){const O=(t.get(C)||$r()).add(y);t.set(C,O)}}return t}complete(){var e=this;return(0,le.Z)(function*(){const t=yield function Tv(i,e,t,s){return eg.apply(this,arguments)}(e.localStore,new Hv(e.Tt),e.documents,e.Fu.id),s=e.Lu(e.documents);for(const u of e.queries)yield Sv(e.localStore,u,s.get(u.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:t}})()}}function Gm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class zm{constructor(e){this.key=e}}class Wm{constructor(e){this.key=e}}class Km{constructor(e,t){this.query=e,this.Ku=t,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=$r(),this.mutatedKeys=$r(),this.ju=Mu(e),this.zu=new Md(this.ju)}get Wu(){return this.Ku}Hu(e,t){const s=t?t.Ju:new Eg,u=t?t.zu:this.zu;let y=t?t.mutatedKeys:this.mutatedKeys,C=u,O=!1;const j="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,Z="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((ue,Ye)=>{const It=u.get(ue),Ht=fl(this.query,Ye)?Ye:null,nn=!!It&&this.mutatedKeys.has(It.key),Rn=!!Ht&&(Ht.hasLocalMutations||this.mutatedKeys.has(Ht.key)&&Ht.hasCommittedMutations);let ir=!1;It&&Ht?It.data.isEqual(Ht.data)?nn!==Rn&&(s.track({type:3,doc:Ht}),ir=!0):this.Yu(It,Ht)||(s.track({type:2,doc:Ht}),ir=!0,(j&&this.ju(Ht,j)>0||Z&&this.ju(Ht,Z)<0)&&(O=!0)):!It&&Ht?(s.track({type:0,doc:Ht}),ir=!0):It&&!Ht&&(s.track({type:1,doc:It}),ir=!0,(j||Z)&&(O=!0)),ir&&(Ht?(C=C.add(Ht),y=Rn?y.add(ue):y.delete(ue)):(C=C.delete(ue),y=y.delete(ue)))}),null!==this.query.limit)for(;C.size>this.query.limit;){const ue="F"===this.query.limitType?C.last():C.first();C=C.delete(ue.key),y=y.delete(ue.key),s.track({type:1,doc:ue})}return{zu:C,Ju:s,Li:O,mutatedKeys:y}}Yu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const u=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const y=e.Ju.Ru();y.sort((Z,ue)=>function(Ye,It){const Ht=nn=>{switch(nn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yt()}};return Ht(Ye)-Ht(It)}(Z.type,ue.type)||this.ju(Z.doc,ue.doc)),this.Zu(s);const C=t?this.Xu():[],O=0===this.Qu.size&&this.current?1:0,j=O!==this.Gu;return this.Gu=O,0!==y.length||j?{snapshot:new Yc(this.query,e.zu,u,y,e.mutatedKeys,0===O,j,!1,!!s&&s.resumeToken.approximateByteSize()>0),tc:C}:{tc:C}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new Eg,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(t=>this.Ku=this.Ku.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ku=this.Ku.delete(t)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=$r(),this.zu.forEach(s=>{this.ec(s.key)&&(this.Qu=this.Qu.add(s.key))});const t=[];return e.forEach(s=>{this.Qu.has(s)||t.push(new Wm(s))}),this.Qu.forEach(s=>{e.has(s)||t.push(new zm(s))}),t}nc(e){this.Ku=e.Yi,this.Qu=$r();const t=this.Hu(e.documents);return this.applyChanges(t,!0)}sc(){return Yc.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class zv{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Wv{constructor(e){this.key=e,this.ic=!1}}class Ym{constructor(e,t,s,u,y,C){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=u,this.currentUser=y,this.maxConcurrentLimboResolutions=C,this.rc={},this.oc=new cs(O=>Wd(O),nc),this.uc=new Map,this.cc=new Set,this.ac=new Ns(pn.comparator),this.hc=new Map,this.lc=new Wp,this.fc={},this.dc=new Map,this._c=ml.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function Cg(i,e){return bg.apply(this,arguments)}function bg(){return bg=(0,le.Z)(function*(i,e){const t=Fg(i);let s,u;const y=t.oc.get(e);if(y)s=y.targetId,t.sharedClientState.addLocalQueryTarget(s),u=y.view.sc();else{const C=yield rh(t.localStore,io(e));t.isPrimaryClient&&Xf(t.remoteStore,C);const O=t.sharedClientState.addLocalQueryTarget(C.targetId);s=C.targetId,u=yield sf(t,e,s,"current"===O,C.resumeToken)}return u}),bg.apply(this,arguments)}function sf(i,e,t,s,u){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,le.Z)(function*(i,e,t,s,u){i.mc=(Ye,It,Ht)=>{return(nn=(0,le.Z)(function*(Rn,ir,ts,vo){let ai=ir.view.Hu(ts);ai.Li&&(ai=yield qh(Rn.localStore,ir.query,!1).then(({documents:Fi})=>ir.view.Hu(Fi,ai)));const _o=vo&&vo.targetChanges.get(ir.targetId),Ri=ir.view.applyChanges(ai,Rn.isPrimaryClient,_o);return da(Rn,ir.targetId,Ri.tc),Ri.snapshot}),function(Rn,ir,ts,vo){return nn.apply(this,arguments)})(i,Ye,It,Ht);var nn};const y=yield qh(i.localStore,e,!0),C=new Km(e,y.Yi),O=C.Hu(y.documents),j=fu.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState,u),Z=C.applyChanges(O,i.isPrimaryClient,j);da(i,t,Z.tc);const ue=new zv(e,t,C);return i.oc.set(e,ue),i.uc.has(t)?i.uc.get(t).push(e):i.uc.set(t,[e]),Z.snapshot}),Dg.apply(this,arguments)}function Kv(i,e){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,le.Z)(function*(i,e){const t=cn(i),s=t.oc.get(e),u=t.uc.get(s.targetId);if(u.length>1)return t.uc.set(s.targetId,u.filter(y=>!nc(y,e))),void t.oc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield vu(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),ef(t.remoteStore,s.targetId),Ka(t,s.targetId)}).catch(Ts))):(Ka(t,s.targetId),yield vu(t.localStore,s.targetId,!0))}),Tg.apply(this,arguments)}function Sg(){return Sg=(0,le.Z)(function*(i,e,t){const s=up(i);try{const u=yield function(y,C){const O=cn(y),j=Ni.now(),Z=C.reduce((It,Ht)=>It.add(Ht.key),$r());let ue,Ye;return O.persistence.runTransaction("Locally write mutations","readwrite",It=>{let Ht=As(),nn=$r();return O.ji.getEntries(It,Z).next(Rn=>{Ht=Rn,Ht.forEach((ir,ts)=>{ts.isValidDocument()||(nn=nn.add(ir))})}).next(()=>O.localDocuments.getOverlayedDocuments(It,Ht)).next(Rn=>{ue=Rn;const ir=[];for(const ts of C){const vo=sc(ts,ue.get(ts.key).overlayedDocument);null!=vo&&ir.push(new Ma(ts.key,vo,Ju(vo.value.mapValue),Xi.exists(!0)))}return O.mutationQueue.addMutationBatch(It,j,ir,C)}).next(Rn=>{Ye=Rn;const ir=Rn.applyToLocalDocumentSet(ue,nn);return O.documentOverlayCache.saveOverlays(It,Rn.batchId,ir)})}).then(()=>({batchId:Ye.batchId,changes:ks(ue)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(u.batchId),function(y,C,O){let j=y.fc[y.currentUser.toKey()];j||(j=new Ns(hr)),j=j.insert(C,O),y.fc[y.currentUser.toKey()]=j}(s,u.batchId,t),yield Ko(s,u.changes),yield dh(s.remoteStore)}catch(u){const y=xd(u,"Failed to persist write");t.reject(y)}}),Sg.apply(this,arguments)}function qm(i,e){return Ag.apply(this,arguments)}function Ag(){return Ag=(0,le.Z)(function*(i,e){const t=cn(i);try{const s=yield function Dv(i,e){const t=cn(i),s=e.snapshotVersion;let u=t.Ki;return t.persistence.runTransaction("Apply remote event","readwrite-primary",y=>{const C=t.ji.newChangeBuffer({trackRemovals:!0});u=t.Ki;const O=[];e.targetChanges.forEach((ue,Ye)=>{const It=u.get(Ye);if(!It)return;O.push(t.Ns.removeMatchingKeys(y,ue.removedDocuments,Ye).next(()=>t.Ns.addMatchingKeys(y,ue.addedDocuments,Ye)));let Ht=It.withSequenceNumber(y.currentSequenceNumber);var nn,Rn,ir;e.targetMismatches.has(Ye)?Ht=Ht.withResumeToken(ys.EMPTY_BYTE_STRING,Gn.min()).withLastLimboFreeSnapshotVersion(Gn.min()):ue.resumeToken.approximateByteSize()>0&&(Ht=Ht.withResumeToken(ue.resumeToken,s)),u=u.insert(Ye,Ht),Rn=Ht,ir=ue,(0===(nn=It).resumeToken.approximateByteSize()||Rn.snapshotVersion.toMicroseconds()-nn.snapshotVersion.toMicroseconds()>=3e8||ir.addedDocuments.size+ir.modifiedDocuments.size+ir.removedDocuments.size>0)&&O.push(t.Ns.updateTargetData(y,Ht))});let j=As(),Z=$r();if(e.documentUpdates.forEach(ue=>{e.resolvedLimboDocuments.has(ue)&&O.push(t.persistence.referenceDelegate.updateLimboDocument(y,ue))}),O.push(Qp(y,C,e.documentUpdates).next(ue=>{j=ue.Hi,Z=ue.Ji})),!s.isEqual(Gn.min())){const ue=t.Ns.getLastRemoteSnapshotVersion(y).next(Ye=>t.Ns.setTargetsMetadata(y,y.currentSequenceNumber,s));O.push(ue)}return bt.waitFor(O).next(()=>C.apply(y)).next(()=>t.localDocuments.getLocalViewOfDocuments(y,j,Z)).next(()=>j)}).then(y=>(t.Ki=u,y))}(t.localStore,e);e.targetChanges.forEach((u,y)=>{const C=t.hc.get(y);C&&(mn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?C.ic=!0:u.modifiedDocuments.size>0?mn(C.ic):u.removedDocuments.size>0&&(mn(C.ic),C.ic=!1))}),yield Ko(t,s,e)}catch(s){yield Ts(s)}}),Ag.apply(this,arguments)}function xg(i,e,t){const s=cn(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const u=[];s.oc.forEach((y,C)=>{const O=C.view.bu(e);O.snapshot&&u.push(O.snapshot)}),function(y,C){const O=cn(y);O.onlineState=C;let j=!1;O.queries.forEach((Z,ue)=>{for(const Ye of ue.listeners)Ye.bu(C)&&(j=!0)}),j&&wg(O)}(s.eventManager,e),u.length&&s.rc.Ho(u),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function Zm(i,e,t){return Mg.apply(this,arguments)}function Mg(){return Mg=(0,le.Z)(function*(i,e,t){const s=cn(i);s.sharedClientState.updateQueryState(e,"rejected",t);const u=s.hc.get(e),y=u&&u.key;if(y){let C=new Ns(pn.comparator);C=C.insert(y,_i.newNoDocument(y,Gn.min()));const O=$r().add(y),j=new Oa(Gn.min(),new Map,new Ki(hr),C,O);yield qm(s,j),s.ac=s.ac.remove(y),s.hc.delete(e),mh(s)}else yield vu(s.localStore,e,!1).then(()=>Ka(s,e,t)).catch(Ts)}),Mg.apply(this,arguments)}function h0(i,e){return sp.apply(this,arguments)}function sp(){return sp=(0,le.Z)(function*(i,e){const t=cn(i),s=e.batch.batchId;try{const u=yield function c0(i,e){const t=cn(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=e.batch.keys(),y=t.ji.newChangeBuffer({trackRemovals:!0});return function(C,O,j,Z){const ue=j.batch,Ye=ue.keys();let It=bt.resolve();return Ye.forEach(Ht=>{It=It.next(()=>Z.getEntry(O,Ht)).next(nn=>{const Rn=j.docVersions.get(Ht);mn(null!==Rn),nn.version.compareTo(Rn)<0&&(ue.applyToRemoteDocument(nn,j),nn.isValidDocument()&&(nn.setReadTime(j.commitVersion),Z.addEntry(nn)))})}),It.next(()=>C.mutationQueue.removeMutationBatch(O,ue))}(t,s,e,y).next(()=>y.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,u,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(C){let O=$r();for(let j=0;j<C.mutationResults.length;++j)C.mutationResults[j].transformResults.length>0&&(O=O.add(C.batch.mutations[j].key));return O}(e))).next(()=>t.localDocuments.getDocuments(s,u))})}(t.localStore,e);Og(t,s,null),af(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Ko(t,u)}catch(u){yield Ts(u)}}),sp.apply(this,arguments)}function f0(i,e,t){return ph.apply(this,arguments)}function ph(){return ph=(0,le.Z)(function*(i,e,t){const s=cn(i);try{const u=yield function(y,C){const O=cn(y);return O.persistence.runTransaction("Reject batch","readwrite-primary",j=>{let Z;return O.mutationQueue.lookupMutationBatch(j,C).next(ue=>(mn(null!==ue),Z=ue.keys(),O.mutationQueue.removeMutationBatch(j,ue))).next(()=>O.mutationQueue.performConsistencyCheck(j)).next(()=>O.documentOverlayCache.removeOverlaysForBatchId(j,Z,C)).next(()=>O.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(j,Z)).next(()=>O.localDocuments.getDocuments(j,Z))})}(s.localStore,e);Og(s,e,t),af(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Ko(s,u)}catch(u){yield Ts(u)}}),ph.apply(this,arguments)}function Rg(){return Rg=(0,le.Z)(function*(i,e){const t=cn(i);_u(t.remoteStore)||kt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(y){const C=cn(y);return C.persistence.runTransaction("Get highest unacknowledged batch id","readonly",O=>C.mutationQueue.getHighestUnacknowledgedBatchId(O))}(t.localStore);if(-1===s)return void e.resolve();const u=t.dc.get(s)||[];u.push(e),t.dc.set(s,u)}catch(s){const u=xd(s,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Rg.apply(this,arguments)}function af(i,e){(i.dc.get(e)||[]).forEach(t=>{t.resolve()}),i.dc.delete(e)}function Og(i,e,t){const s=cn(i);let u=s.fc[s.currentUser.toKey()];if(u){const y=u.get(e);y&&(t?y.reject(t):y.resolve(),u=u.remove(e)),s.fc[s.currentUser.toKey()]=u}}function Ka(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.uc.get(e))i.oc.delete(s),t&&i.rc.gc(s,t);i.uc.delete(e),i.isPrimaryClient&&i.lc.ds(e).forEach(s=>{i.lc.containsKey(s)||gh(i,s)})}function gh(i,e){i.cc.delete(e.path.canonicalString());const t=i.ac.get(e);null!==t&&(ef(i.remoteStore,t),i.ac=i.ac.remove(e),i.hc.delete(t),mh(i))}function da(i,e,t){for(const s of t)s instanceof zm?(i.lc.addReference(s.key,e),Pd(i,s)):s instanceof Wm?(kt("SyncEngine","Document no longer in limbo: "+s.key),i.lc.removeReference(s.key,e),i.lc.containsKey(s.key)||gh(i,s.key)):Yt()}function Pd(i,e){const t=e.key,s=t.path.canonicalString();i.ac.get(t)||i.cc.has(s)||(kt("SyncEngine","New document in limbo: "+t),i.cc.add(s),mh(i))}function mh(i){for(;i.cc.size>0&&i.ac.size<i.maxConcurrentLimboResolutions;){const e=i.cc.values().next().value;i.cc.delete(e);const t=new pn(Ur.fromString(e)),s=i._c.next();i.hc.set(s,new Wv(t)),i.ac=i.ac.insert(t,s),Xf(i.remoteStore,new pc(io(uu(t.path)),s,2,Gs.at))}}function Ko(i,e,t){return lf.apply(this,arguments)}function lf(){return lf=(0,le.Z)(function*(i,e,t){const s=cn(i),u=[],y=[],C=[];var O;s.oc.isEmpty()||(s.oc.forEach((O,j)=>{C.push(s.mc(j,e,t).then(Z=>{if((Z||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(j.targetId,null!=Z&&Z.fromCache?"not-current":"current"),Z){u.push(Z);const ue=Ic.Ni(j.targetId,Z);y.push(ue)}}))}),yield Promise.all(C),s.rc.Ho(u),yield(O=(0,le.Z)(function*(j,Z){const ue=cn(j);try{yield ue.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ye=>bt.forEach(Z,It=>bt.forEach(It.Ci,Ht=>ue.persistence.referenceDelegate.addReference(Ye,It.targetId,Ht)).next(()=>bt.forEach(It.xi,Ht=>ue.persistence.referenceDelegate.removeReference(Ye,It.targetId,Ht)))))}catch(Ye){if(!Da(Ye))throw Ye;kt("LocalStore","Failed to update sequence numbers: "+Ye)}for(const Ye of Z){const It=Ye.targetId;if(!Ye.fromCache){const Ht=ue.Ki.get(It),Rn=Ht.withLastLimboFreeSnapshotVersion(Ht.snapshotVersion);ue.Ki=ue.Ki.insert(It,Rn)}}}),function(j,Z){return O.apply(this,arguments)})(s.localStore,y))}),lf.apply(this,arguments)}function yh(i,e){return qc.apply(this,arguments)}function qc(){return qc=(0,le.Z)(function*(i,e){const t=cn(i);if(!t.currentUser.isEqual(e)){kt("SyncEngine","User change. New user:",e.toKey());const s=yield Pm(t.localStore,e);t.currentUser=e,(u=t).dc.forEach(C=>{C.forEach(O=>{O.reject(new zt(wt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.dc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Ko(t,s.Wi)}var u}),qc.apply(this,arguments)}function vh(i,e){const t=cn(i),s=t.hc.get(e);if(s&&s.ic)return $r().add(s.key);{let u=$r();const y=t.uc.get(e);if(!y)return u;for(const C of y){const O=t.oc.get(C);u=u.unionWith(O.view.Wu)}return u}}function _h(i,e){return Zc.apply(this,arguments)}function Zc(){return Zc=(0,le.Z)(function*(i,e){const t=cn(i),s=yield qh(t.localStore,e.query,!0),u=e.view.nc(s);return t.isPrimaryClient&&da(t,e.targetId,u.tc),u}),Zc.apply(this,arguments)}function Eh(i,e){return Qc.apply(this,arguments)}function Qc(){return Qc=(0,le.Z)(function*(i,e){const t=cn(i);return km(t.localStore,e).then(s=>Ko(t,s))}),Qc.apply(this,arguments)}function Ih(i,e,t,s){return Xc.apply(this,arguments)}function Xc(){return Xc=(0,le.Z)(function*(i,e,t,s){const u=cn(i),y=yield function(C,O){const j=cn(C),Z=cn(j.mutationQueue);return j.persistence.runTransaction("Lookup mutation documents","readonly",ue=>Z.An(ue,O).next(Ye=>Ye?j.localDocuments.getDocuments(ue,Ye):bt.resolve(null)))}(u.localStore,e);var O;null!==y?("pending"===t?yield dh(u.remoteStore):"acknowledged"===t||"rejected"===t?(Og(u,e,s||null),af(u,e),O=e,cn(cn(u.localStore).mutationQueue).Pn(O)):Yt(),yield Ko(u,y)):kt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Xc.apply(this,arguments)}function op(){return op=(0,le.Z)(function*(i,e){const t=cn(i);if(Fg(t),up(t),!0===e&&!0!==t.wc){const s=t.sharedClientState.getAllActiveQueryTargets(),u=yield Pg(t,s.toArray());t.wc=!0,yield hh(t.remoteStore,!0);for(const y of u)Xf(t.remoteStore,y)}else if(!1===e&&!1!==t.wc){const s=[];let u=Promise.resolve();t.uc.forEach((y,C)=>{t.sharedClientState.isLocalQueryTarget(C)?s.push(C):u=u.then(()=>(Ka(t,C),vu(t.localStore,C,!0))),ef(t.remoteStore,C)}),yield u,yield Pg(t,s),function(y){const C=cn(y);C.hc.forEach((O,j)=>{ef(C.remoteStore,j)}),C.lc._s(),C.hc=new Map,C.ac=new Ns(pn.comparator)}(t),t.wc=!1,yield hh(t.remoteStore,!1)}}),op.apply(this,arguments)}function Pg(i,e,t){return ap.apply(this,arguments)}function ap(){return ap=(0,le.Z)(function*(i,e,t){const s=cn(i),u=[],y=[];for(const C of e){let O;const j=s.uc.get(C);if(j&&0!==j.length){O=yield rh(s.localStore,io(j[0]));for(const Z of j){const ue=s.oc.get(Z),Ye=yield _h(s,ue);Ye.snapshot&&y.push(Ye.snapshot)}}else{const Z=yield Zh(s.localStore,C);O=yield rh(s.localStore,Z),yield sf(s,Ng(Z),C,!1,O.resumeToken)}u.push(O)}return s.rc.Ho(y),u}),ap.apply(this,arguments)}function Ng(i){return ea(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Xm(i){const e=cn(i);return cn(cn(e.localStore).persistence).Si()}function Jm(i,e,t,s){return lp.apply(this,arguments)}function lp(){return lp=(0,le.Z)(function*(i,e,t,s){const u=cn(i);if(u.wc)return void kt("SyncEngine","Ignoring unexpected query state notification.");const y=u.uc.get(e);if(y&&y.length>0)switch(t){case"current":case"not-current":{const C=yield km(u.localStore,hd(y[0])),O=Oa.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ys.EMPTY_BYTE_STRING);yield Ko(u,C,O);break}case"rejected":yield vu(u.localStore,e,!0),Ka(u,e,s);break;default:Yt()}}),lp.apply(this,arguments)}function ey(i,e,t){return kg.apply(this,arguments)}function kg(){return kg=(0,le.Z)(function*(i,e,t){const s=Fg(i);if(s.wc){for(const u of e){if(s.uc.has(u)){kt("SyncEngine","Adding an already active target "+u);continue}const y=yield Zh(s.localStore,u),C=yield rh(s.localStore,y);yield sf(s,Ng(y),C.targetId,!1,C.resumeToken),Xf(s.remoteStore,C)}for(const u of t)s.uc.has(u)&&(yield vu(s.localStore,u,!1).then(()=>{ef(s.remoteStore,u),Ka(s,u)}).catch(Ts))}}),kg.apply(this,arguments)}function Fg(i){const e=cn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=qm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Zm.bind(null,e),e.rc.Ho=Hm.bind(null,e.eventManager),e.rc.gc=Uv.bind(null,e.eventManager),e}function up(i){const e=cn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=h0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f0.bind(null,e),e}class ty{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,le.Z)(function*(){t.Tt=Td(e.databaseInfo.databaseId),t.sharedClientState=t.Ic(e),t.persistence=t.Tc(e),yield t.persistence.start(),t.localStore=t.Ec(e),t.gcScheduler=t.Ac(e,t.localStore),t.indexBackfillerScheduler=t.Rc(e,t.localStore)})()}Ac(e,t){return null}Rc(e,t){return null}Ec(e){return Kf(this.persistence,new Om,e.initialUser,this.Tt)}Tc(e){return new Rm(Kh.qs,this.Tt)}Ic(e){return new Av}terminate(){var e=this;return(0,le.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class cp extends ty{constructor(e,t,s){super(),this.Pc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,le.Z)(function*(){yield t().call(s,e),yield s.Pc.initialize(s,e),yield up(s.Pc.syncEngine),yield dh(s.Pc.remoteStore),yield s.persistence.di(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return Kf(this.persistence,new Om,e.initialUser,this.Tt)}Ac(e,t){return new _m(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Rc(e,t){const s=new $l(t,this.persistence);return new Du(e.asyncQueue,s)}Tc(e){const t=Wf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Ot.withCacheSize(this.cacheSizeBytes):Ot.DEFAULT;return new qp(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,Zf(),Wc(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new Av}}class Lg extends cp{constructor(e,t){super(e,t,!1),this.Pc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,le.Z)(function*(){yield t().call(s,e);const u=s.Pc.syncEngine;s.sharedClientState instanceof ig&&(s.sharedClientState.syncEngine={Br:Ih.bind(null,u),Lr:Jm.bind(null,u),qr:ey.bind(null,u),Si:Xm.bind(null,u),Fr:Eh.bind(null,u)},yield s.sharedClientState.start()),yield s.persistence.di(function(){var y=(0,le.Z)(function*(C){yield function Qm(i,e){return op.apply(this,arguments)}(s.Pc.syncEngine,C),s.gcScheduler&&(C&&!s.gcScheduler.started?s.gcScheduler.start():C||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(C&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():C||s.indexBackfillerScheduler.stop())});return function(C){return y.apply(this,arguments)}}())})()}Ic(e){const t=Zf();if(!ig.C(t))throw new zt(wt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Wf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ig(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class $g{initialize(e,t){var s=this;return(0,le.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=u=>xg(s.syncEngine,u,1),s.remoteStore.remoteSyncer.handleCredentialChange=yh.bind(null,s.syncEngine),yield hh(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new rp}createDatastore(e){const t=Td(e.databaseInfo.databaseId),s=new ah(e.databaseInfo);return new ug(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,u=e.asyncQueue,y=O=>xg(this.syncEngine,O,0),C=sg.C()?new sg:new oh,new Ov(t,s,u,y,C);var t,s,u,y,C}createSyncEngine(e,t){return function(s,u,y,C,O,j,Z){const ue=new Ym(s,u,y,C,O,j);return Z&&(ue.wc=!0),ue}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,le.Z)(function*(t){const s=cn(t);kt("RemoteStore","RemoteStore shutting down."),s.mu.add(5),yield Sd(s),s.yu.shutdown(),s.pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function uf(i,e=10240){let t=0;return{read:()=>(0,le.Z)(function*(){if(t<i.byteLength){const s={value:i.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,le.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Nd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):er("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Bg{constructor(e,t){this.Vc=e,this.Tt=t,this.metadata=new wi,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(s=>{s&&s.Ou()?this.metadata.resolve(s.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.Mu)}`))},s=>this.metadata.reject(s))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,le.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,le.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,le.Z)(function*(){const t=yield e.Cc();if(null===t)return null;const s=e.Sc.decode(t),u=Number(s);isNaN(u)&&e.xc(`length string (${s}) is not valid number`);const y=yield e.Nc(u);return new jv(JSON.parse(y),t.length+u)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,le.Z)(function*(){for(;e.kc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.kc();t<0&&e.xc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}Nc(e){var t=this;return(0,le.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.xc("Reached the end of bundle when more is expected.");const s=t.Sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,le.Z)(function*(){const t=yield e.Vc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class Qv{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,le.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new zt(wt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(u=(0,le.Z)(function*(y,C){const O=cn(y),j=M(O.Tt)+"/documents",Z={documents:C.map(Ht=>dc(O.Tt,Ht))},ue=yield O.mo("BatchGetDocuments",j,Z,C.length),Ye=new Map;ue.forEach(Ht=>{const nn=function Vt(i,e){return"found"in e?function(t,s){mn(!!s.found);const u=b(t,s.found.name),y=xs(s.found.updateTime),C=s.found.createTime?xs(s.found.createTime):Gn.min(),O=new Ss({mapValue:{fields:s.found.fields}});return _i.newFoundDocument(u,y,C,O)}(i,e):"missing"in e?function(t,s){mn(!!s.missing),mn(!!s.readTime);const u=b(t,s.missing),y=xs(s.readTime);return _i.newNoDocument(u,y)}(i,e):Yt()}(O.Tt,Ht);Ye.set(nn.key.toString(),nn)});const It=[];return C.forEach(Ht=>{const nn=Ye.get(Ht.toString());mn(!!nn),It.push(nn)}),It}),function(y,C){return u.apply(this,arguments)})(t.datastore,e);var u;return s.forEach(u=>t.recordVersion(u)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,le.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,u)=>{const y=pn.fromPath(u);e.mutations.push(new Fc(y,e.precondition(y)))}),yield(s=(0,le.Z)(function*(u,y){const C=cn(u),O=M(C.Tt)+"/documents",j={writes:y.map(Z=>Un(C.Tt,Z))};yield C.lo("Commit",O,j)}),function(u,y){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Yt();t=Gn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new zt(wt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Gn.min())?Xi.exists(!1):Xi.updateTime(t):Xi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Gn.min()))throw new zt(wt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xi.updateTime(t)}return Xi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Vg{constructor(e,t,s,u,y){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=u,this.deferred=y,this.Mc=s.maxAttempts,this.ko=new lh(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Oc()}Oc(){var e=this;this.ko.vo((0,le.Z)(function*(){const t=new Qv(e.datastore),s=e.Fc(t);s&&s.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(y=>{e.Bc(y)}))}).catch(u=>{e.Bc(u)})}))}Fc(e){try{const t=this.updateFunction(e);return!rs(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Pu(t)}return!1}}class Ug{constructor(e,t,s,u){var y=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=u,this.user=pe.UNAUTHENTICATED,this.clientId=Fl.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var C=(0,le.Z)(function*(O){kt("FirestoreClient","Received user=",O.uid),yield y.authCredentialListener(O),y.user=O});return function(O){return C.apply(this,arguments)}}()),this.appCheckCredentials.start(s,C=>(kt("FirestoreClient","Received new app check token=",C),this.appCheckCredentialListener(C,this.user)))}getConfiguration(){var e=this;return(0,le.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new zt(wt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const u=xd(s,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function dp(i,e){return hp.apply(this,arguments)}function hp(){return hp=(0,le.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),kt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,le.Z)(function*(y){s.isEqual(y)||(yield Pm(e.localStore,y),s=y)});return function(y){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),hp.apply(this,arguments)}function fp(i,e){return pp.apply(this,arguments)}function pp(){return pp=(0,le.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield gp(i);kt("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield e.initialize(t,s),i.setCredentialChangeListener(u=>nf(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,y)=>nf(e.remoteStore,y)),i.onlineComponents=e}),pp.apply(this,arguments)}function gp(i){return cf.apply(this,arguments)}function cf(){return cf=(0,le.Z)(function*(i){return i.offlineComponents||(kt("FirestoreClient","Using default OfflineComponentProvider"),yield dp(i,new ty)),i.offlineComponents}),cf.apply(this,arguments)}function df(i){return jg.apply(this,arguments)}function jg(){return jg=(0,le.Z)(function*(i){return i.onlineComponents||(kt("FirestoreClient","Using default OnlineComponentProvider"),yield fp(i,new $g)),i.onlineComponents}),jg.apply(this,arguments)}function Hg(i){return gp(i).then(e=>e.persistence)}function hf(i){return gp(i).then(e=>e.localStore)}function mp(i){return df(i).then(e=>e.remoteStore)}function yp(i){return df(i).then(e=>e.syncEngine)}function kd(i){return vp.apply(this,arguments)}function vp(){return vp=(0,le.Z)(function*(i){const e=yield df(i),t=e.eventManager;return t.onListen=Cg.bind(null,e.syncEngine),t.onUnlisten=Kv.bind(null,e.syncEngine),t}),vp.apply(this,arguments)}function zg(i,e,t={}){const s=new wi;return i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(u,y,C,O,j){const Z=new Nd({next:Ye=>{y.enqueueAndForget(()=>Ig(u,ue));const It=Ye.docs.has(C);!It&&Ye.fromCache?j.reject(new zt(wt.UNAVAILABLE,"Failed to get document because the client is offline.")):It&&Ye.fromCache&&O&&"server"===O.source?j.reject(new zt(wt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):j.resolve(Ye)},error:Ye=>j.reject(Ye)}),ue=new Od(uu(C.path),Z,{includeMetadataChanges:!0,$u:!0});return fh(u,ue)}(yield kd(i),i.asyncQueue,e,t,s)})),s.promise}function Wg(i,e,t={}){const s=new wi;return i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(u,y,C,O,j){const Z=new Nd({next:Ye=>{y.enqueueAndForget(()=>Ig(u,ue)),Ye.fromCache&&"server"===O.source?j.reject(new zt(wt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):j.resolve(Ye)},error:Ye=>j.reject(Ye)}),ue=new Od(C,Z,{includeMetadataChanges:!0,$u:!0});return fh(u,ue)}(yield kd(i),i.asyncQueue,e,t,s)})),s.promise}const Kg=new Map;function wh(i,e,t){if(!t)throw new zt(wt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Cc(i,e,t,s){if(!0===e&&!0===s)throw new zt(wt.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function uy(i){if(!pn.isDocumentKey(i))throw new zt(wt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function cy(i){if(pn.isDocumentKey(i))throw new zt(wt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Ch(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Yt()}function si(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new zt(wt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ch(i);throw new zt(wt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function _p(i,e){if(e<=0)throw new zt(wt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class dy{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new zt(wt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new zt(wt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Cc("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fd{constructor(e,t,s,u){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new zt(wt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new zt(wt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dy(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new tl;switch(t.type){case"gapi":return new nl(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new zt(wt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Kg.get(e);t&&(kt("ComponentProvider","Removing Datastore"),Kg.delete(e),t.terminate())}(this),Promise.resolve()}}class Ks{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ks(this.firestore,e,this._key)}}class wa{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new wa(this.firestore,e,this._query)}}class Hu extends wa{constructor(e,t,s){super(e,t,uu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ks(this.firestore,null,new pn(e))}withConverter(e){return new Hu(this.firestore,e,this._path)}}function Yg(i,e,...t){if(i=(0,Ze.m9)(i),wh("collection","path",e),i instanceof Fd){const s=Ur.fromString(e,...t);return cy(s),new Hu(i,null,s)}{if(!(i instanceof Ks||i instanceof Hu))throw new zt(wt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Ur.fromString(e,...t));return cy(s),new Hu(i.firestore,null,s)}}function mo(i,e,...t){if(i=(0,Ze.m9)(i),1===arguments.length&&(e=Fl.R()),wh("doc","path",e),i instanceof Fd){const s=Ur.fromString(e,...t);return uy(s),new Ks(i,null,new pn(s))}{if(!(i instanceof Ks||i instanceof Hu))throw new zt(wt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Ur.fromString(e,...t));return uy(s),new Ks(i.firestore,i instanceof Hu?i.converter:null,new pn(s))}}function qg(i,e){return i=(0,Ze.m9)(i),e=(0,Ze.m9)(e),(i instanceof Ks||i instanceof Hu)&&(e instanceof Ks||e instanceof Hu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Zg(i,e){return i=(0,Ze.m9)(i),e=(0,Ze.m9)(e),i instanceof wa&&e instanceof wa&&i.firestore===e.firestore&&nc(i._query,e._query)&&i.converter===e.converter}class e_{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new lh(this,"async_queue_retry"),this.Hc=()=>{const t=Wc();t&&kt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ko.Vo()};const e=Wc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const t=Wc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const t=new wi;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,le.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(t){if(!Da(t))throw t;kt("AsyncQueue","Operation failed with retryable error: "+t)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const t=this.qc.then(()=>(this.jc=!0,e().catch(s=>{throw this.Qc=s,this.jc=!1,er("INTERNAL UNHANDLED ERROR: ",function(y){let C=y.message||"";return y.stack&&(C=y.stack.includes(y.message)?y.stack:y.message+"\n"+y.stack),C}(s)),s}).then(s=>(this.jc=!1,s))));return this.qc=t,t}enqueueAfterDelay(e,t,s){this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);const u=np.createAndSchedule(this,e,t,s,y=>this.Xc(y));return this.Gc.push(u),u}Jc(){this.Qc&&Yt()}verifyOperationInProgress(){}ta(){var e=this;return(0,le.Z)(function*(){let t;do{t=e.qc,yield t}while(t!==e.qc)})()}ea(e){for(const t of this.Gc)if(t.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Gc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}function Ep(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const u of["next","error","complete"])if(u in s&&"function"==typeof s[u])return!0;return!1}(i)}class t_{constructor(){this._progressObserver={},this._taskCompletionResolver=new wi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ms extends Fd{constructor(e,t,s,u){super(e,t,s,u),this.type="firestore",this._queue=new e_,this._persistenceKey=(null==u?void 0:u.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Qg(this),this._firestoreClient.terminate()}}function ko(i){return i._firestoreClient||Qg(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Qg(i){var e;const t=i._freezeSettings(),s=(y=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new ll(i._databaseId,y,i._persistenceKey,(O=t).host,O.ssl,O.experimentalForceLongPolling,O.experimentalAutoDetectLongPolling,O.useFetchStreams));var y,O;i._firestoreClient=new Ug(i._authCredentials,i._appCheckCredentials,i._queue,s)}function r_(i,e,t){const s=new wi;return i.asyncQueue.enqueue((0,le.Z)(function*(){try{yield dp(i,t),yield fp(i,e),s.resolve()}catch(u){const y=u;if(!("FirebaseError"===(C=y).name?C.code===wt.FAILED_PRECONDITION||C.code===wt.UNIMPLEMENTED:!(typeof DOMException<"u"&&C instanceof DOMException)||22===C.code||20===C.code||11===C.code))throw y;dr("Error enabling offline persistence. Falling back to persistence disabled: "+y),s.reject(y)}var C})).then(()=>s.promise)}function Xl(i){if(i._initialized||i._terminated)throw new zt(wt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Wu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wu(ys.fromBase64String(e))}catch(t){throw new zt(wt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wu(ys.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class bc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new zt(wt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ld{constructor(e){this._methodName=e}}class Dh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new zt(wt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new zt(wt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return hr(this._lat,e._lat)||hr(this._long,e._long)}}const pf=/^__.*__$/;class s_{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Ma(e,this.data,this.fieldMask,t,this.fieldTransforms):new zl(e,this.data,t,this.fieldTransforms)}}class Jg{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ma(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function my(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yt()}}class gf{constructor(e,t,s,u,y,C){this.settings=e,this.databaseId=t,this.Tt=s,this.ignoreUndefinedProperties=u,void 0===y&&this.ia(),this.fieldTransforms=y||[],this.fieldMask=C||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new gf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.oa({path:s,ca:!1});return u.aa(e),u}ha(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.oa({path:s,ca:!1});return u.ia(),u}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return Tp(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(my(this.ra)&&pf.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class yy{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.Tt=s||Td(e)}wa(e,t,s,u=!1){return new gf({ra:e,methodName:t,_a:s,path:pi.emptyPath(),ca:!1,da:u},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function Ku(i){const e=i._freezeSettings(),t=Td(i._databaseId);return new yy(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Ip(i,e,t,s,u,y={}){const C=i.wa(y.merge||y.mergeFields?2:0,e,t,u);sm("Data must be an object, but it was:",C,s);const O=rm(s,C);let j,Z;if(y.merge)j=new Mo(C.fieldMask),Z=C.fieldTransforms;else if(y.mergeFields){const ue=[];for(const Ye of y.mergeFields){const It=yf(e,Ye,t);if(!C.contains(It))throw new zt(wt.INVALID_ARGUMENT,`Field '${It}' is specified in your field mask but missing from your input data.`);_y(ue,It)||ue.push(It)}j=new Mo(ue),Z=C.fieldTransforms.filter(Ye=>j.covers(Ye.field))}else j=null,Z=C.fieldTransforms;return new s_(new Ss(O),j,Z)}class Th extends Ld{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Th}}function em(i,e,t){return new gf({ra:3,_a:e.settings._a,methodName:i._methodName,ca:t},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class mf extends Ld{_toFieldTransform(e){return new Aa(e.path,new Tl)}isEqual(e){return e instanceof mf}}class wp extends Ld{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=em(this,e,!0),s=this.ma.map(y=>Jc(y,t)),u=new Sl(s);return new Aa(e.path,u)}isEqual(e){return this===e}}class tm extends Ld{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=em(this,e,!0),s=this.ma.map(y=>Jc(y,t)),u=new Sa(s);return new Aa(e.path,u)}isEqual(e){return this===e}}class vy extends Ld{constructor(e,t){super(e),this.ga=t}_toFieldTransform(e){const t=new Al(e.Tt,Rc(e.Tt,this.ga));return new Aa(e.path,t)}isEqual(e){return this===e}}function Cp(i,e,t,s){const u=i.wa(1,e,t);sm("Data must be an object, but it was:",u,s);const y=[],C=Ss.empty();ho(s,(j,Z)=>{const ue=Dp(e,j,t);Z=(0,Ze.m9)(Z);const Ye=u.ha(ue);if(Z instanceof Th)y.push(ue);else{const It=Jc(Z,Ye);null!=It&&(y.push(ue),C.set(ue,It))}});const O=new Mo(y);return new Jg(C,O,u.fieldTransforms)}function bp(i,e,t,s,u,y){const C=i.wa(1,e,t),O=[yf(e,s,t)],j=[u];if(y.length%2!=0)throw new zt(wt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let It=0;It<y.length;It+=2)O.push(yf(e,y[It])),j.push(y[It+1]);const Z=[],ue=Ss.empty();for(let It=O.length-1;It>=0;--It)if(!_y(Z,O[It])){const Ht=O[It];let nn=j[It];nn=(0,Ze.m9)(nn);const Rn=C.ha(Ht);if(nn instanceof Th)Z.push(Ht);else{const ir=Jc(nn,Rn);null!=ir&&(Z.push(Ht),ue.set(Ht,ir))}}const Ye=new Mo(Z);return new Jg(ue,Ye,C.fieldTransforms)}function nm(i,e,t,s=!1){return Jc(t,i.wa(s?4:3,e))}function Jc(i,e){if(im(i=(0,Ze.m9)(i)))return sm("Unsupported field value:",e,i),rm(i,e);if(i instanceof Ld)return function(t,s){if(!my(s.ra))throw s.fa(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.fa(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(s);u&&s.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(t,s){const u=[];let y=0;for(const C of t){let O=Jc(C,s.la(y));null==O&&(O={nullValue:"NULL_VALUE"}),u.push(O),y++}return{arrayValue:{values:u}}}(i,e)}return function(t,s){if(null===(t=(0,Ze.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Rc(s.Tt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=Ni.fromDate(t);return{timestampValue:Ha(s.Tt,u)}}if(t instanceof Ni){const u=new Ni(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ha(s.Tt,u)}}if(t instanceof Dh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Wu)return{bytesValue:Vc(s.Tt,t._byteString)};if(t instanceof Ks){const u=s.databaseId,y=t.firestore._databaseId;if(!y.isEqual(u))throw s.fa(`Document reference is for database ${y.projectId}/${y.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:cc(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.fa(`Unsupported field value: ${Ch(t)}`)}(i,e)}function rm(i,e){const t={};return ul(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ho(i,(s,u)=>{const y=Jc(u,e.ua(s));null!=y&&(t[s]=y)}),{mapValue:{fields:t}}}function im(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Ni||i instanceof Dh||i instanceof Wu||i instanceof Ks||i instanceof Ld)}function sm(i,e,t){if(!im(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Ch(t);throw e.fa("an object"===s?i+" a custom object":i+" "+s)}var s}function yf(i,e,t){if((e=(0,Ze.m9)(e))instanceof bc)return e._internalPath;if("string"==typeof e)return Dp(i,e);throw Tp("Field path arguments must be of type string or ",i,!1,void 0,t)}const o_=new RegExp("[~\\*/\\[\\]]");function Dp(i,e,t){if(e.search(o_)>=0)throw Tp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new bc(...e.split("."))._internalPath}catch(s){throw Tp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Tp(i,e,t,s,u){const y=s&&!s.isEmpty(),C=void 0!==u;let O=`Function ${e}() called with invalid data`;t&&(O+=" (via `toFirestore()`)"),O+=". ";let j="";return(y||C)&&(j+=" (found",y&&(j+=` in field ${s}`),C&&(j+=` in document ${u}`),j+=")"),new zt(wt.INVALID_ARGUMENT,O+i+j)}function _y(i,e){return i.some(t=>t.isEqual(e))}class vf{constructor(e,t,s,u,y){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=u,this._converter=y}get id(){return this._key.path.lastSegment()}get ref(){return new Ks(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new a_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Sp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class a_ extends vf{data(){return super.data()}}function Sp(i,e){return"string"==typeof e?Dp(i,e):e instanceof bc?e._internalPath:e._delegate._internalPath}function Ey(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new zt(wt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class om{}class _f extends om{}function ed(i,e,...t){let s=[];e instanceof om&&s.push(e),s=s.concat(t),function(u){const y=u.filter(O=>O instanceof Sh).length,C=u.filter(O=>O instanceof Ef).length;if(y>1||y>0&&C>0)throw new zt(wt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const u of s)i=u._apply(i);return i}class Ef extends _f{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Ef(e,t,s)}_apply(e){const t=this._parse(e);return $d(e._query,t),new wa(e.firestore,e.converter,tc(e._query,t))}_parse(e){const t=Ku(e.firestore);return function(u,y,C,O,j,Z,ue){let Ye;if(j.isKeyField()){if("array-contains"===Z||"array-contains-any"===Z)throw new zt(wt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Z}' queries on documentId().`);if("in"===Z||"not-in"===Z){xy(ue,Z);const It=[];for(const Ht of ue)It.push(Ay(O,u,Ht));Ye={arrayValue:{values:It}}}else Ye=Ay(O,u,ue)}else"in"!==Z&&"not-in"!==Z&&"array-contains-any"!==Z||xy(ue,Z),Ye=nm(C,"where",ue,"in"===Z||"not-in"===Z);return Gr.create(j,Z,Ye)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Sh extends om{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Sh(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:gi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,u){let y=s;const C=u.getFlattenedFilters();for(const O of C)$d(y,O),y=tc(y,O)}(e._query,t),new wa(e.firestore,e.converter,tc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ap extends _f{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ap(e,t)}_apply(e){const t=function(s,u,y){if(null!==s.startAt)throw new zt(wt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new zt(wt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const C=new Vl(u,y);return function(O,j){if(null===Dl(O)){const Z=Au(O);null!==Z&&u_(0,Z,j.field)}}(s,C),C}(e._query,this._field,this._direction);return new wa(e.firestore,e.converter,function(s,u){const y=s.explicitOrderBy.concat([u]);return new dl(s.path,s.collectionGroup,y,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class If extends _f{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new If(e,t,s)}_apply(e){return new wa(e.firestore,e.converter,xu(e._query,this._limit,this._limitType))}}class wf extends _f{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new wf(e,t,s)}_apply(e){const t=td(e,this.type,this._docOrFields,this._inclusive);return new wa(e.firestore,e.converter,(u=t,new dl((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,u,s.endAt)));var s,u}}class Cf extends _f{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Cf(e,t,s)}_apply(e){const t=td(e,this.type,this._docOrFields,this._inclusive);return new wa(e.firestore,e.converter,(u=t,new dl((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,u)));var s,u}}function td(i,e,t,s){if(t[0]=(0,Ze.m9)(t[0]),t[0]instanceof vf)return function(u,y,C,O,j){if(!O)throw new zt(wt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${C}().`);const Z=[];for(const ue of vs(u))if(ue.field.isKeyField())Z.push(Hr(y,O.key));else{const Ye=O.data.field(ue.field);if(S(Ye))throw new zt(wt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ue.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ye){const It=ue.field.canonicalString();throw new zt(wt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${It}' (used as the orderBy) does not exist.`)}Z.push(Ye)}return new nr(Z,j)}(i._query,i.firestore._databaseId,e,t[0]._document,s);{const u=Ku(i.firestore);return function(y,C,O,j,Z,ue){const Ye=y.explicitOrderBy;if(Z.length>Ye.length)throw new zt(wt.INVALID_ARGUMENT,`Too many arguments provided to ${j}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const It=[];for(let Ht=0;Ht<Z.length;Ht++){const nn=Z[Ht];if(Ye[Ht].field.isKeyField()){if("string"!=typeof nn)throw new zt(wt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${j}(), but got a ${typeof nn}`);if(!Ro(y)&&-1!==nn.indexOf("/"))throw new zt(wt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${j}() must be a plain document ID, but '${nn}' contains a slash.`);const Rn=y.path.child(Ur.fromString(nn));if(!pn.isDocumentKey(Rn))throw new zt(wt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${j}() must result in a valid document path, but '${Rn}' is not because it contains an odd number of segments.`);const ir=new pn(Rn);It.push(Hr(C,ir))}else{const Rn=nm(O,j,nn);It.push(Rn)}}return new nr(It,ue)}(i._query,i.firestore._databaseId,u,e,t,s)}}function Ay(i,e,t){if("string"==typeof(t=(0,Ze.m9)(t))){if(""===t)throw new zt(wt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ro(e)&&-1!==t.indexOf("/"))throw new zt(wt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ur.fromString(t));if(!pn.isDocumentKey(s))throw new zt(wt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Hr(i,new pn(s))}if(t instanceof Ks)return Hr(i,t._key);throw new zt(wt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ch(t)}.`)}function xy(i,e){if(!Array.isArray(i)||0===i.length)throw new zt(wt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $d(i,e){if(e.isInequality()){const s=Au(i),u=e.field;if(null!==s&&!s.isEqual(u))throw new zt(wt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${u.toString()}'`);const y=Dl(i);null!==y&&u_(0,u,y)}const t=function(s,u){for(const y of s)for(const C of y.getFlattenedFilters())if(u.indexOf(C.op)>=0)return C.op;return null}(i.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new zt(wt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function u_(i,e,t){if(!t.isEqual(e))throw new zt(wt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class My{convertValue(e,t="none"){switch(X(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ki(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Yt()}}convertObject(e,t){const s={};return ho(e.fields,(u,y)=>{s[u]=this.convertValue(y,t)}),s}convertGeoPoint(e){return new Dh(ki(e.latitude),ki(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=x(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(w(e));default:return null}}convertTimestamp(e){const t=to(e);return new Ni(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ur.fromString(e);mn($h(s));const u=new ci(s.get(1),s.get(3)),y=new pn(s.popFirst(5));return u.isEqual(t)||er(`Document ${y} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),y}}function bf(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class Ry extends My{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ks(this.firestore,null,t)}}class Jl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dc extends vf{constructor(e,t,s,u,y,C){super(e,t,s,u,C),this._firestore=e,this._firestoreImpl=e,this.metadata=y}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new nd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Sp("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class nd extends Dc{data(e={}){return super.data(e)}}class Iu{constructor(e,t,s,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new Jl(u.hasPendingWrites,u.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new nd(this._firestore,this._userDataWriter,s.key,s,new Jl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new zt(wt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,u){if(s._snapshot.oldDocs.isEmpty()){let y=0;return s._snapshot.docChanges.map(C=>({type:"added",doc:new nd(s._firestore,s._userDataWriter,C.doc.key,C.doc,new Jl(s._snapshot.mutatedKeys.has(C.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:y++}))}{let y=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(C=>u||3!==C.type).map(C=>{const O=new nd(s._firestore,s._userDataWriter,C.doc.key,C.doc,new Jl(s._snapshot.mutatedKeys.has(C.doc.key),s._snapshot.fromCache),s.query.converter);let j=-1,Z=-1;return 0!==C.type&&(j=y.indexOf(C.doc.key),y=y.delete(C.doc.key)),1!==C.type&&(y=y.add(C.doc),Z=y.indexOf(C.doc.key)),{type:yo(C.type),doc:O,oldIndex:j,newIndex:Z}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function yo(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Yt()}}function d_(i,e){return i instanceof Dc&&e instanceof Dc?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Iu&&e instanceof Iu&&i._firestore===e._firestore&&Zg(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Tc extends My{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ks(this.firestore,null,t)}}function Ly(i,e,t){i=si(i,Ks);const s=si(i.firestore,Ms),u=bf(i.converter,e,t);return Ah(s,[Ip(Ku(s),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,Xi.none())])}function $y(i,e,t,...s){i=si(i,Ks);const u=si(i.firestore,Ms),y=Ku(u);let C;return C="string"==typeof(e=(0,Ze.m9)(e))||e instanceof bc?bp(y,"updateDoc",i._key,e,t,s):Cp(y,"updateDoc",i._key,e),Ah(u,[C.toMutation(i._key,Xi.exists(!0))])}function By(i,...e){var t,s,u;i=(0,Ze.m9)(i);let y={includeMetadataChanges:!1},C=0;"object"!=typeof e[C]||Ep(e[C])||(y=e[C],C++);const O={includeMetadataChanges:y.includeMetadataChanges};if(Ep(e[C])){const Ye=e[C];e[C]=null===(t=Ye.next)||void 0===t?void 0:t.bind(Ye),e[C+1]=null===(s=Ye.error)||void 0===s?void 0:s.bind(Ye),e[C+2]=null===(u=Ye.complete)||void 0===u?void 0:u.bind(Ye)}let j,Z,ue;if(i instanceof Ks)Z=si(i.firestore,Ms),ue=uu(i._key.path),j={next:Ye=>{e[C]&&e[C](xh(Z,i,Ye))},error:e[C+1],complete:e[C+2]};else{const Ye=si(i,wa);Z=si(Ye.firestore,Ms),ue=Ye._query;const It=new Tc(Z);j={next:Ht=>{e[C]&&e[C](new Iu(Z,It,Ye,Ht))},error:e[C+1],complete:e[C+2]},Ey(i._query)}return function(Ye,It,Ht,nn){const Rn=new Nd(nn),ir=new Od(It,Rn,Ht);return Ye.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return fh(yield kd(Ye),ir)})),()=>{Rn.bc(),Ye.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return Ig(yield kd(Ye),ir)}))}}(ko(Z),ue,O,j)}function Ah(i,e){return function(t,s){const u=new wi;return t.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function Yv(i,e,t){return Sg.apply(this,arguments)}(yield yp(t),s,u)})),u.promise}(ko(i),e)}function xh(i,e,t){const s=t.docs.get(e._key),u=new Tc(i);return new Dc(i,u,e._key,s,new Jl(t.hasPendingWrites,t.fromCache),e.converter)}const Uy={maxAttempts:5};class jy{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ku(e)}set(e,t,s){this._verifyNotCommitted();const u=eu(e,this._firestore),y=bf(u.converter,t,s),C=Ip(this._dataReader,"WriteBatch.set",u._key,y,null!==u.converter,s);return this._mutations.push(C.toMutation(u._key,Xi.none())),this}update(e,t,s,...u){this._verifyNotCommitted();const y=eu(e,this._firestore);let C;return C="string"==typeof(t=(0,Ze.m9)(t))||t instanceof bc?bp(this._dataReader,"WriteBatch.update",y._key,t,s,u):Cp(this._dataReader,"WriteBatch.update",y._key,t),this._mutations.push(C.toMutation(y._key,Xi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=eu(e,this._firestore);return this._mutations=this._mutations.concat(new Wl(t._key,Xi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new zt(wt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function eu(i,e){if((i=(0,Ze.m9)(i)).firestore!==e)throw new zt(wt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Tf extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ku(e)}get(e){const t=eu(e,this._firestore),s=new Ry(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return Yt();const y=u[0];if(y.isFoundDocument())return new vf(this._firestore,s,y.key,y,t.converter);if(y.isNoDocument())return new vf(this._firestore,s,t._key,null,t.converter);throw Yt()})}set(e,t,s){const u=eu(e,this._firestore),y=bf(u.converter,t,s),C=Ip(this._dataReader,"Transaction.set",u._key,y,null!==u.converter,s);return this._transaction.set(u._key,C),this}update(e,t,s,...u){const y=eu(e,this._firestore);let C;return C="string"==typeof(t=(0,Ze.m9)(t))||t instanceof bc?bp(this._dataReader,"Transaction.update",y._key,t,s,u):Cp(this._dataReader,"Transaction.update",y._key,t),this._transaction.update(y._key,C),this}delete(e){const t=eu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=eu(e,this._firestore),s=new Tc(this._firestore);return super.get(e).then(u=>new Dc(this._firestore,s,t._key,u._document,new Jl(!1,!1),t.converter))}}!function(i,e=!0){_t=at.SDK_VERSION,(0,at._registerComponent)(new st.wA("firestore",(t,{instanceIdentifier:s,options:u})=>{const y=t.getProvider("app").getImmediate(),C=new Ms(new _l(t.getProvider("auth-internal")),new il(t.getProvider("app-check-internal")),function(O,j){if(!Object.prototype.hasOwnProperty.apply(O.options,["projectId"]))throw new zt(wt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ci(O.options.projectId,j)}(y,s),y);return u=Object.assign({useFetchStreams:e},u),C._setSettings(u),C},"PUBLIC").setMultipleInstances(!0)),(0,at.registerVersion)(re,"3.9.0",i),(0,at.registerVersion)(re,"3.9.0","esm2017")}();function Ky(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new zt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function I_(){if(typeof Uint8Array>"u")throw new zt("unimplemented","Uint8Arrays are not available in this environment.")}function w_(){if(!function zs(){return typeof atob<"u"}())throw new zt("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Mh{constructor(e){this._delegate=e}static fromBase64String(e){return w_(),new Mh(Wu.fromBase64String(e))}static fromUint8Array(e){return I_(),new Mh(Wu.fromUint8Array(e))}toBase64(){return w_(),this._delegate.toBase64()}toUint8Array(){return I_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Rh(i){return function C_(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(i,["next","error","complete"])}class b_{enableIndexedDbPersistence(e,t){return function n_(i,e){Xl(i=si(i,Ms));const t=ko(i),s=i._freezeSettings(),u=new $g;return r_(t,u,new cp(u,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function fy(i){Xl(i=si(i,Ms));const e=ko(i),t=i._freezeSettings(),s=new $g;return r_(e,s,new Lg(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function py(i){if(i._initialized&&!i._terminated)throw new zt(wt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new wi;return i._queue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{yield(t=(0,le.Z)(function*(s){if(!co.C())return Promise.resolve();const u=s+"main";yield co.delete(u)}),function(s){return t.apply(this,arguments)})(Wf(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class am{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof ci||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&dr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function Xv(i,e,t,s={}){var u;const y=(i=si(i,Fd))._getSettings();if("firestore.googleapis.com"!==y.host&&y.host!==e&&dr("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},y),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let C,O;if("string"==typeof s.mockUserToken)C=s.mockUserToken,O=pe.MOCK_USER;else{C=(0,Ze.Sg)(s.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const j=s.mockUserToken.sub||s.mockUserToken.user_id;if(!j)throw new zt(wt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");O=new pe(j)}i._authCredentials=new pa(new Ps(C,O))}}(this._delegate,e,t,s)}enableNetwork(){return function Gu(i){return function ry(i){return i.asyncQueue.enqueue((0,le.Z)(function*(){const e=yield Hg(i),t=yield mp(i);return e.setNetworkEnabled(!0),function(s){const u=cn(s);return u.mu.delete(0),uh(u)}(t)}))}(ko(i=si(i,Ms)))}(this._delegate)}disableNetwork(){return function i_(i){return function Gg(i){return i.asyncQueue.enqueue((0,le.Z)(function*(){const e=yield Hg(i),t=yield mp(i);return e.setNetworkEnabled(!1),(s=(0,le.Z)(function*(u){const y=cn(u);y.mu.add(0),yield Sd(y),y.pu.set("Offline")}),function(u){return s.apply(this,arguments)})(t);var s}))}(ko(i=si(i,Ms)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Cc("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Xg(i){return function(e){const t=new wi;return e.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function qv(i,e){return Rg.apply(this,arguments)}(yield yp(e),t)})),t.promise}(ko(i=si(i,Ms)))}(this._delegate)}onSnapshotsInSync(e){return function p_(i,e){return function oy(i,e){const t=new Nd(e);return i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return s=yield kd(i),u=t,cn(s).vu.add(u),void u.next();var s,u})),()=>{t.bc(),i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return s=yield kd(i),u=t,void cn(s).vu.delete(u);var s,u}))}}(ko(i=si(i,Ms)),Ep(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new zt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vd(this,Yg(this._delegate,e))}catch(t){throw Ya(t,"collection()","Firestore.collection()")}}doc(e){try{return new wu(this,mo(this._delegate,e))}catch(t){throw Ya(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new qa(this,function Jv(i,e){if(i=si(i,Fd),wh("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new zt(wt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new wa(i,null,(t=e,new dl(Ur.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ya(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function m_(i,e,t){i=si(i,Ms);const s=Object.assign(Object.assign({},Uy),t);return function(u){if(u.maxAttempts<1)throw new zt(wt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(u,y,C){const O=new wi;return u.asyncQueue.enqueueAndForget((0,le.Z)(function*(){const j=yield function ny(i){return df(i).then(e=>e.datastore)}(u);new Vg(u.asyncQueue,j,C,y,O).run()})),O.promise}(ko(i),u=>e(new Tf(i,u)),s)}(this._delegate,t=>e(new Yy(this,t)))}batch(){return ko(this._delegate),new qy(new jy(this._delegate,e=>Ah(this._delegate,e)))}loadBundle(e){return function zu(i,e){const t=ko(i=si(i,Ms)),s=new t_;return function ay(i,e,t,s){const u=function(y,C){let O;return O="string"==typeof y?(new TextEncoder).encode(y):y,j=function(j,Z){if(j instanceof Uint8Array)return uf(j,Z);if(j instanceof ArrayBuffer)return uf(new Uint8Array(j),Z);if(j instanceof ReadableStream)return j.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(O),new Bg(j,C);var j}(t,Td(e));i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){!function Zv(i,e,t){const s=cn(i);var u;(u=(0,le.Z)(function*(y,C,O){try{const j=yield C.getMetadata();if(yield function(It,Ht){const nn=cn(It),Rn=xs(Ht.createTime);return nn.persistence.runTransaction("hasNewerBundle","readonly",ir=>nn.$s.getBundleMetadata(ir,Ht.id)).then(ir=>!!ir&&ir.createTime.compareTo(Rn)>=0)}(y.localStore,j))return yield C.close(),O._completeWith({taskState:"Success",documentsLoaded:(It=j).totalDocuments,bytesLoaded:It.totalBytes,totalDocuments:It.totalDocuments,totalBytes:It.totalBytes}),Promise.resolve(new Set);O._updateProgress(Gm(j));const Z=new Gv(j,y.localStore,C.Tt);let ue=yield C.yc();for(;ue;){const It=yield Z.Bu(ue);It&&O._updateProgress(It),ue=yield C.yc()}const Ye=yield Z.complete();return yield Ko(y,Ye.Uu,void 0),yield function(It,Ht){const nn=cn(It);return nn.persistence.runTransaction("Save bundle","readwrite",Rn=>nn.$s.saveBundleMetadata(Rn,Ht))}(y.localStore,j),O._completeWith(Ye.progress),Promise.resolve(Ye.qu)}catch(j){return dr("SyncEngine",`Loading bundle failed with ${j}`),O._failWith(j),Promise.resolve(new Set)}var It}),function(y,C,O){return u.apply(this,arguments)})(s,e,t).then(u=>{s.sharedClientState.notifyBundleLoaded(u)})}(yield yp(i),u,s)}))}(t,i._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function Eu(i,e){return function ly(i,e){return i.asyncQueue.enqueue((0,le.Z)(function*(){return function(t,s){const u=cn(t);return u.persistence.runTransaction("Get named query","readonly",y=>u.$s.getNamedQuery(y,s))}(yield hf(i),e)}))}(ko(i=si(i,Ms)),e).then(t=>t?new wa(i,null,t.query):null)}(this._delegate,e).then(t=>t?new qa(this,t):null)}}class rd extends My{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mh(new Wu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return wu.forKey(t,this.firestore,null)}}class Yy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new rd(e)}get(e){const t=Ud(e);return this._delegate.get(t).then(s=>new Sf(this._firestore,new Dc(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const u=Ud(e);return s?(Ky("Transaction.set",s),this._delegate.set(u,t,s)):this._delegate.set(u,t),this}update(e,t,s,...u){const y=Ud(e);return 2===arguments.length?this._delegate.update(y,t):this._delegate.update(y,t,s,...u),this}delete(e){const t=Ud(e);return this._delegate.delete(t),this}}class qy{constructor(e){this._delegate=e}set(e,t,s){const u=Ud(e);return s?(Ky("WriteBatch.set",s),this._delegate.set(u,t,s)):this._delegate.set(u,t),this}update(e,t,s,...u){const y=Ud(e);return 2===arguments.length?this._delegate.update(y,t):this._delegate.update(y,t,s,...u),this}delete(e){const t=Ud(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Bd{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new nd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Sc(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Bd.INSTANCES;let u=s.get(e);u||(u=new WeakMap,s.set(e,u));let y=u.get(t);return y||(y=new Bd(e,new rd(e),t),u.set(t,y)),y}}Bd.INSTANCES=new WeakMap;class wu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new rd(e)}static forPath(e,t,s){if(e.length%2!=0)throw new zt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new wu(t,new Ks(t._delegate,s,new pn(e)))}static forKey(e,t,s){return new wu(t,new Ks(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Vd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vd(this.firestore,Yg(this._delegate,e))}catch(t){throw Ya(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ze.m9)(e))instanceof Ks&&qg(this._delegate,e)}set(e,t){t=Ky("DocumentReference.set",t);try{return t?Ly(this._delegate,e,t):Ly(this._delegate,e)}catch(s){throw Ya(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?$y(this._delegate,e):$y(this._delegate,e,t,...s)}catch(u){throw Ya(u,"updateDoc()","DocumentReference.update()")}}delete(){return function f_(i){return Ah(si(i.firestore,Ms),[new Wl(i._key,Xi.none())])}(this._delegate)}onSnapshot(...e){const t=lm(e),s=Zy(e,u=>new Sf(this.firestore,new Dc(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return By(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function h_(i){i=si(i,Ks);const e=si(i.firestore,Ms),t=ko(e),s=new Tc(e);return function iy(i,e){const t=new wi;return i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(s=(0,le.Z)(function*(u,y,C){try{const O=yield function(j,Z){const ue=cn(j);return ue.persistence.runTransaction("read document","readonly",Ye=>ue.localDocuments.getDocument(Ye,Z))}(u,y);O.isFoundDocument()?C.resolve(O):O.isNoDocument()?C.resolve(null):C.reject(new zt(wt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(O){const j=xd(O,`Failed to get document '${y} from cache`);C.reject(j)}}),function(u,y,C){return s.apply(this,arguments)})(yield hf(i),e,t);var s})),t.promise}(t,i._key).then(u=>new Dc(e,s,i._key,u,new Jl(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Py(i){i=si(i,Ks);const e=si(i.firestore,Ms);return zg(ko(e),i._key,{source:"server"}).then(t=>xh(e,i,t))}(this._delegate):function Oy(i){i=si(i,Ks);const e=si(i.firestore,Ms);return zg(ko(e),i._key).then(t=>xh(e,i,t))}(this._delegate),t.then(s=>new Sf(this.firestore,new Dc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new wu(this.firestore,this._delegate.withConverter(e?Bd.getInstance(this.firestore,e):null))}}function Ya(i,e,t){return i.message=i.message.replace(e,t),i}function lm(i){for(const e of i)if("object"==typeof e&&!Rh(e))return e;return{}}function Zy(i,e){var t,s;let u;return u=Rh(i[0])?i[0]:Rh(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:y=>{u.next&&u.next(e(y))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(s=u.complete)||void 0===s?void 0:s.bind(u)}}class Sf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new wu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return d_(this._delegate,e._delegate)}}class Sc extends Sf{data(e){const t=this._delegate.data(e);return function ls(i,e){i||Yt()}(void 0!==t),t}}class qa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new rd(e)}where(e,t,s){try{return new qa(this.firestore,ed(this._delegate,function l_(i,e,t){const s=e,u=Sp("where",i);return Ef._create(u,s,t)}(e,t,s)))}catch(u){throw Ya(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new qa(this.firestore,ed(this._delegate,function Iy(i,e="asc"){const t=e,s=Sp("orderBy",i);return Ap._create(s,t)}(e,t)))}catch(s){throw Ya(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new qa(this.firestore,ed(this._delegate,function wy(i){return _p("limit",i),If._create("limit",i,"F")}(e)))}catch(t){throw Ya(t,"limit()","Query.limit()")}}limitToLast(e){try{return new qa(this.firestore,ed(this._delegate,function Cy(i){return _p("limitToLast",i),If._create("limitToLast",i,"L")}(e)))}catch(t){throw Ya(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new qa(this.firestore,ed(this._delegate,function by(...i){return wf._create("startAt",i,!0)}(...e)))}catch(t){throw Ya(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new qa(this.firestore,ed(this._delegate,function Dy(...i){return wf._create("startAfter",i,!1)}(...e)))}catch(t){throw Ya(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new qa(this.firestore,ed(this._delegate,function Ty(...i){return Cf._create("endBefore",i,!1)}(...e)))}catch(t){throw Ya(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new qa(this.firestore,ed(this._delegate,function Sy(...i){return Cf._create("endAt",i,!0)}(...e)))}catch(t){throw Ya(t,"endAt()","Query.endAt()")}}isEqual(e){return Zg(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ky(i){i=si(i,wa);const e=si(i.firestore,Ms),t=ko(e),s=new Tc(e);return function sy(i,e){const t=new wi;return i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(s=(0,le.Z)(function*(u,y,C){try{const O=yield qh(u,y,!0),j=new Km(y,O.Yi),Z=j.Hu(O.documents),ue=j.applyChanges(Z,!1);C.resolve(ue.snapshot)}catch(O){const j=xd(O,`Failed to execute query '${y} against cache`);C.reject(j)}}),function(u,y,C){return s.apply(this,arguments)})(yield hf(i),e,t);var s})),t.promise}(t,i._query).then(u=>new Iu(e,s,i,u))}(this._delegate):"server"===(null==e?void 0:e.source)?function Fy(i){i=si(i,wa);const e=si(i.firestore,Ms),t=ko(e),s=new Tc(e);return Wg(t,i._query,{source:"server"}).then(u=>new Iu(e,s,i,u))}(this._delegate):function Ny(i){i=si(i,wa);const e=si(i.firestore,Ms),t=ko(e),s=new Tc(e);return Ey(i._query),Wg(t,i._query).then(u=>new Iu(e,s,i,u))}(this._delegate),t.then(s=>new um(this.firestore,new Iu(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=lm(e),s=Zy(e,u=>new um(this.firestore,new Iu(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return By(this._delegate,t,s)}withConverter(e){return new qa(this.firestore,this._delegate.withConverter(e?Bd.getInstance(this.firestore,e):null))}}class Qy{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Sc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class um{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new qa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Sc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Qy(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Sc(this._firestore,s))})}isEqual(e){return d_(this._delegate,e._delegate)}}class Vd extends qa{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new wu(this.firestore,e):null}doc(e){try{return new wu(this.firestore,void 0===e?mo(this._delegate):mo(this._delegate,e))}catch(t){throw Ya(t,"doc()","CollectionReference.doc()")}}add(e){return function Df(i,e){const t=si(i.firestore,Ms),s=mo(i),u=bf(i.converter,e);return Ah(t,[Ip(Ku(i.firestore),"addDoc",s._key,u,null!==i.converter,{}).toMutation(s._key,Xi.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new wu(this.firestore,t))}isEqual(e){return qg(this._delegate,e._delegate)}withConverter(e){return new Vd(this.firestore,this._delegate.withConverter(e?Bd.getInstance(this.firestore,e):null))}}function Ud(i){return si(i,Ks)}class Mp{constructor(...e){this._delegate=new bc(...e)}static documentId(){return new Mp(pi.keyField().canonicalString())}isEqual(e){return(e=(0,Ze.m9)(e))instanceof bc&&this._delegate._internalPath.isEqual(e._internalPath)}}class jd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function v_(){return new mf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new jd(e)}static delete(){const e=function y_(){return new Th("deleteField")}();return e._methodName="FieldValue.delete",new jd(e)}static arrayUnion(...e){const t=function Hy(...i){return new wp("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new jd(t)}static arrayRemove(...e){const t=function Gy(...i){return new tm("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new jd(t)}static increment(e){const t=function zy(i){return new vy("increment",i)}(e);return t._methodName="FieldValue.increment",new jd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const cm={Firestore:am,GeoPoint:Dh,Timestamp:Ni,Blob:Mh,Transaction:Yy,WriteBatch:qy,DocumentReference:wu,DocumentSnapshot:Sf,Query:qa,QueryDocumentSnapshot:Sc,QuerySnapshot:um,CollectionReference:Vd,FieldPath:Mp,FieldValue:jd,setLogLevel:function D_(i){!function or(i){Bt.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Xy(i){(function T_(i,e){i.INTERNAL.registerComponent(new st.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(s,u)},"PUBLIC").setServiceProps(Object.assign({},cm)))})(i,(e,t)=>new am(e,t,new b_)),i.registerVersion("@firebase/firestore-compat","0.3.5")}(ye.Z);var Ac=B(1205),S_=B(6217),A_=B(9260);function Rp(i,e){return function x_(i,e=J.z){return new G.y(t=>{let s;return null!=e?e.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},t)}):s=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(i,e)}function Op(i,e){return Rp(i,e).pipe((0,ce.U)(t=>({payload:t,type:"query"})))}function Pp(i,e){return Op(i,e).pipe((0,he.O)(void 0),ge(),(0,ce.U)(([t,s])=>{const u=s.payload.docChanges(),y=u.map(C=>({type:C.type,payload:C}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((C,O)=>{const j=u.find(ue=>ue.doc.ref.isEqual(C.ref)),Z=null==t?void 0:t.payload.docs.find(ue=>ue.ref.isEqual(C.ref));j&&JSON.stringify(j.doc.metadata)===JSON.stringify(C.metadata)||!j&&Z&&JSON.stringify(Z.metadata)===JSON.stringify(C.metadata)||y.push({type:"modified",payload:{oldIndex:O,newIndex:O,type:"modified",doc:C}})}),y}))}function Jy(i,e,t){return Pp(i,t).pipe((0,de.R)((s,u)=>function R_(i,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(i=function O_(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return dm(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return dm(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return dm(i,e.oldIndex,1)}return i}(i,s))}),i}(s,u.map(y=>y.payload),e),[]),(0,Ce.x)(),(0,ce.U)(s=>s.map(u=>({type:u.type,payload:u}))))}function dm(i,e,t,...s){const u=i.slice();return u.splice(e,t,...s),u}function ev(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class tv{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Pp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ce.U)(s=>s.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,he.O)(void 0),ge(),(0,Fe.h)(([s,u])=>u.length>0||!s),(0,ce.U)(([s,u])=>u),Ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,de.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=ev(e);return Jy(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(e={}){return Op(this.query,this.afs.schedulers.outsideAngular).pipe((0,ce.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),Ae.iC)}get(e){return(0,De.D)(this.query.get(e)).pipe(Ae.iC)}add(e){return this.ref.add(e)}doc(e){return new nv(this.ref.doc(e),this.afs)}}class nv{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:u,query:y}=ov(s,t);return new tv(u,y,this.afs)}snapshotChanges(){return function M_(i,e){return Rp(i,e).pipe((0,he.O)(void 0),ge(),(0,ce.U)(([t,s])=>s.exists?null!=t&&t.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ce.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,De.D)(this.ref.get(e)).pipe(Ae.iC)}}class rv{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Pp(this.query,this.afs.schedulers.outsideAngular).pipe((0,ce.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,Fe.h)(t=>t.length>0),Ae.iC):Pp(this.query,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,de.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=ev(e);return Jy(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(e={}){return Op(this.query,this.afs.schedulers.outsideAngular).pipe((0,ce.U)(s=>s.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),Ae.iC)}get(e){return(0,De.D)(this.query.get(e)).pipe(Ae.iC)}}const hm=new a.OlP("angularfire2.enableFirestorePersistence"),iv=new a.OlP("angularfire2.firestore.persistenceSettings"),P_=new a.OlP("angularfire2.firestore.settings"),sv=new a.OlP("angularfire2.firestore.use-emulator");function ov(i,e=(t=>t)){return{query:e(i),ref:i}}let av=(()=>{class i{constructor(t,s,u,y,C,O,j,Z,ue,Ye,It,Ht,nn,Rn,ir,ts,vo){this.schedulers=j;const ai=(0,it.on)(t,O,s),_o=ue;Ye&&(0,Ac.nw)(ai,O,It,nn,Rn,ir,Ht,ts),[this.firestore,this.persistenceEnabled$]=(0,it.cc)(`${ai.name}.firestore`,"AngularFirestore",ai.name,()=>{const Ri=O.runOutsideAngular(()=>ai.firestore());if(y&&Ri.settings(y),_o&&Ri.useEmulator(..._o),u&&!(0,Ct.PM)(C)){const Fi=()=>{try{return(0,De.D)(Ri.enablePersistence(Z||void 0).then(()=>!0,()=>!1))}catch(ra){return typeof console<"u"&&console.warn(ra),(0,Me.of)(!1)}};return[Ri,O.runOutsideAngular(Fi)]}return[Ri,(0,Me.of)(!1)]},[y,_o,u])}collection(t,s){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:y,query:C}=ov(u,s),O=this.schedulers.ngZone.run(()=>y);return new tv(O,C,this)}collectionGroup(t,s){const u=s||(C=>C),y=this.firestore.collectionGroup(t);return new rv(u(y),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>s);return new nv(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(a.LFG(it.Dh),a.LFG(it.xv,8),a.LFG(hm,8),a.LFG(P_,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Ae.HU),a.LFG(iv,8),a.LFG(sv,8),a.LFG(Ac.zQ,8),a.LFG(Ac.Qv,8),a.LFG(Ac.L6,8),a.LFG(Ac._Q,8),a.LFG(Ac.rT,8),a.LFG(Ac.lh,8),a.LFG(Ac.f7,8),a.LFG(S_.nm,8))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),N_=(()=>{class i{constructor(){A_.Z.registerVersion("angularfire",Ae.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:hm,useValue:!0},{provide:iv,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[av]}),i})()},2011:(sn,ht,B)=>{"use strict";B.d(ht,{Dh:()=>xe,GT:()=>Ae,cc:()=>Fe,hO:()=>Ce,on:()=>ge,pX:()=>Me,xv:()=>Ve});var a=B(4650),J=B(9260),G=B(2122);sn=B.hmd(sn);const De=["ngOnDestroy"],Me=(ye,le,at,st={})=>new Proxy(ye,{get:(Xe,Ze)=>at.runOutsideAngular(()=>{var Pe;if(ye[Ze])return!(null===(Pe=null==st?void 0:st.spy)||void 0===Pe)&&Pe.get&&st.spy.get(Ze,ye[Ze]),ye[Ze];if(De.indexOf(Ze)>-1)return()=>{};const Oe=le.toPromise().then(Q=>{const et=Q&&Q[Ze];return"function"==typeof et?et.bind(Q):et&&et.then?et.then(ke=>at.run(()=>ke)):at.run(()=>et)});return new Proxy(()=>{},{get:(Q,et)=>Oe[et],apply:(Q,et,ke)=>Oe.then(He=>{var Ge;const rt=He&&He(...ke);return!(null===(Ge=null==st?void 0:st.spy)||void 0===Ge)&&Ge.apply&&st.spy.apply(Ze,ke,rt),rt})})})}),Ae=(ye,le)=>{le.forEach(at=>{Object.getOwnPropertyNames(at.prototype||at).forEach(st=>{Object.defineProperty(ye.prototype,st,Object.getOwnPropertyDescriptor(at.prototype||at,st))})})};class he{constructor(le){return le}}const xe=new a.OlP("angularfire2.app.options"),Ve=new a.OlP("angularfire2.app.name");function ge(ye,le,at){const Xe="object"==typeof at&&at||{};Xe.name=Xe.name||"string"==typeof at&&at||"[DEFAULT]";const Pe=J.Z.apps.filter(Oe=>Oe&&Oe.name===Xe.name)[0]||le.runOutsideAngular(()=>J.Z.initializeApp(ye,Xe));try{JSON.stringify(ye)!==JSON.stringify(Pe.options)&&ce("error",`${Pe.name} Firebase App already initialized with different options${sn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Oe){}return new he(Pe)}const ce=(ye,...le)=>{(0,a.X6Q)()&&typeof console<"u"&&console[ye](...le)},de={provide:he,useFactory:ge,deps:[xe,a.R0b,[new a.FiY,Ve]]};let Ce=(()=>{class ye{constructor(at){J.Z.registerVersion("angularfire",G.q4.full,"core"),J.Z.registerVersion("angularfire",G.q4.full,"app-compat"),J.Z.registerVersion("angular",a.q4F.full,at.toString())}static initializeApp(at,st){return{ngModule:ye,providers:[{provide:xe,useValue:at},{provide:Ve,useValue:st}]}}}return ye.\u0275fac=function(at){return new(at||ye)(a.LFG(a.Lbi))},ye.\u0275mod=a.oAB({type:ye}),ye.\u0275inj=a.cJS({providers:[de]}),ye})();function Fe(ye,le,at,st,Xe){const[,Ze,Pe]=globalThis.\u0275AngularfireInstanceCache.find(Oe=>Oe[0]===ye)||[];if(Ze)return function it(ye,le){try{return ye.toString()===le.toString()}catch(at){return ye===le}}(Xe,Pe)||(Te("error",`${le} was already initialized on the ${at} Firebase App with different settings.${Ct?" You may need to reload as Firebase is not HMR aware.":""}`),Te("warn",{is:Xe,was:Pe})),Ze;{const Oe=st();return globalThis.\u0275AngularfireInstanceCache.push([ye,Oe,Xe]),Oe}}const Ct=!!sn.hot,Te=(ye,...le)=>{(0,a.X6Q)()&&typeof console<"u"&&console[ye](...le)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(sn,ht,B)=>{"use strict";B.d(ht,{q4:()=>su,iC:()=>on,HU:()=>R,vb:()=>Qi,JM:()=>ki});var a=B(4650),J=B(259),G=B(5861),De=B(9681),Me=B(2090),Ae=B(4859),he=B(1877),xe=B(8766);const Ve="@firebase/installations",ge="0.6.4",ce=1e4,de=`w:${ge}`,Ce="FIS_v2",Fe="https://firebaseinstallations.googleapis.com/v1",it=36e5,le=new Me.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function at(F){return F instanceof Me.ZR&&F.code.includes("request-failed")}function st({projectId:F}){return`${Fe}/projects/${F}/installations`}function Xe(F){return{token:F.token,requestStatus:2,expiresIn:He(F.expiresIn),creationTime:Date.now()}}function Ze(F,U){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,G.Z)(function*(F,U){const Se=(yield U.json()).error;return le.create("request-failed",{requestName:F,serverCode:Se.code,serverMessage:Se.message,serverStatus:Se.status})})).apply(this,arguments)}function Oe({apiKey:F}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F})}function et(F){return ke.apply(this,arguments)}function ke(){return(ke=(0,G.Z)(function*(F){const U=yield F();return U.status>=500&&U.status<600?F():U})).apply(this,arguments)}function He(F){return Number(F.replace("s","000"))}function z(){return(z=(0,G.Z)(function*({appConfig:F,heartbeatServiceProvider:U},{fid:te}){const Se=st(F),ut=Oe(F),Et=U.getImmediate({optional:!0});if(Et){const tr=yield Et.getHeartbeatsHeader();tr&&ut.append("x-firebase-client",tr)}const bn={method:"POST",headers:ut,body:JSON.stringify({fid:te,authVersion:Ce,appId:F.appId,sdkVersion:de})},Wn=yield et(()=>fetch(Se,bn));if(Wn.ok){const tr=yield Wn.json();return{fid:tr.fid||te,registrationStatus:2,refreshToken:tr.refreshToken,authToken:Xe(tr.authToken)}}throw yield Ze("Create Installation",Wn)})).apply(this,arguments)}function ft(F){return new Promise(U=>{setTimeout(U,F)})}const Ie=/^[cdef][\w-]{21}$/,Ee="";function be(){try{const F=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(F),F[0]=112+F[0]%16;const te=function tt(F){return function nt(F){return btoa(String.fromCharCode(...F)).replace(/\+/g,"-").replace(/\//g,"_")}(F).substr(0,22)}(F);return Ie.test(te)?te:Ee}catch(F){return Ee}}function $e(F){return`${F.appName}!${F.appId}`}const Je=new Map;function Ke(F,U){const te=$e(F);Nt(te,U),function vt(F,U){const te=function En(){return!Sn&&"BroadcastChannel"in self&&(Sn=new BroadcastChannel("[Firebase] FID Change"),Sn.onmessage=F=>{Nt(F.data.key,F.data.fid)}),Sn}();te&&te.postMessage({key:F,fid:U}),function Fn(){0===Je.size&&Sn&&(Sn.close(),Sn=null)}()}(te,U)}function Nt(F,U){const te=Je.get(F);if(te)for(const Se of te)Se(U)}let Sn=null;const $n="firebase-installations-database",Zt=1,Qn="firebase-installations-store";let vr=null;function lr(){return vr||(vr=(0,xe.X3)($n,Zt,{upgrade:(F,U)=>{0===U&&F.createObjectStore(Qn)}})),vr}function hn(F,U){return _r.apply(this,arguments)}function _r(){return(_r=(0,G.Z)(function*(F,U){const te=$e(F),ut=(yield lr()).transaction(Qn,"readwrite"),Et=ut.objectStore(Qn),Jt=yield Et.get(te);return yield Et.put(U,te),yield ut.done,(!Jt||Jt.fid!==U.fid)&&Ke(F,U.fid),U})).apply(this,arguments)}function Wt(F){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,G.Z)(function*(F){const U=$e(F),Se=(yield lr()).transaction(Qn,"readwrite");yield Se.objectStore(Qn).delete(U),yield Se.done})).apply(this,arguments)}function Cr(F,U){return Er.apply(this,arguments)}function Er(){return(Er=(0,G.Z)(function*(F,U){const te=$e(F),ut=(yield lr()).transaction(Qn,"readwrite"),Et=ut.objectStore(Qn),Jt=yield Et.get(te),bn=U(Jt);return void 0===bn?yield Et.delete(te):yield Et.put(bn,te),yield ut.done,bn&&(!Jt||Jt.fid!==bn.fid)&&Ke(F,bn.fid),bn})).apply(this,arguments)}function Zr(F){return Sr.apply(this,arguments)}function Sr(){return Sr=(0,G.Z)(function*(F){let U;const te=yield Cr(F.appConfig,Se=>{const ut=function Dn(F){return yi(F||{fid:be(),registrationStatus:0})}(Se),Et=function yn(F,U){if(0===U.registrationStatus){if(!navigator.onLine)return{installationEntry:U,registrationPromise:Promise.reject(le.create("app-offline"))};const te={fid:U.fid,registrationStatus:1,registrationTime:Date.now()},Se=function In(F,U){return An.apply(this,arguments)}(F,te);return{installationEntry:te,registrationPromise:Se}}return 1===U.registrationStatus?{installationEntry:U,registrationPromise:mr(F)}:{installationEntry:U}}(F,ut);return U=Et.registrationPromise,Et.installationEntry});return te.fid===Ee?{installationEntry:yield U}:{installationEntry:te,registrationPromise:U}}),Sr.apply(this,arguments)}function An(){return An=(0,G.Z)(function*(F,U){try{const te=yield function rt(F,U){return z.apply(this,arguments)}(F,U);return hn(F.appConfig,te)}catch(te){throw at(te)&&409===te.customData.serverCode?yield Wt(F.appConfig):yield hn(F.appConfig,{fid:U.fid,registrationStatus:0}),te}}),An.apply(this,arguments)}function mr(F){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,G.Z)(function*(F){let U=yield Ar(F.appConfig);for(;1===U.registrationStatus;)yield ft(100),U=yield Ar(F.appConfig);if(0===U.registrationStatus){const{installationEntry:te,registrationPromise:Se}=yield Zr(F);return Se||te}return U})).apply(this,arguments)}function Ar(F){return Cr(F,U=>{if(!U)throw le.create("installation-not-found");return yi(U)})}function yi(F){return function Li(F){return 1===F.registrationStatus&&F.registrationTime+ce<Date.now()}(F)?{fid:F.fid,registrationStatus:0}:F}function di(){return(di=(0,G.Z)(function*({appConfig:F,heartbeatServiceProvider:U},te){const Se=function rr(F,{fid:U}){return`${st(F)}/${U}/authTokens:generate`}(F,te),ut=function Q(F,{refreshToken:U}){const te=Oe(F);return te.append("Authorization",function Ge(F){return`${Ce} ${F}`}(U)),te}(F,te),Et=U.getImmediate({optional:!0});if(Et){const tr=yield Et.getHeartbeatsHeader();tr&&ut.append("x-firebase-client",tr)}const bn={method:"POST",headers:ut,body:JSON.stringify({installation:{sdkVersion:de,appId:F.appId}})},Wn=yield et(()=>fetch(Se,bn));if(Wn.ok)return Xe(yield Wn.json());throw yield Ze("Generate Auth Token",Wn)})).apply(this,arguments)}function Nn(F){return hi.apply(this,arguments)}function hi(){return hi=(0,G.Z)(function*(F,U=!1){let te;const Se=yield Cr(F.appConfig,Et=>{if(!Vn(Et))throw le.create("not-registered");const Jt=Et.authToken;if(!U&&function xr(F){return 2===F.requestStatus&&!function Re(F){const U=Date.now();return U<F.creationTime||F.creationTime+F.expiresIn<U+it}(F)}(Jt))return Et;if(1===Jt.requestStatus)return te=function en(F,U){return $t.apply(this,arguments)}(F,U),Et;{if(!navigator.onLine)throw le.create("app-offline");const bn=function _e(F){const U={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},F),{authToken:U})}(Et);return te=function Tn(F,U){return On.apply(this,arguments)}(F,bn),bn}});return te?yield te:Se.authToken}),hi.apply(this,arguments)}function $t(){return($t=(0,G.Z)(function*(F,U){let te=yield gn(F.appConfig);for(;1===te.authToken.requestStatus;)yield ft(100),te=yield gn(F.appConfig);const Se=te.authToken;return 0===Se.requestStatus?Nn(F,U):Se})).apply(this,arguments)}function gn(F){return Cr(F,U=>{if(!Vn(U))throw le.create("not-registered");return function ze(F){return 1===F.requestStatus&&F.requestTime+ce<Date.now()}(U.authToken)?Object.assign(Object.assign({},U),{authToken:{requestStatus:0}}):U})}function On(){return On=(0,G.Z)(function*(F,U){try{const te=yield function Dr(F,U){return di.apply(this,arguments)}(F,U),Se=Object.assign(Object.assign({},U),{authToken:te});return yield hn(F.appConfig,Se),te}catch(te){if(!at(te)||401!==te.customData.serverCode&&404!==te.customData.serverCode){const Se=Object.assign(Object.assign({},U),{authToken:{requestStatus:0}});yield hn(F.appConfig,Se)}else yield Wt(F.appConfig);throw te}}),On.apply(this,arguments)}function Vn(F){return void 0!==F&&2===F.registrationStatus}function gt(){return(gt=(0,G.Z)(function*(F){const U=F,{installationEntry:te,registrationPromise:Se}=yield Zr(U);return Se?Se.catch(console.error):Nn(U).catch(console.error),te.fid})).apply(this,arguments)}function Le(){return Le=(0,G.Z)(function*(F,U=!1){const te=F;return yield function Be(F){return me.apply(this,arguments)}(te),(yield Nn(te,U)).token}),Le.apply(this,arguments)}function me(){return(me=(0,G.Z)(function*(F){const{registrationPromise:U}=yield Zr(F);U&&(yield U)})).apply(this,arguments)}function Yi(F){return le.create("missing-app-config-values",{valueName:F})}const fi="installations",Rr=F=>{const U=F.getProvider("app").getImmediate(),te=function Bi(F){if(!F||!F.options)throw Yi("App Configuration");if(!F.name)throw Yi("App Name");const U=["projectId","apiKey","appId"];for(const te of U)if(!F.options[te])throw Yi(te);return{appName:F.name,projectId:F.options.projectId,apiKey:F.options.apiKey,appId:F.options.appId}}(U);return{app:U,appConfig:te,heartbeatServiceProvider:(0,De._getProvider)(U,"heartbeat"),_delete:()=>Promise.resolve()}},is=F=>{const U=F.getProvider("app").getImmediate(),te=(0,De._getProvider)(U,fi).getImmediate();return{getId:()=>function Mt(F){return gt.apply(this,arguments)}(te),getToken:ut=>function dn(F){return Le.apply(this,arguments)}(te,ut)}};(function Ui(){(0,De._registerComponent)(new Ae.wA(fi,Rr,"PUBLIC")),(0,De._registerComponent)(new Ae.wA("installations-internal",is,"PRIVATE"))})(),(0,De.registerVersion)(Ve,ge),(0,De.registerVersion)(Ve,ge,"esm2017");const Zn="@firebase/remote-config",jr=new Me.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class wn{constructor(U,te,Se,ut){this.client=U,this.storage=te,this.storageCache=Se,this.logger=ut}isCachedDataFresh(U,te){if(!te)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Se=Date.now()-te,ut=Se<=U;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Se}. Cache max age millis (minimumFetchIntervalMillis setting): ${U}. Is cache hit: ${ut}.`),ut}fetch(U){var te=this;return(0,G.Z)(function*(){const[Se,ut]=yield Promise.all([te.storage.getLastSuccessfulFetchTimestampMillis(),te.storage.getLastSuccessfulFetchResponse()]);if(ut&&te.isCachedDataFresh(U.cacheMaxAgeMillis,Se))return ut;U.eTag=ut&&ut.eTag;const Et=yield te.client.fetch(U),Jt=[te.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Et.status&&Jt.push(te.storage.setLastSuccessfulFetchResponse(Et)),yield Promise.all(Jt),Et})()}}function Mn(F=navigator){return F.languages&&F.languages[0]||F.language}class Ir{constructor(U,te,Se,ut,Et,Jt){this.firebaseInstallations=U,this.sdkVersion=te,this.namespace=Se,this.projectId=ut,this.apiKey=Et,this.appId=Jt}fetch(U){var te=this;return(0,G.Z)(function*(){const[Se,ut]=yield Promise.all([te.firebaseInstallations.getId(),te.firebaseInstallations.getToken()]),Jt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${te.projectId}/namespaces/${te.namespace}:fetch?key=${te.apiKey}`,bn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":U.eTag||"*"},Wn={sdk_version:te.sdkVersion,app_instance_id:Se,app_instance_id_token:ut,app_id:te.appId,language_code:Mn()},tr={method:"POST",headers:bn,body:JSON.stringify(Wn)},Mr=fetch(Jt,tr),nr=new Promise((po,Jo)=>{U.signal.addEventListener(()=>{const cl=new Error("The operation was aborted.");cl.name="AbortError",Jo(cl)})});let no;try{yield Promise.race([Mr,nr]),no=yield Mr}catch(po){let Jo="fetch-client-network";throw"AbortError"===(null==po?void 0:po.name)&&(Jo="fetch-timeout"),jr.create(Jo,{originalErrorMessage:null==po?void 0:po.message})}let ro=no.status;const ya=no.headers.get("ETag")||void 0;let Gr,gi;if(200===no.status){let po;try{po=yield no.json()}catch(Jo){throw jr.create("fetch-client-parse",{originalErrorMessage:null==Jo?void 0:Jo.message})}Gr=po.entries,gi=po.state}if("INSTANCE_STATE_UNSPECIFIED"===gi?ro=500:"NO_CHANGE"===gi?ro=304:("NO_TEMPLATE"===gi||"EMPTY_CONFIG"===gi)&&(Gr={}),304!==ro&&200!==ro)throw jr.create("fetch-status",{httpStatus:ro});return{status:ro,eTag:ya,config:Gr}})()}}class Ne{constructor(U,te){this.client=U,this.storage=te}fetch(U){var te=this;return(0,G.Z)(function*(){const Se=(yield te.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return te.attemptFetch(U,Se)})()}attemptFetch(U,{throttleEndTimeMillis:te,backoffCount:Se}){var ut=this;return(0,G.Z)(function*(){yield function Kr(F,U){return new Promise((te,Se)=>{const ut=Math.max(U-Date.now(),0),Et=setTimeout(te,ut);F.addEventListener(()=>{clearTimeout(Et),Se(jr.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}(U.signal,te);try{const Et=yield ut.client.fetch(U);return yield ut.storage.deleteThrottleMetadata(),Et}catch(Et){if(!function ot(F){if(!(F instanceof Me.ZR&&F.customData))return!1;const U=Number(F.customData.httpStatus);return 429===U||500===U||503===U||504===U}(Et))throw Et;const Jt={throttleEndTimeMillis:Date.now()+(0,Me.$s)(Se),backoffCount:Se+1};return yield ut.storage.setThrottleMetadata(Jt),ut.attemptFetch(U,Jt)}})()}}class tn{constructor(U,te,Se,ut,Et){this.app=U,this._client=te,this._storageCache=Se,this._storage=ut,this._logger=Et,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function kn(F,U){const te=F.target.error||void 0;return jr.create(U,{originalErrorMessage:te&&(null==te?void 0:te.message)})}const zn="app_namespace_store";class Yn{constructor(U,te,Se,ut=function br(){return new Promise((F,U)=>{try{const te=indexedDB.open("firebase_remote_config",1);te.onerror=Se=>{U(kn(Se,"storage-open"))},te.onsuccess=Se=>{F(Se.target.result)},te.onupgradeneeded=Se=>{0===Se.oldVersion&&Se.target.result.createObjectStore(zn,{keyPath:"compositeKey"})}}catch(te){U(jr.create("storage-open",{originalErrorMessage:null==te?void 0:te.message}))}})}()){this.appId=U,this.appName=te,this.namespace=Se,this.openDbPromise=ut}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(U){return this.set("last_fetch_status",U)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(U){return this.set("last_successful_fetch_timestamp_millis",U)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(U){return this.set("last_successful_fetch_response",U)}getActiveConfig(){return this.get("active_config")}setActiveConfig(U){return this.set("active_config",U)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(U){return this.set("active_config_etag",U)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(U){return this.set("throttle_metadata",U)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(U){var te=this;return(0,G.Z)(function*(){const Se=yield te.openDbPromise;return new Promise((ut,Et)=>{const bn=Se.transaction([zn],"readonly").objectStore(zn),Wn=te.createCompositeKey(U);try{const tr=bn.get(Wn);tr.onerror=Mr=>{Et(kn(Mr,"storage-get"))},tr.onsuccess=Mr=>{const nr=Mr.target.result;ut(nr?nr.value:void 0)}}catch(tr){Et(jr.create("storage-get",{originalErrorMessage:null==tr?void 0:tr.message}))}})})()}set(U,te){var Se=this;return(0,G.Z)(function*(){const ut=yield Se.openDbPromise;return new Promise((Et,Jt)=>{const Wn=ut.transaction([zn],"readwrite").objectStore(zn),tr=Se.createCompositeKey(U);try{const Mr=Wn.put({compositeKey:tr,value:te});Mr.onerror=nr=>{Jt(kn(nr,"storage-set"))},Mr.onsuccess=()=>{Et()}}catch(Mr){Jt(jr.create("storage-set",{originalErrorMessage:null==Mr?void 0:Mr.message}))}})})()}delete(U){var te=this;return(0,G.Z)(function*(){const Se=yield te.openDbPromise;return new Promise((ut,Et)=>{const bn=Se.transaction([zn],"readwrite").objectStore(zn),Wn=te.createCompositeKey(U);try{const tr=bn.delete(Wn);tr.onerror=Mr=>{Et(kn(Mr,"storage-delete"))},tr.onsuccess=()=>{ut()}}catch(tr){Et(jr.create("storage-delete",{originalErrorMessage:null==tr?void 0:tr.message}))}})})()}createCompositeKey(U){return[this.appId,this.appName,this.namespace,U].join()}}class Bn{constructor(U){this.storage=U}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var U=this;return(0,G.Z)(function*(){const te=U.storage.getLastFetchStatus(),Se=U.storage.getLastSuccessfulFetchTimestampMillis(),ut=U.storage.getActiveConfig(),Et=yield te;Et&&(U.lastFetchStatus=Et);const Jt=yield Se;Jt&&(U.lastSuccessfulFetchTimestampMillis=Jt);const bn=yield ut;bn&&(U.activeConfig=bn)})()}setLastFetchStatus(U){return this.lastFetchStatus=U,this.storage.setLastFetchStatus(U)}setLastSuccessfulFetchTimestampMillis(U){return this.lastSuccessfulFetchTimestampMillis=U,this.storage.setLastSuccessfulFetchTimestampMillis(U)}setActiveConfig(U){return this.activeConfig=U,this.storage.setActiveConfig(U)}}function Gi(){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,G.Z)(function*(){if(!(0,Me.hl)())return!1;try{return yield(0,Me.eu)()}catch(F){return!1}})).apply(this,arguments)}!function qi(){(0,De._registerComponent)(new Ae.wA("remote-config",function F(U,{instanceIdentifier:te}){const Se=U.getProvider("app").getImmediate(),ut=U.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw jr.create("registration-window");if(!(0,Me.hl)())throw jr.create("indexed-db-unavailable");const{projectId:Et,apiKey:Jt,appId:bn}=Se.options;if(!Et)throw jr.create("registration-project-id");if(!Jt)throw jr.create("registration-api-key");if(!bn)throw jr.create("registration-app-id");const Wn=new Yn(bn,Se.name,te=te||"firebase"),tr=new Bn(Wn),Mr=new he.Yd(Zn);Mr.logLevel=he.in.ERROR;const nr=new Ir(ut,De.SDK_VERSION,te,Et,Jt,bn),no=new Ne(nr,Wn),ro=new wn(no,Wn,tr,Mr),ya=new tn(Se,ro,tr,Wn,Mr);return function fe(F){const U=(0,Me.m9)(F);U._initializePromise||(U._initializePromise=U._storageCache.loadFromStorage().then(()=>{U._isInitializationComplete=!0}))}(ya),ya},"PUBLIC").setMultipleInstances(!0)),(0,De.registerVersion)(Zn,"0.4.4"),(0,De.registerVersion)(Zn,"0.4.4","esm2017")}();const Eo="/firebase-messaging-sw.js",Fr="/firebase-cloud-messaging-push-scope",qn="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ni="https://fcmregistrations.googleapis.com/v1",Io="google.c.a.c_id",qs="google.c.a.c_l",zi="google.c.a.ts",Es="google.c.a.e";var Zs=(()=>{return(F=Zs||(Zs={})).PUSH_RECEIVED="push-received",F.NOTIFICATION_CLICKED="notification-clicked",Zs;var F})();function ss(F){const U=new Uint8Array(F);return btoa(String.fromCharCode(...U)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Qs(F){const te=(F+"=".repeat((4-F.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Se=atob(te),ut=new Uint8Array(Se.length);for(let Et=0;Et<Se.length;++Et)ut[Et]=Se.charCodeAt(Et);return ut}const Xs="fcm_token_details_db",$s=5,Ai="fcm_token_object_Store";function wo(){return wo=(0,G.Z)(function*(F){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Et=>Et.name).includes(Xs))return null;let U=null;return(yield(0,xe.X3)(Xs,$s,{upgrade:(Se=(0,G.Z)(function*(ut,Et,Jt,bn){var Wn;if(Et<2||!ut.objectStoreNames.contains(Ai))return;const tr=bn.objectStore(Ai),Mr=yield tr.index("fcmSenderId").get(F);if(yield tr.clear(),Mr)if(2===Et){const nr=Mr;if(!nr.auth||!nr.p256dh||!nr.endpoint)return;U={token:nr.fcmToken,createTime:null!==(Wn=nr.createTime)&&void 0!==Wn?Wn:Date.now(),subscriptionOptions:{auth:nr.auth,p256dh:nr.p256dh,endpoint:nr.endpoint,swScope:nr.swScope,vapidKey:"string"==typeof nr.vapidKey?nr.vapidKey:ss(nr.vapidKey)}}}else if(3===Et){const nr=Mr;U={token:nr.fcmToken,createTime:nr.createTime,subscriptionOptions:{auth:ss(nr.auth),p256dh:ss(nr.p256dh),endpoint:nr.endpoint,swScope:nr.swScope,vapidKey:ss(nr.vapidKey)}}}else if(4===Et){const nr=Mr;U={token:nr.fcmToken,createTime:nr.createTime,subscriptionOptions:{auth:ss(nr.auth),p256dh:ss(nr.p256dh),endpoint:nr.endpoint,swScope:nr.swScope,vapidKey:ss(nr.vapidKey)}}}}),function(Et,Jt,bn,Wn){return Se.apply(this,arguments)})})).close(),yield(0,xe.Lj)(Xs),yield(0,xe.Lj)("fcm_vapid_details_db"),yield(0,xe.Lj)("undefined"),function oo(F){if(!F||!F.subscriptionOptions)return!1;const{subscriptionOptions:U}=F;return"number"==typeof F.createTime&&F.createTime>0&&"string"==typeof F.token&&F.token.length>0&&"string"==typeof U.auth&&U.auth.length>0&&"string"==typeof U.p256dh&&U.p256dh.length>0&&"string"==typeof U.endpoint&&U.endpoint.length>0&&"string"==typeof U.swScope&&U.swScope.length>0&&"string"==typeof U.vapidKey&&U.vapidKey.length>0}(U)?U:null;var Se}),wo.apply(this,arguments)}const Bs="firebase-messaging-database",ri=1,Ii="firebase-messaging-store";let ur=null;function es(){return ur||(ur=(0,xe.X3)(Bs,ri,{upgrade:(F,U)=>{0===U&&F.createObjectStore(Ii)}})),ur}function os(F){return Vs.apply(this,arguments)}function Vs(){return Vs=(0,G.Z)(function*(F){const U=li(F),Se=yield(yield es()).transaction(Ii).objectStore(Ii).get(U);if(Se)return Se;{const ut=yield function Wi(F){return wo.apply(this,arguments)}(F.appConfig.senderId);if(ut)return yield xi(F,ut),ut}}),Vs.apply(this,arguments)}function xi(F,U){return hs.apply(this,arguments)}function hs(){return(hs=(0,G.Z)(function*(F,U){const te=li(F),ut=(yield es()).transaction(Ii,"readwrite");return yield ut.objectStore(Ii).put(U,te),yield ut.done,U})).apply(this,arguments)}function Yo(){return(Yo=(0,G.Z)(function*(F){const U=li(F),Se=(yield es()).transaction(Ii,"readwrite");yield Se.objectStore(Ii).delete(U),yield Se.done})).apply(this,arguments)}function li({appConfig:F}){return F.appId}const Or=new Me.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Rs(F,U){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,G.Z)(function*(F,U){const te=yield Zo(F),Se=Mi(U),ut={method:"POST",headers:te,body:JSON.stringify(Se)};let Et;try{Et=yield(yield fetch($o(F.appConfig),ut)).json()}catch(Jt){throw Or.create("token-subscribe-failed",{errorInfo:null==Jt?void 0:Jt.toString()})}if(Et.error)throw Or.create("token-subscribe-failed",{errorInfo:Et.error.message});if(!Et.token)throw Or.create("token-subscribe-no-token");return Et.token})).apply(this,arguments)}function qo(){return(qo=(0,G.Z)(function*(F,U){const te=yield Zo(F),Se=Mi(U.subscriptionOptions),ut={method:"PATCH",headers:te,body:JSON.stringify(Se)};let Et;try{Et=yield(yield fetch(`${$o(F.appConfig)}/${U.token}`,ut)).json()}catch(Jt){throw Or.create("token-update-failed",{errorInfo:null==Jt?void 0:Jt.toString()})}if(Et.error)throw Or.create("token-update-failed",{errorInfo:Et.error.message});if(!Et.token)throw Or.create("token-update-no-token");return Et.token})).apply(this,arguments)}function js(F,U){return ui.apply(this,arguments)}function ui(){return(ui=(0,G.Z)(function*(F,U){const Se={method:"DELETE",headers:yield Zo(F)};try{const Et=yield(yield fetch(`${$o(F.appConfig)}/${U}`,Se)).json();if(Et.error)throw Or.create("token-unsubscribe-failed",{errorInfo:Et.error.message})}catch(ut){throw Or.create("token-unsubscribe-failed",{errorInfo:null==ut?void 0:ut.toString()})}})).apply(this,arguments)}function $o({projectId:F}){return`${ni}/projects/${F}/registrations`}function Zo(F){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,G.Z)(function*({appConfig:F,installations:U}){const te=yield U.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F.apiKey,"x-goog-firebase-installations-auth":`FIS ${te}`})})).apply(this,arguments)}function Mi({p256dh:F,auth:U,endpoint:te,vapidKey:Se}){const ut={web:{endpoint:te,auth:U,p256dh:F}};return Se!==qn&&(ut.web.applicationPubKey=Se),ut}const as=6048e5;function Co(){return Co=(0,G.Z)(function*(F){const U=yield function Jn(F,U){return ao.apply(this,arguments)}(F.swRegistration,F.vapidKey),te={vapidKey:F.vapidKey,swScope:F.swRegistration.scope,endpoint:U.endpoint,auth:ss(U.getKey("auth")),p256dh:ss(U.getKey("p256dh"))},Se=yield os(F.firebaseDependencies);if(Se){if(function Uo(F,U){return U.vapidKey===F.vapidKey&&U.endpoint===F.endpoint&&U.auth===F.auth&&U.p256dh===F.p256dh}(Se.subscriptionOptions,te))return Date.now()>=Se.createTime+as?function Vo(F,U){return Xn.apply(this,arguments)}(F,{token:Se.token,createTime:Date.now(),subscriptionOptions:te}):Se.token;try{yield js(F.firebaseDependencies,Se.token)}catch(ut){console.warn(ut)}return ps(F.firebaseDependencies,te)}return ps(F.firebaseDependencies,te)}),Co.apply(this,arguments)}function Bo(){return Bo=(0,G.Z)(function*(F){const U=yield os(F.firebaseDependencies);U&&(yield js(F.firebaseDependencies,U.token),yield function Zi(F){return Yo.apply(this,arguments)}(F.firebaseDependencies));const te=yield F.swRegistration.pushManager.getSubscription();return!te||te.unsubscribe()}),Bo.apply(this,arguments)}function Xn(){return Xn=(0,G.Z)(function*(F,U){try{const te=yield function oi(F,U){return qo.apply(this,arguments)}(F.firebaseDependencies,U),Se=Object.assign(Object.assign({},U),{token:te,createTime:Date.now()});return yield xi(F.firebaseDependencies,Se),te}catch(te){throw yield function fs(F){return Bo.apply(this,arguments)}(F),te}}),Xn.apply(this,arguments)}function ps(F,U){return Js.apply(this,arguments)}function Js(){return(Js=(0,G.Z)(function*(F,U){const Se={token:yield Rs(F,U),createTime:Date.now(),subscriptionOptions:U};return yield xi(F,Se),Se.token})).apply(this,arguments)}function ao(){return(ao=(0,G.Z)(function*(F,U){return(yield F.pushManager.getSubscription())||F.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Qs(U)})})).apply(this,arguments)}function Qo(F){const U={from:F.from,collapseKey:F.collapse_key,messageId:F.fcmMessageId};return function Vr(F,U){if(!U.notification)return;F.notification={};const te=U.notification.title;te&&(F.notification.title=te);const Se=U.notification.body;Se&&(F.notification.body=Se);const ut=U.notification.image;ut&&(F.notification.image=ut);const Et=U.notification.icon;Et&&(F.notification.icon=Et)}(U,F),function g(F,U){U.data&&(F.data=U.data)}(U,F),function E(F,U){var te,Se,ut,Et,Jt;if(!(U.fcmOptions||null!==(te=U.notification)&&void 0!==te&&te.click_action))return;F.fcmOptions={};const bn=null!==(ut=null===(Se=U.fcmOptions)||void 0===Se?void 0:Se.link)&&void 0!==ut?ut:null===(Et=U.notification)||void 0===Et?void 0:Et.click_action;bn&&(F.fcmOptions.link=bn);const Wn=null===(Jt=U.fcmOptions)||void 0===Jt?void 0:Jt.analytics_label;Wn&&(F.fcmOptions.analyticsLabel=Wn)}(U,F),U}function D(F,U){const te=[];for(let Se=0;Se<F.length;Se++)te.push(F.charAt(Se)),Se<U.length&&te.push(U.charAt(Se));return te.join("")}function Ue(F){return Or.create("missing-app-config-values",{valueName:F})}D("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),D("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Gt{constructor(U,te,Se){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ut=function W(F){if(!F||!F.options)throw Ue("App Configuration Object");if(!F.name)throw Ue("App Name");const U=["projectId","apiKey","appId","messagingSenderId"],{options:te}=F;for(const Se of U)if(!te[Se])throw Ue(Se);return{appName:F.name,projectId:te.projectId,apiKey:te.apiKey,appId:te.appId,senderId:te.messagingSenderId}}(U);this.firebaseDependencies={app:U,appConfig:ut,installations:te,analyticsProvider:Se}}_delete(){return Promise.resolve()}}function an(F){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,G.Z)(function*(F){try{F.swRegistration=yield navigator.serviceWorker.register(Eo,{scope:Fr}),F.swRegistration.update().catch(()=>{})}catch(U){throw Or.create("failed-service-worker-registration",{browserErrorMessage:null==U?void 0:U.message})}})).apply(this,arguments)}function Yr(){return(Yr=(0,G.Z)(function*(F,U){if(!U&&!F.swRegistration&&(yield an(F)),U||!F.swRegistration){if(!(U instanceof ServiceWorkerRegistration))throw Or.create("invalid-sw-registration");F.swRegistration=U}})).apply(this,arguments)}function ns(){return(ns=(0,G.Z)(function*(F,U){U?F.vapidKey=U:F.vapidKey||(F.vapidKey=qn)})).apply(this,arguments)}function ii(){return ii=(0,G.Z)(function*(F,U){if(!navigator)throw Or.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Or.create("permission-blocked");return yield function pr(F,U){return ns.apply(this,arguments)}(F,null==U?void 0:U.vapidKey),yield function cr(F,U){return Yr.apply(this,arguments)}(F,null==U?void 0:U.serviceWorkerRegistration),function Lr(F){return Co.apply(this,arguments)}(F)}),ii.apply(this,arguments)}function bo(){return(bo=(0,G.Z)(function*(F,U,te){const Se=function Do(F){switch(F){case Zs.NOTIFICATION_CLICKED:return"notification_open";case Zs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(U);(yield F.firebaseDependencies.analyticsProvider.get()).logEvent(Se,{message_id:te[Io],message_name:te[qs],message_time:te[zi],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ia(){return ia=(0,G.Z)(function*(F,U){const te=U.data;if(!te.isFirebaseMessaging)return;F.onMessageHandler&&te.messageType===Zs.PUSH_RECEIVED&&("function"==typeof F.onMessageHandler?F.onMessageHandler(Qo(te)):F.onMessageHandler.next(Qo(te)));const Se=te.data;(function h(F){return"object"==typeof F&&!!F&&Io in F})(Se)&&"1"===Se[Es]&&(yield function Ci(F,U,te){return bo.apply(this,arguments)}(F,te.messageType,Se))}),ia.apply(this,arguments)}const ha="@firebase/messaging",La=F=>{const U=new Gt(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),F.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",te=>function eo(F,U){return ia.apply(this,arguments)}(U,te)),U},Os=F=>{const U=F.getProvider("messaging").getImmediate();return{getToken:Se=>function gs(F,U){return ii.apply(this,arguments)}(U,Se)}};function jo(){return To.apply(this,arguments)}function To(){return(To=(0,G.Z)(function*(){try{yield(0,Me.eu)()}catch(F){return!1}return typeof window<"u"&&(0,Me.hl)()&&(0,Me.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function sa(){(0,De._registerComponent)(new Ae.wA("messaging",La,"PUBLIC")),(0,De._registerComponent)(new Ae.wA("messaging-internal",Os,"PRIVATE")),(0,De.registerVersion)(ha,"0.12.4"),(0,De.registerVersion)(ha,"0.12.4","esm2017")}();const oa="analytics",Ja="firebase_id",Vi="origin",Pi=6e4,Xr="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Go="https://www.googletagmanager.com/gtag/js",bi=new he.Yd("@firebase/analytics");function aa(F){return Promise.all(F.map(U=>U.catch(te=>te)))}function fa(){return(fa=(0,G.Z)(function*(F,U,te,Se,ut,Et){const Jt=Se[ut];try{if(Jt)yield U[Jt];else{const Wn=(yield aa(te)).find(tr=>tr.measurementId===ut);Wn&&(yield U[Wn.appId])}}catch(bn){bi.error(bn)}F("config",ut,Et)})).apply(this,arguments)}function N(){return(N=(0,G.Z)(function*(F,U,te,Se,ut){try{let Et=[];if(ut&&ut.send_to){let Jt=ut.send_to;Array.isArray(Jt)||(Jt=[Jt]);const bn=yield aa(te);for(const Wn of Jt){const tr=bn.find(nr=>nr.measurementId===Wn),Mr=tr&&U[tr.appId];if(!Mr){Et=[];break}Et.push(Mr)}}0===Et.length&&(Et=Object.values(U)),yield Promise.all(Et),F("event",Se,ut||{})}catch(Et){bi.error(Et)}})).apply(this,arguments)}const _t=new Me.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Bt=30,kt=new class or{constructor(U={},te=1e3){this.throttleMetadata=U,this.intervalMillis=te}getThrottleMetadata(U){return this.throttleMetadata[U]}setThrottleMetadata(U,te){this.throttleMetadata[U]=te}deleteThrottleMetadata(U){delete this.throttleMetadata[U]}};function er(F){return new Headers({Accept:"application/json","x-goog-api-key":F})}function Di(){return(Di=(0,G.Z)(function*(F){var U;const{appId:te,apiKey:Se}=F,ut={method:"GET",headers:er(Se)},Et=Xr.replace("{app-id}",te),Jt=yield fetch(Et,ut);if(200!==Jt.status&&304!==Jt.status){let bn="";try{const Wn=yield Jt.json();null!==(U=Wn.error)&&void 0!==U&&U.message&&(bn=Wn.error.message)}catch(Wn){}throw _t.create("config-fetch-failed",{httpStatus:Jt.status,responseMessage:bn})}return Jt.json()})).apply(this,arguments)}function mn(){return(mn=(0,G.Z)(function*(F,U=kt,te){const{appId:Se,apiKey:ut,measurementId:Et}=F.options;if(!Se)throw _t.create("no-app-id");if(!ut){if(Et)return{measurementId:Et,appId:Se};throw _t.create("no-api-key")}const Jt=U.getThrottleMetadata(Se)||{backoffCount:0,throttleEndTimeMillis:Date.now()},bn=new wi;return setTimeout((0,G.Z)(function*(){bn.abort()}),void 0!==te?te:Pi),ls({appId:Se,apiKey:ut,measurementId:Et},Jt,bn,U)})).apply(this,arguments)}function ls(F,U,te){return cn.apply(this,arguments)}function cn(){return cn=(0,G.Z)(function*(F,{throttleEndTimeMillis:U,backoffCount:te},Se,ut=kt){var Et;const{appId:Jt,measurementId:bn}=F;try{yield function wt(F,U){return new Promise((te,Se)=>{const ut=Math.max(U-Date.now(),0),Et=setTimeout(te,ut);F.addEventListener(()=>{clearTimeout(Et),Se(_t.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}(Se,U)}catch(Wn){if(bn)return bi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bn} provided in the "measurementId" field in the local Firebase config. [${null==Wn?void 0:Wn.message}]`),{appId:Jt,measurementId:bn};throw Wn}try{const Wn=yield function dr(F){return Di.apply(this,arguments)}(F);return ut.deleteThrottleMetadata(Jt),Wn}catch(Wn){const tr=Wn;if(!function zt(F){if(!(F instanceof Me.ZR&&F.customData))return!1;const U=Number(F.customData.httpStatus);return 429===U||500===U||503===U||504===U}(tr)){if(ut.deleteThrottleMetadata(Jt),bn)return bi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bn} provided in the "measurementId" field in the local Firebase config. [${null==tr?void 0:tr.message}]`),{appId:Jt,measurementId:bn};throw Wn}const Mr=503===Number(null===(Et=null==tr?void 0:tr.customData)||void 0===Et?void 0:Et.httpStatus)?(0,Me.$s)(te,ut.intervalMillis,Bt):(0,Me.$s)(te,ut.intervalMillis),nr={throttleEndTimeMillis:Date.now()+Mr,backoffCount:te+1};return ut.setThrottleMetadata(Jt,nr),bi.debug(`Calling attemptFetch again in ${Mr} millis`),ls(F,nr,Se,ut)}}),cn.apply(this,arguments)}class wi{constructor(){this.listeners=[]}addEventListener(U){this.listeners.push(U)}abort(){this.listeners.forEach(U=>U())}}let Ps,hr;function pa(){return(pa=(0,G.Z)(function*(F,U,te,Se,ut){if(ut&&ut.global)F("event",te,Se);else{const Et=yield U;F("event",te,Object.assign(Object.assign({},Se),{send_to:Et}))}})).apply(this,arguments)}function Gn(){return(Gn=(0,G.Z)(function*(){if(!(0,Me.hl)())return bi.warn(_t.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Me.eu)()}catch(F){return bi.warn(_t.create("indexeddb-unavailable",{errorInfo:null==F?void 0:F.toString()}).message),!1}return!0})).apply(this,arguments)}function Ur(){return Ur=(0,G.Z)(function*(F,U,te,Se,ut,Et,Jt){var bn;const Wn=function Yt(F){return mn.apply(this,arguments)}(F);Wn.then(ro=>{te[ro.measurementId]=ro.appId,F.options.measurementId&&ro.measurementId!==F.options.measurementId&&bi.warn(`The measurement ID in the local Firebase config (${F.options.measurementId}) does not match the measurement ID fetched from the server (${ro.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ro=>bi.error(ro)),U.push(Wn);const tr=function Ni(){return Gn.apply(this,arguments)}().then(ro=>{if(ro)return Se.getId()}),[Mr,nr]=yield Promise.all([Wn,tr]);(function re(F){const U=window.document.getElementsByTagName("script");for(const te of Object.values(U))if(te.src&&te.src.includes(Go)&&te.src.includes(F))return te;return null})(Et)||function Cu(F,U){const te=document.createElement("script");te.src=`${Go}?l=${F}&id=${U}`,te.async=!0,document.head.appendChild(te)}(Et,Mr.measurementId),hr&&(ut("consent","default",hr),function la(F){hr=F}(void 0)),ut("js",new Date);const no=null!==(bn=null==Jt?void 0:Jt.config)&&void 0!==bn?bn:{};return no[Vi]="firebase",no.update=!0,null!=nr&&(no[Ja]=nr),ut("config",Mr.measurementId,no),Ps&&(ut("set",Ps),function Ba(F){Ps=F}(void 0)),Mr.measurementId}),Ur.apply(this,arguments)}class El{constructor(U){this.app=U}_delete(){return delete pi[this.app.options.appId],Promise.resolve()}}let pi={},pn=[];const ms={};let bu,uo,Xo="dataLayer",Cs="gtag",ua=!1;function ru(F,U,te){!function qu(){const F=[];if((0,Me.ru)()&&F.push("This is a browser extension environment."),(0,Me.zI)()||F.push("Cookies are not available."),F.length>0){const U=F.map((Se,ut)=>`(${ut+1}) ${Se}`).join(" "),te=_t.create("invalid-analytics-context",{errorInfo:U});bi.warn(te.message)}}();const Se=F.options.appId;if(!Se)throw _t.create("no-app-id");if(!F.options.apiKey){if(!F.options.measurementId)throw _t.create("no-api-key");bi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${F.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=pi[Se])throw _t.create("already-exists",{id:Se});if(!ua){!function vl(F){let U=[];Array.isArray(window[F])?U=window[F]:window[F]=U}(Xo);const{wrappedGtag:Et,gtagCore:Jt}=function $(F,U,te,Se,ut){let Et=function(...Jt){window[Se].push(arguments)};return window[ut]&&"function"==typeof window[ut]&&(Et=window[ut]),window[ut]=function K(F,U,te,Se){function Et(){return Et=(0,G.Z)(function*(Jt,bn,Wn){try{"event"===Jt?yield function el(F,U,te,Se,ut){return N.apply(this,arguments)}(F,U,te,bn,Wn):"config"===Jt?yield function Ca(F,U,te,Se,ut,Et){return fa.apply(this,arguments)}(F,U,te,Se,bn,Wn):"consent"===Jt?F("consent","update",Wn):F("set",bn)}catch(tr){bi.error(tr)}}),Et.apply(this,arguments)}return function ut(Jt,bn,Wn){return Et.apply(this,arguments)}}(Et,F,U,te),{gtagCore:Et,wrappedGtag:window[ut]}}(pi,pn,ms,Xo,Cs);uo=Et,bu=Jt,ua=!0}return pi[Se]=function lo(F,U,te,Se,ut,Et,Jt){return Ur.apply(this,arguments)}(F,pn,ms,U,bu,Xo,te),new El(F)}function Ds(){return ba.apply(this,arguments)}function ba(){return(ba=(0,G.Z)(function*(){if((0,Me.ru)()||!(0,Me.zI)()||!(0,Me.hl)())return!1;try{return yield(0,Me.eu)()}catch(F){return!1}})).apply(this,arguments)}const Da="@firebase/analytics";!function Va(){(0,De._registerComponent)(new Ae.wA(oa,(U,{options:te})=>ru(U.getProvider("app").getImmediate(),U.getProvider("installations-internal").getImmediate(),te),"PUBLIC")),(0,De._registerComponent)(new Ae.wA("analytics-internal",function F(U){try{const te=U.getProvider(oa).getImmediate();return{logEvent:(Se,ut,Et)=>function ol(F,U,te,Se){F=(0,Me.m9)(F),function tl(F,U,te,Se,ut){return pa.apply(this,arguments)}(uo,pi[F.app.options.appId],U,te,Se).catch(ut=>bi.error(ut))}(te,Se,ut,Et)}}catch(te){throw _t.create("interop-component-reg-failed",{reason:te})}},"PRIVATE")),(0,De.registerVersion)(Da,"0.9.4"),(0,De.registerVersion)(Da,"0.9.4","esm2017")}();var wl=B(4408),Du=B(7565);const Gs=new class $l extends Du.v{}(class iu extends wl.o{constructor(U,te){super(U,te),this.scheduler=U,this.work=te}schedule(U,te=0){return te>0?super.schedule(U,te):(this.delay=te,this.state=U,this.scheduler.flush(this),this)}execute(U,te){return te>0||this.closed?super.execute(U,te):this._execute(U,te)}requestAsyncId(U,te,Se=0){return null!=Se&&Se>0||null==Se&&this.delay>0?super.requestAsyncId(U,te,Se):(U.flush(this),0)}});var ma=B(4986),al=B(8505),ll=B(9468),ci=B(5363);const su=new a.GfV("7.5.0"),ho="__angularfire_symbol__analyticsIsSupportedValue",ul="__angularfire_symbol__analyticsIsSupported",rs="__angularfire_symbol__remoteConfigIsSupportedValue",fo="__angularfire_symbol__remoteConfigIsSupported",Cl="__angularfire_symbol__messagingIsSupportedValue",Ua="__angularfire_symbol__messagingIsSupported";function ki(F,U,te){if(U){if(1===U.length)return U[0];const Et=U.filter(Jt=>Jt.app===te);if(1===Et.length)return Et[0]}return te.container.getProvider(F).getImmediate({optional:!0})}globalThis[ul]||(globalThis[ul]=Ds().then(F=>globalThis[ho]=F).catch(()=>globalThis[ho]=!1)),globalThis[Ua]||(globalThis[Ua]=jo().then(F=>globalThis[Cl]=F).catch(()=>globalThis[Cl]=!1)),globalThis[fo]||(globalThis[fo]=Gi().then(F=>globalThis[rs]=F).catch(()=>globalThis[rs]=!1));const Qi=(F,U)=>{const te=U?[U]:(0,J.C6)(),Se=[];return te.forEach(ut=>{ut.container.getProvider(F).instances.forEach(Jt=>{Se.includes(Jt)||Se.push(Jt)})}),Se};function S(){}class x{constructor(U,te=Gs){this.zone=U,this.delegate=te}now(){return this.delegate.now()}schedule(U,te,Se){const ut=this.zone;return this.delegate.schedule(function(Jt){ut.runGuarded(()=>{U.apply(this,[Jt])})},te,Se)}}class w{constructor(U){this.zone=U,this.task=null}call(U,te){const Se=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",S,{},S,S)),te.pipe((0,al.b)({next:Se,complete:Se,error:Se})).subscribe(U).add(Se)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let R=(()=>{class F{constructor(te){this.ngZone=te,this.outsideAngular=te.runOutsideAngular(()=>new x(Zone.current)),this.insideAngular=te.run(()=>new x(Zone.current,ma.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return F.\u0275fac=function(te){return new(te||F)(a.LFG(a.R0b))},F.\u0275prov=a.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();function V(){const F=globalThis.\u0275AngularFireScheduler;if(!F)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return F}function on(F){return V(),function Cn(F){return function(te){return(te=te.lift(new w(F.ngZone))).pipe((0,ll.R)(F.outsideAngular),(0,ci.Q)(F.insideAngular))}}(V())(F)}},2090:(sn,ht,B)=>{"use strict";B.d(ht,{$s:()=>Tn,BH:()=>Ze,DV:()=>vr,Dv:()=>Kt,G6:()=>Ie,GJ:()=>Zt,L:()=>Ve,LL:()=>Ke,Pz:()=>Xe,Sg:()=>Pe,UG:()=>et,UI:()=>hn,US:()=>Ae,Wj:()=>Li,Wl:()=>vt,Yr:()=>nt,ZB:()=>de,ZR:()=>Je,aH:()=>st,b$:()=>Ge,cI:()=>Nt,dS:()=>di,eu:()=>be,g5:()=>G,gK:()=>Ar,gQ:()=>Sr,h$:()=>xe,hl:()=>Ee,hu:()=>J,jU:()=>ke,lb:()=>Dr,m9:()=>xr,ne:()=>Dn,p$:()=>ce,pd:()=>Zr,r3:()=>Qn,ru:()=>He,tV:()=>ge,uI:()=>Q,ug:()=>rr,vZ:()=>_r,w1:()=>z,w9:()=>$n,xO:()=>Cr,xb:()=>lr,z$:()=>Oe,zI:()=>tt,zd:()=>Er});const a={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},J=function(Re,_e){if(!Re)throw G(_e)},G=function(Re){return new Error("Firebase Database ("+a.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Re)},De=function(Re){const _e=[];let ze=0;for(let Mt=0;Mt<Re.length;Mt++){let gt=Re.charCodeAt(Mt);gt<128?_e[ze++]=gt:gt<2048?(_e[ze++]=gt>>6|192,_e[ze++]=63&gt|128):55296==(64512&gt)&&Mt+1<Re.length&&56320==(64512&Re.charCodeAt(Mt+1))?(gt=65536+((1023&gt)<<10)+(1023&Re.charCodeAt(++Mt)),_e[ze++]=gt>>18|240,_e[ze++]=gt>>12&63|128,_e[ze++]=gt>>6&63|128,_e[ze++]=63&gt|128):(_e[ze++]=gt>>12|224,_e[ze++]=gt>>6&63|128,_e[ze++]=63&gt|128)}return _e},Ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Re,_e){if(!Array.isArray(Re))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ze=_e?this.byteToCharMapWebSafe_:this.byteToCharMap_,Mt=[];for(let gt=0;gt<Re.length;gt+=3){const dn=Re[gt],Le=gt+1<Re.length,Be=Le?Re[gt+1]:0,me=gt+2<Re.length,mt=me?Re[gt+2]:0;let xn=(15&Be)<<2|mt>>6,Hn=63&mt;me||(Hn=64,Le||(xn=64)),Mt.push(ze[dn>>2],ze[(3&dn)<<4|Be>>4],ze[xn],ze[Hn])}return Mt.join("")},encodeString(Re,_e){return this.HAS_NATIVE_SUPPORT&&!_e?btoa(Re):this.encodeByteArray(De(Re),_e)},decodeString(Re,_e){return this.HAS_NATIVE_SUPPORT&&!_e?atob(Re):function(Re){const _e=[];let ze=0,Mt=0;for(;ze<Re.length;){const gt=Re[ze++];if(gt<128)_e[Mt++]=String.fromCharCode(gt);else if(gt>191&&gt<224){const dn=Re[ze++];_e[Mt++]=String.fromCharCode((31&gt)<<6|63&dn)}else if(gt>239&&gt<365){const me=((7&gt)<<18|(63&Re[ze++])<<12|(63&Re[ze++])<<6|63&Re[ze++])-65536;_e[Mt++]=String.fromCharCode(55296+(me>>10)),_e[Mt++]=String.fromCharCode(56320+(1023&me))}else{const dn=Re[ze++],Le=Re[ze++];_e[Mt++]=String.fromCharCode((15&gt)<<12|(63&dn)<<6|63&Le)}}return _e.join("")}(this.decodeStringToByteArray(Re,_e))},decodeStringToByteArray(Re,_e){this.init_();const ze=_e?this.charToByteMapWebSafe_:this.charToByteMap_,Mt=[];for(let gt=0;gt<Re.length;){const dn=ze[Re.charAt(gt++)],Be=gt<Re.length?ze[Re.charAt(gt)]:0;++gt;const mt=gt<Re.length?ze[Re.charAt(gt)]:64;++gt;const jt=gt<Re.length?ze[Re.charAt(gt)]:64;if(++gt,null==dn||null==Be||null==mt||null==jt)throw new he;Mt.push(dn<<2|Be>>4),64!==mt&&(Mt.push(Be<<4&240|mt>>2),64!==jt&&Mt.push(mt<<6&192|jt))}return Mt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Re=0;Re<this.ENCODED_VALS.length;Re++)this.byteToCharMap_[Re]=this.ENCODED_VALS.charAt(Re),this.charToByteMap_[this.byteToCharMap_[Re]]=Re,this.byteToCharMapWebSafe_[Re]=this.ENCODED_VALS_WEBSAFE.charAt(Re),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Re]]=Re,Re>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Re)]=Re,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Re)]=Re)}}};class he extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xe=function(Re){const _e=De(Re);return Ae.encodeByteArray(_e,!0)},Ve=function(Re){return xe(Re).replace(/\./g,"")},ge=function(Re){try{return Ae.decodeString(Re,!0)}catch(_e){console.error("base64Decode failed: ",_e)}return null};function ce(Re){return de(void 0,Re)}function de(Re,_e){if(!(_e instanceof Object))return _e;switch(_e.constructor){case Date:return new Date(_e.getTime());case Object:void 0===Re&&(Re={});break;case Array:Re=[];break;default:return _e}for(const ze in _e)!_e.hasOwnProperty(ze)||!Ce(ze)||(Re[ze]=de(Re[ze],_e[ze]));return Re}function Ce(Re){return"__proto__"!==Re}const ye=()=>{try{return function Fe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Re=process.env.__FIREBASE_DEFAULTS__;return Re?JSON.parse(Re):void 0})()||(()=>{if(typeof document>"u")return;let Re;try{Re=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(ze){return}const _e=Re&&ge(Re[1]);return _e&&JSON.parse(_e)})()}catch(Re){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Re}`)}},st=()=>{var Re;return null===(Re=ye())||void 0===Re?void 0:Re.config},Xe=Re=>{var _e;return null===(_e=ye())||void 0===_e?void 0:_e[`_${Re}`]};class Ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((_e,ze)=>{this.resolve=_e,this.reject=ze})}wrapCallback(_e){return(ze,Mt)=>{ze?this.reject(ze):this.resolve(Mt),"function"==typeof _e&&(this.promise.catch(()=>{}),1===_e.length?_e(ze):_e(ze,Mt))}}}function Pe(Re,_e){if(Re.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Mt=_e||"demo-project",gt=Re.iat||0,dn=Re.sub||Re.user_id;if(!dn)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Le=Object.assign({iss:`https://securetoken.google.com/${Mt}`,aud:Mt,iat:gt,exp:gt+3600,auth_time:gt,sub:dn,user_id:dn,firebase:{sign_in_provider:"custom",identities:{}}},Re);return[Ve(JSON.stringify({alg:"none",type:"JWT"})),Ve(JSON.stringify(Le)),""].join(".")}function Oe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Q(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function et(){var Re;const _e=null===(Re=ye())||void 0===Re?void 0:Re.forceEnvironment;if("node"===_e)return!0;if("browser"===_e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ze){return!1}}function ke(){return"object"==typeof self&&self.self===self}function He(){const Re="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Re&&void 0!==Re.id}function Ge(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function z(){const Re=Oe();return Re.indexOf("MSIE ")>=0||Re.indexOf("Trident/")>=0}function nt(){return!0===a.NODE_CLIENT||!0===a.NODE_ADMIN}function Ie(){return!et()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ee(){try{return"object"==typeof indexedDB}catch(Re){return!1}}function be(){return new Promise((Re,_e)=>{try{let ze=!0;const Mt="validate-browser-context-for-indexeddb-analytics-module",gt=self.indexedDB.open(Mt);gt.onsuccess=()=>{gt.result.close(),ze||self.indexedDB.deleteDatabase(Mt),Re(!0)},gt.onupgradeneeded=()=>{ze=!1},gt.onerror=()=>{var dn;_e((null===(dn=gt.error)||void 0===dn?void 0:dn.message)||"")}}catch(ze){_e(ze)}})}function tt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Je extends Error{constructor(_e,ze,Mt){super(ze),this.code=_e,this.customData=Mt,this.name="FirebaseError",Object.setPrototypeOf(this,Je.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ke.prototype.create)}}class Ke{constructor(_e,ze,Mt){this.service=_e,this.serviceName=ze,this.errors=Mt}create(_e,...ze){const Mt=ze[0]||{},gt=`${this.service}/${_e}`,dn=this.errors[_e],Le=dn?function Pt(Re,_e){return Re.replace(At,(ze,Mt)=>{const gt=_e[Mt];return null!=gt?String(gt):`<${Mt}?>`})}(dn,Mt):"Error";return new Je(gt,`${this.serviceName}: ${Le} (${gt}).`,Mt)}}const At=/\{\$([^}]+)}/g;function Nt(Re){return JSON.parse(Re)}function vt(Re){return JSON.stringify(Re)}const Sn=function(Re){let _e={},ze={},Mt={},gt="";try{const dn=Re.split(".");_e=Nt(ge(dn[0])||""),ze=Nt(ge(dn[1])||""),gt=dn[2],Mt=ze.d||{},delete ze.d}catch(dn){}return{header:_e,claims:ze,data:Mt,signature:gt}},$n=function(Re){const ze=Sn(Re).claims;return!!ze&&"object"==typeof ze&&ze.hasOwnProperty("iat")},Zt=function(Re){const _e=Sn(Re).claims;return"object"==typeof _e&&!0===_e.admin};function Qn(Re,_e){return Object.prototype.hasOwnProperty.call(Re,_e)}function vr(Re,_e){if(Object.prototype.hasOwnProperty.call(Re,_e))return Re[_e]}function lr(Re){for(const _e in Re)if(Object.prototype.hasOwnProperty.call(Re,_e))return!1;return!0}function hn(Re,_e,ze){const Mt={};for(const gt in Re)Object.prototype.hasOwnProperty.call(Re,gt)&&(Mt[gt]=_e.call(ze,Re[gt],gt,Re));return Mt}function _r(Re,_e){if(Re===_e)return!0;const ze=Object.keys(Re),Mt=Object.keys(_e);for(const gt of ze){if(!Mt.includes(gt))return!1;const dn=Re[gt],Le=_e[gt];if(Wt(dn)&&Wt(Le)){if(!_r(dn,Le))return!1}else if(dn!==Le)return!1}for(const gt of Mt)if(!ze.includes(gt))return!1;return!0}function Wt(Re){return null!==Re&&"object"==typeof Re}function Cr(Re){const _e=[];for(const[ze,Mt]of Object.entries(Re))Array.isArray(Mt)?Mt.forEach(gt=>{_e.push(encodeURIComponent(ze)+"="+encodeURIComponent(gt))}):_e.push(encodeURIComponent(ze)+"="+encodeURIComponent(Mt));return _e.length?"&"+_e.join("&"):""}function Er(Re){const _e={};return Re.replace(/^\?/,"").split("&").forEach(Mt=>{if(Mt){const[gt,dn]=Mt.split("=");_e[decodeURIComponent(gt)]=decodeURIComponent(dn)}}),_e}function Zr(Re){const _e=Re.indexOf("?");if(!_e)return"";const ze=Re.indexOf("#",_e);return Re.substring(_e,ze>0?ze:void 0)}class Sr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let _e=1;_e<this.blockSize;++_e)this.pad_[_e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(_e,ze){ze||(ze=0);const Mt=this.W_;if("string"==typeof _e)for(let jt=0;jt<16;jt++)Mt[jt]=_e.charCodeAt(ze)<<24|_e.charCodeAt(ze+1)<<16|_e.charCodeAt(ze+2)<<8|_e.charCodeAt(ze+3),ze+=4;else for(let jt=0;jt<16;jt++)Mt[jt]=_e[ze]<<24|_e[ze+1]<<16|_e[ze+2]<<8|_e[ze+3],ze+=4;for(let jt=16;jt<80;jt++){const xn=Mt[jt-3]^Mt[jt-8]^Mt[jt-14]^Mt[jt-16];Mt[jt]=4294967295&(xn<<1|xn>>>31)}let mt,Rt,gt=this.chain_[0],dn=this.chain_[1],Le=this.chain_[2],Be=this.chain_[3],me=this.chain_[4];for(let jt=0;jt<80;jt++){jt<40?jt<20?(mt=Be^dn&(Le^Be),Rt=1518500249):(mt=dn^Le^Be,Rt=1859775393):jt<60?(mt=dn&Le|Be&(dn|Le),Rt=2400959708):(mt=dn^Le^Be,Rt=3395469782);const xn=(gt<<5|gt>>>27)+mt+me+Rt+Mt[jt]&4294967295;me=Be,Be=Le,Le=4294967295&(dn<<30|dn>>>2),dn=gt,gt=xn}this.chain_[0]=this.chain_[0]+gt&4294967295,this.chain_[1]=this.chain_[1]+dn&4294967295,this.chain_[2]=this.chain_[2]+Le&4294967295,this.chain_[3]=this.chain_[3]+Be&4294967295,this.chain_[4]=this.chain_[4]+me&4294967295}update(_e,ze){if(null==_e)return;void 0===ze&&(ze=_e.length);const Mt=ze-this.blockSize;let gt=0;const dn=this.buf_;let Le=this.inbuf_;for(;gt<ze;){if(0===Le)for(;gt<=Mt;)this.compress_(_e,gt),gt+=this.blockSize;if("string"==typeof _e){for(;gt<ze;)if(dn[Le]=_e.charCodeAt(gt),++Le,++gt,Le===this.blockSize){this.compress_(dn),Le=0;break}}else for(;gt<ze;)if(dn[Le]=_e[gt],++Le,++gt,Le===this.blockSize){this.compress_(dn),Le=0;break}}this.inbuf_=Le,this.total_+=ze}digest(){const _e=[];let ze=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let gt=this.blockSize-1;gt>=56;gt--)this.buf_[gt]=255&ze,ze/=256;this.compress_(this.buf_);let Mt=0;for(let gt=0;gt<5;gt++)for(let dn=24;dn>=0;dn-=8)_e[Mt]=this.chain_[gt]>>dn&255,++Mt;return _e}}function Dn(Re,_e){const ze=new yn(Re,_e);return ze.subscribe.bind(ze)}class yn{constructor(_e,ze){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ze,this.task.then(()=>{_e(this)}).catch(Mt=>{this.error(Mt)})}next(_e){this.forEachObserver(ze=>{ze.next(_e)})}error(_e){this.forEachObserver(ze=>{ze.error(_e)}),this.close(_e)}complete(){this.forEachObserver(_e=>{_e.complete()}),this.close()}subscribe(_e,ze,Mt){let gt;if(void 0===_e&&void 0===ze&&void 0===Mt)throw new Error("Missing Observer.");gt=function An(Re,_e){if("object"!=typeof Re||null===Re)return!1;for(const ze of _e)if(ze in Re&&"function"==typeof Re[ze])return!0;return!1}(_e,["next","error","complete"])?_e:{next:_e,error:ze,complete:Mt},void 0===gt.next&&(gt.next=mr),void 0===gt.error&&(gt.error=mr),void 0===gt.complete&&(gt.complete=mr);const dn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?gt.error(this.finalError):gt.complete()}catch(Le){}}),this.observers.push(gt),dn}unsubscribeOne(_e){void 0===this.observers||void 0===this.observers[_e]||(delete this.observers[_e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(_e){if(!this.finalized)for(let ze=0;ze<this.observers.length;ze++)this.sendOne(ze,_e)}sendOne(_e,ze){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[_e])try{ze(this.observers[_e])}catch(Mt){typeof console<"u"&&console.error&&console.error(Mt)}})}close(_e){this.finalized||(this.finalized=!0,void 0!==_e&&(this.finalError=_e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mr(){}const Kt=function(Re,_e,ze,Mt){let gt;if(Mt<_e?gt="at least "+_e:Mt>ze&&(gt=0===ze?"none":"no more than "+ze),gt)throw new Error(Re+" failed: Was called with "+Mt+(1===Mt?" argument.":" arguments.")+" Expects "+gt+".")};function Ar(Re,_e){return`${Re} failed: ${_e} argument `}function Li(Re,_e,ze,Mt){if((!Mt||ze)&&"function"!=typeof ze)throw new Error(Ar(Re,_e)+"must be a valid function.")}function Dr(Re,_e,ze,Mt){if((!Mt||ze)&&("object"!=typeof ze||null===ze))throw new Error(Ar(Re,_e)+"must be a valid context object.")}const di=function(Re){const _e=[];let ze=0;for(let Mt=0;Mt<Re.length;Mt++){let gt=Re.charCodeAt(Mt);if(gt>=55296&&gt<=56319){const dn=gt-55296;Mt++,J(Mt<Re.length,"Surrogate pair missing trail surrogate."),gt=65536+(dn<<10)+(Re.charCodeAt(Mt)-56320)}gt<128?_e[ze++]=gt:gt<2048?(_e[ze++]=gt>>6|192,_e[ze++]=63&gt|128):gt<65536?(_e[ze++]=gt>>12|224,_e[ze++]=gt>>6&63|128,_e[ze++]=63&gt|128):(_e[ze++]=gt>>18|240,_e[ze++]=gt>>12&63|128,_e[ze++]=gt>>6&63|128,_e[ze++]=63&gt|128)}return _e},rr=function(Re){let _e=0;for(let ze=0;ze<Re.length;ze++){const Mt=Re.charCodeAt(ze);Mt<128?_e++:Mt<2048?_e+=2:Mt>=55296&&Mt<=56319?(_e+=4,ze++):_e+=3}return _e},hi=1e3,en=2,$t=144e5,gn=.5;function Tn(Re,_e=hi,ze=en){const Mt=_e*Math.pow(ze,Re),gt=Math.round(gn*Mt*(Math.random()-.5)*2);return Math.min($t,Mt+gt)}function xr(Re){return Re&&Re._delegate?Re._delegate:Re}},2078:(sn,ht,B)=>{"use strict";B.d(ht,{BX:()=>$o,dr:()=>Li,BJ:()=>Dr,YG:()=>$t,PM:()=>Tn,FN:()=>On,tO:()=>xr,W2:()=>gt,fr:()=>Rt,Gu:()=>xn,gu:()=>Hn,Xz:()=>fr,pK:()=>Yi,Ie:()=>fi,Q$:()=>Wr,q_:()=>kr,jP:()=>os,g2:()=>tn,wd:()=>zn,sr:()=>sr,Pc:()=>Vr,r4:()=>Jn,IN:()=>Co,X1:()=>br,j9:()=>Dn});var a=B(4650),J=B(433),G=B(655),De=B(8421),Me=B(9751),Ae=B(5577),he=B(1144),xe=B(576),Ve=B(3268);const ge=["addListener","removeListener"],ce=["addEventListener","removeEventListener"],de=["on","off"];function Ce(g,E,h,D){if((0,xe.m)(h)&&(D=h,h=void 0),D)return Ce(g,E,h).pipe((0,Ve.Z)(D));const[W,Ue]=function Te(g){return(0,xe.m)(g.addEventListener)&&(0,xe.m)(g.removeEventListener)}(g)?ce.map(Gt=>an=>g[Gt](E,an,h)):function it(g){return(0,xe.m)(g.addListener)&&(0,xe.m)(g.removeListener)}(g)?ge.map(Fe(g,E)):function Ct(g){return(0,xe.m)(g.on)&&(0,xe.m)(g.off)}(g)?de.map(Fe(g,E)):[];if(!W&&(0,he.z)(g))return(0,Ae.z)(Gt=>Ce(Gt,E,h))((0,De.Xf)(g));if(!W)throw new TypeError("Invalid event target");return new Me.y(Gt=>{const an=(...Pn)=>Gt.next(1<Pn.length?Pn:Pn[0]);return W(an),()=>Ue(an)})}function Fe(g,E){return h=>D=>g[h](E,D)}var ye=B(7579),le=B(1135),at=B(2435),Oe=(B(181),B(6439),B(7838),B(1898),B(5179)),Q=B(5730),et=B(5820),ke=B(1843),Ge=(B(6369),B(3539)),ft=(B(3457),B(4349),B(1308)),be=B(9300),tt=B(3900),$e=B(1884),Je=B(6895);const Pt=Oe.i,vt=["*"],Qn=g=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(g):"function"==typeof requestAnimationFrame?requestAnimationFrame(g):setTimeout(g),vr=g=>!!g.resolveComponentFactory;let lr=(()=>{class g{constructor(h,D){this.injector=h,this.el=D,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(h){this.el.nativeElement.value=this.lastValue=null==h?"":h,hn(this.el)}handleChangeEvent(h,D){h===this.el.nativeElement&&(D!==this.lastValue&&(this.lastValue=D,this.onChange(D)),hn(this.el))}_handleBlurEvent(h){h===this.el.nativeElement&&(this.onTouched(),hn(this.el))}registerOnChange(h){this.onChange=h}registerOnTouched(h){this.onTouched=h}setDisabledState(h){this.el.nativeElement.disabled=h}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let h;try{h=this.injector.get(J.a5)}catch(W){}if(!h)return;h.statusChanges&&(this.statusChanges=h.statusChanges.subscribe(()=>hn(this.el)));const D=h.control;D&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(Ue=>{if(typeof D[Ue]<"u"){const Gt=D[Ue].bind(D);D[Ue]=(...an)=>{Gt(...an),hn(this.el)}}})}}return g.\u0275fac=function(h){return new(h||g)(a.Y36(a.zs3),a.Y36(a.SBq))},g.\u0275dir=a.lG2({type:g,hostBindings:function(h,D){1&h&&a.NdJ("ionBlur",function(Ue){return D._handleBlurEvent(Ue.target)})}}),g})();const hn=g=>{Qn(()=>{const E=g.nativeElement,h=null!=E.value&&E.value.toString().length>0,D=_r(E);Wt(E,D);const W=E.closest("ion-item");W&&Wt(W,h?[...D,"item-has-value"]:D)})},_r=g=>{const E=g.classList,h=[];for(let D=0;D<E.length;D++){const W=E.item(D);null!==W&&Jr(W,"ng-")&&h.push(`ion-${W.substring(3)}`)}return h},Wt=(g,E)=>{const h=g.classList;h.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),h.add(...E)},Jr=(g,E)=>g.substring(0,E.length)===E;let Dn=(()=>{class g extends lr{constructor(h,D){super(h,D)}_handleInputEvent(h){this.handleChangeEvent(h,h.value)}}return g.\u0275fac=function(h){return new(h||g)(a.Y36(a.zs3),a.Y36(a.SBq))},g.\u0275dir=a.lG2({type:g,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(h,D){1&h&&a.NdJ("ionChange",function(Ue){return D._handleInputEvent(Ue.target)})},features:[a._Bn([{provide:J.JU,useExisting:g,multi:!0}]),a.qOj]}),g})();const yn=(g,E)=>{const h=g.prototype;E.forEach(D=>{Object.defineProperty(h,D,{get(){return this.el[D]},set(W){this.z.runOutsideAngular(()=>this.el[D]=W)}})})},In=(g,E)=>{const h=g.prototype;E.forEach(D=>{h[D]=function(){const W=arguments;return this.z.runOutsideAngular(()=>this.el[D].apply(this.el,W))}})},An=(g,E,h)=>{h.forEach(D=>g[D]=Ce(E,D))};function Kt(g){return function(h){const{defineCustomElementFn:D,inputs:W,methods:Ue}=g;return void 0!==D&&D(),W&&yn(h,W),Ue&&In(h,Ue),h}}let Li=(()=>{let g=class{constructor(h,D,W){this.z=W,h.detach(),this.el=D.nativeElement}};return g.\u0275fac=function(h){return new(h||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-app"]],ngContentSelectors:vt,decls:1,vars:0,template:function(h,D){1&h&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,G.gn)([Kt({defineCustomElementFn:void 0})],g),g})(),Dr=(()=>{let g=class{constructor(h,D,W){this.z=W,h.detach(),this.el=D.nativeElement}};return g.\u0275fac=function(h){return new(h||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-avatar"]],ngContentSelectors:vt,decls:1,vars:0,template:function(h,D){1&h&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,G.gn)([Kt({defineCustomElementFn:void 0})],g),g})(),$t=(()=>{let g=class{constructor(h,D,W){this.z=W,h.detach(),this.el=D.nativeElement,An(this,this.el,["ionFocus","ionBlur"])}};return g.\u0275fac=function(h){return new(h||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:vt,decls:1,vars:0,template:function(h,D){1&h&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,G.gn)([Kt({defineCustomElementFn:void 0,inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],g),g})(),Tn=(()=>{let g=class{constructor(h,D,W){this.z=W,h.detach(),this.el=D.nativeElement}};return g.\u0275fac=function(h){return new(h||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:vt,decls:1,vars:0,template:function(h,D){1&h&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,G.gn)([Kt({defineCustomElementFn:void 0,inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],g),g})(),On=(()=>{let g=class{constructor(h,D,W){this.z=W,h.detach(),this.el=D.nativeElement}};return g.\u0275fac=function(h){return new(h||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-card-content"]],inputs:{mode:"mode"},ngContentSelectors:vt,decls:1,vars:0,template:function(h,D){1&h&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,G.gn)([Kt({defineCustomElementFn:void 0,inputs:["mode"]})],g),g})(),xr=(()=>{let g=class{constructor(h,D,W){this.z=W,h.detach(),this.el=D.nativeElement}};return g.\u0275fac=function(h){return new(h||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-card-subtitle"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:vt,decls:1,vars:0,template:function(h,D){1&h&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,G.gn)([Kt({defineCustomElementFn:void 0,inputs:["color","mode"]})],g),g})(),gt=(()=>{let g=class{constructor(h,D,W){this.z=W,h.detach(),this.el=D.nativeElement,An(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return g.\u0275fac=function(h){return new(h||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:vt,decls:1,vars:0,template:function(h,D){1&h&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,G.gn)([Kt({defineCustomElementFn:void 0,inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],g),g})(),Rt=(()=>{let g=class{constructor(h,D,W){this.z=W,h.detach(),this.el=D.nativeElement}};return g.\u0275fac=function(h){return new(h||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-footer"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:vt,decls:1,vars:0,template:function(h,D){1&h&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,G.gn)([Kt({defineCustomElementFn:void 0,inputs:["collapse","mode","translucent"]})],g),g})(),xn=(()=>{let g=class{constructor(h,D,W){this.z=W,h.detach(),this.el=D.nativeElement}};return g.\u0275fac=function(h){return new(h||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:vt,decls:1,vars:0,template:function(h,D){1&h&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,G.gn)([Kt({defineCustomElementFn:void 0,inputs:["collapse","mode","translucent"]})],g),g})(),Hn=(()=>{let g=class{constructor(h,D,W){this.z=W,h.detach(),this.el=D.nativeElement}};return g.\u0275fac=function(h){return new(h||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:vt,decls:1,vars:0,template:function(h,D){1&h&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,G.gn)([Kt({defineCustomElementFn:void 0,inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],g),g})(),fr=(()=>{let g=class{constructor(h,D,W){this.z=W,h.detach(),this.el=D.nativeElement,An(this,this.el,["ionImgWillLoad","ionImgDidLoad","ionError"])}};return g.\u0275fac=function(h){return new(h||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-img"]],inputs:{alt:"alt",src:"src"},ngContentSelectors:vt,decls:1,vars:0,template:function(h,D){1&h&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,G.gn)([Kt({defineCustomElementFn:void 0,inputs:["alt","src"]})],g),g})(),Yi=(()=>{let g=class{constructor(h,D,W){this.z=W,h.detach(),this.el=D.nativeElement,An(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return g.\u0275fac=function(h){return new(h||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:vt,decls:1,vars:0,template:function(h,D){1&h&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,G.gn)([Kt({defineCustomElementFn:void 0,inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","debounce","disabled","enterkeyhint","inputmode","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],g),g})(),fi=(()=>{let g=class{constructor(h,D,W){this.z=W,h.detach(),this.el=D.nativeElement}};return g.\u0275fac=function(h){return new(h||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:vt,decls:1,vars:0,template:function(h,D){1&h&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,G.gn)([Kt({defineCustomElementFn:void 0,inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],g),g})(),Wr=(()=>{let g=class{constructor(h,D,W){this.z=W,h.detach(),this.el=D.nativeElement}};return g.\u0275fac=function(h){return new(h||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:vt,decls:1,vars:0,template:function(h,D){1&h&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,G.gn)([Kt({defineCustomElementFn:void 0,inputs:["color","mode","position"]})],g),g})(),kr=(()=>{let g=class{constructor(h,D,W){this.z=W,h.detach(),this.el=D.nativeElement}};return g.\u0275fac=function(h){return new(h||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:vt,decls:1,vars:0,template:function(h,D){1&h&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,G.gn)([Kt({defineCustomElementFn:void 0,inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],g),g})(),tn=(()=>{let g=class{constructor(h,D,W){this.z=W,h.detach(),this.el=D.nativeElement,An(this,this.el,["ionChange","ionInput","ionBlur","ionFocus"])}};return g.\u0275fac=function(h){return new(h||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-textarea"]],inputs:{autoGrow:"autoGrow",autocapitalize:"autocapitalize",autofocus:"autofocus",clearOnEdit:"clearOnEdit",color:"color",cols:"cols",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",maxlength:"maxlength",minlength:"minlength",mode:"mode",name:"name",placeholder:"placeholder",readonly:"readonly",required:"required",rows:"rows",spellcheck:"spellcheck",value:"value",wrap:"wrap"},ngContentSelectors:vt,decls:1,vars:0,template:function(h,D){1&h&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,G.gn)([Kt({defineCustomElementFn:void 0,inputs:["autoGrow","autocapitalize","autofocus","clearOnEdit","color","cols","debounce","disabled","enterkeyhint","inputmode","maxlength","minlength","mode","name","placeholder","readonly","required","rows","spellcheck","value","wrap"],methods:["setFocus","getInputElement"]})],g),g})(),zn=(()=>{let g=class{constructor(h,D,W){this.z=W,h.detach(),this.el=D.nativeElement}};return g.\u0275fac=function(h){return new(h||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:vt,decls:1,vars:0,template:function(h,D){1&h&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,G.gn)([Kt({defineCustomElementFn:void 0,inputs:["color","size"]})],g),g})(),sr=(()=>{let g=class{constructor(h,D,W){this.z=W,h.detach(),this.el=D.nativeElement}};return g.\u0275fac=function(h){return new(h||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:vt,decls:1,vars:0,template:function(h,D){1&h&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,G.gn)([Kt({defineCustomElementFn:void 0,inputs:["color","mode"]})],g),g})();class br{constructor(E={}){this.data=E}get(E){return this.data[E]}}let Yn=(()=>{class g{constructor(h,D){this.zone=h,this.appRef=D}create(h,D,W,Ue){return new Bn(h,D,W,this.appRef,this.zone,Ue)}}return g.\u0275fac=function(h){return new(h||g)(a.LFG(a.R0b),a.LFG(a.z2F))},g.\u0275prov=a.Yz7({token:g,factory:g.\u0275fac}),g})();class Bn{constructor(E,h,D,W,Ue,Gt){this.resolverOrInjector=E,this.injector=h,this.location=D,this.appRef=W,this.zone=Ue,this.elementReferenceKey=Gt,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(E,h,D,W){return this.zone.run(()=>new Promise(Ue=>{const Gt=Object.assign({},D);void 0!==this.elementReferenceKey&&(Gt[this.elementReferenceKey]=E),Ue(qi(this.zone,this.resolverOrInjector,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,E,h,Gt,W))}))}removeViewFromDom(E,h){return this.zone.run(()=>new Promise(D=>{const W=this.elRefMap.get(h);if(W){W.destroy(),this.elRefMap.delete(h);const Ue=this.elEventsMap.get(h);Ue&&(Ue(),this.elEventsMap.delete(h))}D()}))}}const qi=(g,E,h,D,W,Ue,Gt,an,Pn,cr,Yr)=>{let pr;const ns=a.zs3.create({providers:Ys(cr),parent:h});if(E&&vr(E)){const bo=E.resolveComponentFactory(Pn);pr=D?D.createComponent(bo,D.length,ns):bo.create(ns)}else{if(!D)return null;pr=D.createComponent(Pn,{index:D.indexOf,injector:ns,environmentInjector:E})}const gs=pr.instance,ii=pr.location.nativeElement;if(cr&&Object.assign(gs,cr),Yr)for(const bo of Yr)ii.classList.add(bo);const Ci=ds(g,gs,ii);return an.appendChild(ii),D||W.attachView(pr.hostView),pr.changeDetectorRef.reattach(),Ue.set(ii,pr),Gt.set(ii,Ci),ii},Br=[ke.L,ke.a,ke.b,ke.c,ke.d],ds=(g,E,h)=>g.run(()=>{const D=Br.filter(W=>"function"==typeof E[W]).map(W=>{const Ue=Gt=>E[W](Gt.detail);return h.addEventListener(W,Ue),()=>h.removeEventListener(W,Ue)});return()=>D.forEach(W=>W())}),Gi=new a.OlP("NavParamsToken"),Ys=g=>[{provide:Gi,useValue:g},{provide:br,useFactory:Eo,deps:[Gi]}],Eo=g=>new br(g),qn=(g,E)=>((g=g.filter(h=>h.stackId!==E.stackId)).push(E),g),qs=(g,E)=>{const h=g.createUrlTree(["."],{relativeTo:E});return g.serializeUrl(h)},Es=(g,E)=>{if(!g)return;const h=Is(E);for(let D=0;D<h.length;D++){if(D>=g.length)return h[D];if(h[D]!==g[D])return}},Is=g=>g.split("/").map(E=>E.trim()).filter(E=>""!==E),Zs=g=>{g&&(g.ref.destroy(),g.unlistenEvents())};class ss{constructor(E,h,D,W,Ue,Gt){this.containerEl=h,this.router=D,this.navCtrl=W,this.zone=Ue,this.location=Gt,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==E?Is(E):void 0}createView(E,h){var D;const W=qs(this.router,h),Ue=null===(D=null==E?void 0:E.location)||void 0===D?void 0:D.nativeElement,Gt=ds(this.zone,E.instance,Ue);return{id:this.nextId++,stackId:Es(this.tabsPrefix,W),unlistenEvents:Gt,element:Ue,ref:E,url:W}}getExistingView(E){const h=qs(this.router,E),D=this.views.find(W=>W.url===h);return D&&D.ref.changeDetectorRef.reattach(),D}setActive(E){var h,D;const W=this.navCtrl.consumeTransition();let{direction:Ue,animation:Gt,animationBuilder:an}=W;const Pn=this.activeView,cr=((g,E)=>!E||g.stackId!==E.stackId)(E,Pn);cr&&(Ue="back",Gt=void 0);const Yr=this.views.slice();let pr;const ns=this.router;ns.getCurrentNavigation?pr=ns.getCurrentNavigation():!(null===(h=ns.navigations)||void 0===h)&&h.value&&(pr=ns.navigations.value),null!==(D=null==pr?void 0:pr.extras)&&void 0!==D&&D.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const gs=this.views.includes(E),ii=this.insertView(E,Ue);gs||E.ref.changeDetectorRef.detectChanges();const Ci=E.animationBuilder;return void 0===an&&"back"===Ue&&!cr&&void 0!==Ci&&(an=Ci),Pn&&(Pn.animationBuilder=an),this.zone.runOutsideAngular(()=>this.wait(()=>(Pn&&Pn.ref.changeDetectorRef.detach(),E.ref.changeDetectorRef.reattach(),this.transition(E,Pn,Gt,this.canGoBack(1),!1,an).then(()=>Qs(E,ii,Yr,this.location,this.zone)).then(()=>({enteringView:E,direction:Ue,animation:Gt,tabSwitch:cr})))))}canGoBack(E,h=this.getActiveStackId()){return this.getStack(h).length>E}pop(E,h=this.getActiveStackId()){return this.zone.run(()=>{var D,W;const Ue=this.getStack(h);if(Ue.length<=E)return Promise.resolve(!1);const Gt=Ue[Ue.length-E-1];let an=Gt.url;const Pn=Gt.savedData;if(Pn){const Yr=Pn.get("primary");null!==(W=null===(D=null==Yr?void 0:Yr.route)||void 0===D?void 0:D._routerState)&&void 0!==W&&W.snapshot.url&&(an=Yr.route._routerState.snapshot.url)}const{animationBuilder:cr}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(an,Object.assign(Object.assign({},Gt.savedExtras),{animation:cr})).then(()=>!0)})}startBackTransition(){const E=this.activeView;if(E){const h=this.getStack(E.stackId),D=h[h.length-2],W=D.animationBuilder;return this.wait(()=>this.transition(D,E,"back",this.canGoBack(2),!0,W))}return Promise.resolve()}endBackTransition(E){E?(this.skipTransition=!0,this.pop(1)):this.activeView&&Xs(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(E){const h=this.getStack(E);return h.length>0?h[h.length-1]:void 0}getRootUrl(E){const h=this.getStack(E);return h.length>0?h[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(Zs),this.activeView=void 0,this.views=[]}getStack(E){return this.views.filter(h=>h.stackId===E)}insertView(E,h){return this.activeView=E,this.views=((g,E,h)=>"root"===h?qn(g,E):"forward"===h?((g,E)=>(g.indexOf(E)>=0?g=g.filter(D=>D.stackId!==E.stackId||D.id<=E.id):g.push(E),g))(g,E):((g,E)=>g.indexOf(E)>=0?g.filter(D=>D.stackId!==E.stackId||D.id<=E.id):qn(g,E))(g,E))(this.views,E,h),this.views.slice()}transition(E,h,D,W,Ue,Gt){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(h===E)return Promise.resolve(!1);const an=E?E.element:void 0,Pn=h?h.element:void 0,cr=this.containerEl;return an&&an!==Pn&&(an.classList.add("ion-page"),an.classList.add("ion-page-invisible"),an.parentElement!==cr&&cr.appendChild(an),cr.commit)?cr.commit(an,Pn,{deepWait:!0,duration:void 0===D?0:void 0,direction:D,showGoBack:W,progressAnimation:Ue,animationBuilder:Gt}):Promise.resolve(!1)}wait(E){return(0,G.mG)(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const h=this.runningTask=E();return h.finally(()=>this.runningTask=void 0),h})}}const Qs=(g,E,h,D,W)=>"function"==typeof requestAnimationFrame?new Promise(Ue=>{requestAnimationFrame(()=>{Xs(g,E,h,D,W),Ue()})}):Promise.resolve(),Xs=(g,E,h,D,W)=>{W.run(()=>h.filter(Ue=>!E.includes(Ue)).forEach(Zs)),E.forEach(Ue=>{const an=D.path().split("?")[0].split("#")[0];if(Ue!==g&&Ue.url!==an){const Pn=Ue.element;Pn.setAttribute("aria-hidden","true"),Pn.classList.add("ion-page-hidden"),Ue.ref.changeDetectorRef.detach()}})};let $s=(()=>{class g{get(h,D){const W=Wi();return W?W.get(h,D):null}getBoolean(h,D){const W=Wi();return!!W&&W.getBoolean(h,D)}getNumber(h,D){const W=Wi();return W?W.getNumber(h,D):0}}return g.\u0275fac=function(h){return new(h||g)},g.\u0275prov=a.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();const Ai=new a.OlP("USERCONFIG"),Wi=()=>{if(typeof window<"u"){const g=window.Ionic;if(null!=g&&g.config)return g.config}return null};let wo=(()=>{class g{constructor(h,D){this.doc=h,this.backButton=new ye.x,this.keyboardDidShow=new ye.x,this.keyboardDidHide=new ye.x,this.pause=new ye.x,this.resume=new ye.x,this.resize=new ye.x,D.run(()=>{var W;let Ue;this.win=h.defaultView,this.backButton.subscribeWithPriority=function(Gt,an){return this.subscribe(Pn=>Pn.register(Gt,cr=>D.run(()=>an(cr))))},Bs(this.pause,h,"pause"),Bs(this.resume,h,"resume"),Bs(this.backButton,h,"ionBackButton"),Bs(this.resize,this.win,"resize"),Bs(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),Bs(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(Gt=>{Ue=Gt}),null!==(W=this.win)&&void 0!==W&&W.cordova?h.addEventListener("deviceready",()=>{Ue("cordova")},{once:!0}):Ue("dom")})}is(h){return(0,Oe.a)(this.win,h)}platforms(){return(0,Oe.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(h){return oo(this.win.location.href,h)}isLandscape(){return!this.isPortrait()}isPortrait(){var h,D;return null===(D=(h=this.win).matchMedia)||void 0===D?void 0:D.call(h,"(orientation: portrait)").matches}testUserAgent(h){const D=this.win.navigator;return!!(null!=D&&D.userAgent&&D.userAgent.indexOf(h)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return g.\u0275fac=function(h){return new(h||g)(a.LFG(Je.K0),a.LFG(a.R0b))},g.\u0275prov=a.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();const oo=(g,E)=>{E=E.replace(/[[\]\\]/g,"\\$&");const D=new RegExp("[\\?&]"+E+"=([^&#]*)").exec(g);return D?decodeURIComponent(D[1].replace(/\+/g," ")):null},Bs=(g,E,h)=>{E&&E.addEventListener(h,D=>{g.next(null!=D?D.detail:void 0)})};let ri=(()=>{class g{constructor(h,D,W,Ue){this.location=D,this.serializer=W,this.router=Ue,this.direction=ur,this.animated=es,this.guessDirection="forward",this.lastNavId=-1,Ue&&Ue.events.subscribe(Gt=>{if(Gt instanceof at.OD){const an=Gt.restoredState?Gt.restoredState.navigationId:Gt.id;this.guessDirection=an<this.lastNavId?"back":"forward",this.guessAnimation=Gt.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?Gt.id:an}}),h.backButton.subscribeWithPriority(0,Gt=>{this.pop(),Gt()})}navigateForward(h,D={}){return this.setDirection("forward",D.animated,D.animationDirection,D.animation),this.navigate(h,D)}navigateBack(h,D={}){return this.setDirection("back",D.animated,D.animationDirection,D.animation),this.navigate(h,D)}navigateRoot(h,D={}){return this.setDirection("root",D.animated,D.animationDirection,D.animation),this.navigate(h,D)}back(h={animated:!0,animationDirection:"back"}){return this.setDirection("back",h.animated,h.animationDirection,h.animation),this.location.back()}pop(){return(0,G.mG)(this,void 0,void 0,function*(){let h=this.topOutlet;for(;h&&!(yield h.pop());)h=h.parentOutlet})}setDirection(h,D,W,Ue){this.direction=h,this.animated=Ii(h,D,W),this.animationBuilder=Ue}setTopOutlet(h){this.topOutlet=h}consumeTransition(){let D,h="root";const W=this.animationBuilder;return"auto"===this.direction?(h=this.guessDirection,D=this.guessAnimation):(D=this.animated,h=this.direction),this.direction=ur,this.animated=es,this.animationBuilder=void 0,{direction:h,animation:D,animationBuilder:W}}navigate(h,D){if(Array.isArray(h))return this.router.navigate(h,D);{const W=this.serializer.parse(h.toString());return void 0!==D.queryParams&&(W.queryParams=Object.assign({},D.queryParams)),void 0!==D.fragment&&(W.fragment=D.fragment),this.router.navigateByUrl(W,D)}}}return g.\u0275fac=function(h){return new(h||g)(a.LFG(wo),a.LFG(Je.Ye),a.LFG(at.Hx),a.LFG(at.F0,8))},g.\u0275prov=a.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();const Ii=(g,E,h)=>{if(!1!==E){if(void 0!==h)return h;if("forward"===g||"back"===g)return g;if("root"===g&&!0===E)return"forward"}},ur="auto",es=void 0;let os=(()=>{class g{constructor(h,D,W,Ue,Gt,an,Pn,cr,Yr,pr,ns,gs,ii){this.parentContexts=h,this.location=D,this.config=Gt,this.navCtrl=an,this.componentFactoryResolver=Pn,this.parentOutlet=ii,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new le.X(null),this.stackEvents=new a.vpe,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.nativeEl=Yr.nativeElement,this.name=W||at.eC,this.tabsPrefix="true"===Ue?qs(pr,gs):void 0,this.stackCtrl=new ss(this.tabsPrefix,this.nativeEl,pr,an,ns,cr),h.onChildOutletCreated(this.name,this)}set animation(h){this.nativeEl.animation=h}set animated(h){this.nativeEl.animated=h}set swipeGesture(h){this._swipeGesture=h,this.nativeEl.swipeHandler=h?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:D=>this.stackCtrl.endBackTransition(D)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const h=this.getContext();null!=h&&h.route&&this.activateWith(h.route,h.resolver||null)}new Promise(h=>(0,Q.c)(this.nativeEl,h)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(h,D){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const D=this.getContext();this.activatedView.savedData=new Map(D.children.contexts);const W=this.activatedView.savedData.get("primary");if(W&&D.route&&(W.route=Object.assign({},D.route)),this.activatedView.savedExtras={},D.route){const Ue=D.route.snapshot;this.activatedView.savedExtras.queryParams=Ue.queryParams,this.activatedView.savedExtras.fragment=Ue.fragment}}const h=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(h)}}activateWith(h,D){var W;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=h;let Ue,Gt=this.stackCtrl.getExistingView(h);if(Gt){Ue=this.activated=Gt.ref;const an=Gt.savedData;an&&(this.getContext().children.contexts=an),this.updateActivatedRouteProxy(Ue.instance,h)}else{const an=h._futureSnapshot;if(null==an.routeConfig.component&&null==this.environmentInjector)return void console.warn('[Ionic Warning]: You must supply an environmentInjector to use standalone components with routing:\n\nIn your component class, add:\n\n   import { EnvironmentInjector } from \'@angular/core\';\n   constructor(public environmentInjector: EnvironmentInjector) {}\n\nIn your router outlet template, add:\n\n   <ion-router-outlet [environmentInjector]="environmentInjector"></ion-router-outlet>\n\nAlternatively, if you are routing within ion-tabs:\n\n   <ion-tabs [environmentInjector]="environmentInjector"></ion-tabs>');const Pn=this.parentContexts.getOrCreateContext(this.name).children,cr=new le.X(null),Yr=this.createActivatedRouteProxy(cr,h),pr=new Vs(Yr,Pn,this.location.injector),ns=null!==(W=an.routeConfig.component)&&void 0!==W?W:an.component;if((D=D||this.componentFactoryResolver)&&vr(D)){const gs=D.resolveComponentFactory(ns);Ue=this.activated=this.location.createComponent(gs,this.location.length,pr)}else Ue=this.activated=this.location.createComponent(ns,{index:this.location.length,injector:pr,environmentInjector:null!=D?D:this.environmentInjector});cr.next(Ue.instance),Gt=this.stackCtrl.createView(this.activated,h),this.proxyMap.set(Ue.instance,Yr),this.currentActivatedRoute$.next({component:Ue.instance,activatedRoute:h})}this.activatedView=Gt,this.navCtrl.setTopOutlet(this),this.stackCtrl.setActive(Gt).then(an=>{this.activateEvents.emit(Ue.instance),this.stackEvents.emit(an)})}canGoBack(h=1,D){return this.stackCtrl.canGoBack(h,D)}pop(h=1,D){return this.stackCtrl.pop(h,D)}getLastUrl(h){const D=this.stackCtrl.getLastUrl(h);return D?D.url:void 0}getLastRouteView(h){return this.stackCtrl.getLastUrl(h)}getRootView(h){return this.stackCtrl.getRootUrl(h)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(h,D){const W=new at.gz;return W._futureSnapshot=D._futureSnapshot,W._routerState=D._routerState,W.snapshot=D.snapshot,W.outlet=D.outlet,W.component=D.component,W._paramMap=this.proxyObservable(h,"paramMap"),W._queryParamMap=this.proxyObservable(h,"queryParamMap"),W.url=this.proxyObservable(h,"url"),W.params=this.proxyObservable(h,"params"),W.queryParams=this.proxyObservable(h,"queryParams"),W.fragment=this.proxyObservable(h,"fragment"),W.data=this.proxyObservable(h,"data"),W}proxyObservable(h,D){return h.pipe((0,be.h)(W=>!!W),(0,tt.w)(W=>this.currentActivatedRoute$.pipe((0,be.h)(Ue=>null!==Ue&&Ue.component===W),(0,tt.w)(Ue=>Ue&&Ue.activatedRoute[D]),(0,$e.x)())))}updateActivatedRouteProxy(h,D){const W=this.proxyMap.get(h);if(!W)throw new Error("Could not find activated route proxy for view");W._futureSnapshot=D._futureSnapshot,W._routerState=D._routerState,W.snapshot=D.snapshot,W.outlet=D.outlet,W.component=D.component,this.currentActivatedRoute$.next({component:h,activatedRoute:D})}}return g.\u0275fac=function(h){return new(h||g)(a.Y36(at.y6),a.Y36(a.s_b),a.$8M("name"),a.$8M("tabs"),a.Y36($s),a.Y36(ri),a.Y36(a._Vd,8),a.Y36(Je.Ye),a.Y36(a.SBq),a.Y36(at.F0),a.Y36(a.R0b),a.Y36(at.gz),a.Y36(g,12))},g.\u0275dir=a.lG2({type:g,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",environmentInjector:"environmentInjector"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),g})();class Vs{constructor(E,h,D){this.route=E,this.childContexts=h,this.parent=D}get(E,h){return E===at.gz?this.route:E===at.y6?this.childContexts:this.parent.get(E,h)}}class ui{constructor(E){this.ctrl=E}create(E){return this.ctrl.create(E||{})}dismiss(E,h,D){return this.ctrl.dismiss(E,h,D)}getTop(){return this.ctrl.getTop()}}let $o=(()=>{class g extends ui{constructor(){super(Ge.b)}}return g.\u0275fac=function(h){return new(h||g)},g.\u0275prov=a.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();class Lr{}let Co=(()=>{class g extends ui{constructor(h,D,W,Ue){super(Ge.m),this.angularDelegate=h,this.resolver=D,this.injector=W,this.environmentInjector=Ue}create(h){var D;return super.create(Object.assign(Object.assign({},h),{delegate:this.angularDelegate.create(null!==(D=this.resolver)&&void 0!==D?D:this.environmentInjector,this.injector,void 0,"modal")}))}}return g.\u0275fac=function(h){return new(h||g)(a.LFG(Yn),a.LFG(a._Vd),a.LFG(a.zs3),a.LFG(Lr,8))},g.\u0275prov=a.Yz7({token:g,factory:g.\u0275fac}),g})(),fs=(()=>{class g extends ui{constructor(h,D,W,Ue){super(Ge.c),this.angularDelegate=h,this.resolver=D,this.injector=W,this.environmentInjector=Ue}create(h){var D;return super.create(Object.assign(Object.assign({},h),{delegate:this.angularDelegate.create(null!==(D=this.resolver)&&void 0!==D?D:this.environmentInjector,this.injector,void 0,"popover")}))}}return g.\u0275fac=function(h){return new(h||g)(a.LFG(Yn),a.LFG(a._Vd),a.LFG(a.zs3),a.LFG(Lr,8))},g.\u0275prov=a.Yz7({token:g,factory:g.\u0275fac}),g})();class Jn{shouldDetach(E){return!1}shouldAttach(E){return!1}store(E,h){}retrieve(E){return null}shouldReuseRoute(E,h){if(E.routeConfig!==h.routeConfig)return!1;const D=E.params,W=h.params,Ue=Object.keys(D),Gt=Object.keys(W);if(Ue.length!==Gt.length)return!1;for(const an of Ue)if(W[an]!==D[an])return!1;return!0}}const ao=(g,E,h)=>()=>{if(E.defaultView&&typeof window<"u"){(0,et.s)(Object.assign(Object.assign({},g),{_zoneGate:Ue=>h.run(Ue)}));const W="__zone_symbol__addEventListener"in E.body?"__zone_symbol__addEventListener":"addEventListener";return function Ke(){var g=[];if(typeof window<"u"){var E=window;(!E.customElements||E.Element&&(!E.Element.prototype.closest||!E.Element.prototype.matches||!E.Element.prototype.remove||!E.Element.prototype.getRootNode))&&g.push(B.e(6748).then(B.t.bind(B,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||E.NodeList&&!E.NodeList.prototype.forEach||!E.fetch||!function(){try{var D=new URL("b","http://a");return D.pathname="c%20d","http://a/c%20d"===D.href&&D.searchParams}catch(W){return!1}}()||typeof WeakMap>"u")&&g.push(B.e(2214).then(B.t.bind(B,4144,23)))}return Promise.all(g)}().then(()=>((g,E)=>typeof window>"u"?Promise.resolve():(0,ft.p)().then(()=>(Pt(),(0,ft.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[1],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32],"setFocus":[64]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"activated":[32]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32],"ariaLabel":[32]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8]}]]],["ion-select_3",[[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]},[[0,"ionChange","onSelect"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionChange","handleIonChange"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]]]'),E))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Qn,jmp:Ue=>h.runOutsideAngular(Ue),ael(Ue,Gt,an,Pn){Ue[W](Gt,an,Pn)},rel(Ue,Gt,an,Pn){Ue.removeEventListener(Gt,an,Pn)}}))}};let Vr=(()=>{class g{static forRoot(h){return{ngModule:g,providers:[{provide:Ai,useValue:h},{provide:a.ip1,useFactory:ao,multi:!0,deps:[Ai,Je.K0,a.R0b]}]}}}return g.\u0275fac=function(h){return new(h||g)},g.\u0275mod=a.oAB({type:g}),g.\u0275inj=a.cJS({providers:[Yn,Co,fs],imports:[[Je.ez]]}),g})()},181:(sn,ht,B)=>{"use strict";B.d(ht,{c:()=>Ct});var a=B(5730),J=B(3457);let G;const Me=Te=>Te.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ae=Te=>(void 0===G&&(G=void 0===Te.style.animationName&&void 0!==Te.style.webkitAnimationName?"-webkit-":""),G),he=(Te,ye,le)=>{const at=ye.startsWith("animation")?Ae(Te):"";Te.style.setProperty(at+ye,le)},xe=(Te,ye)=>{const le=ye.startsWith("animation")?Ae(Te):"";Te.style.removeProperty(le+ye)},ce=[],it=(Te=[],ye)=>{if(void 0!==ye){const le=Array.isArray(ye)?ye:[ye];return[...Te,...le]}return Te},Ct=Te=>{let ye,le,at,st,Xe,Ze,ke,Ee,be,tt,$e,At,Nt,Pe=[],Oe=[],Q=[],et=!1,He={},Ge=[],rt=[],z={},ft=0,nt=!1,Ie=!1,Je=!0,Ke=!1,Pt=!0,vt=!1;const Sn=Te,En=[],Fn=[],$n=[],Zt=[],Qn=[],vr=[],lr=[],hn=[],_r=[],Wt=[],Jr="function"==typeof AnimationEffect||void 0!==J.w&&"function"==typeof J.w.AnimationEffect,Cr="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Jr,Zr=()=>Wt,An=(ae,qe)=>((null!=qe&&qe.oneTimeCallback?Fn:En).push({c:ae,o:qe}),Nt),Kt=()=>{if(Cr)Wt.forEach(ae=>{ae.cancel()}),Wt.length=0;else{const ae=$n.slice();(0,a.r)(()=>{ae.forEach(qe=>{xe(qe,"animation-name"),xe(qe,"animation-duration"),xe(qe,"animation-timing-function"),xe(qe,"animation-iteration-count"),xe(qe,"animation-delay"),xe(qe,"animation-play-state"),xe(qe,"animation-fill-mode"),xe(qe,"animation-direction")})})}},Ar=()=>{Qn.forEach(ae=>{null!=ae&&ae.parentNode&&ae.parentNode.removeChild(ae)}),Qn.length=0},Vn=()=>void 0!==Xe?Xe:ke?ke.getFill():"both",xr=()=>void 0!==be?be:void 0!==Ze?Ze:ke?ke.getDirection():"normal",Re=()=>nt?"linear":void 0!==at?at:ke?ke.getEasing():"linear",_e=()=>Ie?0:void 0!==tt?tt:void 0!==le?le:ke?ke.getDuration():0,ze=()=>void 0!==st?st:ke?ke.getIterations():1,Mt=()=>void 0!==$e?$e:void 0!==ye?ye:ke?ke.getDelay():0,fi=()=>{0!==ft&&(ft--,0===ft&&((()=>{ln(),hn.forEach(Ft=>Ft()),_r.forEach(Ft=>Ft());const ae=Je?1:0,qe=Ge,pt=rt,Dt=z;$n.forEach(Ft=>{const Xt=Ft.classList;qe.forEach(wn=>Xt.add(wn)),pt.forEach(wn=>Xt.remove(wn));for(const wn in Dt)Dt.hasOwnProperty(wn)&&he(Ft,wn,Dt[wn])}),En.forEach(Ft=>Ft.c(ae,Nt)),Fn.forEach(Ft=>Ft.c(ae,Nt)),Fn.length=0,Pt=!0,Je&&(Ke=!0),Je=!0})(),ke&&ke.animationFinish()))},Oi=(ae=!0)=>{Ar();const qe=(Te=>(Te.forEach(ye=>{for(const le in ye)if(ye.hasOwnProperty(le)){const at=ye[le];if("easing"===le)ye["animation-timing-function"]=at,delete ye[le];else{const st=Me(le);st!==le&&(ye[st]=at,delete ye[le])}}}),Te))(Pe);$n.forEach(pt=>{if(qe.length>0){const Dt=((Te=[])=>Te.map(ye=>{const le=ye.offset,at=[];for(const st in ye)ye.hasOwnProperty(st)&&"offset"!==st&&at.push(`${st}: ${ye[st]};`);return`${100*le}% { ${at.join(" ")} }`}).join(" "))(qe);At=void 0!==Te?Te:(Te=>{let ye=ce.indexOf(Te);return ye<0&&(ye=ce.push(Te)-1),`ion-animation-${ye}`})(Dt);const Ft=((Te,ye,le)=>{var at;const st=(Te=>{const ye=void 0!==Te.getRootNode?Te.getRootNode():Te;return ye.head||ye})(le),Xe=Ae(le),Ze=st.querySelector("#"+Te);if(Ze)return Ze;const Pe=(null!==(at=le.ownerDocument)&&void 0!==at?at:document).createElement("style");return Pe.id=Te,Pe.textContent=`@${Xe}keyframes ${Te} { ${ye} } @${Xe}keyframes ${Te}-alt { ${ye} }`,st.appendChild(Pe),Pe})(At,Dt,pt);Qn.push(Ft),he(pt,"animation-duration",`${_e()}ms`),he(pt,"animation-timing-function",Re()),he(pt,"animation-delay",`${Mt()}ms`),he(pt,"animation-fill-mode",Vn()),he(pt,"animation-direction",xr());const Xt=ze()===1/0?"infinite":ze().toString();he(pt,"animation-iteration-count",Xt),he(pt,"animation-play-state","paused"),ae&&he(pt,"animation-name",`${Ft.id}-alt`),(0,a.r)(()=>{he(pt,"animation-name",Ft.id||null)})}})},is=(ae=!0)=>{(()=>{vr.forEach(Dt=>Dt()),lr.forEach(Dt=>Dt());const ae=Oe,qe=Q,pt=He;$n.forEach(Dt=>{const Ft=Dt.classList;ae.forEach(Xt=>Ft.add(Xt)),qe.forEach(Xt=>Ft.remove(Xt));for(const Xt in pt)pt.hasOwnProperty(Xt)&&he(Dt,Xt,pt[Xt])})})(),Pe.length>0&&(Cr?($n.forEach(ae=>{const qe=ae.animate(Pe,{id:Sn,delay:Mt(),duration:_e(),easing:Re(),iterations:ze(),fill:Vn(),direction:xr()});qe.pause(),Wt.push(qe)}),Wt.length>0&&(Wt[0].onfinish=()=>{fi()})):Oi(ae)),et=!0},Ui=ae=>{if(ae=Math.min(Math.max(ae,0),.9999),Cr)Wt.forEach(qe=>{qe.currentTime=qe.effect.getComputedTiming().delay+_e()*ae,qe.pause()});else{const qe=`-${_e()*ae}ms`;$n.forEach(pt=>{Pe.length>0&&(he(pt,"animation-delay",qe),he(pt,"animation-play-state","paused"))})}},Zn=ae=>{Wt.forEach(qe=>{qe.effect.updateTiming({delay:Mt(),duration:_e(),easing:Re(),iterations:ze(),fill:Vn(),direction:xr()})}),void 0!==ae&&Ui(ae)},Wr=(ae=!0,qe)=>{(0,a.r)(()=>{$n.forEach(pt=>{he(pt,"animation-name",At||null),he(pt,"animation-duration",`${_e()}ms`),he(pt,"animation-timing-function",Re()),he(pt,"animation-delay",void 0!==qe?`-${qe*_e()}ms`:`${Mt()}ms`),he(pt,"animation-fill-mode",Vn()||null),he(pt,"animation-direction",xr()||null);const Dt=ze()===1/0?"infinite":ze().toString();he(pt,"animation-iteration-count",Dt),ae&&he(pt,"animation-name",`${At}-alt`),(0,a.r)(()=>{he(pt,"animation-name",At||null)})})})},kr=(ae=!1,qe=!0,pt)=>(ae&&Zt.forEach(Dt=>{Dt.update(ae,qe,pt)}),Cr?Zn(pt):Wr(qe,pt),Nt),ji=()=>{et&&(Cr?Wt.forEach(ae=>{ae.pause()}):$n.forEach(ae=>{he(ae,"animation-play-state","paused")}),vt=!0)},Si=()=>{Ee=void 0,fi()},ln=()=>{Ee&&clearTimeout(Ee)},ee=ae=>new Promise(qe=>{null!=ae&&ae.sync&&(Ie=!0,An(()=>Ie=!1,{oneTimeCallback:!0})),et||is(),Ke&&(Cr?(Ui(0),Zn()):Wr(),Ke=!1),Pt&&(ft=Zt.length+1,Pt=!1),An(()=>qe(),{oneTimeCallback:!0}),Zt.forEach(pt=>{pt.play()}),Cr?(Wt.forEach(ae=>{ae.play()}),(0===Pe.length||0===$n.length)&&fi()):(()=>{if(ln(),(0,a.r)(()=>{$n.forEach(ae=>{Pe.length>0&&he(ae,"animation-play-state","running")})}),0===Pe.length||0===$n.length)fi();else{const ae=Mt()||0,qe=_e()||0,pt=ze()||1;isFinite(pt)&&(Ee=setTimeout(Si,ae+qe*pt+100)),((Te,ye)=>{let le;const at={passive:!0},Xe=Ze=>{Te===Ze.target&&(le&&le(),ln(),(0,a.r)(()=>{$n.forEach(ae=>{xe(ae,"animation-duration"),xe(ae,"animation-delay"),xe(ae,"animation-play-state")}),(0,a.r)(fi)}))};Te&&(Te.addEventListener("webkitAnimationEnd",Xe,at),Te.addEventListener("animationend",Xe,at),le=()=>{Te.removeEventListener("webkitAnimationEnd",Xe,at),Te.removeEventListener("animationend",Xe,at)})})($n[0])}})(),vt=!1}),We=(ae,qe)=>{const pt=Pe[0];return void 0===pt||void 0!==pt.offset&&0!==pt.offset?Pe=[{offset:0,[ae]:qe},...Pe]:pt[ae]=qe,Nt};return Nt={parentAnimation:ke,elements:$n,childAnimations:Zt,id:Sn,animationFinish:fi,from:We,to:(ae,qe)=>{const pt=Pe[Pe.length-1];return void 0===pt||void 0!==pt.offset&&1!==pt.offset?Pe=[...Pe,{offset:1,[ae]:qe}]:pt[ae]=qe,Nt},fromTo:(ae,qe,pt)=>We(ae,qe).to(ae,pt),parent:ae=>(ke=ae,Nt),play:ee,pause:()=>(Zt.forEach(ae=>{ae.pause()}),ji(),Nt),stop:()=>{Zt.forEach(ae=>{ae.stop()}),et&&(Kt(),et=!1),nt=!1,Ie=!1,Pt=!0,be=void 0,tt=void 0,$e=void 0,ft=0,Ke=!1,Je=!0,vt=!1},destroy:ae=>(Zt.forEach(qe=>{qe.destroy(ae)}),(ae=>{Kt(),ae&&Ar()})(ae),$n.length=0,Zt.length=0,Pe.length=0,En.length=0,Fn.length=0,et=!1,Pt=!0,Nt),keyframes:ae=>{const qe=Pe!==ae;return Pe=ae,qe&&(ae=>{Cr?Zr().forEach(qe=>{if(qe.effect.setKeyframes)qe.effect.setKeyframes(ae);else{const pt=new KeyframeEffect(qe.effect.target,ae,qe.effect.getTiming());qe.effect=pt}}):Oi()})(Pe),Nt},addAnimation:ae=>{if(null!=ae)if(Array.isArray(ae))for(const qe of ae)qe.parent(Nt),Zt.push(qe);else ae.parent(Nt),Zt.push(ae);return Nt},addElement:ae=>{if(null!=ae)if(1===ae.nodeType)$n.push(ae);else if(ae.length>=0)for(let qe=0;qe<ae.length;qe++)$n.push(ae[qe]);else console.error("Invalid addElement value");return Nt},update:kr,fill:ae=>(Xe=ae,kr(!0),Nt),direction:ae=>(Ze=ae,kr(!0),Nt),iterations:ae=>(st=ae,kr(!0),Nt),duration:ae=>(!Cr&&0===ae&&(ae=1),le=ae,kr(!0),Nt),easing:ae=>(at=ae,kr(!0),Nt),delay:ae=>(ye=ae,kr(!0),Nt),getWebAnimations:Zr,getKeyframes:()=>Pe,getFill:Vn,getDirection:xr,getDelay:Mt,getIterations:ze,getEasing:Re,getDuration:_e,afterAddRead:ae=>(hn.push(ae),Nt),afterAddWrite:ae=>(_r.push(ae),Nt),afterClearStyles:(ae=[])=>{for(const qe of ae)z[qe]="";return Nt},afterStyles:(ae={})=>(z=ae,Nt),afterRemoveClass:ae=>(rt=it(rt,ae),Nt),afterAddClass:ae=>(Ge=it(Ge,ae),Nt),beforeAddRead:ae=>(vr.push(ae),Nt),beforeAddWrite:ae=>(lr.push(ae),Nt),beforeClearStyles:(ae=[])=>{for(const qe of ae)He[qe]="";return Nt},beforeStyles:(ae={})=>(He=ae,Nt),beforeRemoveClass:ae=>(Q=it(Q,ae),Nt),beforeAddClass:ae=>(Oe=it(Oe,ae),Nt),onFinish:An,isRunning:()=>0!==ft&&!vt,progressStart:(ae=!1,qe)=>(Zt.forEach(pt=>{pt.progressStart(ae,qe)}),ji(),nt=ae,et||is(),kr(!1,!0,qe),Nt),progressStep:ae=>(Zt.forEach(qe=>{qe.progressStep(ae)}),Ui(ae),Nt),progressEnd:(ae,qe,pt)=>(nt=!1,Zt.forEach(Dt=>{Dt.progressEnd(ae,qe,pt)}),void 0!==pt&&(tt=pt),Ke=!1,Je=!0,0===ae?(be="reverse"===xr()?"normal":"reverse","reverse"===be&&(Je=!1),Cr?(kr(),Ui(1-qe)):($e=(1-qe)*_e()*-1,kr(!1,!1))):1===ae&&(Cr?(kr(),Ui(qe)):($e=qe*_e()*-1,kr(!1,!1))),void 0!==ae&&(An(()=>{tt=void 0,be=void 0,$e=void 0},{oneTimeCallback:!0}),ke||ee()),Nt)}}},5820:(sn,ht,B)=>{"use strict";B.d(ht,{E:()=>ge,a:()=>a,s:()=>xe});const a=ce=>{try{if(ce instanceof he)return ce.value;if(!De()||"string"!=typeof ce||""===ce)return ce;if(ce.includes("onload="))return"";const de=document.createDocumentFragment(),Ce=document.createElement("div");de.appendChild(Ce),Ce.innerHTML=ce,Ae.forEach(Te=>{const ye=de.querySelectorAll(Te);for(let le=ye.length-1;le>=0;le--){const at=ye[le];at.parentNode?at.parentNode.removeChild(at):de.removeChild(at);const st=G(at);for(let Xe=0;Xe<st.length;Xe++)J(st[Xe])}});const Fe=G(de);for(let Te=0;Te<Fe.length;Te++)J(Fe[Te]);const it=document.createElement("div");it.appendChild(de);const Ct=it.querySelector("div");return null!==Ct?Ct.innerHTML:it.innerHTML}catch(de){return console.error(de),""}},J=ce=>{if(ce.nodeType&&1!==ce.nodeType)return;if(typeof NamedNodeMap<"u"&&!(ce.attributes instanceof NamedNodeMap))return void ce.remove();for(let Ce=ce.attributes.length-1;Ce>=0;Ce--){const Fe=ce.attributes.item(Ce),it=Fe.name;if(!Me.includes(it.toLowerCase())){ce.removeAttribute(it);continue}const Ct=Fe.value,Te=ce[it];(null!=Ct&&Ct.toLowerCase().includes("javascript:")||null!=Te&&Te.toLowerCase().includes("javascript:"))&&ce.removeAttribute(it)}const de=G(ce);for(let Ce=0;Ce<de.length;Ce++)J(de[Ce])},G=ce=>null!=ce.children?ce.children:ce.childNodes,De=()=>{var ce;const de=window,Ce=null===(ce=null==de?void 0:de.Ionic)||void 0===ce?void 0:ce.config;return!Ce||(Ce.get?Ce.get("sanitizerEnabled",!0):!0===Ce.sanitizerEnabled||void 0===Ce.sanitizerEnabled)},Me=["class","id","href","src","name","slot"],Ae=["script","style","iframe","meta","link","object","embed"];class he{constructor(de){this.value=de}}const xe=ce=>{const de=window,Ce=de.Ionic;if(!Ce||!Ce.config||"Object"===Ce.config.constructor.name)return de.Ionic=de.Ionic||{},de.Ionic.config=Object.assign(Object.assign({},de.Ionic.config),ce),de.Ionic.config},ge=!0},4349:(sn,ht,B)=>{"use strict";B.d(ht,{G:()=>Me});class J{constructor(he,xe,Ve,ge,ce){this.id=xe,this.name=Ve,this.disableScroll=ce,this.priority=1e6*ge+xe,this.ctrl=he}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const he=this.ctrl.capture(this.name,this.id,this.priority);return he&&this.disableScroll&&this.ctrl.disableScroll(this.id),he}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class G{constructor(he,xe,Ve,ge){this.id=xe,this.disable=Ve,this.disableScroll=ge,this.ctrl=he}block(){if(this.ctrl){if(this.disable)for(const he of this.disable)this.ctrl.disableGesture(he,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const he of this.disable)this.ctrl.enableGesture(he,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const De="backdrop-no-scroll",Me=new class a{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(he){var xe;return new J(this,this.newID(),he.name,null!==(xe=he.priority)&&void 0!==xe?xe:0,!!he.disableScroll)}createBlocker(he={}){return new G(this,this.newID(),he.disable,!!he.disableScroll)}start(he,xe,Ve){return this.canStart(he)?(this.requestedStart.set(xe,Ve),!0):(this.requestedStart.delete(xe),!1)}capture(he,xe,Ve){if(!this.start(he,xe,Ve))return!1;const ge=this.requestedStart;let ce=-1e4;if(ge.forEach(de=>{ce=Math.max(ce,de)}),ce===Ve){this.capturedId=xe,ge.clear();const de=new CustomEvent("ionGestureCaptured",{detail:{gestureName:he}});return document.dispatchEvent(de),!0}return ge.delete(xe),!1}release(he){this.requestedStart.delete(he),this.capturedId===he&&(this.capturedId=void 0)}disableGesture(he,xe){let Ve=this.disabledGestures.get(he);void 0===Ve&&(Ve=new Set,this.disabledGestures.set(he,Ve)),Ve.add(xe)}enableGesture(he,xe){const Ve=this.disabledGestures.get(he);void 0!==Ve&&Ve.delete(xe)}disableScroll(he){this.disabledScroll.add(he),1===this.disabledScroll.size&&document.body.classList.add(De)}enableScroll(he){this.disabledScroll.delete(he),0===this.disabledScroll.size&&document.body.classList.remove(De)}canStart(he){return!(void 0!==this.capturedId||this.isDisabled(he))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(he){const xe=this.disabledGestures.get(he);return!!(xe&&xe.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(sn,ht,B)=>{"use strict";B.r(ht),B.d(ht,{MENU_BACK_BUTTON_PRIORITY:()=>Me,OVERLAY_BACK_BUTTON_PRIORITY:()=>De,blockHardwareBackButton:()=>J,startHardwareBackButton:()=>G});var a=B(5861);const J=()=>{document.addEventListener("backbutton",()=>{})},G=()=>{const Ae=document;let he=!1;Ae.addEventListener("backbutton",()=>{if(he)return;let xe=0,Ve=[];const ge=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(Ce,Fe){Ve.push({priority:Ce,handler:Fe,id:xe++})}}});Ae.dispatchEvent(ge);const ce=function(){var Ce=(0,a.Z)(function*(Fe){try{if(null!=Fe&&Fe.handler){const it=Fe.handler(de);null!=it&&(yield it)}}catch(it){console.error(it)}});return function(it){return Ce.apply(this,arguments)}}(),de=()=>{if(Ve.length>0){let Ce={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Ve.forEach(Fe=>{Fe.priority>=Ce.priority&&(Ce=Fe)}),he=!0,Ve=Ve.filter(Fe=>Fe.id!==Ce.id),ce(Ce).then(()=>he=!1)}};de()})},De=100,Me=99},5730:(sn,ht,B)=>{"use strict";B.d(ht,{a:()=>he,b:()=>xe,c:()=>G,d:()=>Fe,e:()=>it,f:()=>Ce,g:()=>Ve,h:()=>st,i:()=>Ae,j:()=>De,k:()=>de,l:()=>Ct,m:()=>ce,n:()=>Te,o:()=>at,p:()=>le,q:()=>Xe,r:()=>ge,s:()=>Ze,t:()=>a,u:()=>ye});const a=(Pe,Oe=0)=>new Promise(Q=>{J(Pe,Oe,Q)}),J=(Pe,Oe=0,Q)=>{let et,ke;const He={passive:!0},rt=()=>{et&&et()},z=ft=>{(void 0===ft||Pe===ft.target)&&(rt(),Q(ft))};return Pe&&(Pe.addEventListener("webkitTransitionEnd",z,He),Pe.addEventListener("transitionend",z,He),ke=setTimeout(z,Oe+500),et=()=>{ke&&(clearTimeout(ke),ke=void 0),Pe.removeEventListener("webkitTransitionEnd",z,He),Pe.removeEventListener("transitionend",z,He)}),rt},G=(Pe,Oe)=>{Pe.componentOnReady?Pe.componentOnReady().then(Q=>Oe(Q)):ge(()=>Oe(Pe))},De=(Pe,Oe=[])=>{const Q={};return Oe.forEach(et=>{Pe.hasAttribute(et)&&(null!==Pe.getAttribute(et)&&(Q[et]=Pe.getAttribute(et)),Pe.removeAttribute(et))}),Q},Me=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],Ae=(Pe,Oe)=>{let Q=Me;return Oe&&Oe.length>0&&(Q=Q.filter(et=>!Oe.includes(et))),De(Pe,Q)},he=(Pe,Oe,Q,et)=>{var ke;if(typeof window<"u"){const He=window,Ge=null===(ke=null==He?void 0:He.Ionic)||void 0===ke?void 0:ke.config;if(Ge){const rt=Ge.get("_ael");if(rt)return rt(Pe,Oe,Q,et);if(Ge._ael)return Ge._ael(Pe,Oe,Q,et)}}return Pe.addEventListener(Oe,Q,et)},xe=(Pe,Oe,Q,et)=>{var ke;if(typeof window<"u"){const He=window,Ge=null===(ke=null==He?void 0:He.Ionic)||void 0===ke?void 0:ke.config;if(Ge){const rt=Ge.get("_rel");if(rt)return rt(Pe,Oe,Q,et);if(Ge._rel)return Ge._rel(Pe,Oe,Q,et)}}return Pe.removeEventListener(Oe,Q,et)},Ve=(Pe,Oe=Pe)=>Pe.shadowRoot||Oe,ge=Pe=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Pe):"function"==typeof requestAnimationFrame?requestAnimationFrame(Pe):setTimeout(Pe),ce=Pe=>!!Pe.shadowRoot&&!!Pe.attachShadow,de=Pe=>{const Oe=Pe.closest("ion-item");return Oe?Oe.querySelector("ion-label"):null},Ce=Pe=>{if(Pe.focus(),Pe.classList.contains("ion-focusable")){const Oe=Pe.closest("ion-app");Oe&&Oe.setFocus([Pe])}},Fe=(Pe,Oe)=>{let Q;const et=Pe.getAttribute("aria-labelledby"),ke=Pe.id;let He=null!==et&&""!==et.trim()?et:Oe+"-lbl",Ge=null!==et&&""!==et.trim()?document.getElementById(et):de(Pe);return Ge?(null===et&&(Ge.id=He),Q=Ge.textContent,Ge.setAttribute("aria-hidden","true")):""!==ke.trim()&&(Ge=document.querySelector(`label[for="${ke}"]`),Ge&&(""!==Ge.id?He=Ge.id:Ge.id=He=`${ke}-lbl`,Q=Ge.textContent)),{label:Ge,labelId:He,labelText:Q}},it=(Pe,Oe,Q,et,ke)=>{if(Pe||ce(Oe)){let He=Oe.querySelector("input.aux-input");He||(He=Oe.ownerDocument.createElement("input"),He.type="hidden",He.classList.add("aux-input"),Oe.appendChild(He)),He.disabled=ke,He.name=Q,He.value=et||""}},Ct=(Pe,Oe,Q)=>Math.max(Pe,Math.min(Oe,Q)),Te=(Pe,Oe)=>{if(!Pe){const Q="ASSERT: "+Oe;throw console.error(Q),new Error(Q)}},ye=Pe=>Pe.timeStamp||Date.now(),le=Pe=>{if(Pe){const Oe=Pe.changedTouches;if(Oe&&Oe.length>0){const Q=Oe[0];return{x:Q.clientX,y:Q.clientY}}if(void 0!==Pe.pageX)return{x:Pe.pageX,y:Pe.pageY}}return{x:0,y:0}},at=Pe=>{const Oe="rtl"===document.dir;switch(Pe){case"start":return Oe;case"end":return!Oe;default:throw new Error(`"${Pe}" is not a valid value for [side]. Use "start" or "end" instead.`)}},st=(Pe,Oe)=>{const Q=Pe._original||Pe;return{_original:Pe,emit:Xe(Q.emit.bind(Q),Oe)}},Xe=(Pe,Oe=0)=>{let Q;return(...et)=>{clearTimeout(Q),Q=setTimeout(Pe,Oe,...et)}},Ze=(Pe,Oe)=>{if(null!=Pe||(Pe={}),null!=Oe||(Oe={}),Pe===Oe)return!0;const Q=Object.keys(Pe);if(Q.length!==Object.keys(Oe).length)return!1;for(const et of Q)if(!(et in Oe)||Pe[et]!==Oe[et])return!1;return!0}},1843:(sn,ht,B)=>{"use strict";B.d(ht,{L:()=>De,a:()=>Me,b:()=>Ae,c:()=>he,d:()=>xe,e:()=>Oe,g:()=>ke,l:()=>Ze,s:()=>Q,t:()=>ce});var a=B(5861),J=B(1308),G=B(5730);const De="ionViewWillEnter",Me="ionViewDidEnter",Ae="ionViewWillLeave",he="ionViewDidLeave",xe="ionViewWillUnload",ce=He=>new Promise((Ge,rt)=>{(0,J.c)(()=>{de(He),Ce(He).then(z=>{z.animation&&z.animation.destroy(),Fe(He),Ge(z)},z=>{Fe(He),rt(z)})})}),de=He=>{const Ge=He.enteringEl,rt=He.leavingEl;et(Ge,rt,He.direction),He.showGoBack?Ge.classList.add("can-go-back"):Ge.classList.remove("can-go-back"),Q(Ge,!1),Ge.style.setProperty("pointer-events","none"),rt&&(Q(rt,!1),rt.style.setProperty("pointer-events","none"))},Ce=function(){var He=(0,a.Z)(function*(Ge){const rt=yield it(Ge);return rt&&J.B.isBrowser?Ct(rt,Ge):Te(Ge)});return function(rt){return He.apply(this,arguments)}}(),Fe=He=>{const Ge=He.enteringEl,rt=He.leavingEl;Ge.classList.remove("ion-page-invisible"),Ge.style.removeProperty("pointer-events"),void 0!==rt&&(rt.classList.remove("ion-page-invisible"),rt.style.removeProperty("pointer-events"))},it=function(){var He=(0,a.Z)(function*(Ge){return Ge.leavingEl&&Ge.animated&&0!==Ge.duration?Ge.animationBuilder?Ge.animationBuilder:"ios"===Ge.mode?(yield Promise.resolve().then(B.bind(B,6439))).iosTransitionAnimation:(yield Promise.resolve().then(B.bind(B,7838))).mdTransitionAnimation:void 0});return function(rt){return He.apply(this,arguments)}}(),Ct=function(){var He=(0,a.Z)(function*(Ge,rt){yield ye(rt,!0);const z=Ge(rt.baseEl,rt);st(rt.enteringEl,rt.leavingEl);const ft=yield at(z,rt);return rt.progressCallback&&rt.progressCallback(void 0),ft&&Xe(rt.enteringEl,rt.leavingEl),{hasCompleted:ft,animation:z}});return function(rt,z){return He.apply(this,arguments)}}(),Te=function(){var He=(0,a.Z)(function*(Ge){const rt=Ge.enteringEl,z=Ge.leavingEl;return yield ye(Ge,!1),st(rt,z),Xe(rt,z),{hasCompleted:!0}});return function(rt){return He.apply(this,arguments)}}(),ye=function(){var He=(0,a.Z)(function*(Ge,rt){const ft=(void 0!==Ge.deepWait?Ge.deepWait:rt)?[Oe(Ge.enteringEl),Oe(Ge.leavingEl)]:[Pe(Ge.enteringEl),Pe(Ge.leavingEl)];yield Promise.all(ft),yield le(Ge.viewIsReady,Ge.enteringEl)});return function(rt,z){return He.apply(this,arguments)}}(),le=function(){var He=(0,a.Z)(function*(Ge,rt){Ge&&(yield Ge(rt))});return function(rt,z){return He.apply(this,arguments)}}(),at=(He,Ge)=>{const rt=Ge.progressCallback,z=new Promise(ft=>{He.onFinish(nt=>ft(1===nt))});return rt?(He.progressStart(!0),rt(He)):He.play(),z},st=(He,Ge)=>{Ze(Ge,Ae),Ze(He,De)},Xe=(He,Ge)=>{Ze(He,Me),Ze(Ge,he)},Ze=(He,Ge)=>{if(He){const rt=new CustomEvent(Ge,{bubbles:!1,cancelable:!1});He.dispatchEvent(rt)}},Pe=He=>He?new Promise(Ge=>(0,G.c)(He,Ge)):Promise.resolve(),Oe=function(){var He=(0,a.Z)(function*(Ge){const rt=Ge;if(rt){if(null!=rt.componentOnReady){if(null!=(yield rt.componentOnReady()))return}else if(null!=rt.__registerHost)return void(yield new Promise(ft=>(0,G.r)(ft)));yield Promise.all(Array.from(rt.children).map(Oe))}});return function(rt){return He.apply(this,arguments)}}(),Q=(He,Ge)=>{Ge?(He.setAttribute("aria-hidden","true"),He.classList.add("ion-page-hidden")):(He.hidden=!1,He.removeAttribute("aria-hidden"),He.classList.remove("ion-page-hidden"))},et=(He,Ge,rt)=>{void 0!==He&&(He.style.zIndex="back"===rt?"99":"101"),void 0!==Ge&&(Ge.style.zIndex="100")},ke=He=>He.classList.contains("ion-page")?He:He.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||He},6369:(sn,ht,B)=>{"use strict";B.d(ht,{m:()=>ce});var a=B(5861),J=B(7593),G=B(5730),De=B(5179),Me=B(181);const Ae=de=>(0,Me.c)().duration(de?400:300),he=de=>{let Ce,Fe;const it=de.width+8,Ct=(0,Me.c)(),Te=(0,Me.c)();de.isEndSide?(Ce=it+"px",Fe="0px"):(Ce=-it+"px",Fe="0px"),Ct.addElement(de.menuInnerEl).fromTo("transform",`translateX(${Ce})`,`translateX(${Fe})`);const le="ios"===(0,De.b)(de),at=le?.2:.25;return Te.addElement(de.backdropEl).fromTo("opacity",.01,at),Ae(le).addAnimation([Ct,Te])},xe=de=>{let Ce,Fe;const it=(0,De.b)(de),Ct=de.width;de.isEndSide?(Ce=-Ct+"px",Fe=Ct+"px"):(Ce=Ct+"px",Fe=-Ct+"px");const Te=(0,Me.c)().addElement(de.menuInnerEl).fromTo("transform",`translateX(${Fe})`,"translateX(0px)"),ye=(0,Me.c)().addElement(de.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ce})`),le=(0,Me.c)().addElement(de.backdropEl).fromTo("opacity",.01,.32);return Ae("ios"===it).addAnimation([Te,ye,le])},Ve=de=>{const Ce=(0,De.b)(de),Fe=de.width*(de.isEndSide?-1:1)+"px",it=(0,Me.c)().addElement(de.contentEl).fromTo("transform","translateX(0px)",`translateX(${Fe})`);return Ae("ios"===Ce).addAnimation(it)},ce=(()=>{const de=new Map,Ce=[],Fe=function(){var Ee=(0,a.Z)(function*(be){const tt=yield st(be);return!!tt&&tt.open()});return function(tt){return Ee.apply(this,arguments)}}(),it=function(){var Ee=(0,a.Z)(function*(be){const tt=yield void 0!==be?st(be):Xe();return void 0!==tt&&tt.close()});return function(tt){return Ee.apply(this,arguments)}}(),Ct=function(){var Ee=(0,a.Z)(function*(be){const tt=yield st(be);return!!tt&&tt.toggle()});return function(tt){return Ee.apply(this,arguments)}}(),Te=function(){var Ee=(0,a.Z)(function*(be,tt){const $e=yield st(tt);return $e&&($e.disabled=!be),$e});return function(tt,$e){return Ee.apply(this,arguments)}}(),ye=function(){var Ee=(0,a.Z)(function*(be,tt){const $e=yield st(tt);return $e&&($e.swipeGesture=be),$e});return function(tt,$e){return Ee.apply(this,arguments)}}(),le=function(){var Ee=(0,a.Z)(function*(be){if(null!=be){const tt=yield st(be);return void 0!==tt&&tt.isOpen()}return void 0!==(yield Xe())});return function(tt){return Ee.apply(this,arguments)}}(),at=function(){var Ee=(0,a.Z)(function*(be){const tt=yield st(be);return!!tt&&!tt.disabled});return function(tt){return Ee.apply(this,arguments)}}(),st=function(){var Ee=(0,a.Z)(function*(be){return yield Ie(),"start"===be||"end"===be?nt(Je=>Je.side===be&&!Je.disabled)||nt(Je=>Je.side===be):null!=be?nt($e=>$e.menuId===be):nt($e=>!$e.disabled)||(Ce.length>0?Ce[0].el:void 0)});return function(tt){return Ee.apply(this,arguments)}}(),Xe=function(){var Ee=(0,a.Z)(function*(){return yield Ie(),rt()});return function(){return Ee.apply(this,arguments)}}(),Ze=function(){var Ee=(0,a.Z)(function*(){return yield Ie(),z()});return function(){return Ee.apply(this,arguments)}}(),Pe=function(){var Ee=(0,a.Z)(function*(){return yield Ie(),ft()});return function(){return Ee.apply(this,arguments)}}(),Oe=(Ee,be)=>{de.set(Ee,be)},ke=Ee=>{const be=Ee.side;Ce.filter(tt=>tt.side===be&&tt!==Ee).forEach(tt=>tt.disabled=!0)},He=function(){var Ee=(0,a.Z)(function*(be,tt,$e){if(ft())return!1;if(tt){const Je=yield Xe();Je&&be.el!==Je&&(yield Je.setOpen(!1,!1))}return be._setOpen(tt,$e)});return function(tt,$e,Je){return Ee.apply(this,arguments)}}(),rt=()=>nt(Ee=>Ee._isOpen),z=()=>Ce.map(Ee=>Ee.el),ft=()=>Ce.some(Ee=>Ee.isAnimating),nt=Ee=>{const be=Ce.find(Ee);if(void 0!==be)return be.el},Ie=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(Ee=>new Promise(be=>(0,G.c)(Ee,be))));return Oe("reveal",Ve),Oe("push",xe),Oe("overlay",he),typeof document<"u"&&document.addEventListener("ionBackButton",Ee=>{const be=rt();be&&Ee.detail.register(J.MENU_BACK_BUTTON_PRIORITY,()=>be.close())}),{registerAnimation:Oe,get:st,getMenus:Ze,getOpen:Xe,isEnabled:at,swipeGesture:ye,isAnimating:Pe,isOpen:le,enable:Te,toggle:Ct,close:it,open:Fe,_getOpenSync:rt,_createAnimation:(Ee,be)=>{const tt=de.get(Ee);if(!tt)throw new Error("animation not registered");return tt(be)},_register:Ee=>{Ce.indexOf(Ee)<0&&(Ee.disabled||ke(Ee),Ce.push(Ee))},_unregister:Ee=>{const be=Ce.indexOf(Ee);be>-1&&Ce.splice(be,1)},_setOpen:He,_setActiveMenu:ke}})()},3457:(sn,ht,B)=>{"use strict";B.d(ht,{w:()=>a});const a=typeof window<"u"?window:void 0},1898:(sn,ht,B)=>{"use strict";B.r(ht),B.d(ht,{GESTURE_CONTROLLER:()=>a.G,createGesture:()=>Ve});var a=B(4349);const J=(Ce,Fe,it,Ct)=>{const Te=G(Ce)?{capture:!!Ct.capture,passive:!!Ct.passive}:!!Ct.capture;let ye,le;return Ce.__zone_symbol__addEventListener?(ye="__zone_symbol__addEventListener",le="__zone_symbol__removeEventListener"):(ye="addEventListener",le="removeEventListener"),Ce[ye](Fe,it,Te),()=>{Ce[le](Fe,it,Te)}},G=Ce=>{if(void 0===De)try{const Fe=Object.defineProperty({},"passive",{get:()=>{De=!0}});Ce.addEventListener("optsTest",()=>{},Fe)}catch(Fe){De=!1}return!!De};let De;const he=Ce=>Ce instanceof Document?Ce:Ce.ownerDocument,Ve=Ce=>{let Fe=!1,it=!1,Ct=!0,Te=!1;const ye=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},Ce),le=ye.canStart,at=ye.onWillStart,st=ye.onStart,Xe=ye.onEnd,Ze=ye.notCaptured,Pe=ye.onMove,Oe=ye.threshold,Q=ye.passive,et=ye.blurOnStart,ke={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},He=((Ce,Fe,it)=>{const Ct=it*(Math.PI/180),Te="x"===Ce,ye=Math.cos(Ct),le=Fe*Fe;let at=0,st=0,Xe=!1,Ze=0;return{start(Pe,Oe){at=Pe,st=Oe,Ze=0,Xe=!0},detect(Pe,Oe){if(!Xe)return!1;const Q=Pe-at,et=Oe-st,ke=Q*Q+et*et;if(ke<le)return!1;const He=Math.sqrt(ke),Ge=(Te?Q:et)/He;return Ze=Ge>ye?1:Ge<-ye?-1:0,Xe=!1,!0},isGesture:()=>0!==Ze,getDirection:()=>Ze}})(ye.direction,ye.threshold,ye.maxAngle),Ge=a.G.createGesture({name:Ce.gestureName,priority:Ce.gesturePriority,disableScroll:Ce.disableScroll}),ft=()=>{Fe&&(Te=!1,Pe&&Pe(ke))},nt=()=>!!Ge.capture()&&(Fe=!0,Ct=!1,ke.startX=ke.currentX,ke.startY=ke.currentY,ke.startTime=ke.currentTime,at?at(ke).then(Ee):Ee(),!0),Ee=()=>{et&&(()=>{if(typeof document<"u"){const Ke=document.activeElement;null!=Ke&&Ke.blur&&Ke.blur()}})(),st&&st(ke),Ct=!0},be=()=>{Fe=!1,it=!1,Te=!1,Ct=!0,Ge.release()},tt=Ke=>{const Pt=Fe,At=Ct;if(be(),At){if(ge(ke,Ke),Pt)return void(Xe&&Xe(ke));Ze&&Ze(ke)}},$e=((Ce,Fe,it,Ct,Te)=>{let ye,le,at,st,Xe,Ze,Pe,Oe=0;const Q=Ie=>{Oe=Date.now()+2e3,Fe(Ie)&&(!le&&it&&(le=J(Ce,"touchmove",it,Te)),at||(at=J(Ie.target,"touchend",ke,Te)),st||(st=J(Ie.target,"touchcancel",ke,Te)))},et=Ie=>{Oe>Date.now()||Fe(Ie)&&(!Ze&&it&&(Ze=J(he(Ce),"mousemove",it,Te)),Pe||(Pe=J(he(Ce),"mouseup",He,Te)))},ke=Ie=>{Ge(),Ct&&Ct(Ie)},He=Ie=>{rt(),Ct&&Ct(Ie)},Ge=()=>{le&&le(),at&&at(),st&&st(),le=at=st=void 0},rt=()=>{Ze&&Ze(),Pe&&Pe(),Ze=Pe=void 0},z=()=>{Ge(),rt()},ft=(Ie=!0)=>{Ie?(ye||(ye=J(Ce,"touchstart",Q,Te)),Xe||(Xe=J(Ce,"mousedown",et,Te))):(ye&&ye(),Xe&&Xe(),ye=Xe=void 0,z())};return{enable:ft,stop:z,destroy:()=>{ft(!1),Ct=it=Fe=void 0}}})(ye.el,Ke=>{const Pt=de(Ke);return!(it||!Ct||(ce(Ke,ke),ke.startX=ke.currentX,ke.startY=ke.currentY,ke.startTime=ke.currentTime=Pt,ke.velocityX=ke.velocityY=ke.deltaX=ke.deltaY=0,ke.event=Ke,le&&!1===le(ke))||(Ge.release(),!Ge.start()))&&(it=!0,0===Oe?nt():(He.start(ke.startX,ke.startY),!0))},Ke=>{Fe?!Te&&Ct&&(Te=!0,ge(ke,Ke),requestAnimationFrame(ft)):(ge(ke,Ke),He.detect(ke.currentX,ke.currentY)&&(!He.isGesture()||!nt())&&Je())},tt,{capture:!1,passive:Q}),Je=()=>{be(),$e.stop(),Ze&&Ze(ke)};return{enable(Ke=!0){Ke||(Fe&&tt(void 0),be()),$e.enable(Ke)},destroy(){Ge.destroy(),$e.destroy()}}},ge=(Ce,Fe)=>{if(!Fe)return;const it=Ce.currentX,Ct=Ce.currentY,Te=Ce.currentTime;ce(Fe,Ce);const ye=Ce.currentX,le=Ce.currentY,st=(Ce.currentTime=de(Fe))-Te;if(st>0&&st<100){const Ze=(le-Ct)/st;Ce.velocityX=(ye-it)/st*.7+.3*Ce.velocityX,Ce.velocityY=.7*Ze+.3*Ce.velocityY}Ce.deltaX=ye-Ce.startX,Ce.deltaY=le-Ce.startY,Ce.event=Fe},ce=(Ce,Fe)=>{let it=0,Ct=0;if(Ce){const Te=Ce.changedTouches;if(Te&&Te.length>0){const ye=Te[0];it=ye.clientX,Ct=ye.clientY}else void 0!==Ce.pageX&&(it=Ce.pageX,Ct=Ce.pageY)}Fe.currentX=it,Fe.currentY=Ct},de=Ce=>Ce.timeStamp||Date.now()},1308:(sn,ht,B)=>{"use strict";B.d(ht,{B:()=>Hi,H:()=>$n,a:()=>Je,b:()=>Bi,c:()=>ti,e:()=>Nn,f:()=>Tr,g:()=>Ke,h:()=>En,i:()=>rr,j:()=>xr,k:()=>Yi,p:()=>Ct,r:()=>Rr,s:()=>Fe});var a=B(5861);let G,De,Me,Ae=!1,he=!1,xe=!1,Ve=!1,ge=!1;const ce=typeof window<"u"?window:{},de=ce.document||{head:{}},Ce={$flags$:0,$resourcesUrl$:"",jmp:ee=>ee(),raf:ee=>requestAnimationFrame(ee),ael:(ee,fe,We,lt)=>ee.addEventListener(fe,We,lt),rel:(ee,fe,We,lt)=>ee.removeEventListener(fe,We,lt),ce:(ee,fe)=>new CustomEvent(ee,fe)},Fe=ee=>{Object.assign(Ce,ee)},Ct=ee=>Promise.resolve(ee),Te=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(ee){}return!1})(),ye=(ee,fe,We,lt)=>{We&&We.map(([xt,ae,qe])=>{const pt=at(ee,xt),Dt=le(fe,qe),Ft=st(xt);Ce.ael(pt,ae,Dt,Ft),(fe.$rmListeners$=fe.$rmListeners$||[]).push(()=>Ce.rel(pt,ae,Dt,Ft))})},le=(ee,fe)=>We=>{try{256&ee.$flags$?ee.$lazyInstance$[fe](We):(ee.$queuedListeners$=ee.$queuedListeners$||[]).push([fe,We])}catch(lt){Zn(lt)}},at=(ee,fe)=>4&fe?de:8&fe?ce:16&fe?de.body:ee,st=ee=>0!=(2&ee),Q="s-id",et="sty-id",Ge="http://www.w3.org/1999/xlink",ft=new WeakMap,nt=(ee,fe,We)=>{let lt=Ei.get(ee);Te&&We?(lt=lt||new CSSStyleSheet,"string"==typeof lt?lt=fe:lt.replaceSync(fe)):lt=fe,Ei.set(ee,lt)},Ie=(ee,fe,We,lt)=>{let xt=be(fe,We);const ae=Ei.get(xt);if(ee=11===ee.nodeType?ee:de,ae)if("string"==typeof ae){let pt,qe=ft.get(ee=ee.head||ee);qe||ft.set(ee,qe=new Set),qe.has(xt)||(ee.host&&(pt=ee.querySelector(`[${et}="${xt}"]`))?pt.innerHTML=ae:(pt=de.createElement("style"),pt.innerHTML=ae,ee.insertBefore(pt,ee.querySelector("link"))),qe&&qe.add(xt))}else ee.adoptedStyleSheets.includes(ae)||(ee.adoptedStyleSheets=[...ee.adoptedStyleSheets,ae]);return xt},be=(ee,fe)=>"sc-"+(fe&&32&ee.$flags$?ee.$tagName$+"-"+fe:ee.$tagName$),tt=ee=>ee.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Je=ee=>ei.push(ee),Ke=ee=>Oi(ee).$modeName$,Pt={},Sn=ee=>"object"==(ee=typeof ee)||"function"===ee,En=(ee,fe,...We)=>{let lt=null,xt=null,ae=null,qe=!1,pt=!1;const Dt=[],Ft=wn=>{for(let Mn=0;Mn<wn.length;Mn++)lt=wn[Mn],Array.isArray(lt)?Ft(lt):null!=lt&&"boolean"!=typeof lt&&((qe="function"!=typeof ee&&!Sn(lt))&&(lt=String(lt)),qe&&pt?Dt[Dt.length-1].$text$+=lt:Dt.push(qe?Fn(null,lt):lt),pt=qe)};if(Ft(We),fe){fe.key&&(xt=fe.key),fe.name&&(ae=fe.name);{const wn=fe.className||fe.class;wn&&(fe.class="object"!=typeof wn?wn:Object.keys(wn).filter(Mn=>wn[Mn]).join(" "))}}if("function"==typeof ee)return ee(null===fe?{}:fe,Dt,Qn);const Xt=Fn(ee,null);return Xt.$attrs$=fe,Dt.length>0&&(Xt.$children$=Dt),Xt.$key$=xt,Xt.$name$=ae,Xt},Fn=(ee,fe)=>({$flags$:0,$tag$:ee,$text$:fe,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),$n={},Qn={forEach:(ee,fe)=>ee.map(vr).forEach(fe),map:(ee,fe)=>ee.map(vr).map(fe).map(lr)},vr=ee=>({vattrs:ee.$attrs$,vchildren:ee.$children$,vkey:ee.$key$,vname:ee.$name$,vtag:ee.$tag$,vtext:ee.$text$}),lr=ee=>{if("function"==typeof ee.vtag){const We=Object.assign({},ee.vattrs);return ee.vkey&&(We.key=ee.vkey),ee.vname&&(We.name=ee.vname),En(ee.vtag,We,...ee.vchildren||[])}const fe=Fn(ee.vtag,ee.vtext);return fe.$attrs$=ee.vattrs,fe.$children$=ee.vchildren,fe.$key$=ee.vkey,fe.$name$=ee.vname,fe},hn=(ee,fe,We,lt,xt,ae)=>{if(We!==lt){let qe=Ui(ee,fe),pt=fe.toLowerCase();if("class"===fe){const Dt=ee.classList,Ft=Wt(We),Xt=Wt(lt);Dt.remove(...Ft.filter(wn=>wn&&!Xt.includes(wn))),Dt.add(...Xt.filter(wn=>wn&&!Ft.includes(wn)))}else if("style"===fe){for(const Dt in We)(!lt||null==lt[Dt])&&(Dt.includes("-")?ee.style.removeProperty(Dt):ee.style[Dt]="");for(const Dt in lt)(!We||lt[Dt]!==We[Dt])&&(Dt.includes("-")?ee.style.setProperty(Dt,lt[Dt]):ee.style[Dt]=lt[Dt])}else if("key"!==fe)if("ref"===fe)lt&&lt(ee);else if(qe||"o"!==fe[0]||"n"!==fe[1]){const Dt=Sn(lt);if((qe||Dt&&null!==lt)&&!xt)try{if(ee.tagName.includes("-"))ee[fe]=lt;else{const Xt=null==lt?"":lt;"list"===fe?qe=!1:(null==We||ee[fe]!=Xt)&&(ee[fe]=Xt)}}catch(Xt){}let Ft=!1;pt!==(pt=pt.replace(/^xlink\:?/,""))&&(fe=pt,Ft=!0),null==lt||!1===lt?(!1!==lt||""===ee.getAttribute(fe))&&(Ft?ee.removeAttributeNS(Ge,fe):ee.removeAttribute(fe)):(!qe||4&ae||xt)&&!Dt&&(lt=!0===lt?"":lt,Ft?ee.setAttributeNS(Ge,fe,lt):ee.setAttribute(fe,lt))}else fe="-"===fe[2]?fe.slice(3):Ui(ce,pt)?pt.slice(2):pt[2]+fe.slice(3),We&&Ce.rel(ee,fe,We,!1),lt&&Ce.ael(ee,fe,lt,!1)}},_r=/\s/,Wt=ee=>ee?ee.split(_r):[],Jr=(ee,fe,We,lt)=>{const xt=11===fe.$elm$.nodeType&&fe.$elm$.host?fe.$elm$.host:fe.$elm$,ae=ee&&ee.$attrs$||Pt,qe=fe.$attrs$||Pt;for(lt in ae)lt in qe||hn(xt,lt,ae[lt],void 0,We,fe.$flags$);for(lt in qe)hn(xt,lt,ae[lt],qe[lt],We,fe.$flags$)},Cr=(ee,fe,We,lt)=>{const xt=fe.$children$[We];let qe,pt,Dt,ae=0;if(Ae||(xe=!0,"slot"===xt.$tag$&&(G&&lt.classList.add(G+"-s"),xt.$flags$|=xt.$children$?2:1)),null!==xt.$text$)qe=xt.$elm$=de.createTextNode(xt.$text$);else if(1&xt.$flags$)qe=xt.$elm$=de.createTextNode("");else{if(Ve||(Ve="svg"===xt.$tag$),qe=xt.$elm$=de.createElementNS(Ve?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&xt.$flags$?"slot-fb":xt.$tag$),Ve&&"foreignObject"===xt.$tag$&&(Ve=!1),Jr(null,xt,Ve),(ee=>null!=ee)(G)&&qe["s-si"]!==G&&qe.classList.add(qe["s-si"]=G),xt.$children$)for(ae=0;ae<xt.$children$.length;++ae)pt=Cr(ee,xt,ae,qe),pt&&qe.appendChild(pt);"svg"===xt.$tag$?Ve=!1:"foreignObject"===qe.tagName&&(Ve=!0)}return qe["s-hn"]=Me,3&xt.$flags$&&(qe["s-sr"]=!0,qe["s-cr"]=De,qe["s-sn"]=xt.$name$||"",Dt=ee&&ee.$children$&&ee.$children$[We],Dt&&Dt.$tag$===xt.$tag$&&ee.$elm$&&Er(ee.$elm$,!1)),qe},Er=(ee,fe)=>{Ce.$flags$|=1;const We=ee.childNodes;for(let lt=We.length-1;lt>=0;lt--){const xt=We[lt];xt["s-hn"]!==Me&&xt["s-ol"]&&(An(xt).insertBefore(xt,In(xt)),xt["s-ol"].remove(),xt["s-ol"]=void 0,xe=!0),fe&&Er(xt,fe)}Ce.$flags$&=-2},Zr=(ee,fe,We,lt,xt,ae)=>{let pt,qe=ee["s-cr"]&&ee["s-cr"].parentNode||ee;for(qe.shadowRoot&&qe.tagName===Me&&(qe=qe.shadowRoot);xt<=ae;++xt)lt[xt]&&(pt=Cr(null,We,xt,ee),pt&&(lt[xt].$elm$=pt,qe.insertBefore(pt,In(fe))))},Sr=(ee,fe,We,lt,xt)=>{for(;fe<=We;++fe)(lt=ee[fe])&&(xt=lt.$elm$,Dr(lt),he=!0,xt["s-ol"]?xt["s-ol"].remove():Er(xt,!0),xt.remove())},yn=(ee,fe)=>ee.$tag$===fe.$tag$&&("slot"===ee.$tag$?ee.$name$===fe.$name$:ee.$key$===fe.$key$),In=ee=>ee&&ee["s-ol"]||ee,An=ee=>(ee["s-ol"]?ee["s-ol"]:ee).parentNode,mr=(ee,fe)=>{const We=fe.$elm$=ee.$elm$,lt=ee.$children$,xt=fe.$children$,ae=fe.$tag$,qe=fe.$text$;let pt;null===qe?(Ve="svg"===ae||"foreignObject"!==ae&&Ve,"slot"===ae||Jr(ee,fe,Ve),null!==lt&&null!==xt?((ee,fe,We,lt)=>{let Kr,ot,xt=0,ae=0,qe=0,pt=0,Dt=fe.length-1,Ft=fe[0],Xt=fe[Dt],wn=lt.length-1,Mn=lt[0],Ir=lt[wn];for(;xt<=Dt&&ae<=wn;)if(null==Ft)Ft=fe[++xt];else if(null==Xt)Xt=fe[--Dt];else if(null==Mn)Mn=lt[++ae];else if(null==Ir)Ir=lt[--wn];else if(yn(Ft,Mn))mr(Ft,Mn),Ft=fe[++xt],Mn=lt[++ae];else if(yn(Xt,Ir))mr(Xt,Ir),Xt=fe[--Dt],Ir=lt[--wn];else if(yn(Ft,Ir))("slot"===Ft.$tag$||"slot"===Ir.$tag$)&&Er(Ft.$elm$.parentNode,!1),mr(Ft,Ir),ee.insertBefore(Ft.$elm$,Xt.$elm$.nextSibling),Ft=fe[++xt],Ir=lt[--wn];else if(yn(Xt,Mn))("slot"===Ft.$tag$||"slot"===Ir.$tag$)&&Er(Xt.$elm$.parentNode,!1),mr(Xt,Mn),ee.insertBefore(Xt.$elm$,Ft.$elm$),Xt=fe[--Dt],Mn=lt[++ae];else{for(qe=-1,pt=xt;pt<=Dt;++pt)if(fe[pt]&&null!==fe[pt].$key$&&fe[pt].$key$===Mn.$key$){qe=pt;break}qe>=0?(ot=fe[qe],ot.$tag$!==Mn.$tag$?Kr=Cr(fe&&fe[ae],We,qe,ee):(mr(ot,Mn),fe[qe]=void 0,Kr=ot.$elm$),Mn=lt[++ae]):(Kr=Cr(fe&&fe[ae],We,ae,ee),Mn=lt[++ae]),Kr&&An(Ft.$elm$).insertBefore(Kr,In(Ft.$elm$))}xt>Dt?Zr(ee,null==lt[wn+1]?null:lt[wn+1].$elm$,We,lt,ae,wn):ae>wn&&Sr(fe,xt,Dt)})(We,lt,fe,xt):null!==xt?(null!==ee.$text$&&(We.textContent=""),Zr(We,null,fe,xt,0,xt.length-1)):null!==lt&&Sr(lt,0,lt.length-1),Ve&&"svg"===ae&&(Ve=!1)):(pt=We["s-cr"])?pt.parentNode.textContent=qe:ee.$text$!==qe&&(We.data=qe)},Kt=ee=>{const fe=ee.childNodes;let We,lt,xt,ae,qe,pt;for(lt=0,xt=fe.length;lt<xt;lt++)if(We=fe[lt],1===We.nodeType){if(We["s-sr"])for(qe=We["s-sn"],We.hidden=!1,ae=0;ae<xt;ae++)if(pt=fe[ae].nodeType,fe[ae]["s-hn"]!==We["s-hn"]||""!==qe){if(1===pt&&qe===fe[ae].getAttribute("slot")){We.hidden=!0;break}}else if(1===pt||3===pt&&""!==fe[ae].textContent.trim()){We.hidden=!0;break}Kt(We)}},Ar=[],yi=ee=>{let fe,We,lt,xt,ae,qe,pt=0;const Dt=ee.childNodes,Ft=Dt.length;for(;pt<Ft;pt++){if(fe=Dt[pt],fe["s-sr"]&&(We=fe["s-cr"])&&We.parentNode)for(lt=We.parentNode.childNodes,xt=fe["s-sn"],qe=lt.length-1;qe>=0;qe--)We=lt[qe],!We["s-cn"]&&!We["s-nr"]&&We["s-hn"]!==fe["s-hn"]&&(Li(We,xt)?(ae=Ar.find(Xt=>Xt.$nodeToRelocate$===We),he=!0,We["s-sn"]=We["s-sn"]||xt,ae?ae.$slotRefNode$=fe:Ar.push({$slotRefNode$:fe,$nodeToRelocate$:We}),We["s-sr"]&&Ar.map(Xt=>{Li(Xt.$nodeToRelocate$,We["s-sn"])&&(ae=Ar.find(wn=>wn.$nodeToRelocate$===We),ae&&!Xt.$slotRefNode$&&(Xt.$slotRefNode$=ae.$slotRefNode$))})):Ar.some(Xt=>Xt.$nodeToRelocate$===We)||Ar.push({$nodeToRelocate$:We}));1===fe.nodeType&&yi(fe)}},Li=(ee,fe)=>1===ee.nodeType?null===ee.getAttribute("slot")&&""===fe||ee.getAttribute("slot")===fe:ee["s-sn"]===fe||""===fe,Dr=ee=>{ee.$attrs$&&ee.$attrs$.ref&&ee.$attrs$.ref(null),ee.$children$&&ee.$children$.map(Dr)},rr=ee=>Oi(ee).$hostElement$,Nn=(ee,fe,We)=>{const lt=rr(ee);return{emit:xt=>hi(lt,fe,{bubbles:!!(4&We),composed:!!(2&We),cancelable:!!(1&We),detail:xt})}},hi=(ee,fe,We)=>{const lt=Ce.ce(fe,We);return ee.dispatchEvent(lt),lt},en=(ee,fe)=>{fe&&!ee.$onRenderResolve$&&fe["s-p"]&&fe["s-p"].push(new Promise(We=>ee.$onRenderResolve$=We))},$t=(ee,fe)=>{if(ee.$flags$|=16,!(4&ee.$flags$))return en(ee,ee.$ancestorComponent$),ti(()=>gn(ee,fe));ee.$flags$|=512},gn=(ee,fe)=>{const lt=ee.$lazyInstance$;let xt;return fe&&(ee.$flags$|=256,ee.$queuedListeners$&&(ee.$queuedListeners$.map(([ae,qe])=>_e(lt,ae,qe)),ee.$queuedListeners$=null),xt=_e(lt,"componentWillLoad")),xt=ze(xt,()=>_e(lt,"componentWillRender")),ze(xt,()=>Tn(ee,lt,fe))},Tn=function(){var ee=(0,a.Z)(function*(fe,We,lt){const xt=fe.$hostElement$,qe=xt["s-rc"];lt&&(ee=>{const fe=ee.$cmpMeta$,We=ee.$hostElement$,lt=fe.$flags$,ae=Ie(We.shadowRoot?We.shadowRoot:We.getRootNode(),fe,ee.$modeName$);10&lt&&(We["s-sc"]=ae,We.classList.add(ae+"-h"),2&lt&&We.classList.add(ae+"-s"))})(fe);On(fe,We),qe&&(qe.map(Dt=>Dt()),xt["s-rc"]=void 0);{const Dt=xt["s-p"],Ft=()=>Vn(fe);0===Dt.length?Ft():(Promise.all(Dt).then(Ft),fe.$flags$|=4,Dt.length=0)}});return function(We,lt,xt){return ee.apply(this,arguments)}}(),On=(ee,fe,We)=>{try{fe=fe.render&&fe.render(),ee.$flags$&=-17,ee.$flags$|=2,((ee,fe)=>{const We=ee.$hostElement$,lt=ee.$cmpMeta$,xt=ee.$vnode$||Fn(null,null),ae=(ee=>ee&&ee.$tag$===$n)(fe)?fe:En(null,null,fe);if(Me=We.tagName,lt.$attrsToReflect$&&(ae.$attrs$=ae.$attrs$||{},lt.$attrsToReflect$.map(([qe,pt])=>ae.$attrs$[pt]=We[qe])),ae.$tag$=null,ae.$flags$|=4,ee.$vnode$=ae,ae.$elm$=xt.$elm$=We.shadowRoot||We,G=We["s-sc"],De=We["s-cr"],Ae=0!=(1&lt.$flags$),he=!1,mr(xt,ae),Ce.$flags$|=1,xe){yi(ae.$elm$);let qe,pt,Dt,Ft,Xt,wn,Mn=0;for(;Mn<Ar.length;Mn++)qe=Ar[Mn],pt=qe.$nodeToRelocate$,pt["s-ol"]||(Dt=de.createTextNode(""),Dt["s-nr"]=pt,pt.parentNode.insertBefore(pt["s-ol"]=Dt,pt));for(Mn=0;Mn<Ar.length;Mn++)if(qe=Ar[Mn],pt=qe.$nodeToRelocate$,qe.$slotRefNode$){for(Ft=qe.$slotRefNode$.parentNode,Xt=qe.$slotRefNode$.nextSibling,Dt=pt["s-ol"];Dt=Dt.previousSibling;)if(wn=Dt["s-nr"],wn&&wn["s-sn"]===pt["s-sn"]&&Ft===wn.parentNode&&(wn=wn.nextSibling,!wn||!wn["s-nr"])){Xt=wn;break}(!Xt&&Ft!==pt.parentNode||pt.nextSibling!==Xt)&&pt!==Xt&&(!pt["s-hn"]&&pt["s-ol"]&&(pt["s-hn"]=pt["s-ol"].parentNode.nodeName),Ft.insertBefore(pt,Xt))}else 1===pt.nodeType&&(pt.hidden=!0)}he&&Kt(ae.$elm$),Ce.$flags$&=-2,Ar.length=0})(ee,fe)}catch(lt){Zn(lt,ee.$hostElement$)}return null},Vn=ee=>{const We=ee.$hostElement$,xt=ee.$lazyInstance$,ae=ee.$ancestorComponent$;_e(xt,"componentDidRender"),64&ee.$flags$?_e(xt,"componentDidUpdate"):(ee.$flags$|=64,Mt(We),_e(xt,"componentDidLoad"),ee.$onReadyResolve$(We),ae||Re()),ee.$onInstanceResolve$(We),ee.$onRenderResolve$&&(ee.$onRenderResolve$(),ee.$onRenderResolve$=void 0),512&ee.$flags$&&Kn(()=>$t(ee,!1)),ee.$flags$&=-517},xr=ee=>{{const fe=Oi(ee),We=fe.$hostElement$.isConnected;return We&&2==(18&fe.$flags$)&&$t(fe,!1),We}},Re=ee=>{Mt(de.documentElement),Kn(()=>hi(ce,"appload",{detail:{namespace:"ionic"}}))},_e=(ee,fe,We)=>{if(ee&&ee[fe])try{return ee[fe](We)}catch(lt){Zn(lt)}},ze=(ee,fe)=>ee&&ee.then?ee.then(fe):fe(),Mt=ee=>ee.classList.add("hydrated"),dn=(ee,fe,We,lt,xt,ae,qe)=>{let pt,Dt,Ft,Xt;if(1===ae.nodeType){for(pt=ae.getAttribute("c-id"),pt&&(Dt=pt.split("."),(Dt[0]===qe||"0"===Dt[0])&&(Ft={$flags$:0,$hostId$:Dt[0],$nodeId$:Dt[1],$depth$:Dt[2],$index$:Dt[3],$tag$:ae.tagName.toLowerCase(),$elm$:ae,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},fe.push(Ft),ae.removeAttribute("c-id"),ee.$children$||(ee.$children$=[]),ee.$children$[Ft.$index$]=Ft,ee=Ft,lt&&"0"===Ft.$depth$&&(lt[Ft.$index$]=Ft.$elm$))),Xt=ae.childNodes.length-1;Xt>=0;Xt--)dn(ee,fe,We,lt,xt,ae.childNodes[Xt],qe);if(ae.shadowRoot)for(Xt=ae.shadowRoot.childNodes.length-1;Xt>=0;Xt--)dn(ee,fe,We,lt,xt,ae.shadowRoot.childNodes[Xt],qe)}else if(8===ae.nodeType)Dt=ae.nodeValue.split("."),(Dt[1]===qe||"0"===Dt[1])&&(pt=Dt[0],Ft={$flags$:0,$hostId$:Dt[1],$nodeId$:Dt[2],$depth$:Dt[3],$index$:Dt[4],$elm$:ae,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===pt?(Ft.$elm$=ae.nextSibling,Ft.$elm$&&3===Ft.$elm$.nodeType&&(Ft.$text$=Ft.$elm$.textContent,fe.push(Ft),ae.remove(),ee.$children$||(ee.$children$=[]),ee.$children$[Ft.$index$]=Ft,lt&&"0"===Ft.$depth$&&(lt[Ft.$index$]=Ft.$elm$))):Ft.$hostId$===qe&&("s"===pt?(Ft.$tag$="slot",ae["s-sn"]=Dt[5]?Ft.$name$=Dt[5]:"",ae["s-sr"]=!0,lt&&(Ft.$elm$=de.createElement(Ft.$tag$),Ft.$name$&&Ft.$elm$.setAttribute("name",Ft.$name$),ae.parentNode.insertBefore(Ft.$elm$,ae),ae.remove(),"0"===Ft.$depth$&&(lt[Ft.$index$]=Ft.$elm$)),We.push(Ft),ee.$children$||(ee.$children$=[]),ee.$children$[Ft.$index$]=Ft):"r"===pt&&(lt?ae.remove():(xt["s-cr"]=ae,ae["s-cn"]=!0))));else if(ee&&"style"===ee.$tag$){const wn=Fn(null,ae.textContent);wn.$elm$=ae,wn.$index$="0",ee.$children$=[wn]}},Le=(ee,fe)=>{if(1===ee.nodeType){let We=0;for(;We<ee.childNodes.length;We++)Le(ee.childNodes[We],fe);if(ee.shadowRoot)for(We=0;We<ee.shadowRoot.childNodes.length;We++)Le(ee.shadowRoot.childNodes[We],fe)}else if(8===ee.nodeType){const We=ee.nodeValue.split(".");"o"===We[0]&&(fe.set(We[1]+"."+We[2],ee),ee.nodeValue="",ee["s-en"]=We[3])}},Rt=(ee,fe,We)=>{if(fe.$members$){ee.watchers&&(fe.$watchers$=ee.watchers);const lt=Object.entries(fe.$members$),xt=ee.prototype;if(lt.map(([ae,[qe]])=>{31&qe||2&We&&32&qe?Object.defineProperty(xt,ae,{get(){return((ee,fe)=>Oi(this).$instanceValues$.get(fe))(0,ae)},set(pt){((ee,fe,We,lt)=>{const xt=Oi(ee),ae=xt.$hostElement$,qe=xt.$instanceValues$.get(fe),pt=xt.$flags$,Dt=xt.$lazyInstance$;We=((ee,fe)=>null==ee||Sn(ee)?ee:4&fe?"false"!==ee&&(""===ee||!!ee):2&fe?parseFloat(ee):1&fe?String(ee):ee)(We,lt.$members$[fe][0]);const Ft=Number.isNaN(qe)&&Number.isNaN(We);if((!(8&pt)||void 0===qe)&&We!==qe&&!Ft&&(xt.$instanceValues$.set(fe,We),Dt)){if(lt.$watchers$&&128&pt){const wn=lt.$watchers$[fe];wn&&wn.map(Mn=>{try{Dt[Mn](We,qe,fe)}catch(Ir){Zn(Ir,ae)}})}2==(18&pt)&&$t(xt,!1)}})(this,ae,pt,fe)},configurable:!0,enumerable:!0}):1&We&&64&qe&&Object.defineProperty(xt,ae,{value(...pt){const Dt=Oi(this);return Dt.$onInstancePromise$.then(()=>Dt.$lazyInstance$[ae](...pt))}})}),1&We){const ae=new Map;xt.attributeChangedCallback=function(qe,pt,Dt){Ce.jmp(()=>{const Ft=ae.get(qe);if(this.hasOwnProperty(Ft))Dt=this[Ft],delete this[Ft];else if(xt.hasOwnProperty(Ft)&&"number"==typeof this[Ft]&&this[Ft]==Dt)return;this[Ft]=(null!==Dt||"boolean"!=typeof this[Ft])&&Dt})},ee.observedAttributes=lt.filter(([qe,pt])=>15&pt[0]).map(([qe,pt])=>{const Dt=pt[1]||qe;return ae.set(Dt,qe),512&pt[0]&&fe.$attrsToReflect$.push([qe,Dt]),Dt})}}return ee},jt=function(){var ee=(0,a.Z)(function*(fe,We,lt,xt,ae){if(!(32&We.$flags$)){{if(We.$flags$|=32,(ae=kr(lt)).then){const Ft=()=>{};ae=yield ae,Ft()}ae.isProxied||(lt.$watchers$=ae.watchers,Rt(ae,lt,2),ae.isProxied=!0);const Dt=()=>{};We.$flags$|=8;try{new ae(We)}catch(Ft){Zn(Ft)}We.$flags$&=-9,We.$flags$|=128,Dt(),xn(We.$lazyInstance$)}if(ae.style){let Dt=ae.style;"string"!=typeof Dt&&(Dt=Dt[We.$modeName$=(ee=>ei.map(fe=>fe(ee)).find(fe=>!!fe))(fe)]);const Ft=be(lt,We.$modeName$);if(!Ei.has(Ft)){const Xt=()=>{};nt(Ft,Dt,!!(1&lt.$flags$)),Xt()}}}const qe=We.$ancestorComponent$,pt=()=>$t(We,!0);qe&&qe["s-rc"]?qe["s-rc"].push(pt):pt()});return function(We,lt,xt,ae,qe){return ee.apply(this,arguments)}}(),xn=ee=>{_e(ee,"connectedCallback")},fr=ee=>{const fe=ee["s-cr"]=de.createComment("");fe["s-cn"]=!0,ee.insertBefore(fe,ee.firstChild)},Bi=(ee,fe={})=>{const lt=[],xt=fe.exclude||[],ae=ce.customElements,qe=de.head,pt=qe.querySelector("meta[charset]"),Dt=de.createElement("style"),Ft=[],Xt=de.querySelectorAll(`[${et}]`);let wn,Mn=!0,Ir=0;for(Object.assign(Ce,fe),Ce.$resourcesUrl$=new URL(fe.resourcesUrl||"./",de.baseURI).href,Ce.$flags$|=2;Ir<Xt.length;Ir++)nt(Xt[Ir].getAttribute(et),tt(Xt[Ir].innerHTML),!0);ee.map(Kr=>{Kr[1].map(ot=>{const Ne={$flags$:ot[0],$tagName$:ot[1],$members$:ot[2],$listeners$:ot[3]};Ne.$members$=ot[2],Ne.$listeners$=ot[3],Ne.$attrsToReflect$=[],Ne.$watchers$={};const yt=Ne.$tagName$,Ut=class extends HTMLElement{constructor(tn){super(tn),is(tn=this,Ne),1&Ne.$flags$&&tn.attachShadow({mode:"open",delegatesFocus:!!(16&Ne.$flags$)})}connectedCallback(){wn&&(clearTimeout(wn),wn=null),Mn?Ft.push(this):Ce.jmp(()=>(ee=>{if(!(1&Ce.$flags$)){const fe=Oi(ee),We=fe.$cmpMeta$,lt=()=>{};if(1&fe.$flags$)ye(ee,fe,We.$listeners$),xn(fe.$lazyInstance$);else{let xt;if(fe.$flags$|=1,xt=ee.getAttribute(Q),xt){if(1&We.$flags$){const ae=Ie(ee.shadowRoot,We,ee.getAttribute("s-mode"));ee.classList.remove(ae+"-h",ae+"-s")}((ee,fe,We,lt)=>{const ae=ee.shadowRoot,qe=[],Dt=ae?[]:null,Ft=lt.$vnode$=Fn(fe,null);Ce.$orgLocNodes$||Le(de.body,Ce.$orgLocNodes$=new Map),ee[Q]=We,ee.removeAttribute(Q),dn(Ft,qe,[],Dt,ee,ee,We),qe.map(Xt=>{const wn=Xt.$hostId$+"."+Xt.$nodeId$,Mn=Ce.$orgLocNodes$.get(wn),Ir=Xt.$elm$;Mn&&""===Mn["s-en"]&&Mn.parentNode.insertBefore(Ir,Mn.nextSibling),ae||(Ir["s-hn"]=fe,Mn&&(Ir["s-ol"]=Mn,Ir["s-ol"]["s-nr"]=Ir)),Ce.$orgLocNodes$.delete(wn)}),ae&&Dt.map(Xt=>{Xt&&ae.appendChild(Xt)})})(ee,We.$tagName$,xt,fe)}xt||12&We.$flags$&&fr(ee);{let ae=ee;for(;ae=ae.parentNode||ae.host;)if(1===ae.nodeType&&ae.hasAttribute("s-id")&&ae["s-p"]||ae["s-p"]){en(fe,fe.$ancestorComponent$=ae);break}}We.$members$&&Object.entries(We.$members$).map(([ae,[qe]])=>{if(31&qe&&ee.hasOwnProperty(ae)){const pt=ee[ae];delete ee[ae],ee[ae]=pt}}),Kn(()=>jt(ee,fe,We))}lt()}})(this))}disconnectedCallback(){Ce.jmp(()=>(ee=>{if(!(1&Ce.$flags$)){const fe=Oi(this),We=fe.$lazyInstance$;fe.$rmListeners$&&(fe.$rmListeners$.map(lt=>lt()),fe.$rmListeners$=void 0),_e(We,"disconnectedCallback")}})())}componentOnReady(){return Oi(this).$onReadyPromise$}};Ne.$lazyBundleId$=Kr[0],!xt.includes(yt)&&!ae.get(yt)&&(lt.push(yt),ae.define(yt,Rt(Ut,Ne,1)))})}),Dt.innerHTML=lt+"{visibility:hidden}.hydrated{visibility:inherit}",Dt.setAttribute("data-styles",""),qe.insertBefore(Dt,pt?pt.nextSibling:qe.firstChild),Mn=!1,Ft.length?Ft.map(Kr=>Kr.connectedCallback()):Ce.jmp(()=>wn=setTimeout(Re,30))},Yi=ee=>{const fe=new URL(ee,Ce.$resourcesUrl$);return fe.origin!==ce.location.origin?fe.href:fe.pathname},fi=new WeakMap,Oi=ee=>fi.get(ee),Rr=(ee,fe)=>fi.set(fe.$lazyInstance$=ee,fe),is=(ee,fe)=>{const We={$flags$:0,$hostElement$:ee,$cmpMeta$:fe,$instanceValues$:new Map};return We.$onInstancePromise$=new Promise(lt=>We.$onInstanceResolve$=lt),We.$onReadyPromise$=new Promise(lt=>We.$onReadyResolve$=lt),ee["s-p"]=[],ee["s-rc"]=[],ye(ee,We,fe.$listeners$),fi.set(ee,We)},Ui=(ee,fe)=>fe in ee,Zn=(ee,fe)=>(0,console.error)(ee,fe),Wr=new Map,kr=(ee,fe,We)=>{const lt=ee.$tagName$.replace(/-/g,"_"),xt=ee.$lazyBundleId$,ae=Wr.get(xt);return ae?ae[lt]:B(863)(`./${xt}.entry.js`).then(qe=>(Wr.set(xt,qe),qe[lt]),Zn)},Ei=new Map,ei=[],jr=[],ji=[],Ji=(ee,fe)=>We=>{ee.push(We),ge||(ge=!0,fe&&4&Ce.$flags$?Kn(ln):Ce.raf(ln))},Si=ee=>{for(let fe=0;fe<ee.length;fe++)try{ee[fe](performance.now())}catch(We){Zn(We)}ee.length=0},ln=()=>{Si(jr),Si(ji),(ge=jr.length>0)&&Ce.raf(ln)},Kn=ee=>Ct().then(ee),Tr=Ji(jr,!1),ti=Ji(ji,!0),Hi={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},5179:(sn,ht,B)=>{"use strict";B.d(ht,{a:()=>ce,b:()=>ft,c:()=>G,g:()=>ge,i:()=>nt});var a=B(1308);class J{constructor(){this.m=new Map}reset(Ee){this.m=new Map(Object.entries(Ee))}get(Ee,be){const tt=this.m.get(Ee);return void 0!==tt?tt:be}getBoolean(Ee,be=!1){const tt=this.m.get(Ee);return void 0===tt?be:"string"==typeof tt?"true"===tt:!!tt}getNumber(Ee,be){const tt=parseFloat(this.m.get(Ee));return isNaN(tt)?void 0!==be?be:NaN:tt}set(Ee,be){this.m.set(Ee,be)}}const G=new J,Ve="ionic-persist-config",ge=Ie=>de(Ie),ce=(Ie,Ee)=>("string"==typeof Ie&&(Ee=Ie,Ie=void 0),ge(Ie).includes(Ee)),de=(Ie=window)=>{if(typeof Ie>"u")return[];Ie.Ionic=Ie.Ionic||{};let Ee=Ie.Ionic.platforms;return null==Ee&&(Ee=Ie.Ionic.platforms=Ce(Ie),Ee.forEach(be=>Ie.document.documentElement.classList.add(`plt-${be}`))),Ee},Ce=Ie=>{const Ee=G.get("platform");return Object.keys(rt).filter(be=>{const tt=null==Ee?void 0:Ee[be];return"function"==typeof tt?tt(Ie):rt[be](Ie)})},it=Ie=>!!(He(Ie,/iPad/i)||He(Ie,/Macintosh/i)&&Xe(Ie)),ye=Ie=>He(Ie,/android|sink/i),Xe=Ie=>Ge(Ie,"(any-pointer:coarse)"),Pe=Ie=>Oe(Ie)||Q(Ie),Oe=Ie=>!!(Ie.cordova||Ie.phonegap||Ie.PhoneGap),Q=Ie=>{const Ee=Ie.Capacitor;return!(null==Ee||!Ee.isNative)},He=(Ie,Ee)=>Ee.test(Ie.navigator.userAgent),Ge=(Ie,Ee)=>{var be;return null===(be=Ie.matchMedia)||void 0===be?void 0:be.call(Ie,Ee).matches},rt={ipad:it,iphone:Ie=>He(Ie,/iPhone/i),ios:Ie=>He(Ie,/iPhone|iPod/i)||it(Ie),android:ye,phablet:Ie=>{const Ee=Ie.innerWidth,be=Ie.innerHeight,tt=Math.min(Ee,be),$e=Math.max(Ee,be);return tt>390&&tt<520&&$e>620&&$e<800},tablet:Ie=>{const Ee=Ie.innerWidth,be=Ie.innerHeight,tt=Math.min(Ee,be),$e=Math.max(Ee,be);return it(Ie)||(Ie=>ye(Ie)&&!He(Ie,/mobile/i))(Ie)||tt>460&&tt<820&&$e>780&&$e<1400},cordova:Oe,capacitor:Q,electron:Ie=>He(Ie,/electron/i),pwa:Ie=>{var Ee;return!!(null!==(Ee=Ie.matchMedia)&&void 0!==Ee&&Ee.call(Ie,"(display-mode: standalone)").matches||Ie.navigator.standalone)},mobile:Xe,mobileweb:Ie=>Xe(Ie)&&!Pe(Ie),desktop:Ie=>!Xe(Ie),hybrid:Pe};let z;const ft=Ie=>Ie&&(0,a.g)(Ie)||z,nt=(Ie={})=>{if(typeof window>"u")return;const Ee=window.document,be=window,tt=be.Ionic=be.Ionic||{},$e={};Ie._ael&&($e.ael=Ie._ael),Ie._rel&&($e.rel=Ie._rel),Ie._ce&&($e.ce=Ie._ce),(0,a.s)($e);const Je=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Ie=>{try{const Ee=Ie.sessionStorage.getItem(Ve);return null!==Ee?JSON.parse(Ee):{}}catch(Ee){return{}}})(be)),{persistConfig:!1}),tt.config),(Ie=>{const Ee={};return Ie.location.search.slice(1).split("&").map(be=>be.split("=")).map(([be,tt])=>[decodeURIComponent(be),decodeURIComponent(tt)]).filter(([be])=>((Ie,Ee)=>Ie.substr(0,Ee.length)===Ee)(be,"ionic:")).map(([be,tt])=>[be.slice("ionic:".length),tt]).forEach(([be,tt])=>{Ee[be]=tt}),Ee})(be)),Ie);G.reset(Je),G.getBoolean("persistConfig")&&((Ie,Ee)=>{try{Ie.sessionStorage.setItem(Ve,JSON.stringify(Ee))}catch(be){return}})(be,Je),de(be),tt.config=G,tt.mode=z=G.get("mode",Ee.documentElement.getAttribute("mode")||(ce(be,"ios")?"ios":"md")),G.set("mode",z),Ee.documentElement.setAttribute("mode",z),Ee.documentElement.classList.add(z),G.getBoolean("_testing")&&G.set("animated",!1);const Ke=At=>{var Nt;return null===(Nt=At.tagName)||void 0===Nt?void 0:Nt.startsWith("ION-")},Pt=At=>["ios","md"].includes(At);(0,a.a)(At=>{for(;At;){const Nt=At.mode||At.getAttribute("mode");if(Nt){if(Pt(Nt))return Nt;Ke(At)&&console.warn('Invalid ionic mode: "'+Nt+'", expected: "ios" or "md"')}At=At.parentElement}return z})}},6439:(sn,ht,B)=>{"use strict";B.r(ht),B.d(ht,{iosTransitionAnimation:()=>Ce,shadow:()=>he});var a=B(181),J=B(1843);B(3457),B(1308);const Ae=Fe=>document.querySelector(`${Fe}.ion-cloned-element`),he=Fe=>Fe.shadowRoot||Fe,xe=Fe=>{const it="ION-TABS"===Fe.tagName?Fe:Fe.querySelector("ion-tabs"),Ct="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=it){const Te=it.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Te?Te.querySelector(Ct):null}return Fe.querySelector(Ct)},Ve=(Fe,it)=>{const Ct="ION-TABS"===Fe.tagName?Fe:Fe.querySelector("ion-tabs");let Te=[];if(null!=Ct){const ye=Ct.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=ye&&(Te=ye.querySelectorAll("ion-buttons"))}else Te=Fe.querySelectorAll("ion-buttons");for(const ye of Te){const le=ye.closest("ion-header"),at=le&&!le.classList.contains("header-collapse-condense-inactive"),st=ye.querySelector("ion-back-button"),Xe=ye.classList.contains("buttons-collapse");if(null!==st&&("start"===ye.slot||""===ye.slot)&&(Xe&&at&&it||!Xe))return st}return null},ce=(Fe,it,Ct,Te,ye,le)=>{const at=it?`calc(100% - ${le.right+4}px)`:le.left-4+"px",st=it?"7px":"-7px",Xe=it?"-4px":"4px",Ze=it?"-4px":"4px",Pe=it?"right":"left",Oe=it?"left":"right",ke=Ct?[{offset:0,opacity:1,transform:`translate3d(${Xe}, ${le.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${st}, ${ye.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${st}, ${ye.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${Xe}, ${le.top-46}px, 0) scale(1)`}],rt=Ct?[{offset:0,opacity:1,transform:`translate3d(${Ze}, ${le.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${Ze}, ${le.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${Ze}, ${le.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${Ze}, ${le.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${Ze}, ${le.top-46}px, 0) scale(1)`}],z=(0,a.c)(),ft=(0,a.c)(),nt=Ae("ion-back-button"),Ie=he(nt).querySelector(".button-text"),Ee=he(nt).querySelector("ion-icon");nt.text=Te.text,nt.mode=Te.mode,nt.icon=Te.icon,nt.color=Te.color,nt.disabled=Te.disabled,nt.style.setProperty("display","block"),nt.style.setProperty("position","fixed"),ft.addElement(Ee),z.addElement(Ie),z.beforeStyles({"transform-origin":`${Pe} center`}).beforeAddWrite(()=>{Te.style.setProperty("display","none"),nt.style.setProperty(Pe,at)}).afterAddWrite(()=>{Te.style.setProperty("display",""),nt.style.setProperty("display","none"),nt.style.removeProperty(Pe)}).keyframes(ke),ft.beforeStyles({"transform-origin":`${Oe} center`}).keyframes(rt),Fe.addAnimation([z,ft])},de=(Fe,it,Ct,Te,ye,le)=>{const at=it?`calc(100% - ${ye.right}px)`:`${ye.left}px`,st=it?"-18px":"18px",Xe=it?"right":"left",Oe=Ct?[{offset:0,opacity:0,transform:`translate3d(${st}, ${le.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${ye.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${ye.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${st}, ${le.top-4}px, 0) scale(0.5)`}],Q=Ae("ion-title"),et=(0,a.c)();Q.innerText=Te.innerText,Q.size=Te.size,Q.color=Te.color,et.addElement(Q),et.beforeStyles({"transform-origin":`${Xe} center`,height:"46px",display:"",position:"relative",[Xe]:at}).beforeAddWrite(()=>{Te.style.setProperty("display","none")}).afterAddWrite(()=>{Te.style.setProperty("display",""),Q.style.setProperty("display","none")}).keyframes(Oe),Fe.addAnimation(et)},Ce=(Fe,it)=>{var Ct;try{const Te="cubic-bezier(0.32,0.72,0,1)",ye="opacity",le="transform",at="0%",Xe="rtl"===Fe.ownerDocument.dir,Ze=Xe?"-99.5%":"99.5%",Pe=Xe?"33%":"-33%",Oe=it.enteringEl,Q=it.leavingEl,et="back"===it.direction,ke=Oe.querySelector(":scope > ion-content"),He=Oe.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),Ge=Oe.querySelectorAll(":scope > ion-header > ion-toolbar"),rt=(0,a.c)(),z=(0,a.c)();if(rt.addElement(Oe).duration((null!==(Ct=it.duration)&&void 0!==Ct?Ct:0)||540).easing(it.easing||Te).fill("both").beforeRemoveClass("ion-page-invisible"),Q&&null!=Fe){const Ee=(0,a.c)();Ee.addElement(Fe),rt.addAnimation(Ee)}if(ke||0!==Ge.length||0!==He.length?(z.addElement(ke),z.addElement(He)):z.addElement(Oe.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),rt.addAnimation(z),et?z.beforeClearStyles([ye]).fromTo("transform",`translateX(${Pe})`,`translateX(${at})`).fromTo(ye,.8,1):z.beforeClearStyles([ye]).fromTo("transform",`translateX(${Ze})`,`translateX(${at})`),ke){const Ee=he(ke).querySelector(".transition-effect");if(Ee){const be=Ee.querySelector(".transition-cover"),tt=Ee.querySelector(".transition-shadow"),$e=(0,a.c)(),Je=(0,a.c)(),Ke=(0,a.c)();$e.addElement(Ee).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Je.addElement(be).beforeClearStyles([ye]).fromTo(ye,0,.1),Ke.addElement(tt).beforeClearStyles([ye]).fromTo(ye,.03,.7),$e.addAnimation([Je,Ke]),z.addAnimation([$e])}}const ft=Oe.querySelector("ion-header.header-collapse-condense"),{forward:nt,backward:Ie}=((Fe,it,Ct,Te,ye)=>{const le=Ve(Te,Ct),at=xe(ye),st=xe(Te),Xe=Ve(ye,Ct),Ze=null!==le&&null!==at&&!Ct,Pe=null!==st&&null!==Xe&&Ct;if(Ze){const Oe=at.getBoundingClientRect(),Q=le.getBoundingClientRect();de(Fe,it,Ct,at,Oe,Q),ce(Fe,it,Ct,le,Oe,Q)}else if(Pe){const Oe=st.getBoundingClientRect(),Q=Xe.getBoundingClientRect();de(Fe,it,Ct,st,Oe,Q),ce(Fe,it,Ct,Xe,Oe,Q)}return{forward:Ze,backward:Pe}})(rt,Xe,et,Oe,Q);if(Ge.forEach(Ee=>{const be=(0,a.c)();be.addElement(Ee),rt.addAnimation(be);const tt=(0,a.c)();tt.addElement(Ee.querySelector("ion-title"));const $e=(0,a.c)(),Je=Array.from(Ee.querySelectorAll("ion-buttons,[menuToggle]")),Ke=Ee.closest("ion-header"),Pt=null==Ke?void 0:Ke.classList.contains("header-collapse-condense-inactive");let At;At=Je.filter(et?Fn=>{const $n=Fn.classList.contains("buttons-collapse");return $n&&!Pt||!$n}:Fn=>!Fn.classList.contains("buttons-collapse")),$e.addElement(At);const Nt=(0,a.c)();Nt.addElement(Ee.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const vt=(0,a.c)();vt.addElement(he(Ee).querySelector(".toolbar-background"));const Sn=(0,a.c)(),En=Ee.querySelector("ion-back-button");if(En&&Sn.addElement(En),be.addAnimation([tt,$e,Nt,vt,Sn]),$e.fromTo(ye,.01,1),Nt.fromTo(ye,.01,1),et)Pt||tt.fromTo("transform",`translateX(${Pe})`,`translateX(${at})`).fromTo(ye,.01,1),Nt.fromTo("transform",`translateX(${Pe})`,`translateX(${at})`),Sn.fromTo(ye,.01,1);else if(ft||tt.fromTo("transform",`translateX(${Ze})`,`translateX(${at})`).fromTo(ye,.01,1),Nt.fromTo("transform",`translateX(${Ze})`,`translateX(${at})`),vt.beforeClearStyles([ye,"transform"]),(null==Ke?void 0:Ke.translucent)?vt.fromTo("transform",Xe?"translateX(-100%)":"translateX(100%)","translateX(0px)"):vt.fromTo(ye,.01,"var(--opacity)"),nt||Sn.fromTo(ye,.01,1),En&&!nt){const $n=(0,a.c)();$n.addElement(he(En).querySelector(".button-text")).fromTo("transform",Xe?"translateX(-100px)":"translateX(100px)","translateX(0px)"),be.addAnimation($n)}}),Q){const Ee=(0,a.c)(),be=Q.querySelector(":scope > ion-content"),tt=Q.querySelectorAll(":scope > ion-header > ion-toolbar"),$e=Q.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(be||0!==tt.length||0!==$e.length?(Ee.addElement(be),Ee.addElement($e)):Ee.addElement(Q.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),rt.addAnimation(Ee),et){Ee.beforeClearStyles([ye]).fromTo("transform",`translateX(${at})`,Xe?"translateX(-100%)":"translateX(100%)");const Je=(0,J.g)(Q);rt.afterAddWrite(()=>{"normal"===rt.getDirection()&&Je.style.setProperty("display","none")})}else Ee.fromTo("transform",`translateX(${at})`,`translateX(${Pe})`).fromTo(ye,1,.8);if(be){const Je=he(be).querySelector(".transition-effect");if(Je){const Ke=Je.querySelector(".transition-cover"),Pt=Je.querySelector(".transition-shadow"),At=(0,a.c)(),Nt=(0,a.c)(),vt=(0,a.c)();At.addElement(Je).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Nt.addElement(Ke).beforeClearStyles([ye]).fromTo(ye,.1,0),vt.addElement(Pt).beforeClearStyles([ye]).fromTo(ye,.7,.03),At.addAnimation([Nt,vt]),Ee.addAnimation([At])}}tt.forEach(Je=>{const Ke=(0,a.c)();Ke.addElement(Je);const Pt=(0,a.c)();Pt.addElement(Je.querySelector("ion-title"));const At=(0,a.c)(),Nt=Je.querySelectorAll("ion-buttons,[menuToggle]"),vt=Je.closest("ion-header"),Sn=null==vt?void 0:vt.classList.contains("header-collapse-condense-inactive"),En=Array.from(Nt).filter(lr=>{const hn=lr.classList.contains("buttons-collapse");return hn&&!Sn||!hn});At.addElement(En);const Fn=(0,a.c)(),$n=Je.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");$n.length>0&&Fn.addElement($n);const Zt=(0,a.c)();Zt.addElement(he(Je).querySelector(".toolbar-background"));const Qn=(0,a.c)(),vr=Je.querySelector("ion-back-button");if(vr&&Qn.addElement(vr),Ke.addAnimation([Pt,At,Fn,Qn,Zt]),rt.addAnimation(Ke),Qn.fromTo(ye,.99,0),At.fromTo(ye,.99,0),Fn.fromTo(ye,.99,0),et){if(Sn||Pt.fromTo("transform",`translateX(${at})`,Xe?"translateX(-100%)":"translateX(100%)").fromTo(ye,.99,0),Fn.fromTo("transform",`translateX(${at})`,Xe?"translateX(-100%)":"translateX(100%)"),Zt.beforeClearStyles([ye,"transform"]),(null==vt?void 0:vt.translucent)?Zt.fromTo("transform","translateX(0px)",Xe?"translateX(-100%)":"translateX(100%)"):Zt.fromTo(ye,"var(--opacity)",0),vr&&!Ie){const hn=(0,a.c)();hn.addElement(he(vr).querySelector(".button-text")).fromTo("transform",`translateX(${at})`,`translateX(${(Xe?-124:124)+"px"})`),Ke.addAnimation(hn)}}else Sn||Pt.fromTo("transform",`translateX(${at})`,`translateX(${Pe})`).fromTo(ye,.99,0).afterClearStyles([le,ye]),Fn.fromTo("transform",`translateX(${at})`,`translateX(${Pe})`).afterClearStyles([le,ye]),Qn.afterClearStyles([ye]),Pt.afterClearStyles([ye]),At.afterClearStyles([ye])})}return rt}catch(Te){throw Te}}},7838:(sn,ht,B)=>{"use strict";B.r(ht),B.d(ht,{mdTransitionAnimation:()=>Me});var a=B(181),J=B(1843);B(3457),B(1308);const Me=(Ae,he)=>{var xe,Ve,ge;const Ce="back"===he.direction,it=he.leavingEl,Ct=(0,J.g)(he.enteringEl),Te=Ct.querySelector("ion-toolbar"),ye=(0,a.c)();if(ye.addElement(Ct).fill("both").beforeRemoveClass("ion-page-invisible"),Ce?ye.duration((null!==(xe=he.duration)&&void 0!==xe?xe:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):ye.duration((null!==(Ve=he.duration)&&void 0!==Ve?Ve:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),Te){const le=(0,a.c)();le.addElement(Te),ye.addAnimation(le)}if(it&&Ce){ye.duration((null!==(ge=he.duration)&&void 0!==ge?ge:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const le=(0,a.c)();le.addElement((0,J.g)(it)).onFinish(at=>{1===at&&le.elements.length>0&&le.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),ye.addAnimation(le)}return ye}},3539:(sn,ht,B)=>{"use strict";B.d(ht,{B:()=>be,G:()=>tt,a:()=>xe,b:()=>Ve,c:()=>Ce,d:()=>et,e:()=>it,f:()=>He,g:()=>z,h:()=>Ae,i:()=>nt,j:()=>ye,k:()=>Oe,m:()=>ce,s:()=>Ee});var a=B(5861),J=B(5179),G=B(7593),De=B(5730);let Me=0;const Ae=new WeakMap,he=$e=>({create:Je=>Ct($e,Je),dismiss:(Je,Ke,Pt)=>Ze(document,Je,Ke,$e,Pt),getTop:()=>(0,a.Z)(function*(){return Oe(document,$e)})()}),xe=he("ion-alert"),Ve=he("ion-action-sheet"),ce=he("ion-modal"),Ce=he("ion-popover"),it=$e=>{typeof document<"u"&&Xe(document);const Je=Me++;$e.overlayIndex=Je,$e.hasAttribute("id")||($e.id=`ion-overlay-${Je}`)},Ct=($e,Je)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined($e).then(()=>{const Ke=document.createElement($e);return Ke.classList.add("overlay-hidden"),Object.assign(Ke,Object.assign(Object.assign({},Je),{hasController:!0})),Ge(document).appendChild(Ke),new Promise(Pt=>(0,De.c)(Ke,Pt))}):Promise.resolve(),Te='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',ye=($e,Je)=>{let Ke=$e.querySelector(Te);const Pt=null==Ke?void 0:Ke.shadowRoot;Pt&&(Ke=Pt.querySelector(Te)||Ke),Ke?(0,De.f)(Ke):Je.focus()},at=($e,Je)=>{const Ke=Array.from($e.querySelectorAll(Te));let Pt=Ke.length>0?Ke[Ke.length-1]:null;const At=null==Pt?void 0:Pt.shadowRoot;At&&(Pt=At.querySelector(Te)||Pt),Pt?Pt.focus():Je.focus()},Xe=$e=>{0===Me&&(Me=1,$e.addEventListener("focus",Je=>{(($e,Je)=>{const Ke=Oe(Je,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),Pt=$e.target;Ke&&Pt&&!Ke.classList.contains("ion-disable-focus-trap")&&(Ke.shadowRoot?(()=>{if(Ke.contains(Pt))Ke.lastFocus=Pt;else{const vt=Ke.lastFocus;ye(Ke,Ke),vt===Je.activeElement&&at(Ke,Ke),Ke.lastFocus=Je.activeElement}})():(()=>{if(Ke===Pt)Ke.lastFocus=void 0;else{const vt=(0,De.g)(Ke);if(!vt.contains(Pt))return;const Sn=vt.querySelector(".ion-overlay-wrapper");if(!Sn)return;if(Sn.contains(Pt))Ke.lastFocus=Pt;else{const En=Ke.lastFocus;ye(Sn,Ke),En===Je.activeElement&&at(Sn,Ke),Ke.lastFocus=Je.activeElement}}})())})(Je,$e)},!0),$e.addEventListener("ionBackButton",Je=>{const Ke=Oe($e);null!=Ke&&Ke.backdropDismiss&&Je.detail.register(G.OVERLAY_BACK_BUTTON_PRIORITY,()=>Ke.dismiss(void 0,be))}),$e.addEventListener("keyup",Je=>{if("Escape"===Je.key){const Ke=Oe($e);null!=Ke&&Ke.backdropDismiss&&Ke.dismiss(void 0,be)}}))},Ze=($e,Je,Ke,Pt,At)=>{const Nt=Oe($e,Pt,At);return Nt?Nt.dismiss(Je,Ke):Promise.reject("overlay does not exist")},Oe=($e,Je,Ke)=>{const Pt=(($e,Je)=>(void 0===Je&&(Je="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from($e.querySelectorAll(Je)).filter(Ke=>Ke.overlayIndex>0)))($e,Je).filter(At=>!($e=>$e.classList.contains("overlay-hidden"))(At));return void 0===Ke?Pt[Pt.length-1]:Pt.find(At=>At.id===Ke)},Q=($e=!1)=>{const Ke=Ge(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");Ke&&($e?Ke.setAttribute("aria-hidden","true"):Ke.removeAttribute("aria-hidden"))},et=function(){var $e=(0,a.Z)(function*(Je,Ke,Pt,At,Nt){var vt,Sn;if(Je.presented)return;Q(!0),Je.presented=!0,Je.willPresent.emit(),null===(vt=Je.willPresentShorthand)||void 0===vt||vt.emit();const En=(0,J.b)(Je),Fn=Je.enterAnimation?Je.enterAnimation:J.c.get(Ke,"ios"===En?Pt:At);(yield rt(Je,Fn,Je.el,Nt))&&(Je.didPresent.emit(),null===(Sn=Je.didPresentShorthand)||void 0===Sn||Sn.emit()),"ION-TOAST"!==Je.el.tagName&&ke(Je.el),Je.keyboardClose&&(null===document.activeElement||!Je.el.contains(document.activeElement))&&Je.el.focus()});return function(Ke,Pt,At,Nt,vt){return $e.apply(this,arguments)}}(),ke=function(){var $e=(0,a.Z)(function*(Je){let Ke=document.activeElement;if(!Ke)return;const Pt=null==Ke?void 0:Ke.shadowRoot;Pt&&(Ke=Pt.querySelector(Te)||Ke),yield Je.onDidDismiss(),Ke.focus()});return function(Ke){return $e.apply(this,arguments)}}(),He=function(){var $e=(0,a.Z)(function*(Je,Ke,Pt,At,Nt,vt,Sn){var En,Fn;if(!Je.presented)return!1;Q(!1),Je.presented=!1;try{Je.el.style.setProperty("pointer-events","none"),Je.willDismiss.emit({data:Ke,role:Pt}),null===(En=Je.willDismissShorthand)||void 0===En||En.emit({data:Ke,role:Pt});const $n=(0,J.b)(Je),Zt=Je.leaveAnimation?Je.leaveAnimation:J.c.get(At,"ios"===$n?Nt:vt);Pt!==tt&&(yield rt(Je,Zt,Je.el,Sn)),Je.didDismiss.emit({data:Ke,role:Pt}),null===(Fn=Je.didDismissShorthand)||void 0===Fn||Fn.emit({data:Ke,role:Pt}),Ae.delete(Je),Je.el.classList.add("overlay-hidden"),Je.el.style.removeProperty("pointer-events"),void 0!==Je.el.lastFocus&&(Je.el.lastFocus=void 0)}catch($n){console.error($n)}return Je.el.remove(),!0});return function(Ke,Pt,At,Nt,vt,Sn,En){return $e.apply(this,arguments)}}(),Ge=$e=>$e.querySelector("ion-app")||$e.body,rt=function(){var $e=(0,a.Z)(function*(Je,Ke,Pt,At){Pt.classList.remove("overlay-hidden");const vt=Ke(Je.el,At);(!Je.animated||!J.c.getBoolean("animated",!0))&&vt.duration(0),Je.keyboardClose&&vt.beforeAddWrite(()=>{const En=Pt.ownerDocument.activeElement;null!=En&&En.matches("input,ion-input, ion-textarea")&&En.blur()});const Sn=Ae.get(Je)||[];return Ae.set(Je,[...Sn,vt]),yield vt.play(),!0});return function(Ke,Pt,At,Nt){return $e.apply(this,arguments)}}(),z=($e,Je)=>{let Ke;const Pt=new Promise(At=>Ke=At);return ft($e,Je,At=>{Ke(At.detail)}),Pt},ft=($e,Je,Ke)=>{const Pt=At=>{(0,De.b)($e,Je,Pt),Ke(At)};(0,De.a)($e,Je,Pt)},nt=$e=>"cancel"===$e||$e===be,Ie=$e=>$e(),Ee=($e,Je)=>{if("function"==typeof $e)return J.c.get("_zoneGate",Ie)(()=>{try{return $e(Je)}catch(Pt){throw Pt}})},be="backdrop",tt="gesture"},6893:(sn,ht,B)=>{"use strict";B.d(ht,{e:()=>Me});var a=B(4650),J=B(1205),G=B(3101),De=B(2435);let Me=(()=>{class Ae{constructor(xe,Ve,ge){this.afauth=xe,this.db=Ve,this.router=ge,this.nombre=""}login(xe,Ve){return new Promise((ge,ce)=>{this.afauth.signInWithEmailAndPassword(xe,Ve).then(de=>{const Ce=de.user.uid;this.db.collection("users").doc(Ce).valueChanges().subscribe(Fe=>{this.user=Fe,this.nombre=this.user.name,localStorage.setItem("usuario",JSON.stringify(this.nombre))}),ge(de)}).catch(de=>ce(de))})}logout(){this.afauth.signOut().then(()=>{this.nombre="",this.user="null",localStorage.setItem("usuario",JSON.stringify("")),this.router.navigate(["/login"])})}registrar(xe,Ve,ge){return new Promise((ce,de)=>{this.afauth.createUserWithEmailAndPassword(Ve,ge).then(Ce=>{const Fe=Ce.user.uid;this.db.collection("users").doc(Ce.user.uid).set({name:xe,uid:Fe}).then(it=>{this.user=it,this.nombre=this.user.name,localStorage.setItem("usuario",JSON.stringify(this.nombre))}),ce(Ce)}).catch(Ce=>de(Ce))})}}return Ae.\u0275fac=function(xe){return new(xe||Ae)(a.LFG(J.zQ),a.LFG(G.ST),a.LFG(De.F0))},Ae.\u0275prov=a.Yz7({token:Ae,factory:Ae.\u0275fac,providedIn:"root"}),Ae})()},6237:(sn,ht,B)=>{"use strict";B.d(ht,{a:()=>De});var a=B(9260),J=B(4650),G=B(3101);let De=(()=>{class Me{constructor(he){this.db=he}getChatRooms(){return this.db.collection("chatRooms").valueChanges({idField:"id"})}getChat(he){return this.db.collection("chatRooms").doc(he).valueChanges()}enviarABD(he,xe){this.db.collection("chatRooms").doc(xe).update({Messages:a.Z.firestore.FieldValue.arrayUnion(he)})}}return Me.\u0275fac=function(he){return new(he||Me)(J.LFG(G.ST))},Me.\u0275prov=J.Yz7({token:Me,factory:Me.\u0275fac,providedIn:"root"}),Me})()},5061:(sn,ht,B)=>{"use strict";var a=B(1481),J=B(4650),G=B(6237),De=B(2435),Me=B(2078),Ae=B(2011),he=B(1205),xe=B(3101),Ve=B(4986),ge=B(9751),ce=B(9646),de=B(6451),Ce=B(4004),Fe=B(3099),it=B(3900),Ct=B(5026),Te=B(1884),ye=B(4482),le=B(5403),at=B(8421),st=B(4671),Xe=B(5032),Ze=B(7669),Q=B(2122),ke=(B(8971),B(3942)),He=B(4859),Ge=B(5861),rt=B(9681),z=B(2090),ft=B(1877);const nt="@firebase/database";let Ee="";function be(f){Ee=f}class tt{constructor(c){this.domStorage_=c,this.prefix_="firebase:"}set(c,d){null==d?this.domStorage_.removeItem(this.prefixedName_(c)):this.domStorage_.setItem(this.prefixedName_(c),(0,z.Wl)(d))}get(c){const d=this.domStorage_.getItem(this.prefixedName_(c));return null==d?null:(0,z.cI)(d)}remove(c){this.domStorage_.removeItem(this.prefixedName_(c))}prefixedName_(c){return this.prefix_+c}toString(){return this.domStorage_.toString()}}class $e{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(c,d){null==d?delete this.cache_[c]:this.cache_[c]=d}get(c){return(0,z.r3)(this.cache_,c)?this.cache_[c]:null}remove(c){delete this.cache_[c]}}const Je=function(f){try{if(typeof window<"u"&&typeof window[f]<"u"){const c=window[f];return c.setItem("firebase:sentinel","cache"),c.removeItem("firebase:sentinel"),new tt(c)}}catch(c){}return new $e},Ke=Je("localStorage"),Pt=Je("sessionStorage"),At=new ft.Yd("@firebase/database"),Nt=function(){let f=1;return function(){return f++}}(),vt=function(f){const c=(0,z.dS)(f),d=new z.gQ;d.update(c);const v=d.digest();return z.US.encodeByteArray(v)},Sn=function(...f){let c="";for(let d=0;d<f.length;d++){const v=f[d];Array.isArray(v)||v&&"object"==typeof v&&"number"==typeof v.length?c+=Sn.apply(null,v):c+="object"==typeof v?(0,z.Wl)(v):v,c+=" "}return c};let En=null,Fn=!0;const $n=function(f,c){(0,z.hu)(!c||!0===f||!1===f,"Can't turn on custom loggers persistently."),!0===f?(At.logLevel=ft.in.VERBOSE,En=At.log.bind(At),c&&Pt.set("logging_enabled",!0)):"function"==typeof f?En=f:(En=null,Pt.remove("logging_enabled"))},Zt=function(...f){if(!0===Fn&&(Fn=!1,null===En&&!0===Pt.get("logging_enabled")&&$n(!0)),En){const c=Sn.apply(null,f);En(c)}},Qn=function(f){return function(...c){Zt(f,...c)}},vr=function(...f){const c="FIREBASE INTERNAL ERROR: "+Sn(...f);At.error(c)},lr=function(...f){const c=`FIREBASE FATAL ERROR: ${Sn(...f)}`;throw At.error(c),new Error(c)},hn=function(...f){const c="FIREBASE WARNING: "+Sn(...f);At.warn(c)},Wt=function(f){return"number"==typeof f&&(f!=f||f===Number.POSITIVE_INFINITY||f===Number.NEGATIVE_INFINITY)},Cr="[MIN_NAME]",Er="[MAX_NAME]",Zr=function(f,c){if(f===c)return 0;if(f===Cr||c===Er)return-1;if(c===Cr||f===Er)return 1;{const d=rr(f),v=rr(c);return null!==d?null!==v?d-v==0?f.length-c.length:d-v:-1:null!==v?1:f<c?-1:1}},Sr=function(f,c){return f===c?0:f<c?-1:1},Dn=function(f,c){if(c&&f in c)return c[f];throw new Error("Missing required key ("+f+") in object: "+(0,z.Wl)(c))},yn=function(f){if("object"!=typeof f||null===f)return(0,z.Wl)(f);const c=[];for(const v in f)c.push(v);c.sort();let d="{";for(let v=0;v<c.length;v++)0!==v&&(d+=","),d+=(0,z.Wl)(c[v]),d+=":",d+=yn(f[c[v]]);return d+="}",d},In=function(f,c){const d=f.length;if(d<=c)return[f];const v=[];for(let A=0;A<d;A+=c)v.push(f.substring(A,A+c>d?d:A+c));return v};function An(f,c){for(const d in f)f.hasOwnProperty(d)&&c(d,f[d])}const mr=function(f){(0,z.hu)(!Wt(f),"Invalid JSON number");const v=1023;let A,k,H,ie,ve;0===f?(k=0,H=0,A=1/f==-1/0?1:0):(A=f<0,(f=Math.abs(f))>=Math.pow(2,1-v)?(ie=Math.min(Math.floor(Math.log(f)/Math.LN2),v),k=ie+v,H=Math.round(f*Math.pow(2,52-ie)-Math.pow(2,52))):(k=0,H=Math.round(f/Math.pow(2,-1074))));const je=[];for(ve=52;ve;ve-=1)je.push(H%2?1:0),H=Math.floor(H/2);for(ve=11;ve;ve-=1)je.push(k%2?1:0),k=Math.floor(k/2);je.push(A?1:0),je.reverse();const Lt=je.join("");let Ot="";for(ve=0;ve<64;ve+=8){let qt=parseInt(Lt.substr(ve,8),2).toString(16);1===qt.length&&(qt="0"+qt),Ot+=qt}return Ot.toLowerCase()},Li=new RegExp("^-?(0*)\\d{1,10}$"),rr=function(f){if(Li.test(f)){const c=Number(f);if(c>=-2147483648&&c<=2147483647)return c}return null},Nn=function(f){try{f()}catch(c){setTimeout(()=>{throw hn("Exception was thrown by user callback.",c.stack||""),c},Math.floor(0))}},hi=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},en=function(f,c){const d=setTimeout(f,c);return"number"==typeof d&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(d):"object"==typeof d&&d.unref&&d.unref(),d};class $t{constructor(c,d){this.appName_=c,this.appCheckProvider=d,this.appCheck=null==d?void 0:d.getImmediate({optional:!0}),this.appCheck||null==d||d.get().then(v=>this.appCheck=v)}getToken(c){return this.appCheck?this.appCheck.getToken(c):new Promise((d,v)=>{setTimeout(()=>{this.appCheck?this.getToken(c).then(d,v):d(null)},0)})}addTokenChangeListener(c){var d;null===(d=this.appCheckProvider)||void 0===d||d.get().then(v=>v.addTokenListener(c))}notifyForInvalidToken(){hn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class gn{constructor(c,d,v){this.appName_=c,this.firebaseOptions_=d,this.authProvider_=v,this.auth_=null,this.auth_=v.getImmediate({optional:!0}),this.auth_||v.onInit(A=>this.auth_=A)}getToken(c){return this.auth_?this.auth_.getToken(c).catch(d=>d&&"auth/token-not-initialized"===d.code?(Zt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(d)):new Promise((d,v)=>{setTimeout(()=>{this.auth_?this.getToken(c).then(d,v):d(null)},0)})}addTokenChangeListener(c){this.auth_?this.auth_.addAuthTokenListener(c):this.authProvider_.get().then(d=>d.addAuthTokenListener(c))}removeTokenChangeListener(c){this.authProvider_.get().then(d=>d.removeAuthTokenListener(c))}notifyForInvalidToken(){let c='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';c+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',hn(c)}}let Tn=(()=>{class f{constructor(d){this.accessToken=d}getToken(d){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(d){d(this.accessToken)}removeTokenChangeListener(d){}notifyForInvalidToken(){}}return f.OWNER="owner",f})();const ze=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Le="websocket",Be="long_polling";class me{constructor(c,d,v,A,k=!1,H="",ie=!1,ve=!1){this.secure=d,this.namespace=v,this.webSocketOnly=A,this.nodeAdmin=k,this.persistenceKey=H,this.includeNamespaceInQueryParams=ie,this.isUsingEmulator=ve,this._host=c.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ke.get("host:"+c)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(c){c!==this.internalHost&&(this.internalHost=c,this.isCacheableHost()&&Ke.set("host:"+this._host,this.internalHost))}toString(){let c=this.toURLString();return this.persistenceKey&&(c+="<"+this.persistenceKey+">"),c}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Rt(f,c,d){let v;if((0,z.hu)("string"==typeof c,"typeof type must == string"),(0,z.hu)("object"==typeof d,"typeof params must == object"),c===Le)v=(f.secure?"wss://":"ws://")+f.internalHost+"/.ws?";else{if(c!==Be)throw new Error("Unknown connection type: "+c);v=(f.secure?"https://":"http://")+f.internalHost+"/.lp?"}(function mt(f){return f.host!==f.internalHost||f.isCustomHost()||f.includeNamespaceInQueryParams})(f)&&(d.ns=f.namespace);const A=[];return An(d,(k,H)=>{A.push(k+"="+H)}),v+A.join("&")}class jt{constructor(){this.counters_={}}incrementCounter(c,d=1){(0,z.r3)(this.counters_,c)||(this.counters_[c]=0),this.counters_[c]+=d}get(){return(0,z.p$)(this.counters_)}}const xn={},Hn={};function fr(f){const c=f.toString();return xn[c]||(xn[c]=new jt),xn[c]}class Bi{constructor(c){this.onMessage_=c,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(c,d){this.closeAfterResponse=c,this.onClose=d,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(c,d){for(this.pendingResponses[c]=d;this.pendingResponses[this.currentResponseNum];){const v=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let A=0;A<v.length;++A)v[A]&&Nn(()=>{this.onMessage_(v[A])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Tr{constructor(c,d,v,A,k,H,ie){this.connId=c,this.repoInfo=d,this.applicationId=v,this.appCheckToken=A,this.authToken=k,this.transportSessionId=H,this.lastSessionId=ie,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Qn(c),this.stats_=fr(d),this.urlFn=ve=>(this.appCheckToken&&(ve.ac=this.appCheckToken),Rt(d,Be,ve))}open(c,d){this.curSegmentNum=0,this.onDisconnect_=d,this.myPacketOrderer=new Bi(c),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(f){if((0,z.Yr)()||"complete"===document.readyState)f();else{let c=!1;const d=function(){document.body?c||(c=!0,f()):setTimeout(d,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",d,!1),window.addEventListener("load",d,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&d()}),window.attachEvent("onload",d))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ti((...k)=>{const[H,ie,ve,je,Lt]=k;if(this.incrementIncomingBytes_(k),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===H)this.id=ie,this.password=ve;else{if("close"!==H)throw new Error("Unrecognized command received: "+H);ie?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(ie,()=>{this.onClosed_()})):this.onClosed_()}},(...k)=>{const[H,ie]=k;this.incrementIncomingBytes_(k),this.myPacketOrderer.handleResponse(H,ie)},()=>{this.onClosed_()},this.urlFn);const v={start:"t"};v.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(v.cb=this.scriptTagHolder.uniqueCallbackIdentifier),v.v="5",this.transportSessionId&&(v.s=this.transportSessionId),this.lastSessionId&&(v.ls=this.lastSessionId),this.applicationId&&(v.p=this.applicationId),this.appCheckToken&&(v.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&ze.test(location.hostname)&&(v.r="f");const A=this.urlFn(v);this.log_("Connecting via long-poll to "+A),this.scriptTagHolder.addTag(A,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Tr.forceAllow_=!0}static forceDisallow(){Tr.forceDisallow_=!0}static isAvailable(){return!((0,z.Yr)()||!Tr.forceAllow_&&(Tr.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(c){const d=(0,z.Wl)(c);this.bytesSent+=d.length,this.stats_.incrementCounter("bytes_sent",d.length);const v=(0,z.h$)(d),A=In(v,1840);for(let k=0;k<A.length;k++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,A.length,A[k]),this.curSegmentNum++}addDisconnectPingFrame(c,d){if((0,z.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const v={dframe:"t"};v.id=c,v.pw=d,this.myDisconnFrame.src=this.urlFn(v),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(c){const d=(0,z.Wl)(c).length;this.bytesReceived+=d,this.stats_.incrementCounter("bytes_received",d)}}class ti{constructor(c,d,v,A){if(this.onDisconnect=v,this.urlFn=A,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,z.Yr)())this.commandCB=c,this.onMessageCB=d;else{this.uniqueCallbackIdentifier=Nt(),window["pLPCommand"+this.uniqueCallbackIdentifier]=c,window["pRTLPCB"+this.uniqueCallbackIdentifier]=d,this.myIFrame=ti.createIFrame_();let k="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(k='<script>document.domain="'+document.domain+'";<\/script>');const H="<html><body>"+k+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(H),this.myIFrame.doc.close()}catch(ie){Zt("frame writing exception"),ie.stack&&Zt(ie.stack),Zt(ie)}}}static createIFrame_(){const c=document.createElement("iframe");if(c.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(c);try{c.contentWindow.document||Zt("No IE domain setting required")}catch(d){const v=document.domain;c.src="javascript:void((function(){document.open();document.domain='"+v+"';document.close();})())"}return c.contentDocument?c.doc=c.contentDocument:c.contentWindow?c.doc=c.contentWindow.document:c.document&&(c.doc=c.document),c}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const c=this.onDisconnect;c&&(this.onDisconnect=null,c())}startLongPoll(c,d){for(this.myID=c,this.myPW=d,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const c={};c.id=this.myID,c.pw=this.myPW,c.ser=this.currentSerial;let d=this.urlFn(c),v="",A=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+v.length<=1870;){const H=this.pendingSegs.shift();v=v+"&seg"+A+"="+H.seg+"&ts"+A+"="+H.ts+"&d"+A+"="+H.d,A++}return d+=v,this.addLongPollTag_(d,this.currentSerial),!0}return!1}enqueueSegment(c,d,v){this.pendingSegs.push({seg:c,ts:d,d:v}),this.alive&&this.newRequest_()}addLongPollTag_(c,d){this.outstandingRequests.add(d);const v=()=>{this.outstandingRequests.delete(d),this.newRequest_()},A=setTimeout(v,Math.floor(25e3));this.addTag(c,()=>{clearTimeout(A),v()})}addTag(c,d){(0,z.Yr)()?this.doNodeLongPoll(c,d):setTimeout(()=>{try{if(!this.sendNewPolls)return;const v=this.myIFrame.doc.createElement("script");v.type="text/javascript",v.async=!0,v.src=c,v.onload=v.onreadystatechange=function(){const A=v.readyState;(!A||"loaded"===A||"complete"===A)&&(v.onload=v.onreadystatechange=null,v.parentNode&&v.parentNode.removeChild(v),d())},v.onerror=()=>{Zt("Long-poll script failed to load: "+c),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(v)}catch(v){}},Math.floor(1))}}let fe=null;typeof MozWebSocket<"u"?fe=MozWebSocket:typeof WebSocket<"u"&&(fe=WebSocket);let We=(()=>{class f{constructor(d,v,A,k,H,ie,ve){this.connId=d,this.applicationId=A,this.appCheckToken=k,this.authToken=H,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Qn(this.connId),this.stats_=fr(v),this.connURL=f.connectionURL_(v,ie,ve,k,A),this.nodeAdmin=v.nodeAdmin}static connectionURL_(d,v,A,k,H){const ie={v:"5"};return!(0,z.Yr)()&&typeof location<"u"&&location.hostname&&ze.test(location.hostname)&&(ie.r="f"),v&&(ie.s=v),A&&(ie.ls=A),k&&(ie.ac=k),H&&(ie.p=H),Rt(d,Le,ie)}open(d,v){this.onDisconnect=v,this.onMessage=d,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ke.set("previous_websocket_failure",!0);try{let A;if((0,z.Yr)()){A={headers:{"User-Agent":`Firebase/5/${Ee}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(A.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(A.headers["X-Firebase-AppCheck"]=this.appCheckToken);const H=process.env,ie=0===this.connURL.indexOf("wss://")?H.HTTPS_PROXY||H.https_proxy:H.HTTP_PROXY||H.http_proxy;ie&&(A.proxy={origin:ie})}this.mySock=new fe(this.connURL,[],A)}catch(A){this.log_("Error instantiating WebSocket.");const k=A.message||A.data;return k&&this.log_(k),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=A=>{this.handleIncomingFrame(A)},this.mySock.onerror=A=>{this.log_("WebSocket error.  Closing connection.");const k=A.message||A.data;k&&this.log_(k),this.onClosed_()}}start(){}static forceDisallow(){f.forceDisallow_=!0}static isAvailable(){let d=!1;if(typeof navigator<"u"&&navigator.userAgent){const A=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);A&&A.length>1&&parseFloat(A[1])<4.4&&(d=!0)}return!d&&null!==fe&&!f.forceDisallow_}static previouslyFailed(){return Ke.isInMemoryStorage||!0===Ke.get("previous_websocket_failure")}markConnectionHealthy(){Ke.remove("previous_websocket_failure")}appendFrame_(d){if(this.frames.push(d),this.frames.length===this.totalFrames){const v=this.frames.join("");this.frames=null;const A=(0,z.cI)(v);this.onMessage(A)}}handleNewFrameCount_(d){this.totalFrames=d,this.frames=[]}extractFrameCount_(d){if((0,z.hu)(null===this.frames,"We already have a frame buffer"),d.length<=6){const v=Number(d);if(!isNaN(v))return this.handleNewFrameCount_(v),null}return this.handleNewFrameCount_(1),d}handleIncomingFrame(d){if(null===this.mySock)return;const v=d.data;if(this.bytesReceived+=v.length,this.stats_.incrementCounter("bytes_received",v.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(v);else{const A=this.extractFrameCount_(v);null!==A&&this.appendFrame_(A)}}send(d){this.resetKeepAlive();const v=(0,z.Wl)(d);this.bytesSent+=v.length,this.stats_.incrementCounter("bytes_sent",v.length);const A=In(v,16384);A.length>1&&this.sendString_(String(A.length));for(let k=0;k<A.length;k++)this.sendString_(A[k])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(d){try{this.mySock.send(d)}catch(v){this.log_("Exception thrown from WebSocket.send():",v.message||v.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return f.responsesRequiredToBeHealthy=2,f.healthyTimeout=3e4,f})(),lt=(()=>{class f{constructor(d){this.initTransports_(d)}static get ALL_TRANSPORTS(){return[Tr,We]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(d){const v=We&&We.isAvailable();let A=v&&!We.previouslyFailed();if(d.webSocketOnly&&(v||hn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),A=!0),A)this.transports_=[We];else{const k=this.transports_=[];for(const H of f.ALL_TRANSPORTS)H&&H.isAvailable()&&k.push(H);f.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return f.globalTransportInitialized_=!1,f})();class Ut{constructor(c,d,v,A,k,H,ie,ve,je,Lt){this.id=c,this.repoInfo_=d,this.applicationId_=v,this.appCheckToken_=A,this.authToken_=k,this.onMessage_=H,this.onReady_=ie,this.onDisconnect_=ve,this.onKill_=je,this.lastSessionId=Lt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Qn("c:"+this.id+":"),this.transportManager_=new lt(d),this.log_("Connection created"),this.start_()}start_(){const c=this.transportManager_.initialTransport();this.conn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const d=this.connReceiver_(this.conn_),v=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(d,v)},Math.floor(0));const A=c.healthyTimeout||0;A>0&&(this.healthyTimeout_=en(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(A)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(c){return d=>{c===this.conn_?this.onConnectionLost_(d):c===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(c){return d=>{2!==this.state_&&(c===this.rx_?this.onPrimaryMessageReceived_(d):c===this.secondaryConn_?this.onSecondaryMessageReceived_(d):this.log_("message on old connection"))}}sendRequest(c){this.sendData_({t:"d",d:c})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(c){if("t"in c){const d=c.t;"a"===d?this.upgradeIfSecondaryHealthy_():"r"===d?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===d&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(c){const d=Dn("t",c),v=Dn("d",c);if("c"===d)this.onSecondaryControl_(v);else{if("d"!==d)throw new Error("Unknown protocol layer: "+d);this.pendingDataMessages.push(v)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(c){const d=Dn("t",c),v=Dn("d",c);"c"===d?this.onControl_(v):"d"===d&&this.onDataMessage_(v)}onDataMessage_(c){this.onPrimaryResponse_(),this.onMessage_(c)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(c){const d=Dn("t",c);if("d"in c){const v=c.d;if("h"===d){const A=Object.assign({},v);this.repoInfo_.isUsingEmulator&&(A.h=this.repoInfo_.host),this.onHandshake_(A)}else if("n"===d){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let A=0;A<this.pendingDataMessages.length;++A)this.onDataMessage_(this.pendingDataMessages[A]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===d?this.onConnectionShutdown_(v):"r"===d?this.onReset_(v):"e"===d?vr("Server Error: "+v):"o"===d?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vr("Unknown control packet command: "+d)}}onHandshake_(c){const d=c.ts,v=c.v,A=c.h;this.sessionId=c.s,this.repoInfo_.host=A,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,d),"5"!==v&&hn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const c=this.transportManager_.upgradeTransport();c&&this.startUpgrade_(c)}startUpgrade_(c){this.secondaryConn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const d=this.connReceiver_(this.secondaryConn_),v=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(d,v),en(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(c){this.log_("Reset packet received.  New host: "+c),this.repoInfo_.host=c,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(c,d){this.log_("Realtime connection established."),this.conn_=c,this.state_=1,this.onReady_&&(this.onReady_(d,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):en(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const c=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===c||this.rx_===c)&&this.close()}onConnectionLost_(c){this.conn_=null,c||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ke.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(c){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(c),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(c){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(c)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class tn{put(c,d,v,A){}merge(c,d,v,A){}refreshAuthToken(c){}refreshAppCheckToken(c){}onDisconnectPut(c,d,v){}onDisconnectMerge(c,d,v){}onDisconnectCancel(c,d){}reportStats(c){}}class kn{constructor(c){this.allowedEvents_=c,this.listeners_={},(0,z.hu)(Array.isArray(c)&&c.length>0,"Requires a non-empty array")}trigger(c,...d){if(Array.isArray(this.listeners_[c])){const v=[...this.listeners_[c]];for(let A=0;A<v.length;A++)v[A].callback.apply(v[A].context,d)}}on(c,d,v){this.validateEventType_(c),this.listeners_[c]=this.listeners_[c]||[],this.listeners_[c].push({callback:d,context:v});const A=this.getInitialEvent(c);A&&d.apply(v,A)}off(c,d,v){this.validateEventType_(c);const A=this.listeners_[c]||[];for(let k=0;k<A.length;k++)if(A[k].callback===d&&(!v||v===A[k].context))return void A.splice(k,1)}validateEventType_(c){(0,z.hu)(this.allowedEvents_.find(d=>d===c),"Unknown event: "+c)}}class zn extends kn{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,z.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new zn}getInitialEvent(c){return(0,z.hu)("online"===c,"Unknown event type: "+c),[this.online_]}currentlyOnline(){return this.online_}}const Qr=32,sr=768;class br{constructor(c,d){if(void 0===d){this.pieces_=c.split("/");let v=0;for(let A=0;A<this.pieces_.length;A++)this.pieces_[A].length>0&&(this.pieces_[v]=this.pieces_[A],v++);this.pieces_.length=v,this.pieceNum_=0}else this.pieces_=c,this.pieceNum_=d}toString(){let c="";for(let d=this.pieceNum_;d<this.pieces_.length;d++)""!==this.pieces_[d]&&(c+="/"+this.pieces_[d]);return c||"/"}}function Yn(){return new br("")}function Bn(f){return f.pieceNum_>=f.pieces_.length?null:f.pieces_[f.pieceNum_]}function qi(f){return f.pieces_.length-f.pieceNum_}function Br(f){let c=f.pieceNum_;return c<f.pieces_.length&&c++,new br(f.pieces_,c)}function ds(f){return f.pieceNum_<f.pieces_.length?f.pieces_[f.pieces_.length-1]:null}function Ys(f,c=0){return f.pieces_.slice(f.pieceNum_+c)}function Eo(f){if(f.pieceNum_>=f.pieces_.length)return null;const c=[];for(let d=f.pieceNum_;d<f.pieces_.length-1;d++)c.push(f.pieces_[d]);return new br(c,0)}function Fr(f,c){const d=[];for(let v=f.pieceNum_;v<f.pieces_.length;v++)d.push(f.pieces_[v]);if(c instanceof br)for(let v=c.pieceNum_;v<c.pieces_.length;v++)d.push(c.pieces_[v]);else{const v=c.split("/");for(let A=0;A<v.length;A++)v[A].length>0&&d.push(v[A])}return new br(d,0)}function qn(f){return f.pieceNum_>=f.pieces_.length}function ni(f,c){const d=Bn(f),v=Bn(c);if(null===d)return c;if(d===v)return ni(Br(f),Br(c));throw new Error("INTERNAL ERROR: innerPath ("+c+") is not within outerPath ("+f+")")}function Io(f,c){const d=Ys(f,0),v=Ys(c,0);for(let A=0;A<d.length&&A<v.length;A++){const k=Zr(d[A],v[A]);if(0!==k)return k}return d.length===v.length?0:d.length<v.length?-1:1}function qs(f,c){if(qi(f)!==qi(c))return!1;for(let d=f.pieceNum_,v=c.pieceNum_;d<=f.pieces_.length;d++,v++)if(f.pieces_[d]!==c.pieces_[v])return!1;return!0}function zi(f,c){let d=f.pieceNum_,v=c.pieceNum_;if(qi(f)>qi(c))return!1;for(;d<f.pieces_.length;){if(f.pieces_[d]!==c.pieces_[v])return!1;++d,++v}return!0}class Es{constructor(c,d){this.errorPrefix_=d,this.parts_=Ys(c,0),this.byteLength_=Math.max(1,this.parts_.length);for(let v=0;v<this.parts_.length;v++)this.byteLength_+=(0,z.ug)(this.parts_[v]);ss(this)}}function ss(f){if(f.byteLength_>sr)throw new Error(f.errorPrefix_+"has a key path longer than "+sr+" bytes ("+f.byteLength_+").");if(f.parts_.length>Qr)throw new Error(f.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Qr+") or object contains a cycle "+Qs(f))}function Qs(f){return 0===f.parts_.length?"":"in property '"+f.parts_.join(".")+"'"}class Xs extends kn{constructor(){let c,d;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(d="visibilitychange",c="hidden"):typeof document.mozHidden<"u"?(d="mozvisibilitychange",c="mozHidden"):typeof document.msHidden<"u"?(d="msvisibilitychange",c="msHidden"):typeof document.webkitHidden<"u"&&(d="webkitvisibilitychange",c="webkitHidden")),this.visible_=!0,d&&document.addEventListener(d,()=>{const v=!document[c];v!==this.visible_&&(this.visible_=v,this.trigger("visible",v))},!1)}static getInstance(){return new Xs}getInitialEvent(c){return(0,z.hu)("visible"===c,"Unknown event type: "+c),[this.visible_]}}const $s=1e3;let os,Ii=(()=>{class f extends tn{constructor(d,v,A,k,H,ie,ve,je){if(super(),this.repoInfo_=d,this.applicationId_=v,this.onDataUpdate_=A,this.onConnectStatus_=k,this.onServerInfoUpdate_=H,this.authTokenProvider_=ie,this.appCheckTokenProvider_=ve,this.authOverride_=je,this.id=f.nextPersistentConnectionId_++,this.log_=Qn("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=$s,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,je&&!(0,z.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Xs.getInstance().on("visible",this.onVisible_,this),-1===d.host.indexOf("fblocal")&&zn.getInstance().on("online",this.onOnline_,this)}sendRequest(d,v,A){const k=++this.requestNumber_,H={r:k,a:d,b:v};this.log_((0,z.Wl)(H)),(0,z.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(H),A&&(this.requestCBHash_[k]=A)}get(d){this.initConnection_();const v=new z.BH,k={action:"g",request:{p:d._path.toString(),q:d._queryObject},onComplete:ie=>{const ve=ie.d;"ok"===ie.s?v.resolve(ve):v.reject(ve)}};return this.outstandingGets_.push(k),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),v.promise}listen(d,v,A,k){this.initConnection_();const H=d._queryIdentifier,ie=d._path.toString();this.log_("Listen called for "+ie+" "+H),this.listens.has(ie)||this.listens.set(ie,new Map),(0,z.hu)(d._queryParams.isDefault()||!d._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,z.hu)(!this.listens.get(ie).has(H),"listen() called twice for same path/queryId.");const ve={onComplete:k,hashFn:v,query:d,tag:A};this.listens.get(ie).set(H,ve),this.connected_&&this.sendListen_(ve)}sendGet_(d){const v=this.outstandingGets_[d];this.sendRequest("g",v.request,A=>{delete this.outstandingGets_[d],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),v.onComplete&&v.onComplete(A)})}sendListen_(d){const v=d.query,A=v._path.toString(),k=v._queryIdentifier;this.log_("Listen on "+A+" for "+k);const H={p:A};d.tag&&(H.q=v._queryObject,H.t=d.tag),H.h=d.hashFn(),this.sendRequest("q",H,ve=>{const je=ve.d,Lt=ve.s;f.warnOnListenWarnings_(je,v),(this.listens.get(A)&&this.listens.get(A).get(k))===d&&(this.log_("listen response",ve),"ok"!==Lt&&this.removeListen_(A,k),d.onComplete&&d.onComplete(Lt,je))})}static warnOnListenWarnings_(d,v){if(d&&"object"==typeof d&&(0,z.r3)(d,"w")){const A=(0,z.DV)(d,"w");if(Array.isArray(A)&&~A.indexOf("no_index")){const k='".indexOn": "'+v._queryParams.getIndex().toString()+'"',H=v._path.toString();hn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${k} at ${H} to your security rules for better performance.`)}}}refreshAuthToken(d){this.authToken_=d,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(d)}reduceReconnectDelayIfAdminCredential_(d){(d&&40===d.length||(0,z.GJ)(d))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(d){this.appCheckToken_=d,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const d=this.authToken_,v=(0,z.w9)(d)?"auth":"gauth",A={cred:d};null===this.authOverride_?A.noauth=!0:"object"==typeof this.authOverride_&&(A.authvar=this.authOverride_),this.sendRequest(v,A,k=>{const H=k.s,ie=k.d||"error";this.authToken_===d&&("ok"===H?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(H,ie))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},d=>{const v=d.s,A=d.d||"error";"ok"===v?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(v,A)})}unlisten(d,v){const A=d._path.toString(),k=d._queryIdentifier;this.log_("Unlisten called for "+A+" "+k),(0,z.hu)(d._queryParams.isDefault()||!d._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(A,k)&&this.connected_&&this.sendUnlisten_(A,k,d._queryObject,v)}sendUnlisten_(d,v,A,k){this.log_("Unlisten on "+d+" for "+v);const H={p:d};k&&(H.q=A,H.t=k),this.sendRequest("n",H)}onDisconnectPut(d,v,A){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",d,v,A):this.onDisconnectRequestQueue_.push({pathString:d,action:"o",data:v,onComplete:A})}onDisconnectMerge(d,v,A){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",d,v,A):this.onDisconnectRequestQueue_.push({pathString:d,action:"om",data:v,onComplete:A})}onDisconnectCancel(d,v){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",d,null,v):this.onDisconnectRequestQueue_.push({pathString:d,action:"oc",data:null,onComplete:v})}sendOnDisconnect_(d,v,A,k){const H={p:v,d:A};this.log_("onDisconnect "+d,H),this.sendRequest(d,H,ie=>{k&&setTimeout(()=>{k(ie.s,ie.d)},Math.floor(0))})}put(d,v,A,k){this.putInternal("p",d,v,A,k)}merge(d,v,A,k){this.putInternal("m",d,v,A,k)}putInternal(d,v,A,k,H){this.initConnection_();const ie={p:v,d:A};void 0!==H&&(ie.h=H),this.outstandingPuts_.push({action:d,request:ie,onComplete:k}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+v)}sendPut_(d){const v=this.outstandingPuts_[d].action,A=this.outstandingPuts_[d].request,k=this.outstandingPuts_[d].onComplete;this.outstandingPuts_[d].queued=this.connected_,this.sendRequest(v,A,H=>{this.log_(v+" response",H),delete this.outstandingPuts_[d],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),k&&k(H.s,H.d)})}reportStats(d){if(this.connected_){const v={c:d};this.log_("reportStats",v),this.sendRequest("s",v,A=>{"ok"!==A.s&&this.log_("reportStats","Error sending stats: "+A.d)})}}onDataMessage_(d){if("r"in d){this.log_("from server: "+(0,z.Wl)(d));const v=d.r,A=this.requestCBHash_[v];A&&(delete this.requestCBHash_[v],A(d.b))}else{if("error"in d)throw"A server-side error has occurred: "+d.error;"a"in d&&this.onDataPush_(d.a,d.b)}}onDataPush_(d,v){this.log_("handleServerMessage",d,v),"d"===d?this.onDataUpdate_(v.p,v.d,!1,v.t):"m"===d?this.onDataUpdate_(v.p,v.d,!0,v.t):"c"===d?this.onListenRevoked_(v.p,v.q):"ac"===d?this.onAuthRevoked_(v.s,v.d):"apc"===d?this.onAppCheckRevoked_(v.s,v.d):"sd"===d?this.onSecurityDebugPacket_(v):vr("Unrecognized action received from server: "+(0,z.Wl)(d)+"\nAre you using the latest client?")}onReady_(d,v){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(d),this.lastSessionId=v,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(d){(0,z.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(d))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(d){d&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$s,this.realtime_||this.scheduleConnect_(0)),this.visible_=d}onOnline_(d){d?(this.log_("Browser went online."),this.reconnectDelay_=$s,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=$s),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const d=(new Date).getTime()-this.lastConnectionAttemptTime_;let v=Math.max(0,this.reconnectDelay_-d);v=Math.random()*v,this.log_("Trying to reconnect in "+v+"ms"),this.scheduleConnect_(v),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var d=this;return(0,Ge.Z)(function*(){if(d.shouldReconnect_()){d.log_("Making a connection attempt"),d.lastConnectionAttemptTime_=(new Date).getTime(),d.lastConnectionEstablishedTime_=null;const v=d.onDataMessage_.bind(d),A=d.onReady_.bind(d),k=d.onRealtimeDisconnect_.bind(d),H=d.id+":"+f.nextConnectionId_++,ie=d.lastSessionId;let ve=!1,je=null;const Lt=function(){je?je.close():(ve=!0,k())};d.realtime_={close:Lt,sendRequest:function(Ln){(0,z.hu)(je,"sendRequest call when we're not connected not allowed."),je.sendRequest(Ln)}};const qt=d.forceTokenRefresh_;d.forceTokenRefresh_=!1;try{const[Ln,ar]=yield Promise.all([d.authTokenProvider_.getToken(qt),d.appCheckTokenProvider_.getToken(qt)]);ve?Zt("getToken() completed but was canceled"):(Zt("getToken() completed. Creating connection."),d.authToken_=Ln&&Ln.accessToken,d.appCheckToken_=ar&&ar.token,je=new Ut(H,d.repoInfo_,d.applicationId_,d.appCheckToken_,d.authToken_,v,A,k,Ti=>{hn(Ti+" ("+d.repoInfo_.toString()+")"),d.interrupt("server_kill")},ie))}catch(Ln){d.log_("Failed to get token: "+Ln),ve||(d.repoInfo_.nodeAdmin&&hn(Ln),Lt())}}})()}interrupt(d){Zt("Interrupting connection for reason: "+d),this.interruptReasons_[d]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(d){Zt("Resuming connection for reason: "+d),delete this.interruptReasons_[d],(0,z.xb)(this.interruptReasons_)&&(this.reconnectDelay_=$s,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(d){const v=d-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:v})}cancelSentTransactions_(){for(let d=0;d<this.outstandingPuts_.length;d++){const v=this.outstandingPuts_[d];v&&"h"in v.request&&v.queued&&(v.onComplete&&v.onComplete("disconnect"),delete this.outstandingPuts_[d],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(d,v){let A;A=v?v.map(H=>yn(H)).join("$"):"default";const k=this.removeListen_(d,A);k&&k.onComplete&&k.onComplete("permission_denied")}removeListen_(d,v){const A=new br(d).toString();let k;if(this.listens.has(A)){const H=this.listens.get(A);k=H.get(v),H.delete(v),0===H.size&&this.listens.delete(A)}else k=void 0;return k}onAuthRevoked_(d,v){Zt("Auth token revoked: "+d+"/"+v),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===d||"permission_denied"===d)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(d,v){Zt("App check token revoked: "+d+"/"+v),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===d||"permission_denied"===d)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(d){this.securityDebugCallback_?this.securityDebugCallback_(d):"msg"in d&&console.log("FIREBASE: "+d.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const d of this.listens.values())for(const v of d.values())this.sendListen_(v);for(let d=0;d<this.outstandingPuts_.length;d++)this.outstandingPuts_[d]&&this.sendPut_(d);for(;this.onDisconnectRequestQueue_.length;){const d=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(d.action,d.pathString,d.data,d.onComplete)}for(let d=0;d<this.outstandingGets_.length;d++)this.outstandingGets_[d]&&this.sendGet_(d)}sendConnectStats_(){const d={};let v="js";(0,z.Yr)()&&(v=this.repoInfo_.nodeAdmin?"admin_node":"node"),d["sdk."+v+"."+Ee.replace(/\./g,"-")]=1,(0,z.uI)()?d["framework.cordova"]=1:(0,z.b$)()&&(d["framework.reactnative"]=1),this.reportStats(d)}shouldReconnect_(){const d=zn.getInstance().currentlyOnline();return(0,z.xb)(this.interruptReasons_)&&d}}return f.nextPersistentConnectionId_=0,f.nextConnectionId_=0,f})();class ur{constructor(c,d){this.name=c,this.node=d}static Wrap(c,d){return new ur(c,d)}}class es{getCompare(){return this.compare.bind(this)}indexedValueChanged(c,d){const v=new ur(Cr,c),A=new ur(Cr,d);return 0!==this.compare(v,A)}minPost(){return ur.MIN}}class Vs extends es{static get __EMPTY_NODE(){return os}static set __EMPTY_NODE(c){os=c}compare(c,d){return Zr(c.name,d.name)}isDefinedOn(c){throw(0,z.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(c,d){return!1}minPost(){return ur.MIN}maxPost(){return new ur(Er,os)}makePost(c,d){return(0,z.hu)("string"==typeof c,"KeyIndex indexValue must always be a string."),new ur(c,os)}toString(){return".key"}}const xi=new Vs;class hs{constructor(c,d,v,A,k=null){this.isReverse_=A,this.resultGenerator_=k,this.nodeStack_=[];let H=1;for(;!c.isEmpty();)if(H=d?v(c.key,d):1,A&&(H*=-1),H<0)c=this.isReverse_?c.left:c.right;else{if(0===H){this.nodeStack_.push(c);break}this.nodeStack_.push(c),c=this.isReverse_?c.right:c.left}}getNext(){if(0===this.nodeStack_.length)return null;let d,c=this.nodeStack_.pop();if(d=this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value},this.isReverse_)for(c=c.left;!c.isEmpty();)this.nodeStack_.push(c),c=c.right;else for(c=c.right;!c.isEmpty();)this.nodeStack_.push(c),c=c.left;return d}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const c=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value}}}let Rs,Zi=(()=>{class f{constructor(d,v,A,k,H){this.key=d,this.value=v,this.color=null!=A?A:f.RED,this.left=null!=k?k:li.EMPTY_NODE,this.right=null!=H?H:li.EMPTY_NODE}copy(d,v,A,k,H){return new f(null!=d?d:this.key,null!=v?v:this.value,null!=A?A:this.color,null!=k?k:this.left,null!=H?H:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(d){return this.left.inorderTraversal(d)||!!d(this.key,this.value)||this.right.inorderTraversal(d)}reverseTraversal(d){return this.right.reverseTraversal(d)||d(this.key,this.value)||this.left.reverseTraversal(d)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(d,v,A){let k=this;const H=A(d,k.key);return k=H<0?k.copy(null,null,null,k.left.insert(d,v,A),null):0===H?k.copy(null,v,null,null,null):k.copy(null,null,null,null,k.right.insert(d,v,A)),k.fixUp_()}removeMin_(){if(this.left.isEmpty())return li.EMPTY_NODE;let d=this;return!d.left.isRed_()&&!d.left.left.isRed_()&&(d=d.moveRedLeft_()),d=d.copy(null,null,null,d.left.removeMin_(),null),d.fixUp_()}remove(d,v){let A,k;if(A=this,v(d,A.key)<0)!A.left.isEmpty()&&!A.left.isRed_()&&!A.left.left.isRed_()&&(A=A.moveRedLeft_()),A=A.copy(null,null,null,A.left.remove(d,v),null);else{if(A.left.isRed_()&&(A=A.rotateRight_()),!A.right.isEmpty()&&!A.right.isRed_()&&!A.right.left.isRed_()&&(A=A.moveRedRight_()),0===v(d,A.key)){if(A.right.isEmpty())return li.EMPTY_NODE;k=A.right.min_(),A=A.copy(k.key,k.value,null,null,A.right.removeMin_())}A=A.copy(null,null,null,null,A.right.remove(d,v))}return A.fixUp_()}isRed_(){return this.color}fixUp_(){let d=this;return d.right.isRed_()&&!d.left.isRed_()&&(d=d.rotateLeft_()),d.left.isRed_()&&d.left.left.isRed_()&&(d=d.rotateRight_()),d.left.isRed_()&&d.right.isRed_()&&(d=d.colorFlip_()),d}moveRedLeft_(){let d=this.colorFlip_();return d.right.left.isRed_()&&(d=d.copy(null,null,null,null,d.right.rotateRight_()),d=d.rotateLeft_(),d=d.colorFlip_()),d}moveRedRight_(){let d=this.colorFlip_();return d.left.left.isRed_()&&(d=d.rotateRight_(),d=d.colorFlip_()),d}rotateLeft_(){const d=this.copy(null,null,f.RED,null,this.right.left);return this.right.copy(null,null,this.color,d,null)}rotateRight_(){const d=this.copy(null,null,f.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,d)}colorFlip_(){const d=this.left.copy(null,null,!this.left.color,null,null),v=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,d,v)}checkMaxDepth_(){const d=this.check_();return Math.pow(2,d)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const d=this.left.check_();if(d!==this.right.check_())throw new Error("Black depths differ");return d+(this.isRed_()?0:1)}}return f.RED=!0,f.BLACK=!1,f})();class li{constructor(c,d=li.EMPTY_NODE){this.comparator_=c,this.root_=d}insert(c,d){return new li(this.comparator_,this.root_.insert(c,d,this.comparator_).copy(null,null,Zi.BLACK,null,null))}remove(c){return new li(this.comparator_,this.root_.remove(c,this.comparator_).copy(null,null,Zi.BLACK,null,null))}get(c){let d,v=this.root_;for(;!v.isEmpty();){if(d=this.comparator_(c,v.key),0===d)return v.value;d<0?v=v.left:d>0&&(v=v.right)}return null}getPredecessorKey(c){let d,v=this.root_,A=null;for(;!v.isEmpty();){if(d=this.comparator_(c,v.key),0===d){if(v.left.isEmpty())return A?A.key:null;for(v=v.left;!v.right.isEmpty();)v=v.right;return v.key}d<0?v=v.left:d>0&&(A=v,v=v.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(c){return this.root_.inorderTraversal(c)}reverseTraversal(c){return this.root_.reverseTraversal(c)}getIterator(c){return new hs(this.root_,null,this.comparator_,!1,c)}getIteratorFrom(c,d){return new hs(this.root_,c,this.comparator_,!1,d)}getReverseIteratorFrom(c,d){return new hs(this.root_,c,this.comparator_,!0,d)}getReverseIterator(c){return new hs(this.root_,null,this.comparator_,!0,c)}}function Us(f,c){return Zr(f.name,c.name)}function Or(f,c){return Zr(f,c)}li.EMPTY_NODE=new class Yo{copy(c,d,v,A,k){return this}insert(c,d,v){return new Zi(c,d,null)}remove(c,d){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(c){return!1}reverseTraversal(c){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const oi=function(f){return"number"==typeof f?"number:"+mr(f):"string:"+f},qo=function(f){if(f.isLeafNode()){const c=f.val();(0,z.hu)("string"==typeof c||"number"==typeof c||"object"==typeof c&&(0,z.r3)(c,".sv"),"Priority must be a string or number.")}else(0,z.hu)(f===Rs||f.isEmpty(),"priority of unexpected type.");(0,z.hu)(f===Rs||f.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let js,$o,Zo,ui=(()=>{class f{constructor(d,v=f.__childrenNodeConstructor.EMPTY_NODE){this.value_=d,this.priorityNode_=v,this.lazyHash_=null,(0,z.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),qo(this.priorityNode_)}static set __childrenNodeConstructor(d){js=d}static get __childrenNodeConstructor(){return js}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(d){return new f(this.value_,d)}getImmediateChild(d){return".priority"===d?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}getChild(d){return qn(d)?this:".priority"===Bn(d)?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(d,v){return null}updateImmediateChild(d,v){return".priority"===d?this.updatePriority(v):v.isEmpty()&&".priority"!==d?this:f.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(d,v).updatePriority(this.priorityNode_)}updateChild(d,v){const A=Bn(d);return null===A?v:v.isEmpty()&&".priority"!==A?this:((0,z.hu)(".priority"!==A||1===qi(d),".priority must be the last token in a path"),this.updateImmediateChild(A,f.__childrenNodeConstructor.EMPTY_NODE.updateChild(Br(d),v)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(d,v){return!1}val(d){return d&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let d="";this.priorityNode_.isEmpty()||(d+="priority:"+oi(this.priorityNode_.val())+":");const v=typeof this.value_;d+=v+":",d+="number"===v?mr(this.value_):this.value_,this.lazyHash_=vt(d)}return this.lazyHash_}getValue(){return this.value_}compareTo(d){return d===f.__childrenNodeConstructor.EMPTY_NODE?1:d instanceof f.__childrenNodeConstructor?-1:((0,z.hu)(d.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(d))}compareToLeafNode_(d){const v=typeof d.value_,A=typeof this.value_,k=f.VALUE_TYPE_ORDER.indexOf(v),H=f.VALUE_TYPE_ORDER.indexOf(A);return(0,z.hu)(k>=0,"Unknown leaf type: "+v),(0,z.hu)(H>=0,"Unknown leaf type: "+A),k===H?"object"===A?0:this.value_<d.value_?-1:this.value_===d.value_?0:1:H-k}withIndex(){return this}isIndexed(){return!0}equals(d){return d===this||!!d.isLeafNode()&&(this.value_===d.value_&&this.priorityNode_.equals(d.priorityNode_))}}return f.VALUE_TYPE_ORDER=["object","boolean","number","string"],f})();const Lr=new class as extends es{compare(c,d){const v=c.node.getPriority(),A=d.node.getPriority(),k=v.compareTo(A);return 0===k?Zr(c.name,d.name):k}isDefinedOn(c){return!c.getPriority().isEmpty()}indexedValueChanged(c,d){return!c.getPriority().equals(d.getPriority())}minPost(){return ur.MIN}maxPost(){return new ur(Er,new ui("[PRIORITY-POST]",Zo))}makePost(c,d){const v=$o(c);return new ur(d,new ui("[PRIORITY-POST]",v))}toString(){return".priority"}},Co=Math.log(2);class fs{constructor(c){this.count=parseInt(Math.log(c+1)/Co,10),this.current_=this.count-1;const A=(k=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=c+1&A}nextBitIsOne(){const c=!(this.bits_&1<<this.current_);return this.current_--,c}}const Bo=function(f,c,d,v){f.sort(c);const A=function(ve,je){const Lt=je-ve;let Ot,qt;if(0===Lt)return null;if(1===Lt)return Ot=f[ve],qt=d?d(Ot):Ot,new Zi(qt,Ot.node,Zi.BLACK,null,null);{const Ln=parseInt(Lt/2,10)+ve,ar=A(ve,Ln),Ti=A(Ln+1,je);return Ot=f[Ln],qt=d?d(Ot):Ot,new Zi(qt,Ot.node,Zi.BLACK,ar,Ti)}},ie=function(ve){let je=null,Lt=null,Ot=f.length;const qt=function(ar,Ti){const _s=Ot-ar,Ia=Ot;Ot-=ar;const Zl=A(_s+1,Ia),ml=f[_s],Gc=d?d(ml):ml;Ln(new Zi(Gc,ml.node,Ti,null,Zl))},Ln=function(ar){je?(je.left=ar,je=ar):(Lt=ar,je=ar)};for(let ar=0;ar<ve.count;++ar){const Ti=ve.nextBitIsOne(),_s=Math.pow(2,ve.count-(ar+1));Ti?qt(_s,Zi.BLACK):(qt(_s,Zi.BLACK),qt(_s,Zi.RED))}return Lt}(new fs(f.length));return new li(v||c,ie)};let Vo;const Xn={};class ps{constructor(c,d){this.indexes_=c,this.indexSet_=d}static get Default(){return(0,z.hu)(Xn&&Lr,"ChildrenNode.ts has not been loaded"),Vo=Vo||new ps({".priority":Xn},{".priority":Lr}),Vo}get(c){const d=(0,z.DV)(this.indexes_,c);if(!d)throw new Error("No index defined for "+c);return d instanceof li?d:null}hasIndex(c){return(0,z.r3)(this.indexSet_,c.toString())}addIndex(c,d){(0,z.hu)(c!==xi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const v=[];let A=!1;const k=d.getIterator(ur.Wrap);let ie,H=k.getNext();for(;H;)A=A||c.isDefinedOn(H.node),v.push(H),H=k.getNext();ie=A?Bo(v,c.getCompare()):Xn;const ve=c.toString(),je=Object.assign({},this.indexSet_);je[ve]=c;const Lt=Object.assign({},this.indexes_);return Lt[ve]=ie,new ps(Lt,je)}addToIndexes(c,d){const v=(0,z.UI)(this.indexes_,(A,k)=>{const H=(0,z.DV)(this.indexSet_,k);if((0,z.hu)(H,"Missing index implementation for "+k),A===Xn){if(H.isDefinedOn(c.node)){const ie=[],ve=d.getIterator(ur.Wrap);let je=ve.getNext();for(;je;)je.name!==c.name&&ie.push(je),je=ve.getNext();return ie.push(c),Bo(ie,H.getCompare())}return Xn}{const ie=d.get(c.name);let ve=A;return ie&&(ve=ve.remove(new ur(c.name,ie))),ve.insert(c,c.node)}});return new ps(v,this.indexSet_)}removeFromIndexes(c,d){const v=(0,z.UI)(this.indexes_,A=>{if(A===Xn)return A;{const k=d.get(c.name);return k?A.remove(new ur(c.name,k)):A}});return new ps(v,this.indexSet_)}}let Js,Jn=(()=>{class f{constructor(d,v,A){this.children_=d,this.priorityNode_=v,this.indexMap_=A,this.lazyHash_=null,this.priorityNode_&&qo(this.priorityNode_),this.children_.isEmpty()&&(0,z.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Js||(Js=new f(new li(Or),null,ps.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Js}updatePriority(d){return this.children_.isEmpty()?this:new f(this.children_,d,this.indexMap_)}getImmediateChild(d){if(".priority"===d)return this.getPriority();{const v=this.children_.get(d);return null===v?Js:v}}getChild(d){const v=Bn(d);return null===v?this:this.getImmediateChild(v).getChild(Br(d))}hasChild(d){return null!==this.children_.get(d)}updateImmediateChild(d,v){if((0,z.hu)(v,"We should always be passing snapshot nodes"),".priority"===d)return this.updatePriority(v);{const A=new ur(d,v);let k,H;v.isEmpty()?(k=this.children_.remove(d),H=this.indexMap_.removeFromIndexes(A,this.children_)):(k=this.children_.insert(d,v),H=this.indexMap_.addToIndexes(A,this.children_));const ie=k.isEmpty()?Js:this.priorityNode_;return new f(k,ie,H)}}updateChild(d,v){const A=Bn(d);if(null===A)return v;{(0,z.hu)(".priority"!==Bn(d)||1===qi(d),".priority must be the last token in a path");const k=this.getImmediateChild(A).updateChild(Br(d),v);return this.updateImmediateChild(A,k)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(d){if(this.isEmpty())return null;const v={};let A=0,k=0,H=!0;if(this.forEachChild(Lr,(ie,ve)=>{v[ie]=ve.val(d),A++,H&&f.INTEGER_REGEXP_.test(ie)?k=Math.max(k,Number(ie)):H=!1}),!d&&H&&k<2*A){const ie=[];for(const ve in v)ie[ve]=v[ve];return ie}return d&&!this.getPriority().isEmpty()&&(v[".priority"]=this.getPriority().val()),v}hash(){if(null===this.lazyHash_){let d="";this.getPriority().isEmpty()||(d+="priority:"+oi(this.getPriority().val())+":"),this.forEachChild(Lr,(v,A)=>{const k=A.hash();""!==k&&(d+=":"+v+":"+k)}),this.lazyHash_=""===d?"":vt(d)}return this.lazyHash_}getPredecessorChildName(d,v,A){const k=this.resolveIndex_(A);if(k){const H=k.getPredecessorKey(new ur(d,v));return H?H.name:null}return this.children_.getPredecessorKey(d)}getFirstChildName(d){const v=this.resolveIndex_(d);if(v){const A=v.minKey();return A&&A.name}return this.children_.minKey()}getFirstChild(d){const v=this.getFirstChildName(d);return v?new ur(v,this.children_.get(v)):null}getLastChildName(d){const v=this.resolveIndex_(d);if(v){const A=v.maxKey();return A&&A.name}return this.children_.maxKey()}getLastChild(d){const v=this.getLastChildName(d);return v?new ur(v,this.children_.get(v)):null}forEachChild(d,v){const A=this.resolveIndex_(d);return A?A.inorderTraversal(k=>v(k.name,k.node)):this.children_.inorderTraversal(v)}getIterator(d){return this.getIteratorFrom(d.minPost(),d)}getIteratorFrom(d,v){const A=this.resolveIndex_(v);if(A)return A.getIteratorFrom(d,k=>k);{const k=this.children_.getIteratorFrom(d.name,ur.Wrap);let H=k.peek();for(;null!=H&&v.compare(H,d)<0;)k.getNext(),H=k.peek();return k}}getReverseIterator(d){return this.getReverseIteratorFrom(d.maxPost(),d)}getReverseIteratorFrom(d,v){const A=this.resolveIndex_(v);if(A)return A.getReverseIteratorFrom(d,k=>k);{const k=this.children_.getReverseIteratorFrom(d.name,ur.Wrap);let H=k.peek();for(;null!=H&&v.compare(H,d)>0;)k.getNext(),H=k.peek();return k}}compareTo(d){return this.isEmpty()?d.isEmpty()?0:-1:d.isLeafNode()||d.isEmpty()?1:d===Uo?-1:0}withIndex(d){if(d===xi||this.indexMap_.hasIndex(d))return this;{const v=this.indexMap_.addIndex(d,this.children_);return new f(this.children_,this.priorityNode_,v)}}isIndexed(d){return d===xi||this.indexMap_.hasIndex(d)}equals(d){if(d===this)return!0;if(d.isLeafNode())return!1;{const v=d;if(this.getPriority().equals(v.getPriority())){if(this.children_.count()===v.children_.count()){const A=this.getIterator(Lr),k=v.getIterator(Lr);let H=A.getNext(),ie=k.getNext();for(;H&&ie;){if(H.name!==ie.name||!H.node.equals(ie.node))return!1;H=A.getNext(),ie=k.getNext()}return null===H&&null===ie}return!1}return!1}}resolveIndex_(d){return d===xi?null:this.indexMap_.get(d.toString())}}return f.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,f})();const Uo=new class ao extends Jn{constructor(){super(new li(Or),Jn.EMPTY_NODE,ps.Default)}compareTo(c){return c===this?0:1}equals(c){return c===this}getPriority(){return this}getImmediateChild(c){return Jn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(ur,{MIN:{value:new ur(Cr,Jn.EMPTY_NODE)},MAX:{value:new ur(Er,Uo)}}),Vs.__EMPTY_NODE=Jn.EMPTY_NODE,ui.__childrenNodeConstructor=Jn,function Lo(f){Rs=f}(Uo),function Mi(f){Zo=f}(Uo);const Qo=!0;function Vr(f,c=null){if(null===f)return Jn.EMPTY_NODE;if("object"==typeof f&&".priority"in f&&(c=f[".priority"]),(0,z.hu)(null===c||"string"==typeof c||"number"==typeof c||"object"==typeof c&&".sv"in c,"Invalid priority type found: "+typeof c),"object"==typeof f&&".value"in f&&null!==f[".value"]&&(f=f[".value"]),"object"!=typeof f||".sv"in f)return new ui(f,Vr(c));if(f instanceof Array||!Qo){let d=Jn.EMPTY_NODE;return An(f,(v,A)=>{if((0,z.r3)(f,v)&&"."!==v.substring(0,1)){const k=Vr(A);(k.isLeafNode()||!k.isEmpty())&&(d=d.updateImmediateChild(v,k))}}),d.updatePriority(Vr(c))}{const d=[];let v=!1;if(An(f,(H,ie)=>{if("."!==H.substring(0,1)){const ve=Vr(ie);ve.isEmpty()||(v=v||!ve.getPriority().isEmpty(),d.push(new ur(H,ve)))}}),0===d.length)return Jn.EMPTY_NODE;const k=Bo(d,Us,H=>H.name,Or);if(v){const H=Bo(d,Lr.getCompare());return new Jn(k,Vr(c),new ps({".priority":H},{".priority":Lr}))}return new Jn(k,Vr(c),ps.Default)}}!function Hs(f){$o=f}(Vr);class g extends es{constructor(c){super(),this.indexPath_=c,(0,z.hu)(!qn(c)&&".priority"!==Bn(c),"Can't create PathIndex with empty path or .priority key")}extractChild(c){return c.getChild(this.indexPath_)}isDefinedOn(c){return!c.getChild(this.indexPath_).isEmpty()}compare(c,d){const v=this.extractChild(c.node),A=this.extractChild(d.node),k=v.compareTo(A);return 0===k?Zr(c.name,d.name):k}makePost(c,d){const v=Vr(c),A=Jn.EMPTY_NODE.updateChild(this.indexPath_,v);return new ur(d,A)}maxPost(){const c=Jn.EMPTY_NODE.updateChild(this.indexPath_,Uo);return new ur(Er,c)}toString(){return Ys(this.indexPath_,0).join("/")}}const h=new class E extends es{compare(c,d){const v=c.node.compareTo(d.node);return 0===v?Zr(c.name,d.name):v}isDefinedOn(c){return!0}indexedValueChanged(c,d){return!c.equals(d)}minPost(){return ur.MIN}maxPost(){return ur.MAX}makePost(c,d){const v=Vr(c);return new ur(d,v)}toString(){return".value"}};function D(f){return{type:"value",snapshotNode:f}}function W(f,c){return{type:"child_added",snapshotNode:c,childName:f}}function Ue(f,c){return{type:"child_removed",snapshotNode:c,childName:f}}function Gt(f,c,d){return{type:"child_changed",snapshotNode:c,childName:f,oldSnap:d}}class Pn{constructor(c){this.index_=c}updateChild(c,d,v,A,k,H){(0,z.hu)(c.isIndexed(this.index_),"A node must be indexed if only a child is updated");const ie=c.getImmediateChild(d);return ie.getChild(A).equals(v.getChild(A))&&ie.isEmpty()===v.isEmpty()||(null!=H&&(v.isEmpty()?c.hasChild(d)?H.trackChildChange(Ue(d,ie)):(0,z.hu)(c.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):ie.isEmpty()?H.trackChildChange(W(d,v)):H.trackChildChange(Gt(d,v,ie))),c.isLeafNode()&&v.isEmpty())?c:c.updateImmediateChild(d,v).withIndex(this.index_)}updateFullNode(c,d,v){return null!=v&&(c.isLeafNode()||c.forEachChild(Lr,(A,k)=>{d.hasChild(A)||v.trackChildChange(Ue(A,k))}),d.isLeafNode()||d.forEachChild(Lr,(A,k)=>{if(c.hasChild(A)){const H=c.getImmediateChild(A);H.equals(k)||v.trackChildChange(Gt(A,k,H))}else v.trackChildChange(W(A,k))})),d.withIndex(this.index_)}updatePriority(c,d){return c.isEmpty()?Jn.EMPTY_NODE:c.updatePriority(d)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class cr{constructor(c){this.indexedFilter_=new Pn(c.getIndex()),this.index_=c.getIndex(),this.startPost_=cr.getStartPost_(c),this.endPost_=cr.getEndPost_(c),this.startIsInclusive_=!c.startAfterSet_,this.endIsInclusive_=!c.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(c){const d=this.startIsInclusive_?this.index_.compare(this.getStartPost(),c)<=0:this.index_.compare(this.getStartPost(),c)<0,v=this.endIsInclusive_?this.index_.compare(c,this.getEndPost())<=0:this.index_.compare(c,this.getEndPost())<0;return d&&v}updateChild(c,d,v,A,k,H){return this.matches(new ur(d,v))||(v=Jn.EMPTY_NODE),this.indexedFilter_.updateChild(c,d,v,A,k,H)}updateFullNode(c,d,v){d.isLeafNode()&&(d=Jn.EMPTY_NODE);let A=d.withIndex(this.index_);A=A.updatePriority(Jn.EMPTY_NODE);const k=this;return d.forEachChild(Lr,(H,ie)=>{k.matches(new ur(H,ie))||(A=A.updateImmediateChild(H,Jn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(c,A,v)}updatePriority(c,d){return c}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(c){if(c.hasStart()){const d=c.getIndexStartName();return c.getIndex().makePost(c.getIndexStartValue(),d)}return c.getIndex().minPost()}static getEndPost_(c){if(c.hasEnd()){const d=c.getIndexEndName();return c.getIndex().makePost(c.getIndexEndValue(),d)}return c.getIndex().maxPost()}}class Yr{constructor(c){this.withinDirectionalStart=d=>this.reverse_?this.withinEndPost(d):this.withinStartPost(d),this.withinDirectionalEnd=d=>this.reverse_?this.withinStartPost(d):this.withinEndPost(d),this.withinStartPost=d=>{const v=this.index_.compare(this.rangedFilter_.getStartPost(),d);return this.startIsInclusive_?v<=0:v<0},this.withinEndPost=d=>{const v=this.index_.compare(d,this.rangedFilter_.getEndPost());return this.endIsInclusive_?v<=0:v<0},this.rangedFilter_=new cr(c),this.index_=c.getIndex(),this.limit_=c.getLimit(),this.reverse_=!c.isViewFromLeft(),this.startIsInclusive_=!c.startAfterSet_,this.endIsInclusive_=!c.endBeforeSet_}updateChild(c,d,v,A,k,H){return this.rangedFilter_.matches(new ur(d,v))||(v=Jn.EMPTY_NODE),c.getImmediateChild(d).equals(v)?c:c.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(c,d,v,A,k,H):this.fullLimitUpdateChild_(c,d,v,k,H)}updateFullNode(c,d,v){let A;if(d.isLeafNode()||d.isEmpty())A=Jn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<d.numChildren()&&d.isIndexed(this.index_)){let k;A=Jn.EMPTY_NODE.withIndex(this.index_),k=this.reverse_?d.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):d.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let H=0;for(;k.hasNext()&&H<this.limit_;){const ie=k.getNext();if(this.withinDirectionalStart(ie)){if(!this.withinDirectionalEnd(ie))break;A=A.updateImmediateChild(ie.name,ie.node),H++}}}else{let k;A=d.withIndex(this.index_),A=A.updatePriority(Jn.EMPTY_NODE),k=this.reverse_?A.getReverseIterator(this.index_):A.getIterator(this.index_);let H=0;for(;k.hasNext();){const ie=k.getNext();H<this.limit_&&this.withinDirectionalStart(ie)&&this.withinDirectionalEnd(ie)?H++:A=A.updateImmediateChild(ie.name,Jn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(c,A,v)}updatePriority(c,d){return c}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(c,d,v,A,k){let H;if(this.reverse_){const Ot=this.index_.getCompare();H=(qt,Ln)=>Ot(Ln,qt)}else H=this.index_.getCompare();const ie=c;(0,z.hu)(ie.numChildren()===this.limit_,"");const ve=new ur(d,v),je=this.reverse_?ie.getFirstChild(this.index_):ie.getLastChild(this.index_),Lt=this.rangedFilter_.matches(ve);if(ie.hasChild(d)){const Ot=ie.getImmediateChild(d);let qt=A.getChildAfterChild(this.index_,je,this.reverse_);for(;null!=qt&&(qt.name===d||ie.hasChild(qt.name));)qt=A.getChildAfterChild(this.index_,qt,this.reverse_);const Ln=null==qt?1:H(qt,ve);if(Lt&&!v.isEmpty()&&Ln>=0)return null!=k&&k.trackChildChange(Gt(d,v,Ot)),ie.updateImmediateChild(d,v);{null!=k&&k.trackChildChange(Ue(d,Ot));const Ti=ie.updateImmediateChild(d,Jn.EMPTY_NODE);return null!=qt&&this.rangedFilter_.matches(qt)?(null!=k&&k.trackChildChange(W(qt.name,qt.node)),Ti.updateImmediateChild(qt.name,qt.node)):Ti}}return v.isEmpty()?c:Lt&&H(je,ve)>=0?(null!=k&&(k.trackChildChange(Ue(je.name,je.node)),k.trackChildChange(W(d,v))),ie.updateImmediateChild(d,v).updateImmediateChild(je.name,Jn.EMPTY_NODE)):c}}class pr{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Lr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Cr}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Er}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,z.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Lr}copy(){const c=new pr;return c.limitSet_=this.limitSet_,c.limit_=this.limit_,c.startSet_=this.startSet_,c.startAfterSet_=this.startAfterSet_,c.indexStartValue_=this.indexStartValue_,c.startNameSet_=this.startNameSet_,c.indexStartName_=this.indexStartName_,c.endSet_=this.endSet_,c.endBeforeSet_=this.endBeforeSet_,c.indexEndValue_=this.indexEndValue_,c.endNameSet_=this.endNameSet_,c.indexEndName_=this.indexEndName_,c.index_=this.index_,c.viewFrom_=this.viewFrom_,c}}function Ci(f,c,d){const v=f.copy();return v.startSet_=!0,void 0===c&&(c=null),v.indexStartValue_=c,null!=d?(v.startNameSet_=!0,v.indexStartName_=d):(v.startNameSet_=!1,v.indexStartName_=""),v}function Do(f,c,d){const v=f.copy();return v.endSet_=!0,void 0===c&&(c=null),v.indexEndValue_=c,void 0!==d?(v.endNameSet_=!0,v.indexEndName_=d):(v.endNameSet_=!1,v.indexEndName_=""),v}function ia(f,c){const d=f.copy();return d.index_=c,d}function ha(f){const c={};if(f.isDefault())return c;let d;if(f.index_===Lr?d="$priority":f.index_===h?d="$value":f.index_===xi?d="$key":((0,z.hu)(f.index_ instanceof g,"Unrecognized index type!"),d=f.index_.toString()),c.orderBy=(0,z.Wl)(d),f.startSet_){const v=f.startAfterSet_?"startAfter":"startAt";c[v]=(0,z.Wl)(f.indexStartValue_),f.startNameSet_&&(c[v]+=","+(0,z.Wl)(f.indexStartName_))}if(f.endSet_){const v=f.endBeforeSet_?"endBefore":"endAt";c[v]=(0,z.Wl)(f.indexEndValue_),f.endNameSet_&&(c[v]+=","+(0,z.Wl)(f.indexEndName_))}return f.limitSet_&&(f.isViewFromLeft()?c.limitToFirst=f.limit_:c.limitToLast=f.limit_),c}function Fa(f){const c={};if(f.startSet_&&(c.sp=f.indexStartValue_,f.startNameSet_&&(c.sn=f.indexStartName_),c.sin=!f.startAfterSet_),f.endSet_&&(c.ep=f.indexEndValue_,f.endNameSet_&&(c.en=f.indexEndName_),c.ein=!f.endBeforeSet_),f.limitSet_){c.l=f.limit_;let d=f.viewFrom_;""===d&&(d=f.isViewFromLeft()?"l":"r"),c.vf=d}return f.index_!==Lr&&(c.i=f.index_.toString()),c}class La extends tn{constructor(c,d,v,A){super(),this.repoInfo_=c,this.onDataUpdate_=d,this.authTokenProvider_=v,this.appCheckTokenProvider_=A,this.log_=Qn("p:rest:"),this.listens_={}}reportStats(c){throw new Error("Method not implemented.")}static getListenId_(c,d){return void 0!==d?"tag$"+d:((0,z.hu)(c._queryParams.isDefault(),"should have a tag if it's not a default query."),c._path.toString())}listen(c,d,v,A){const k=c._path.toString();this.log_("Listen called for "+k+" "+c._queryIdentifier);const H=La.getListenId_(c,v),ie={};this.listens_[H]=ie;const ve=ha(c._queryParams);this.restRequest_(k+".json",ve,(je,Lt)=>{let Ot=Lt;if(404===je&&(Ot=null,je=null),null===je&&this.onDataUpdate_(k,Ot,!1,v),(0,z.DV)(this.listens_,H)===ie){let qt;qt=je?401===je?"permission_denied":"rest_error:"+je:"ok",A(qt,null)}})}unlisten(c,d){const v=La.getListenId_(c,d);delete this.listens_[v]}get(c){const d=ha(c._queryParams),v=c._path.toString(),A=new z.BH;return this.restRequest_(v+".json",d,(k,H)=>{let ie=H;404===k&&(ie=null,k=null),null===k?(this.onDataUpdate_(v,ie,!1,null),A.resolve(ie)):A.reject(new Error(ie))}),A.promise}refreshAuthToken(c){}restRequest_(c,d={},v){return d.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([A,k])=>{A&&A.accessToken&&(d.auth=A.accessToken),k&&k.token&&(d.ac=k.token);const H=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+c+"?ns="+this.repoInfo_.namespace+(0,z.xO)(d);this.log_("Sending REST request for "+H);const ie=new XMLHttpRequest;ie.onreadystatechange=()=>{if(v&&4===ie.readyState){this.log_("REST Response for "+H+" received. status:",ie.status,"response:",ie.responseText);let ve=null;if(ie.status>=200&&ie.status<300){try{ve=(0,z.cI)(ie.responseText)}catch(je){hn("Failed to parse JSON response for "+H+": "+ie.responseText)}v(null,ve)}else 401!==ie.status&&404!==ie.status&&hn("Got unsuccessful REST response for "+H+" Status: "+ie.status),v(ie.status);v=null}},ie.open("GET",H,!0),ie.send()})}}class Os{constructor(){this.rootNode_=Jn.EMPTY_NODE}getNode(c){return this.rootNode_.getChild(c)}updateSnapshot(c,d){this.rootNode_=this.rootNode_.updateChild(c,d)}}function sa(){return{value:null,children:new Map}}function jo(f,c,d){if(qn(c))f.value=d,f.children.clear();else if(null!==f.value)f.value=f.value.updateChild(c,d);else{const v=Bn(c);f.children.has(v)||f.children.set(v,sa()),jo(f.children.get(v),c=Br(c),d)}}function To(f,c){if(qn(c))return f.value=null,f.children.clear(),!0;if(null!==f.value){if(f.value.isLeafNode())return!1;{const d=f.value;return f.value=null,d.forEachChild(Lr,(v,A)=>{jo(f,new br(v),A)}),To(f,c)}}if(f.children.size>0){const d=Bn(c);return c=Br(c),f.children.has(d)&&To(f.children.get(d),c)&&f.children.delete(d),0===f.children.size}return!0}function Za(f,c,d){null!==f.value?d(c,f.value):function Qa(f,c){f.children.forEach((d,v)=>{c(v,d)})}(f,(v,A)=>{Za(A,new br(c.toString()+"/"+v),d)})}class $a{constructor(c){this.collection_=c,this.last_=null}get(){const c=this.collection_.get(),d=Object.assign({},c);return this.last_&&An(this.last_,(v,A)=>{d[v]=d[v]-A}),this.last_=c,d}}class nu{constructor(c,d){this.server_=d,this.statsToReport_={},this.statsListener_=new $a(c);const v=1e4+2e4*Math.random();en(this.reportStats_.bind(this),Math.floor(v))}reportStats_(){const c=this.statsListener_.get(),d={};let v=!1;An(c,(A,k)=>{k>0&&(0,z.r3)(this.statsToReport_,A)&&(d[A]=k,v=!0)}),v&&this.server_.reportStats(d),en(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ws=(()=>{return(f=ws||(ws={}))[f.OVERWRITE=0]="OVERWRITE",f[f.MERGE=1]="MERGE",f[f.ACK_USER_WRITE=2]="ACK_USER_WRITE",f[f.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",ws;var f})();function Vi(f){return{fromUser:!1,fromServer:!0,queryId:f,tagged:!0}}class Pi{constructor(c,d,v){this.path=c,this.affectedTree=d,this.revert=v,this.type=ws.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(c){if(qn(this.path)){if(null!=this.affectedTree.value)return(0,z.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const d=this.affectedTree.subtree(new br(c));return new Pi(Yn(),d,this.revert)}}return(0,z.hu)(Bn(this.path)===c,"operationForChild called for unrelated child."),new Pi(Br(this.path),this.affectedTree,this.revert)}}class Xr{constructor(c,d){this.source=c,this.path=d,this.type=ws.LISTEN_COMPLETE}operationForChild(c){return qn(this.path)?new Xr(this.source,Yn()):new Xr(this.source,Br(this.path))}}class Go{constructor(c,d,v){this.source=c,this.path=d,this.snap=v,this.type=ws.OVERWRITE}operationForChild(c){return qn(this.path)?new Go(this.source,Yn(),this.snap.getImmediateChild(c)):new Go(this.source,Br(this.path),this.snap)}}class bi{constructor(c,d,v){this.source=c,this.path=d,this.children=v,this.type=ws.MERGE}operationForChild(c){if(qn(this.path)){const d=this.children.subtree(new br(c));return d.isEmpty()?null:d.value?new Go(this.source,Yn(),d.value):new bi(this.source,Yn(),d)}return(0,z.hu)(Bn(this.path)===c,"Can't get a merge for a child not on the path of the operation"),new bi(this.source,Br(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class aa{constructor(c,d,v){this.node_=c,this.fullyInitialized_=d,this.filtered_=v}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(c){if(qn(c))return this.isFullyInitialized()&&!this.filtered_;const d=Bn(c);return this.isCompleteForChild(d)}isCompleteForChild(c){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(c)}getNode(){return this.node_}}class Cu{constructor(c){this.query_=c,this.index_=this.query_._queryParams.getIndex()}}function Ca(f,c,d,v,A,k){const H=v.filter(ie=>ie.type===d);H.sort((ie,ve)=>function el(f,c,d){if(null==c.childName||null==d.childName)throw(0,z.g5)("Should only compare child_ events.");const v=new ur(c.childName,c.snapshotNode),A=new ur(d.childName,d.snapshotNode);return f.index_.compare(v,A)}(f,ie,ve)),H.forEach(ie=>{const ve=function fa(f,c,d){return"value"===c.type||"child_removed"===c.type||(c.prevName=d.getPredecessorChildName(c.childName,c.snapshotNode,f.index_)),c}(f,ie,k);A.forEach(je=>{je.respondsTo(ie.type)&&c.push(je.createEvent(ve,f.query_))})})}function N(f,c){return{eventCache:f,serverCache:c}}function K(f,c,d,v){return N(new aa(c,d,v),f.serverCache)}function $(f,c,d,v){return N(f.eventCache,new aa(c,d,v))}function re(f){return f.eventCache.isFullyInitialized()?f.eventCache.getNode():null}function pe(f){return f.serverCache.isFullyInitialized()?f.serverCache.getNode():null}let _t;class un{constructor(c,d=(()=>(_t||(_t=new li(Sr)),_t))()){this.value=c,this.children=d}static fromObject(c){let d=new un(null);return An(c,(v,A)=>{d=d.set(new br(v),A)}),d}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(c,d){if(null!=this.value&&d(this.value))return{path:Yn(),value:this.value};if(qn(c))return null;{const v=Bn(c),A=this.children.get(v);if(null!==A){const k=A.findRootMostMatchingPathAndValue(Br(c),d);return null!=k?{path:Fr(new br(v),k.path),value:k.value}:null}return null}}findRootMostValueAndPath(c){return this.findRootMostMatchingPathAndValue(c,()=>!0)}subtree(c){if(qn(c))return this;{const d=Bn(c),v=this.children.get(d);return null!==v?v.subtree(Br(c)):new un(null)}}set(c,d){if(qn(c))return new un(d,this.children);{const v=Bn(c),k=(this.children.get(v)||new un(null)).set(Br(c),d),H=this.children.insert(v,k);return new un(this.value,H)}}remove(c){if(qn(c))return this.children.isEmpty()?new un(null):new un(null,this.children);{const d=Bn(c),v=this.children.get(d);if(v){const A=v.remove(Br(c));let k;return k=A.isEmpty()?this.children.remove(d):this.children.insert(d,A),null===this.value&&k.isEmpty()?new un(null):new un(this.value,k)}return this}}get(c){if(qn(c))return this.value;{const d=Bn(c),v=this.children.get(d);return v?v.get(Br(c)):null}}setTree(c,d){if(qn(c))return d;{const v=Bn(c),k=(this.children.get(v)||new un(null)).setTree(Br(c),d);let H;return H=k.isEmpty()?this.children.remove(v):this.children.insert(v,k),new un(this.value,H)}}fold(c){return this.fold_(Yn(),c)}fold_(c,d){const v={};return this.children.inorderTraversal((A,k)=>{v[A]=k.fold_(Fr(c,A),d)}),d(c,this.value,v)}findOnPath(c,d){return this.findOnPath_(c,Yn(),d)}findOnPath_(c,d,v){const A=!!this.value&&v(d,this.value);if(A)return A;if(qn(c))return null;{const k=Bn(c),H=this.children.get(k);return H?H.findOnPath_(Br(c),Fr(d,k),v):null}}foreachOnPath(c,d){return this.foreachOnPath_(c,Yn(),d)}foreachOnPath_(c,d,v){if(qn(c))return this;{this.value&&v(d,this.value);const A=Bn(c),k=this.children.get(A);return k?k.foreachOnPath_(Br(c),Fr(d,A),v):new un(null)}}foreach(c){this.foreach_(Yn(),c)}foreach_(c,d){this.children.inorderTraversal((v,A)=>{A.foreach_(Fr(c,v),d)}),this.value&&d(c,this.value)}foreachChild(c){this.children.inorderTraversal((d,v)=>{v.value&&c(d,v.value)})}}class or{constructor(c){this.writeTree_=c}static empty(){return new or(new un(null))}}function kt(f,c,d){if(qn(c))return new or(new un(d));{const v=f.writeTree_.findRootMostValueAndPath(c);if(null!=v){const A=v.path;let k=v.value;const H=ni(A,c);return k=k.updateChild(H,d),new or(f.writeTree_.set(A,k))}{const A=new un(d),k=f.writeTree_.setTree(c,A);return new or(k)}}}function er(f,c,d){let v=f;return An(d,(A,k)=>{v=kt(v,Fr(c,A),k)}),v}function dr(f,c){if(qn(c))return or.empty();{const d=f.writeTree_.setTree(c,new un(null));return new or(d)}}function Di(f,c){return null!=Yt(f,c)}function Yt(f,c){const d=f.writeTree_.findRootMostValueAndPath(c);return null!=d?f.writeTree_.get(d.path).getChild(ni(d.path,c)):null}function mn(f){const c=[],d=f.writeTree_.value;return null!=d?d.isLeafNode()||d.forEachChild(Lr,(v,A)=>{c.push(new ur(v,A))}):f.writeTree_.children.inorderTraversal((v,A)=>{null!=A.value&&c.push(new ur(v,A.value))}),c}function ls(f,c){if(qn(c))return f;{const d=Yt(f,c);return new or(null!=d?new un(d):f.writeTree_.subtree(c))}}function cn(f){return f.writeTree_.isEmpty()}function wt(f,c){return zt(Yn(),f.writeTree_,c)}function zt(f,c,d){if(null!=c.value)return d.updateChild(f,c.value);{let v=null;return c.children.inorderTraversal((A,k)=>{".priority"===A?((0,z.hu)(null!==k.value,"Priority writes must always be leaf nodes"),v=k.value):d=zt(Fr(f,A),k,d)}),!d.getChild(f).isEmpty()&&null!==v&&(d=d.updateChild(Fr(f,".priority"),v)),d}}function wi(f,c){return Xo(c,f)}function So(f,c){if(f.snap)return zi(f.path,c);for(const d in f.children)if(f.children.hasOwnProperty(d)&&zi(Fr(f.path,d),c))return!0;return!1}function rl(f){return f.visible}function il(f,c,d){let v=or.empty();for(let A=0;A<f.length;++A){const k=f[A];if(c(k)){const H=k.path;let ie;if(k.snap)zi(d,H)?(ie=ni(d,H),v=kt(v,ie,k.snap)):zi(H,d)&&(ie=ni(H,d),v=kt(v,Yn(),k.snap.getChild(ie)));else{if(!k.children)throw(0,z.g5)("WriteRecord should have .snap or .children");if(zi(d,H))ie=ni(d,H),v=er(v,ie,k.children);else if(zi(H,d))if(ie=ni(H,d),qn(ie))v=er(v,Yn(),k.children);else{const ve=(0,z.DV)(k.children,Bn(ie));if(ve){const je=ve.getChild(Br(ie));v=kt(v,Yn(),je)}}}}}return v}function kl(f,c,d,v,A){if(v||A){const k=ls(f.visibleWrites,c);return!A&&cn(k)?d:A||null!=d||Di(k,Yn())?wt(il(f.allWrites,function(je){return(je.visible||A)&&(!v||!~v.indexOf(je.writeId))&&(zi(je.path,c)||zi(c,je.path))},c),d||Jn.EMPTY_NODE):null}{const k=Yt(f.visibleWrites,c);if(null!=k)return k;{const H=ls(f.visibleWrites,c);return cn(H)?d:null!=d||Di(H,Yn())?wt(H,d||Jn.EMPTY_NODE):null}}}function Gn(f,c,d,v){return kl(f.writeTree,f.treePath,c,d,v)}function lo(f,c){return function Ao(f,c,d){let v=Jn.EMPTY_NODE;const A=Yt(f.visibleWrites,c);if(A)return A.isLeafNode()||A.forEachChild(Lr,(k,H)=>{v=v.updateImmediateChild(k,H)}),v;if(d){const k=ls(f.visibleWrites,c);return d.forEachChild(Lr,(H,ie)=>{const ve=wt(ls(k,new br(H)),ie);v=v.updateImmediateChild(H,ve)}),mn(k).forEach(H=>{v=v.updateImmediateChild(H.name,H.node)}),v}return mn(ls(f.visibleWrites,c)).forEach(H=>{v=v.updateImmediateChild(H.name,H.node)}),v}(f.writeTree,f.treePath,c)}function Ur(f,c,d,v){return function Fl(f,c,d,v,A){(0,z.hu)(v||A,"Either existingEventSnap or existingServerSnap must exist");const k=Fr(c,d);if(Di(f.visibleWrites,k))return null;{const H=ls(f.visibleWrites,k);return cn(H)?A.getChild(d):wt(H,A.getChild(d))}}(f.writeTree,f.treePath,c,d,v)}function El(f,c){return function la(f,c){return Yt(f.visibleWrites,c)}(f.writeTree,Fr(f.treePath,c))}function pn(f,c,d){return function hr(f,c,d,v){const A=Fr(c,d),k=Yt(f.visibleWrites,A);return null!=k?k:v.isCompleteForChild(d)?wt(ls(f.visibleWrites,A),v.getNode().getImmediateChild(d)):null}(f.writeTree,f.treePath,c,d)}function ms(f,c){return Xo(Fr(f.treePath,c),f.writeTree)}function Xo(f,c){return{treePath:f,writeTree:c}}class Cs{constructor(){this.changeMap=new Map}trackChildChange(c){const d=c.type,v=c.childName;(0,z.hu)("child_added"===d||"child_changed"===d||"child_removed"===d,"Only child changes supported for tracking"),(0,z.hu)(".priority"!==v,"Only non-priority child changes can be tracked.");const A=this.changeMap.get(v);if(A){const k=A.type;if("child_added"===d&&"child_removed"===k)this.changeMap.set(v,Gt(v,c.snapshotNode,A.snapshotNode));else if("child_removed"===d&&"child_added"===k)this.changeMap.delete(v);else if("child_removed"===d&&"child_changed"===k)this.changeMap.set(v,Ue(v,A.oldSnap));else if("child_changed"===d&&"child_added"===k)this.changeMap.set(v,W(v,c.snapshotNode));else{if("child_changed"!==d||"child_changed"!==k)throw(0,z.g5)("Illegal combination of changes: "+c+" occurred after "+A);this.changeMap.set(v,Gt(v,c.snapshotNode,A.oldSnap))}}else this.changeMap.set(v,c)}getChanges(){return Array.from(this.changeMap.values())}}const uo=new class bu{getCompleteChild(c){return null}getChildAfterChild(c,d,v){return null}};class ua{constructor(c,d,v=null){this.writes_=c,this.viewCache_=d,this.optCompleteServerCache_=v}getCompleteChild(c){const d=this.viewCache_.eventCache;if(d.isCompleteForChild(c))return d.getNode().getImmediateChild(c);{const v=null!=this.optCompleteServerCache_?new aa(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return pn(this.writes_,c,v)}}getChildAfterChild(c,d,v){const A=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:pe(this.viewCache_),k=function pi(f,c,d,v,A,k){return function Ba(f,c,d,v,A,k,H){let ie;const ve=ls(f.visibleWrites,c),je=Yt(ve,Yn());if(null!=je)ie=je;else{if(null==d)return[];ie=wt(ve,d)}if(ie=ie.withIndex(H),ie.isEmpty()||ie.isLeafNode())return[];{const Lt=[],Ot=H.getCompare(),qt=k?ie.getReverseIteratorFrom(v,H):ie.getIteratorFrom(v,H);let Ln=qt.getNext();for(;Ln&&Lt.length<A;)0!==Ot(Ln,v)&&Lt.push(Ln),Ln=qt.getNext();return Lt}}(f.writeTree,f.treePath,c,d,v,A,k)}(this.writes_,A,d,1,v,c);return 0===k.length?null:k[0]}}function Il(f,c,d,v,A,k){const H=c.eventCache;if(null!=El(v,d))return c;{let ie,ve;if(qn(d))if((0,z.hu)(c.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),c.serverCache.isFiltered()){const je=pe(c),Ot=lo(v,je instanceof Jn?je:Jn.EMPTY_NODE);ie=f.filter.updateFullNode(c.eventCache.getNode(),Ot,k)}else{const je=Gn(v,pe(c));ie=f.filter.updateFullNode(c.eventCache.getNode(),je,k)}else{const je=Bn(d);if(".priority"===je){(0,z.hu)(1===qi(d),"Can't have a priority with additional path components");const Lt=H.getNode();ve=c.serverCache.getNode();const Ot=Ur(v,d,Lt,ve);ie=null!=Ot?f.filter.updatePriority(Lt,Ot):H.getNode()}else{const Lt=Br(d);let Ot;if(H.isCompleteForChild(je)){ve=c.serverCache.getNode();const qt=Ur(v,d,H.getNode(),ve);Ot=null!=qt?H.getNode().getImmediateChild(je).updateChild(Lt,qt):H.getNode().getImmediateChild(je)}else Ot=pn(v,je,c.serverCache);ie=null!=Ot?f.filter.updateChild(H.getNode(),je,Ot,Lt,A,k):H.getNode()}}return K(c,ie,H.isFullyInitialized()||qn(d),f.filter.filtersNodes())}}function Ds(f,c,d,v,A,k,H,ie){const ve=c.serverCache;let je;const Lt=H?f.filter:f.filter.getIndexedFilter();if(qn(d))je=Lt.updateFullNode(ve.getNode(),v,null);else if(Lt.filtersNodes()&&!ve.isFiltered()){const Ln=ve.getNode().updateChild(d,v);je=Lt.updateFullNode(ve.getNode(),Ln,null)}else{const Ln=Bn(d);if(!ve.isCompleteForPath(d)&&qi(d)>1)return c;const ar=Br(d),_s=ve.getNode().getImmediateChild(Ln).updateChild(ar,v);je=".priority"===Ln?Lt.updatePriority(ve.getNode(),_s):Lt.updateChild(ve.getNode(),Ln,_s,ar,uo,null)}const Ot=$(c,je,ve.isFullyInitialized()||qn(d),Lt.filtersNodes());return Il(f,Ot,d,A,new ua(A,Ot,k),ie)}function ba(f,c,d,v,A,k,H){const ie=c.eventCache;let ve,je;const Lt=new ua(A,c,k);if(qn(d))je=f.filter.updateFullNode(c.eventCache.getNode(),v,H),ve=K(c,je,!0,f.filter.filtersNodes());else{const Ot=Bn(d);if(".priority"===Ot)je=f.filter.updatePriority(c.eventCache.getNode(),v),ve=K(c,je,ie.isFullyInitialized(),ie.isFiltered());else{const qt=Br(d),Ln=ie.getNode().getImmediateChild(Ot);let ar;if(qn(qt))ar=v;else{const Ti=Lt.getCompleteChild(Ot);ar=null!=Ti?".priority"===ds(qt)&&Ti.getChild(Eo(qt)).isEmpty()?Ti:Ti.updateChild(qt,v):Jn.EMPTY_NODE}ve=Ln.equals(ar)?c:K(c,f.filter.updateChild(ie.getNode(),Ot,ar,qt,Lt,H),ie.isFullyInitialized(),f.filter.filtersNodes())}}return ve}function Ts(f,c){return f.eventCache.isCompleteForChild(c)}function bt(f,c,d){return d.foreach((v,A)=>{c=c.updateChild(v,A)}),c}function xo(f,c,d,v,A,k,H,ie){if(c.serverCache.getNode().isEmpty()&&!c.serverCache.isFullyInitialized())return c;let je,ve=c;je=qn(d)?v:new un(null).setTree(d,v);const Lt=c.serverCache.getNode();return je.children.inorderTraversal((Ot,qt)=>{if(Lt.hasChild(Ot)){const ar=bt(0,c.serverCache.getNode().getImmediateChild(Ot),qt);ve=Ds(f,ve,new br(Ot),ar,A,k,H,ie)}}),je.children.inorderTraversal((Ot,qt)=>{const Ln=!c.serverCache.isCompleteForChild(Ot)&&null===qt.value;if(!Lt.hasChild(Ot)&&!Ln){const Ti=bt(0,c.serverCache.getNode().getImmediateChild(Ot),qt);ve=Ds(f,ve,new br(Ot),Ti,A,k,H,ie)}}),ve}class Da{constructor(c,d){this.query_=c,this.eventRegistrations_=[];const v=this.query_._queryParams,A=new Pn(v.getIndex()),k=function ns(f){return f.loadsAllData()?new Pn(f.getIndex()):f.hasLimit()?new Yr(f):new cr(f)}(v);this.processor_=function ga(f){return{filter:f}}(k);const H=d.serverCache,ie=d.eventCache,ve=A.updateFullNode(Jn.EMPTY_NODE,H.getNode(),null),je=k.updateFullNode(Jn.EMPTY_NODE,ie.getNode(),null),Lt=new aa(ve,H.isFullyInitialized(),A.filtersNodes()),Ot=new aa(je,ie.isFullyInitialized(),k.filtersNodes());this.viewCache_=N(Ot,Lt),this.eventGenerator_=new Cu(this.query_)}get query(){return this.query_}}function wl(f,c){const d=pe(f.viewCache_);return d&&(f.query._queryParams.loadsAllData()||!qn(c)&&!d.getImmediateChild(Bn(c)).isEmpty())?d.getChild(c):null}function iu(f){return 0===f.eventRegistrations_.length}function $l(f,c,d){const v=[];if(d){(0,z.hu)(null==c,"A cancel should cancel all event registrations.");const A=f.query._path;f.eventRegistrations_.forEach(k=>{const H=k.createCancelEvent(d,A);H&&v.push(H)})}if(c){let A=[];for(let k=0;k<f.eventRegistrations_.length;++k){const H=f.eventRegistrations_[k];if(H.matches(c)){if(c.hasAnyCallback()){A=A.concat(f.eventRegistrations_.slice(k+1));break}}else A.push(H)}f.eventRegistrations_=A}else f.eventRegistrations_=[];return v}function Gs(f,c,d,v){c.type===ws.MERGE&&null!==c.source.queryId&&((0,z.hu)(pe(f.viewCache_),"We should always have a full cache before handling merges"),(0,z.hu)(re(f.viewCache_),"Missing event cache, even though we have a server cache"));const A=f.viewCache_,k=function ru(f,c,d,v,A){const k=new Cs;let H,ie;if(d.type===ws.OVERWRITE){const je=d;je.source.fromUser?H=ba(f,c,je.path,je.snap,v,A,k):((0,z.hu)(je.source.fromServer,"Unknown source."),ie=je.source.tagged||c.serverCache.isFiltered()&&!qn(je.path),H=Ds(f,c,je.path,je.snap,v,A,ie,k))}else if(d.type===ws.MERGE){const je=d;je.source.fromUser?H=function sl(f,c,d,v,A,k,H){let ie=c;return v.foreach((ve,je)=>{const Lt=Fr(d,ve);Ts(c,Bn(Lt))&&(ie=ba(f,ie,Lt,je,A,k,H))}),v.foreach((ve,je)=>{const Lt=Fr(d,ve);Ts(c,Bn(Lt))||(ie=ba(f,ie,Lt,je,A,k,H))}),ie}(f,c,je.path,je.children,v,A,k):((0,z.hu)(je.source.fromServer,"Unknown source."),ie=je.source.tagged||c.serverCache.isFiltered(),H=xo(f,c,je.path,je.children,v,A,ie,k))}else if(d.type===ws.ACK_USER_WRITE){const je=d;H=je.revert?function Ll(f,c,d,v,A,k){let H;if(null!=El(v,d))return c;{const ie=new ua(v,c,A),ve=c.eventCache.getNode();let je;if(qn(d)||".priority"===Bn(d)){let Lt;if(c.serverCache.isFullyInitialized())Lt=Gn(v,pe(c));else{const Ot=c.serverCache.getNode();(0,z.hu)(Ot instanceof Jn,"serverChildren would be complete if leaf node"),Lt=lo(v,Ot)}je=f.filter.updateFullNode(ve,Lt,k)}else{const Lt=Bn(d);let Ot=pn(v,Lt,c.serverCache);null==Ot&&c.serverCache.isCompleteForChild(Lt)&&(Ot=ve.getImmediateChild(Lt)),je=null!=Ot?f.filter.updateChild(ve,Lt,Ot,Br(d),ie,k):c.eventCache.getNode().hasChild(Lt)?f.filter.updateChild(ve,Lt,Jn.EMPTY_NODE,Br(d),ie,k):ve,je.isEmpty()&&c.serverCache.isFullyInitialized()&&(H=Gn(v,pe(c)),H.isLeafNode()&&(je=f.filter.updateFullNode(je,H,k)))}return H=c.serverCache.isFullyInitialized()||null!=El(v,Yn()),K(c,je,H,f.filter.filtersNodes())}}(f,c,je.path,v,A,k):function co(f,c,d,v,A,k,H){if(null!=El(A,d))return c;const ie=c.serverCache.isFiltered(),ve=c.serverCache;if(null!=v.value){if(qn(d)&&ve.isFullyInitialized()||ve.isCompleteForPath(d))return Ds(f,c,d,ve.getNode().getChild(d),A,k,ie,H);if(qn(d)){let je=new un(null);return ve.getNode().forEachChild(xi,(Lt,Ot)=>{je=je.set(new br(Lt),Ot)}),xo(f,c,d,je,A,k,ie,H)}return c}{let je=new un(null);return v.foreach((Lt,Ot)=>{const qt=Fr(d,Lt);ve.isCompleteForPath(qt)&&(je=je.set(Lt,ve.getNode().getChild(qt)))}),xo(f,c,d,je,A,k,ie,H)}}(f,c,je.path,je.affectedTree,v,A,k)}else{if(d.type!==ws.LISTEN_COMPLETE)throw(0,z.g5)("Unknown operation type: "+d.type);H=function ol(f,c,d,v,A){const k=c.serverCache;return Il(f,$(c,k.getNode(),k.isFullyInitialized()||qn(d),k.isFiltered()),d,v,uo,A)}(f,c,d.path,v,k)}const ve=k.getChanges();return function bs(f,c,d){const v=c.eventCache;if(v.isFullyInitialized()){const A=v.getNode().isLeafNode()||v.getNode().isEmpty(),k=re(f);(d.length>0||!f.eventCache.isFullyInitialized()||A&&!v.getNode().equals(k)||!v.getNode().getPriority().equals(k.getPriority()))&&d.push(D(re(c)))}}(c,H,ve),{viewCache:H,changes:ve}}(f.processor_,A,c,d,v);return function qu(f,c){(0,z.hu)(c.eventCache.getNode().isIndexed(f.filter.getIndex()),"Event snap not indexed"),(0,z.hu)(c.serverCache.getNode().isIndexed(f.filter.getIndex()),"Server snap not indexed")}(f.processor_,k.viewCache),(0,z.hu)(k.viewCache.serverCache.isFullyInitialized()||!A.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),f.viewCache_=k.viewCache,ma(f,k.changes,k.viewCache.eventCache.getNode(),null)}function ma(f,c,d,v){return function vl(f,c,d,v){const A=[],k=[];return c.forEach(H=>{"child_changed"===H.type&&f.index_.indexedValueChanged(H.oldSnap,H.snapshotNode)&&k.push(function an(f,c){return{type:"child_moved",snapshotNode:c,childName:f}}(H.childName,H.snapshotNode))}),Ca(f,A,"child_removed",c,v,d),Ca(f,A,"child_added",c,v,d),Ca(f,A,"child_moved",k,v,d),Ca(f,A,"child_changed",c,v,d),Ca(f,A,"value",c,v,d),A}(f.eventGenerator_,c,d,v?[v]:f.eventRegistrations_)}let al,Qi;class ll{constructor(){this.views=new Map}}function ul(f,c,d,v){const A=c.source.queryId;if(null!==A){const k=f.views.get(A);return(0,z.hu)(null!=k,"SyncTree gave us an op for an invalid query."),Gs(k,c,d,v)}{let k=[];for(const H of f.views.values())k=k.concat(Gs(H,c,d,v));return k}}function rs(f,c,d,v,A){const H=f.views.get(c._queryIdentifier);if(!H){let ie=Gn(d,A?v:null),ve=!1;ie?ve=!0:v instanceof Jn?(ie=lo(d,v),ve=!1):(ie=Jn.EMPTY_NODE,ve=!1);const je=N(new aa(ie,ve,!1),new aa(v,A,!1));return new Da(c,je)}return H}function Ua(f){const c=[];for(const d of f.views.values())d.query._queryParams.loadsAllData()||c.push(d);return c}function zs(f,c){let d=null;for(const v of f.views.values())d=d||wl(v,c);return d}function ys(f,c){return c._queryParams.loadsAllData()?ki(f):f.views.get(c._queryIdentifier)}function Tu(f,c){return null!=ys(f,c)}function to(f){return null!=ki(f)}function ki(f){for(const c of f.views.values())if(c.query._queryParams.loadsAllData())return c;return null}let w=1;class R{constructor(c){this.listenProvider_=c,this.syncPointTree_=new un(null),this.pendingWriteTree_=function Ni(){return{visibleWrites:or.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function V(f,c,d,v,A){return function Ps(f,c,d,v,A){(0,z.hu)(v>f.lastWriteId,"Stacking an older write on top of newer ones"),void 0===A&&(A=!0),f.allWrites.push({path:c,snap:d,writeId:v,visible:A}),A&&(f.visibleWrites=kt(f.visibleWrites,c,d)),f.lastWriteId=v}(f.pendingWriteTree_,c,d,v,A),A?ut(f,new Go({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},c,d)):[]}function ne(f,c,d=!1){const v=function pa(f,c){for(let d=0;d<f.allWrites.length;d++){const v=f.allWrites[d];if(v.writeId===c)return v}return null}(f.pendingWriteTree_,c);if(function _l(f,c){const d=f.allWrites.findIndex(ie=>ie.writeId===c);(0,z.hu)(d>=0,"removeWrite called with nonexistent writeId.");const v=f.allWrites[d];f.allWrites.splice(d,1);let A=v.visible,k=!1,H=f.allWrites.length-1;for(;A&&H>=0;){const ie=f.allWrites[H];ie.visible&&(H>=d&&So(ie,v.path)?A=!1:zi(v.path,ie.path)&&(k=!0)),H--}return!!A&&(k?(function nl(f){f.visibleWrites=il(f.allWrites,rl,Yn()),f.lastWriteId=f.allWrites.length>0?f.allWrites[f.allWrites.length-1].writeId:-1}(f),!0):(v.snap?f.visibleWrites=dr(f.visibleWrites,v.path):An(v.children,ve=>{f.visibleWrites=dr(f.visibleWrites,Fr(v.path,ve))}),!0))}(f.pendingWriteTree_,c)){let k=new un(null);return null!=v.snap?k=k.set(Yn(),!0):An(v.children,H=>{k=k.set(new br(H),!0)}),ut(f,new Pi(v.path,k,d))}return[]}function Qe(f,c,d){return ut(f,new Go({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,d))}function _n(f,c,d,v,A=!1){const k=c._path,H=f.syncPointTree_.get(k);let ie=[];if(H&&("default"===c._queryIdentifier||Tu(H,c))){const ve=function Cl(f,c,d,v){const A=c._queryIdentifier,k=[];let H=[];const ie=to(f);if("default"===A)for(const[ve,je]of f.views.entries())H=H.concat($l(je,d,v)),iu(je)&&(f.views.delete(ve),je.query._queryParams.loadsAllData()||k.push(je.query));else{const ve=f.views.get(A);ve&&(H=H.concat($l(ve,d,v)),iu(ve)&&(f.views.delete(A),ve.query._queryParams.loadsAllData()||k.push(ve.query)))}return ie&&!to(f)&&k.push(new(function su(){return(0,z.hu)(al,"Reference.ts has not been loaded"),al}())(c._repo,c._path)),{removed:k,events:H}}(H,c,d,v);(function ho(f){return 0===f.views.size})(H)&&(f.syncPointTree_=f.syncPointTree_.remove(k));const je=ve.removed;if(ie=ve.events,!A){const Lt=-1!==je.findIndex(qt=>qt._queryParams.loadsAllData()),Ot=f.syncPointTree_.findOnPath(k,(qt,Ln)=>to(Ln));if(Lt&&!Ot){const qt=f.syncPointTree_.subtree(k);if(!qt.isEmpty()){const Ln=function ro(f){return f.fold((c,d,v)=>{if(d&&to(d))return[ki(d)];{let A=[];return d&&(A=Ua(d)),An(v,(k,H)=>{A=A.concat(H)}),A}})}(qt);for(let ar=0;ar<Ln.length;++ar){const Ti=Ln[ar],_s=Ti.query,Ia=bn(f,Ti);f.listenProvider_.startListening(ya(_s),Wn(f,_s),Ia.hashFn,Ia.onComplete)}}}!Ot&&je.length>0&&!v&&(Lt?f.listenProvider_.stopListening(ya(c),null):je.forEach(qt=>{const Ln=f.queryToTagMap.get(tr(qt));f.listenProvider_.stopListening(ya(qt),Ln)}))}!function Gr(f,c){for(let d=0;d<c.length;++d){const v=c[d];if(!v._queryParams.loadsAllData()){const A=tr(v),k=f.queryToTagMap.get(A);f.queryToTagMap.delete(A),f.tagToQueryMap.delete(k)}}}(f,je)}return ie}function Hr(f,c,d,v){const A=Mr(f,v);if(null!=A){const k=nr(A),H=k.path,ie=k.queryId,ve=ni(H,c);return no(f,H,new Go(Vi(ie),ve,d))}return[]}function U(f,c,d,v=!1){const A=c._path;let k=null,H=!1;f.syncPointTree_.foreachOnPath(A,(qt,Ln)=>{const ar=ni(qt,A);k=k||zs(Ln,ar),H=H||to(Ln)});let ve,ie=f.syncPointTree_.get(A);ie?(H=H||to(ie),k=k||zs(ie,Yn())):(ie=new ll,f.syncPointTree_=f.syncPointTree_.set(A,ie)),null!=k?ve=!0:(ve=!1,k=Jn.EMPTY_NODE,f.syncPointTree_.subtree(A).foreachChild((Ln,ar)=>{const Ti=zs(ar,Yn());Ti&&(k=k.updateImmediateChild(Ln,Ti))}));const je=Tu(ie,c);if(!je&&!c._queryParams.loadsAllData()){const qt=tr(c);(0,z.hu)(!f.queryToTagMap.has(qt),"View does not exist, but we have a tag");const Ln=function gi(){return w++}();f.queryToTagMap.set(qt,Ln),f.tagToQueryMap.set(Ln,qt)}let Ot=function fo(f,c,d,v,A,k){const H=rs(f,c,v,A,k);return f.views.has(c._queryIdentifier)||f.views.set(c._queryIdentifier,H),function Du(f,c){f.eventRegistrations_.push(c)}(H,d),function od(f,c){const d=f.viewCache_.eventCache,v=[];return d.getNode().isLeafNode()||d.getNode().forEachChild(Lr,(k,H)=>{v.push(W(k,H))}),d.isFullyInitialized()&&v.push(D(d.getNode())),ma(f,v,d.getNode(),c)}(H,d)}(ie,c,d,wi(f.pendingWriteTree_,A),k,ve);if(!je&&!H&&!v){const qt=ys(ie,c);Ot=Ot.concat(function po(f,c,d){const v=c._path,A=Wn(f,c),k=bn(f,d),H=f.listenProvider_.startListening(ya(c),A,k.hashFn,k.onComplete),ie=f.syncPointTree_.subtree(v);if(A)(0,z.hu)(!to(ie.value),"If we're adding a query, it shouldn't be shadowed");else{const ve=ie.fold((je,Lt,Ot)=>{if(!qn(je)&&Lt&&to(Lt))return[ki(Lt).query];{let qt=[];return Lt&&(qt=qt.concat(Ua(Lt).map(Ln=>Ln.query))),An(Ot,(Ln,ar)=>{qt=qt.concat(ar)}),qt}});for(let je=0;je<ve.length;++je){const Lt=ve[je];f.listenProvider_.stopListening(ya(Lt),Wn(f,Lt))}}return H}(f,c,qt))}return Ot}function te(f,c,d){const A=f.pendingWriteTree_,k=f.syncPointTree_.findOnPath(c,(H,ie)=>{const je=zs(ie,ni(H,c));if(je)return je});return kl(A,c,k,d,!0)}function ut(f,c){return Et(c,f.syncPointTree_,null,wi(f.pendingWriteTree_,Yn()))}function Et(f,c,d,v){if(qn(f.path))return Jt(f,c,d,v);{const A=c.get(Yn());null==d&&null!=A&&(d=zs(A,Yn()));let k=[];const H=Bn(f.path),ie=f.operationForChild(H),ve=c.children.get(H);if(ve&&ie){const je=d?d.getImmediateChild(H):null,Lt=ms(v,H);k=k.concat(Et(ie,ve,je,Lt))}return A&&(k=k.concat(ul(A,f,v,d))),k}}function Jt(f,c,d,v){const A=c.get(Yn());null==d&&null!=A&&(d=zs(A,Yn()));let k=[];return c.children.inorderTraversal((H,ie)=>{const ve=d?d.getImmediateChild(H):null,je=ms(v,H),Lt=f.operationForChild(H);Lt&&(k=k.concat(Jt(Lt,ie,ve,je)))}),A&&(k=k.concat(ul(A,f,v,d))),k}function bn(f,c){const d=c.query,v=Wn(f,d);return{hashFn:()=>(function vi(f){return f.viewCache_.serverCache.getNode()}(c)||Jn.EMPTY_NODE).hash(),onComplete:A=>{if("ok"===A)return v?function Cn(f,c,d){const v=Mr(f,d);if(v){const A=nr(v),k=A.path,H=A.queryId,ie=ni(k,c);return no(f,k,new Xr(Vi(H),ie))}return[]}(f,d._path,v):function on(f,c){return ut(f,new Xr({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c))}(f,d._path);{const k=function yi(f,c){let d="Unknown Error";"too_big"===f?d="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===f?d="Client doesn't have permission to access the desired data.":"unavailable"===f&&(d="The service is unavailable");const v=new Error(f+" at "+c._path.toString()+": "+d);return v.code=f.toUpperCase(),v}(A,d);return _n(f,d,null,k)}}}}function Wn(f,c){const d=tr(c);return f.queryToTagMap.get(d)}function tr(f){return f._path.toString()+"$"+f._queryIdentifier}function Mr(f,c){return f.tagToQueryMap.get(c)}function nr(f){const c=f.indexOf("$");return(0,z.hu)(-1!==c&&c<f.length-1,"Bad queryKey."),{queryId:f.substr(c+1),path:new br(f.substr(0,c))}}function no(f,c,d){const v=f.syncPointTree_.get(c);return(0,z.hu)(v,"Missing sync point for query tag that we're tracking"),ul(v,d,wi(f.pendingWriteTree_,c),null)}function ya(f){return f._queryParams.loadsAllData()&&!f._queryParams.isDefault()?new(function x(){return(0,z.hu)(Qi,"Reference.ts has not been loaded"),Qi}())(f._repo,f._path):f}class Jo{constructor(c){this.node_=c}getImmediateChild(c){const d=this.node_.getImmediateChild(c);return new Jo(d)}node(){return this.node_}}class cl{constructor(c,d){this.syncTree_=c,this.path_=d}getImmediateChild(c){const d=Fr(this.path_,c);return new cl(this.syncTree_,d)}node(){return te(this.syncTree_,this.path_)}}const Zu=function(f){return(f=f||{}).timestamp=f.timestamp||(new Date).getTime(),f},Qu=function(f,c,d){return f&&"object"==typeof f?((0,z.hu)(".sv"in f,"Unexpected leaf node or priority contents"),"string"==typeof f[".sv"]?Gd(f[".sv"],c,d):"object"==typeof f[".sv"]?Xu(f[".sv"],c):void(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2))):f},Gd=function(f,c,d){if("timestamp"===f)return d.timestamp;(0,z.hu)(!1,"Unexpected server value: "+f)},Xu=function(f,c,d){f.hasOwnProperty("increment")||(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2));const v=f.increment;"number"!=typeof v&&(0,z.hu)(!1,"Unexpected increment value: "+v);const A=c.node();if((0,z.hu)(null!==A&&typeof A<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!A.isLeafNode())return v;const H=A.getValue();return"number"!=typeof H?v:H+v},zd=function(f,c,d,v){return ad(c,new cl(d,f),v)},Mc=function(f,c,d){return ad(f,new Jo(c),d)};function ad(f,c,d){const v=f.getPriority().val(),A=Qu(v,c.getImmediateChild(".priority"),d);let k;if(f.isLeafNode()){const H=f,ie=Qu(H.getValue(),c,d);return ie!==H.getValue()||A!==H.getPriority().val()?new ui(ie,Vr(A)):f}{const H=f;return k=H,A!==H.getPriority().val()&&(k=k.updatePriority(new ui(A))),H.forEachChild(Lr,(ie,ve)=>{const je=ad(ve,c.getImmediateChild(ie),d);je!==ve&&(k=k.updateImmediateChild(ie,je))}),k}}class ld{constructor(c="",d=null,v={children:{},childCount:0}){this.name=c,this.parent=d,this.node=v}}function Bl(f,c){let d=c instanceof br?c:new br(c),v=f,A=Bn(d);for(;null!==A;){const k=(0,z.DV)(v.node.children,A)||{children:{},childCount:0};v=new ld(A,v,k),d=Br(d),A=Bn(d)}return v}function bl(f){return f.node.value}function ud(f,c){f.node.value=c,Ws(f)}function Ph(f){return f.node.childCount>0}function Vl(f,c){An(f.node.children,(d,v)=>{c(new ld(d,f,v))})}function Nh(f,c,d,v){d&&!v&&c(f),Vl(f,A=>{Nh(A,c,!0,v)}),d&&v&&c(f)}function ou(f){return new br(null===f.parent?f.name:ou(f.parent)+"/"+f.name)}function Ws(f){null!==f.parent&&function Ki(f,c,d){const v=function cd(f){return void 0===bl(f)&&!Ph(f)}(d),A=(0,z.r3)(f.node.children,c);v&&A?(delete f.node.children[c],f.node.childCount--,Ws(f)):!v&&!A&&(f.node.children[c]=d.node,f.node.childCount++,Ws(f))}(f.parent,f.name,f)}const dd=/[\[\].#$\/\u0000-\u001F\u007F]/,Ul=/[\[\].#$\u0000-\u001F\u007F]/,Mo=10485760,Ss=function(f){return"string"==typeof f&&0!==f.length&&!dd.test(f)},Ju=function(f){return"string"==typeof f&&0!==f.length&&!Ul.test(f)},ec=function(f){return null===f||"string"==typeof f||"number"==typeof f&&!Wt(f)||f&&"object"==typeof f&&(0,z.r3)(f,".sv")},Ta=function(f,c,d,v){v&&void 0===c||ja((0,z.gK)(f,"value"),c,d)},ja=function(f,c,d){const v=d instanceof br?new Es(d,f):d;if(void 0===c)throw new Error(f+"contains undefined "+Qs(v));if("function"==typeof c)throw new Error(f+"contains a function "+Qs(v)+" with contents = "+c.toString());if(Wt(c))throw new Error(f+"contains "+c.toString()+" "+Qs(v));if("string"==typeof c&&c.length>Mo/3&&(0,z.ug)(c)>Mo)throw new Error(f+"contains a string greater than "+Mo+" utf8 bytes "+Qs(v)+" ('"+c.substring(0,50)+"...')");if(c&&"object"==typeof c){let A=!1,k=!1;if(An(c,(H,ie)=>{if(".value"===H)A=!0;else if(".priority"!==H&&".sv"!==H&&(k=!0,!Ss(H)))throw new Error(f+" contains an invalid key ("+H+") "+Qs(v)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Is(f,c){f.parts_.length>0&&(f.byteLength_+=1),f.parts_.push(c),f.byteLength_+=(0,z.ug)(c),ss(f)})(v,H),ja(f,ie,v),function Zs(f){const c=f.parts_.pop();f.byteLength_-=(0,z.ug)(c),f.parts_.length>0&&(f.byteLength_-=1)}(v)}),A&&k)throw new Error(f+' contains ".value" child '+Qs(v)+" in addition to actual children.")}},au=function(f,c,d,v){if(v&&void 0===c)return;const A=(0,z.gK)(f,"values");if(!c||"object"!=typeof c||Array.isArray(c))throw new Error(A+" must be an object containing the children to replace.");const k=[];An(c,(H,ie)=>{const ve=new br(H);if(ja(A,ie,Fr(d,ve)),".priority"===ds(ve)&&!ec(ie))throw new Error(A+"contains an invalid value for '"+ve.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");k.push(ve)}),function(f,c){let d,v;for(d=0;d<c.length;d++){v=c[d];const k=Ys(v);for(let H=0;H<k.length;H++)if((".priority"!==k[H]||H!==k.length-1)&&!Ss(k[H]))throw new Error(f+"contains an invalid key ("+k[H]+") in path "+v.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}c.sort(Io);let A=null;for(d=0;d<c.length;d++){if(v=c[d],null!==A&&zi(A,v))throw new Error(f+"contains a path "+A.toString()+" that is ancestor of another path "+v.toString());A=v}}(A,k)},Hl=function(f,c,d){if(!d||void 0!==c){if(Wt(c))throw new Error((0,z.gK)(f,"priority")+"is "+c.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ec(c))throw new Error((0,z.gK)(f,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Su=function(f,c,d,v){if(!(v&&void 0===d||Ss(d)))throw new Error((0,z.gK)(f,c)+'was an invalid key = "'+d+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},lu=function(f,c,d,v){if(!(v&&void 0===d||Ju(d)))throw new Error((0,z.gK)(f,c)+'was an invalid path = "'+d+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},dl=function(f,c,d,v){d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),lu(f,c,d,v)},ea=function(f,c){if(".info"===Bn(c))throw new Error(f+" failed = Can't modify data under /.info/")},uu=function(f,c){const d=c.path.toString();if("string"!=typeof c.repoInfo.host||0===c.repoInfo.host.length||!Ss(c.repoInfo.namespace)&&"localhost"!==c.repoInfo.host.split(":")[0]||0!==d.length&&!function(f){return f&&(f=f.replace(/^\/*\.info(\/|$)/,"/")),Ju(f)}(d))throw new Error((0,z.gK)(f,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class zo{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Dl(f,c){let d=null;for(let v=0;v<c.length;v++){const A=c[v],k=A.getPath();null!==d&&!qs(k,d.path)&&(f.eventLists_.push(d),d=null),null===d&&(d={events:[],path:k}),d.events.push(A)}d&&f.eventLists_.push(d)}function Au(f,c,d){Dl(f,d),vs(f,v=>qs(v,c))}function Ro(f,c,d){Dl(f,d),vs(f,v=>zi(v,c)||zi(c,v))}function vs(f,c){f.recursionDepth_++;let d=!0;for(let v=0;v<f.eventLists_.length;v++){const A=f.eventLists_[v];A&&(c(A.path)?(io(f.eventLists_[v]),f.eventLists_[v]=null):d=!1)}d&&(f.eventLists_=[]),f.recursionDepth_--}function io(f){for(let c=0;c<f.events.length;c++){const d=f.events[c];if(null!==d){f.events[c]=null;const v=d.getEventRunner();En&&Zt("event: "+d.toString()),Nn(v)}}}const tc="repo_interrupt",xu=25;class nc{constructor(c,d,v,A){this.repoInfo_=c,this.forceRestClient_=d,this.authTokenProvider_=v,this.appCheckProvider_=A,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zo,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sa(),this.transactionQueueTree_=new ld,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function hl(f){const d=f.infoData_.getNode(new br(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+d}function fl(f){return Zu({timestamp:hl(f)})}function hd(f,c,d,v,A){f.dataUpdateCount++;const k=new br(c);d=f.interceptServerDataCallback_?f.interceptServerDataCallback_(c,d):d;let H=[];if(A)if(v){const ve=(0,z.UI)(d,je=>Vr(je));H=function F(f,c,d,v){const A=Mr(f,v);if(A){const k=nr(A),H=k.path,ie=k.queryId,ve=ni(H,c),je=un.fromObject(d);return no(f,H,new bi(Vi(ie),ve,je))}return[]}(f.serverSyncTree_,k,ve,A)}else{const ve=Vr(d);H=Hr(f.serverSyncTree_,k,ve,A)}else if(v){const ve=(0,z.UI)(d,je=>Vr(je));H=function Tt(f,c,d){const v=un.fromObject(d);return ut(f,new bi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,v))}(f.serverSyncTree_,k,ve)}else{const ve=Vr(d);H=Qe(f.serverSyncTree_,k,ve)}let ie=k;H.length>0&&(ie=xa(f,k)),Ro(f.eventQueue_,ie,H)}function Mu(f,c){Ru(f,"connected",c),!1===c&&function Fh(f){xl(f,"onDisconnectEvents");const c=fl(f),d=sa();Za(f.onDisconnect_,Yn(),(A,k)=>{const H=zd(A,k,f.serverSyncTree_,c);jo(d,A,H)});let v=[];Za(d,Yn(),(A,k)=>{v=v.concat(Qe(f.serverSyncTree_,A,k));const H=zl(f,A);xa(f,H)}),f.onDisconnect_=sa(),Ro(f.eventQueue_,Yn(),v)}(f)}function Ru(f,c,d){const v=new br("/.info/"+c),A=Vr(d);f.infoData_.updateSnapshot(v,A);const k=Qe(f.infoSyncTree_,v,A);Ro(f.eventQueue_,v,k)}function cu(f){return f.nextWriteId_++}function Gl(f,c,d,v,A){xl(f,"set",{path:c.toString(),value:d,priority:v});const k=fl(f),H=Vr(d,v),ie=te(f.serverSyncTree_,c),ve=Mc(H,ie,k),je=cu(f),Lt=V(f.serverSyncTree_,c,ve,je,!0);Dl(f.eventQueue_,Lt),f.server_.put(c.toString(),H.val(!0),(qt,Ln)=>{const ar="ok"===qt;ar||hn("set at "+c+" failed: "+qt);const Ti=ne(f.serverSyncTree_,je,!ar);Ro(f.eventQueue_,c,Ti),Aa(0,A,qt,Ln)});const Ot=zl(f,c);xa(f,Ot),Ro(f.eventQueue_,Ot,[])}function Oc(f,c,d){f.server_.onDisconnectCancel(c.toString(),(v,A)=>{"ok"===v&&To(f.onDisconnect_,c),Aa(0,d,v,A)})}function Tl(f,c,d,v){const A=Vr(d);f.server_.onDisconnectPut(c.toString(),A.val(!0),(k,H)=>{"ok"===k&&jo(f.onDisconnect_,c,A),Aa(0,v,k,H)})}function Ou(f,c,d){let v;v=".info"===Bn(c._path)?_n(f.infoSyncTree_,c,d):_n(f.serverSyncTree_,c,d),Au(f.eventQueue_,c._path,v)}function Al(f){f.persistentConnection_&&f.persistentConnection_.interrupt(tc)}function xl(f,...c){let d="";f.persistentConnection_&&(d=f.persistentConnection_.id+":"),Zt(d,...c)}function Aa(f,c,d,v){c&&Nn(()=>{if("ok"===d)c(null);else{const A=(d||"error").toUpperCase();let k=A;v&&(k+=": "+v);const H=new Error(k);H.code=A,c(H)}})}function ic(f,c,d){return te(f.serverSyncTree_,c,d)||Jn.EMPTY_NODE}function Xi(f,c=f.transactionQueueTree_){if(c||oc(f,c),bl(c)){const d=du(f,c);(0,z.hu)(d.length>0,"Sending zero length transaction queue"),d.every(A=>0===A.status)&&function Nc(f,c,d){const v=d.map(je=>je.currentWriteId),A=ic(f,c,v);let k=A;const H=A.hash();for(let je=0;je<d.length;je++){const Lt=d[je];(0,z.hu)(0===Lt.status,"tryToSendTransactionQueue_: items in queue should all be run."),Lt.status=1,Lt.retryCount++;const Ot=ni(c,Lt.path);k=k.updateChild(Ot,Lt.currentOutputSnapshotRaw)}const ie=k.val(!0),ve=c;f.server_.put(ve.toString(),ie,je=>{xl(f,"transaction put response",{path:ve.toString(),status:je});let Lt=[];if("ok"===je){const Ot=[];for(let qt=0;qt<d.length;qt++)d[qt].status=2,Lt=Lt.concat(ne(f.serverSyncTree_,d[qt].currentWriteId)),d[qt].onComplete&&Ot.push(()=>d[qt].onComplete(null,!0,d[qt].currentOutputSnapshotResolved)),d[qt].unwatcher();oc(f,Bl(f.transactionQueueTree_,c)),Xi(f,f.transactionQueueTree_),Ro(f.eventQueue_,c,Lt);for(let qt=0;qt<Ot.length;qt++)Nn(Ot[qt])}else{if("datastale"===je)for(let Ot=0;Ot<d.length;Ot++)d[Ot].status=3===d[Ot].status?4:0;else{hn("transaction at "+ve.toString()+" failed: "+je);for(let Ot=0;Ot<d.length;Ot++)d[Ot].status=4,d[Ot].abortReason=je}xa(f,c)}},H)}(f,ou(c),d)}else Ph(c)&&Vl(c,d=>{Xi(f,d)})}function xa(f,c){const d=kc(f,c),v=ou(d);return function gd(f,c,d){if(0===c.length)return;const v=[];let A=[];const H=c.filter(ie=>0===ie.status).map(ie=>ie.currentWriteId);for(let ie=0;ie<c.length;ie++){const ve=c[ie],je=ni(d,ve.path);let Ot,Lt=!1;if((0,z.hu)(null!==je,"rerunTransactionsUnderNode_: relativePath should not be null."),4===ve.status)Lt=!0,Ot=ve.abortReason,A=A.concat(ne(f.serverSyncTree_,ve.currentWriteId,!0));else if(0===ve.status)if(ve.retryCount>=xu)Lt=!0,Ot="maxretry",A=A.concat(ne(f.serverSyncTree_,ve.currentWriteId,!0));else{const qt=ic(f,ve.path,H);ve.currentInputSnapshot=qt;const Ln=c[ie].update(qt.val());if(void 0!==Ln){ja("transaction failed: Data returned ",Ln,ve.path);let ar=Vr(Ln);"object"==typeof Ln&&null!=Ln&&(0,z.r3)(Ln,".priority")||(ar=ar.updatePriority(qt.getPriority()));const _s=ve.currentWriteId,Ia=fl(f),Zl=Mc(ar,qt,Ia);ve.currentOutputSnapshotRaw=ar,ve.currentOutputSnapshotResolved=Zl,ve.currentWriteId=cu(f),H.splice(H.indexOf(_s),1),A=A.concat(V(f.serverSyncTree_,ve.path,Zl,ve.currentWriteId,ve.applyLocally)),A=A.concat(ne(f.serverSyncTree_,_s,!0))}else Lt=!0,Ot="nodata",A=A.concat(ne(f.serverSyncTree_,ve.currentWriteId,!0))}Ro(f.eventQueue_,d,A),A=[],Lt&&(c[ie].status=2,setTimeout(c[ie].unwatcher,Math.floor(0)),c[ie].onComplete&&v.push("nodata"===Ot?()=>c[ie].onComplete(null,!1,c[ie].currentInputSnapshot):()=>c[ie].onComplete(new Error(Ot),!1,null)))}oc(f,f.transactionQueueTree_);for(let ie=0;ie<v.length;ie++)Nn(v[ie]);Xi(f,f.transactionQueueTree_)}(f,du(f,d),v),v}function kc(f,c){let d,v=f.transactionQueueTree_;for(d=Bn(c);null!==d&&void 0===bl(v);)v=Bl(v,d),d=Bn(c=Br(c));return v}function du(f,c){const d=[];return sc(f,c,d),d.sort((v,A)=>v.order-A.order),d}function sc(f,c,d){const v=bl(c);if(v)for(let A=0;A<v.length;A++)d.push(v[A]);Vl(c,A=>{sc(f,A,d)})}function oc(f,c){const d=bl(c);if(d){let v=0;for(let A=0;A<d.length;A++)2!==d[A].status&&(d[v]=d[A],v++);d.length=v,ud(c,d.length>0?d:void 0)}Vl(c,v=>{oc(f,v)})}function zl(f,c){const d=ou(kc(f,c)),v=Bl(f.transactionQueueTree_,c);return function Ns(f,c,d){let v=d?f:f.parent;for(;null!==v;){if(c(v))return!0;v=v.parent}}(v,A=>{Ma(f,A)}),Ma(f,v),Nh(v,A=>{Ma(f,A)}),d}function Ma(f,c){const d=bl(c);if(d){const v=[];let A=[],k=-1;for(let H=0;H<d.length;H++)3===d[H].status||(1===d[H].status?((0,z.hu)(k===H-1,"All SENT items should be at beginning of queue."),k=H,d[H].status=3,d[H].abortReason="set"):((0,z.hu)(0===d[H].status,"Unexpected transaction status in abort"),d[H].unwatcher(),A=A.concat(ne(f.serverSyncTree_,d[H].currentWriteId,!0)),d[H].onComplete&&v.push(d[H].onComplete.bind(null,new Error("set"),!1,null))));-1===k?ud(c,void 0):d.length=k+1,Ro(f.eventQueue_,ou(c),A);for(let H=0;H<v.length;H++)Nn(v[H])}}const ac=function(f,c){const d=Wl(f),v=d.namespace;return"firebase.com"===d.domain&&lr(d.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!v||"undefined"===v)&&"localhost"!==d.domain&&lr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),d.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&hn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new me(d.host,d.secure,v,"ws"===d.scheme||"wss"===d.scheme,c,"",v!==d.subdomain),path:new br(d.pathString)}},Wl=function(f){let c="",d="",v="",A="",k="",H=!0,ie="https",ve=443;if("string"==typeof f){let je=f.indexOf("//");je>=0&&(ie=f.substring(0,je-1),f=f.substring(je+2));let Lt=f.indexOf("/");-1===Lt&&(Lt=f.length);let Ot=f.indexOf("?");-1===Ot&&(Ot=f.length),c=f.substring(0,Math.min(Lt,Ot)),Lt<Ot&&(A=function md(f){let c="";const d=f.split("/");for(let v=0;v<d.length;v++)if(d[v].length>0){let A=d[v];try{A=decodeURIComponent(A.replace(/\+/g," "))}catch(k){}c+="/"+A}return c}(f.substring(Lt,Ot)));const qt=function Ra(f){const c={};"?"===f.charAt(0)&&(f=f.substring(1));for(const d of f.split("&")){if(0===d.length)continue;const v=d.split("=");2===v.length?c[decodeURIComponent(v[0])]=decodeURIComponent(v[1]):hn(`Invalid query segment '${d}' in query '${f}'`)}return c}(f.substring(Math.min(f.length,Ot)));je=c.indexOf(":"),je>=0?(H="https"===ie||"wss"===ie,ve=parseInt(c.substring(je+1),10)):je=c.length;const Ln=c.slice(0,je);if("localhost"===Ln.toLowerCase())d="localhost";else if(Ln.split(".").length<=2)d=Ln;else{const ar=c.indexOf(".");v=c.substring(0,ar).toLowerCase(),d=c.substring(ar+1),k=v}"ns"in qt&&(k=qt.ns)}return{host:c,port:ve,domain:d,subdomain:v,secure:H,scheme:ie,pathString:A,namespace:k}},Fc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",xf=function(){let f=0;const c=[];return function(d){const v=d===f;let A;f=d;const k=new Array(8);for(A=7;A>=0;A--)k[A]=Fc.charAt(d%64),d=Math.floor(d/64);(0,z.hu)(0===d,"Cannot push at time == 0");let H=k.join("");if(v){for(A=11;A>=0&&63===c[A];A--)c[A]=0;c[A]++}else for(A=0;A<12;A++)c[A]=Math.floor(64*Math.random());for(A=0;A<12;A++)H+=Fc.charAt(c[A]);return(0,z.hu)(20===H.length,"nextPushId: Length should be 20."),H}}();class us{constructor(c,d,v,A){this.eventType=c,this.eventRegistration=d,this.snapshot=v,this.prevName=A}getPath(){const c=this.snapshot.ref;return"value"===this.eventType?c._path:c.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,z.Wl)(this.snapshot.exportVal())}}class mi{constructor(c,d,v){this.eventRegistration=c,this.error=d,this.path=v}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Pu{constructor(c,d){this.snapshotCallback=c,this.cancelCallback=d}onValue(c,d){this.snapshotCallback.call(null,c,d)}onCancel(c){return(0,z.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,c)}get hasCancelCallback(){return!!this.cancelCallback}matches(c){return this.snapshotCallback===c.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===c.snapshotCallback.userCallback&&this.snapshotCallback.context===c.snapshotCallback.context}}class Nu{constructor(c,d){this._repo=c,this._path=d}cancel(){const c=new z.BH;return Oc(this._repo,this._path,c.wrapCallback(()=>{})),c.promise}remove(){ea("OnDisconnect.remove",this._path);const c=new z.BH;return Tl(this._repo,this._path,null,c.wrapCallback(()=>{})),c.promise}set(c){ea("OnDisconnect.set",this._path),Ta("OnDisconnect.set",c,this._path,!1);const d=new z.BH;return Tl(this._repo,this._path,c,d.wrapCallback(()=>{})),d.promise}setWithPriority(c,d){ea("OnDisconnect.setWithPriority",this._path),Ta("OnDisconnect.setWithPriority",c,this._path,!1),Hl("OnDisconnect.setWithPriority",d,!1);const v=new z.BH;return function Sl(f,c,d,v,A){const k=Vr(d,v);f.server_.onDisconnectPut(c.toString(),k.val(!0),(H,ie)=>{"ok"===H&&jo(f.onDisconnect_,c,k),Aa(0,A,H,ie)})}(this._repo,this._path,c,d,v.wrapCallback(()=>{})),v.promise}update(c){ea("OnDisconnect.update",this._path),au("OnDisconnect.update",c,this._path,!1);const d=new z.BH;return function fd(f,c,d,v){if((0,z.xb)(d))return Zt("onDisconnect().update() called with empty data.  Don't do anything."),void Aa(0,v,"ok",void 0);f.server_.onDisconnectMerge(c.toString(),d,(A,k)=>{"ok"===A&&An(d,(H,ie)=>{const ve=Vr(ie);jo(f.onDisconnect_,Fr(c,H),ve)}),Aa(0,v,A,k)})}(this._repo,this._path,c,d.wrapCallback(()=>{})),d.promise}}class cs{constructor(c,d,v,A){this._repo=c,this._path=d,this._queryParams=v,this._orderByCalled=A}get key(){return qn(this._path)?null:ds(this._path)}get ref(){return new so(this._repo,this._path)}get _queryIdentifier(){const c=Fa(this._queryParams),d=yn(c);return"{}"===d?"default":d}get _queryObject(){return Fa(this._queryParams)}isEqual(c){if(!((c=(0,z.m9)(c))instanceof cs))return!1;const d=this._repo===c._repo,v=qs(this._path,c._path);return d&&v&&this._queryIdentifier===c._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Gi(f){let c="";for(let d=f.pieceNum_;d<f.pieces_.length;d++)""!==f.pieces_[d]&&(c+="/"+encodeURIComponent(String(f.pieces_[d])));return c||"/"}(this._path)}}function hu(f,c){if(!0===f._orderByCalled)throw new Error(c+": You can't combine multiple orderBy calls.")}function As(f){let c=null,d=null;if(f.hasStart()&&(c=f.getIndexStartValue()),f.hasEnd()&&(d=f.getIndexEndValue()),f.getIndex()===xi){const v="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",A="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(f.hasStart()){if(f.getIndexStartName()!==Cr)throw new Error(v);if("string"!=typeof c)throw new Error(A)}if(f.hasEnd()){if(f.getIndexEndName()!==Er)throw new Error(v);if("string"!=typeof d)throw new Error(A)}}else if(f.getIndex()===Lr){if(null!=c&&!ec(c)||null!=d&&!ec(d))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,z.hu)(f.getIndex()instanceof g||f.getIndex()===h,"unknown index type."),null!=c&&"object"==typeof c||null!=d&&"object"==typeof d)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function pl(f){if(f.hasStart()&&f.hasEnd()&&f.hasLimit()&&!f.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class so extends cs{constructor(c,d){super(c,d,new pr,!1)}get parent(){const c=Eo(this._path);return null===c?null:new so(this._repo,c)}get root(){let c=this;for(;null!==c.parent;)c=c.parent;return c}}class ks{constructor(c,d,v){this._node=c,this.ref=d,this._index=v}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(c){const d=new br(c),v=va(this.ref,c);return new ks(this._node.getChild(d),v,Lr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(c){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(v,A)=>c(new ks(A,va(this.ref,v),Lr)))}hasChild(c){const d=new br(c);return!this._node.getChild(d).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Oo(f,c){return(f=(0,z.m9)(f))._checkNotDeleted("ref"),void 0!==c?va(f._root,c):f._root}function ku(f,c){(f=(0,z.m9)(f))._checkNotDeleted("refFromURL");const d=ac(c,f._repo.repoInfo_.nodeAdmin);uu("refFromURL",d);const v=d.repoInfo;return!f._repo.repoInfo_.isCustomHost()&&v.host!==f._repo.repoInfo_.host&&lr("refFromURL: Host name does not match the current database: (found "+v.host+" but expected "+f._repo.repoInfo_.host+")"),Oo(f,d.path.toString())}function va(f,c){return null===Bn((f=(0,z.m9)(f))._path)?dl("child","path",c,!1):lu("child","path",c,!1),new so(f._repo,Fr(f._path,c))}function Lc(f,c){f=(0,z.m9)(f),ea("set",f._path),Ta("set",c,f._path,!1);const d=new z.BH;return Gl(f._repo,f._path,c,null,d.wrapCallback(()=>{})),d.promise}function fu(f,c){au("update",c,f._path,!1);const d=new z.BH;return function rc(f,c,d,v){xl(f,"update",{path:c.toString(),value:d});let A=!0;const k=fl(f),H={};if(An(d,(ie,ve)=>{A=!1,H[ie]=zd(Fr(c,ie),Vr(ve),f.serverSyncTree_,k)}),A)Zt("update() called with empty data.  Don't do anything."),Aa(0,v,"ok",void 0);else{const ie=cu(f),ve=function X(f,c,d,v){!function tl(f,c,d,v){(0,z.hu)(v>f.lastWriteId,"Stacking an older merge on top of newer ones"),f.allWrites.push({path:c,children:d,writeId:v,visible:!0}),f.visibleWrites=er(f.visibleWrites,c,d),f.lastWriteId=v}(f.pendingWriteTree_,c,d,v);const A=un.fromObject(d);return ut(f,new bi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},c,A))}(f.serverSyncTree_,c,H,ie);Dl(f.eventQueue_,ve),f.server_.merge(c.toString(),d,(je,Lt)=>{const Ot="ok"===je;Ot||hn("update at "+c+" failed: "+je);const qt=ne(f.serverSyncTree_,ie,!Ot),Ln=qt.length>0?xa(f,c):c;Ro(f.eventQueue_,Ln,qt),Aa(0,v,je,Lt)}),An(d,je=>{const Lt=zl(f,Fr(c,je));xa(f,Lt)}),Ro(f.eventQueue_,c,[])}}(f._repo,f._path,c,d.wrapCallback(()=>{})),d.promise}function lc(f){f=(0,z.m9)(f);const c=new Pu(()=>{}),d=new Ml(c);return function Rc(f,c,d){const v=function Se(f,c){const d=c._path;let v=null;f.syncPointTree_.foreachOnPath(d,(je,Lt)=>{const Ot=ni(je,d);v=v||zs(Lt,Ot)});let A=f.syncPointTree_.get(d);A?v=v||zs(A,Yn()):(A=new ll,f.syncPointTree_=f.syncPointTree_.set(d,A));const k=null!=v,H=k?new aa(v,!0,!1):null;return function Va(f){return re(f.viewCache_)}(rs(A,c,wi(f.pendingWriteTree_,c._path),k?H.getNode():Jn.EMPTY_NODE,k))}(f.serverSyncTree_,c);return null!=v?Promise.resolve(v):f.server_.get(c).then(A=>{const k=Vr(A).withIndex(c._queryParams.getIndex());let H;if(U(f.serverSyncTree_,c,d,!0),c._queryParams.loadsAllData())H=Qe(f.serverSyncTree_,c._path,k);else{const ie=Wn(f.serverSyncTree_,c);H=Hr(f.serverSyncTree_,c._path,k,ie)}return Ro(f.eventQueue_,c._path,H),_n(f.serverSyncTree_,c,d,null,!0),k},A=>(xl(f,"get for query "+(0,z.Wl)(c)+" failed: "+A),Promise.reject(new Error(A))))}(f._repo,f,d).then(v=>new ks(v,new so(f._repo,f._path),f._queryParams.getIndex()))}class Ml{constructor(c){this.callbackContext=c}respondsTo(c){return"value"===c}createEvent(c,d){const v=d._queryParams.getIndex();return new us("value",this,new ks(c.snapshotNode,new so(d._repo,d._path),v))}getEventRunner(c){return"cancel"===c.getEventType()?()=>this.callbackContext.onCancel(c.error):()=>this.callbackContext.onValue(c.snapshot,null)}createCancelEvent(c,d){return this.callbackContext.hasCancelCallback?new mi(this,c,d):null}matches(c){return c instanceof Ml&&(!c.callbackContext||!this.callbackContext||c.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class pu{constructor(c,d){this.eventType=c,this.callbackContext=d}respondsTo(c){let d="children_added"===c?"child_added":c;return d="children_removed"===d?"child_removed":d,this.eventType===d}createCancelEvent(c,d){return this.callbackContext.hasCancelCallback?new mi(this,c,d):null}createEvent(c,d){(0,z.hu)(null!=c.childName,"Child events should have a childName.");const v=va(new so(d._repo,d._path),c.childName),A=d._queryParams.getIndex();return new us(c.type,this,new ks(c.snapshotNode,v,A),c.prevName)}getEventRunner(c){return"cancel"===c.getEventType()?()=>this.callbackContext.onCancel(c.error):()=>this.callbackContext.onValue(c.snapshot,c.prevName)}matches(c){return c instanceof pu&&this.eventType===c.eventType&&(!this.callbackContext||!c.callbackContext||this.callbackContext.matches(c.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Pa(f,c,d,v,A){let k;if("object"==typeof v&&(k=void 0,A=v),"function"==typeof v&&(k=v),A&&A.onlyOnce){const ve=d,je=(Lt,Ot)=>{Ou(f._repo,f,ie),ve(Lt,Ot)};je.userCallback=d.userCallback,je.context=d.context,d=je}const H=new Pu(d,k||void 0),ie="value"===c?new Ml(H):new pu(c,H);return function Sa(f,c,d){let v;v=".info"===Bn(c._path)?U(f.infoSyncTree_,c,d):U(f.serverSyncTree_,c,d),Au(f.eventQueue_,c._path,v)}(f._repo,f,ie),()=>Ou(f._repo,f,ie)}function Wo(f,c,d,v){return Pa(f,"value",c,d,v)}function uc(f,c,d,v){return Pa(f,"child_added",c,d,v)}function Bc(f,c,d,v){return Pa(f,"child_changed",c,d,v)}function Kd(f,c,d,v){return Pa(f,"child_moved",c,d,v)}function Na(f,c,d,v){return Pa(f,"child_removed",c,d,v)}function Lu(f,c,d){let v=null;const A=d?new Pu(d):null;"value"===c?v=new Ml(A):c&&(v=new pu(c,A)),Ou(f._repo,f,v)}class _a{}class Ha extends _a{constructor(c,d){super(),this._value=c,this._key=d}_apply(c){Ta("endAt",this._value,c._path,!0);const d=Do(c._queryParams,this._value,this._key);if(pl(d),As(d),c._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new cs(c._repo,c._path,d,c._orderByCalled)}}class Uc extends _a{constructor(c,d){super(),this._value=c,this._key=d}_apply(c){Ta("endBefore",this._value,c._path,!1);const d=function eo(f,c,d){let v;return v=Do(f,c,f.index_===xi||d?d:Cr),v.endBeforeSet_=!0,v}(c._queryParams,this._value,this._key);if(pl(d),As(d),c._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new cs(c._repo,c._path,d,c._orderByCalled)}}class cc extends _a{constructor(c,d){super(),this._value=c,this._key=d}_apply(c){Ta("startAt",this._value,c._path,!0);const d=Ci(c._queryParams,this._value,this._key);if(pl(d),As(d),c._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new cs(c._repo,c._path,d,c._orderByCalled)}}class dc extends _a{constructor(c,d){super(),this._value=c,this._key=d}_apply(c){Ta("startAfter",this._value,c._path,!1);const d=function bo(f,c,d){let v;return v=Ci(f,c,f.index_===xi||d?d:Er),v.startAfterSet_=!0,v}(c._queryParams,this._value,this._key);if(pl(d),As(d),c._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new cs(c._repo,c._path,d,c._orderByCalled)}}class m extends _a{constructor(c){super(),this._limit=c}_apply(c){if(c._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new cs(c._repo,c._path,function gs(f,c){const d=f.copy();return d.limitSet_=!0,d.limit_=c,d.viewFrom_="l",d}(c._queryParams,this._limit),c._orderByCalled)}}class M extends _a{constructor(c){super(),this._limit=c}_apply(c){if(c._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new cs(c._repo,c._path,function ii(f,c){const d=f.copy();return d.limitSet_=!0,d.limit_=c,d.viewFrom_="r",d}(c._queryParams,this._limit),c._orderByCalled)}}class oe extends _a{constructor(c){super(),this._path=c}_apply(c){hu(c,"orderByChild");const d=new br(this._path);if(qn(d))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const v=new g(d),A=ia(c._queryParams,v);return As(A),new cs(c._repo,c._path,A,!0)}}class Vt extends _a{_apply(c){hu(c,"orderByKey");const d=ia(c._queryParams,xi);return As(d),new cs(c._repo,c._path,d,!0)}}class Un extends _a{_apply(c){hu(c,"orderByPriority");const d=ia(c._queryParams,Lr);return As(d),new cs(c._repo,c._path,d,!0)}}class yr extends _a{_apply(c){hu(c,"orderByValue");const d=ia(c._queryParams,h);return As(d),new cs(c._repo,c._path,d,!0)}}class Ea extends _a{constructor(c,d){super(),this._value=c,this._key=d}_apply(c){if(Ta("equalTo",this._value,c._path,!1),c._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(c._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ha(this._value,this._key)._apply(new cc(this._value,this._key)._apply(c))}}function ka(f,...c){let d=(0,z.m9)(f);for(const v of c)d=v._apply(d);return d}(function ci(f){(0,z.hu)(!al,"__referenceConstructor has already been defined"),al=f})(so),function S(f){(0,z.hu)(!Qi,"__referenceConstructor has already been defined"),Qi=f}(so);const jc="FIREBASE_DATABASE_EMULATOR_HOST",$u={};let Ga=!1;function za(f,c,d,v,A){let k=v||f.options.databaseURL;void 0===k&&(f.options.projectId||lr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Zt("Using default host for project ",f.options.projectId),k=`${f.options.projectId}-default-rtdb.firebaseio.com`);let ve,je,H=ac(k,A),ie=H.repoInfo;typeof process<"u"&&process.env&&(je=process.env[jc]),je?(ve=!0,k=`http://${je}?ns=${ie.namespace}`,H=ac(k,A),ie=H.repoInfo):ve=!H.repoInfo.secure;const Lt=A&&ve?new Tn(Tn.OWNER):new gn(f.name,f.options,c);uu("Invalid Firebase Database URL",H),qn(H.path)||lr("Database URL must point to the root of a Firebase Database (not including a child path).");const Ot=function fc(f,c,d,v){let A=$u[c.name];A||(A={},$u[c.name]=A);let k=A[f.toURLString()];return k&&lr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),k=new nc(f,Ga,d,v),A[f.toURLString()]=k,k}(ie,f,Lt,new $t(f.name,d));return new $h(Ot,f)}class $h{constructor(c,d){this._repoInternal=c,this.app=d,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Wd(f,c,d){if(f.stats_=fr(f.repoInfo_),f.forceRestClient_||hi())f.server_=new La(f.repoInfo_,(v,A,k,H)=>{hd(f,v,A,k,H)},f.authTokenProvider_,f.appCheckProvider_),setTimeout(()=>Mu(f,!0),0);else{if(typeof d<"u"&&null!==d){if("object"!=typeof d)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,z.Wl)(d)}catch(v){throw new Error("Invalid authOverride provided: "+v)}}f.persistentConnection_=new Ii(f.repoInfo_,c,(v,A,k,H)=>{hd(f,v,A,k,H)},v=>{Mu(f,v)},v=>{!function kh(f,c){An(c,(d,v)=>{Ru(f,d,v)})}(f,v)},f.authTokenProvider_,f.appCheckProvider_,d),f.server_=f.persistentConnection_}f.authTokenProvider_.addTokenChangeListener(v=>{f.server_.refreshAuthToken(v)}),f.appCheckProvider_.addTokenChangeListener(v=>{f.server_.refreshAppCheckToken(v.token)}),f.statsReporter_=function $i(f,c){const d=f.toString();return Hn[d]||(Hn[d]=c()),Hn[d]}(f.repoInfo_,()=>new nu(f.stats_,f.server_)),f.infoData_=new Os,f.infoSyncTree_=new R({startListening:(v,A,k,H)=>{let ie=[];const ve=f.infoData_.getNode(v._path);return ve.isEmpty()||(ie=Qe(f.infoSyncTree_,v._path,ve),setTimeout(()=>{H("ok")},0)),ie},stopListening:()=>{}}),Ru(f,"connected",!1),f.serverSyncTree_=new R({startListening:(v,A,k,H)=>(f.server_.listen(v,k,A,(ie,ve)=>{const je=H(ie,ve);Ro(f.eventQueue_,v._path,je)}),[]),stopListening:(v,A)=>{f.server_.unlisten(v,A)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new so(this._repo,Yn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Kl(f,c){const d=$u[c];(!d||d[f.key]!==f)&&lr(`Database ${c}(${f.repoInfo_}) has already been deleted.`),Al(f),delete d[f.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(c){null===this._rootInternal&&lr("Cannot call "+c+" on a deleted database.")}}function Po(){lt.IS_TRANSPORT_INITIALIZED&&hn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function _d(){Po(),Tr.forceDisallow()}function Yd(){Po(),We.forceDisallow(),Tr.forceAllow()}function Fp(f,c){$n(f,c)}const $p={".sv":"timestamp"};class Bp{constructor(c,d){this.committed=c,this.snapshot=d}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ii.prototype.simpleListen=function(f,c){this.sendRequest("q",{p:f},c)},Ii.prototype.echo=function(f,c){this.sendRequest("echo",{d:f},c)},function Lp(f){be(rt.SDK_VERSION),(0,rt._registerComponent)(new He.wA("database",(c,{instanceIdentifier:d})=>za(c.getProvider("app").getImmediate(),c.getProvider("auth-internal"),c.getProvider("app-check-internal"),d),"PUBLIC").setMultipleInstances(!0)),(0,rt.registerVersion)(nt,"0.14.4",f),(0,rt.registerVersion)(nt,"0.14.4","esm2017")}();const Pf=new ft.Yd("@firebase/database-compat"),Vh=function(f){Pf.warn("FIREBASE WARNING: "+f)};class Nf{constructor(c){this._delegate=c}cancel(c){(0,z.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,z.Wj)("OnDisconnect.cancel","onComplete",c,!0);const d=this._delegate.cancel();return c&&d.then(()=>c(null),v=>c(v)),d}remove(c){(0,z.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,z.Wj)("OnDisconnect.remove","onComplete",c,!0);const d=this._delegate.remove();return c&&d.then(()=>c(null),v=>c(v)),d}set(c,d){(0,z.Dv)("OnDisconnect.set",1,2,arguments.length),(0,z.Wj)("OnDisconnect.set","onComplete",d,!0);const v=this._delegate.set(c);return d&&v.then(()=>d(null),A=>d(A)),v}setWithPriority(c,d,v){(0,z.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,z.Wj)("OnDisconnect.setWithPriority","onComplete",v,!0);const A=this._delegate.setWithPriority(c,d);return v&&A.then(()=>v(null),k=>v(k)),A}update(c,d){if((0,z.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(c)){const A={};for(let k=0;k<c.length;++k)A[""+k]=c[k];c=A,Vh("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,z.Wj)("OnDisconnect.update","onComplete",d,!0);const v=this._delegate.update(c);return d&&v.then(()=>d(null),A=>d(A)),v}}class Gp{constructor(c,d){this.committed=c,this.snapshot=d}toJSON(){return(0,z.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Yl{constructor(c,d){this._database=c,this._delegate=d}val(){return(0,z.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,z.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,z.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,z.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(c){return(0,z.Dv)("DataSnapshot.child",0,1,arguments.length),c=String(c),lu("DataSnapshot.child","path",c,!1),new Yl(this._database,this._delegate.child(c))}hasChild(c){return(0,z.Dv)("DataSnapshot.hasChild",1,1,arguments.length),lu("DataSnapshot.hasChild","path",c,!1),this._delegate.hasChild(c)}getPriority(){return(0,z.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(c){return(0,z.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,z.Wj)("DataSnapshot.forEach","action",c,!1),this._delegate.forEach(d=>c(new Yl(this._database,d)))}hasChildren(){return(0,z.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,z.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,z.Dv)("DataSnapshot.ref",0,0,arguments.length),new gl(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ta{constructor(c,d){this.database=c,this._delegate=d}on(c,d,v,A){var k;(0,z.Dv)("Query.on",2,4,arguments.length),(0,z.Wj)("Query.on","callback",d,!1);const H=ta.getCancelAndContextArgs_("Query.on",v,A),ie=(je,Lt)=>{d.call(H.context,new Yl(this.database,je),Lt)};ie.userCallback=d,ie.context=H.context;const ve=null===(k=H.cancel)||void 0===k?void 0:k.bind(H.context);switch(c){case"value":return Wo(this._delegate,ie,ve),d;case"child_added":return uc(this._delegate,ie,ve),d;case"child_removed":return Na(this._delegate,ie,ve),d;case"child_changed":return Bc(this._delegate,ie,ve),d;case"child_moved":return Kd(this._delegate,ie,ve),d;default:throw new Error((0,z.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(c,d,v){if((0,z.Dv)("Query.off",0,3,arguments.length),function(f,c,d){if(void 0!==c)switch(c){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,z.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,c),(0,z.Wj)("Query.off","callback",d,!0),(0,z.lb)("Query.off","context",v,!0),d){const A=()=>{};A.userCallback=d,A.context=v,Lu(this._delegate,c,A)}else Lu(this._delegate,c)}get(){return lc(this._delegate).then(c=>new Yl(this.database,c))}once(c,d,v,A){(0,z.Dv)("Query.once",1,4,arguments.length),(0,z.Wj)("Query.once","callback",d,!0);const k=ta.getCancelAndContextArgs_("Query.once",v,A),H=new z.BH,ie=(je,Lt)=>{const Ot=new Yl(this.database,je);d&&d.call(k.context,Ot,Lt),H.resolve(Ot)};ie.userCallback=d,ie.context=k.context;const ve=je=>{k.cancel&&k.cancel.call(k.context,je),H.reject(je)};switch(c){case"value":Wo(this._delegate,ie,ve,{onlyOnce:!0});break;case"child_added":uc(this._delegate,ie,ve,{onlyOnce:!0});break;case"child_removed":Na(this._delegate,ie,ve,{onlyOnce:!0});break;case"child_changed":Bc(this._delegate,ie,ve,{onlyOnce:!0});break;case"child_moved":Kd(this._delegate,ie,ve,{onlyOnce:!0});break;default:throw new Error((0,z.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return H.promise}limitToFirst(c){return(0,z.Dv)("Query.limitToFirst",1,1,arguments.length),new ta(this.database,ka(this._delegate,function I(f){if("number"!=typeof f||Math.floor(f)!==f||f<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new m(f)}(c)))}limitToLast(c){return(0,z.Dv)("Query.limitToLast",1,1,arguments.length),new ta(this.database,ka(this._delegate,function Y(f){if("number"!=typeof f||Math.floor(f)!==f||f<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new M(f)}(c)))}orderByChild(c){return(0,z.Dv)("Query.orderByChild",1,1,arguments.length),new ta(this.database,ka(this._delegate,function dt(f){if("$key"===f)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===f)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===f)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return lu("orderByChild","path",f,!1),new oe(f)}(c)))}orderByKey(){return(0,z.Dv)("Query.orderByKey",0,0,arguments.length),new ta(this.database,ka(this._delegate,function vn(){return new Vt}()))}orderByPriority(){return(0,z.Dv)("Query.orderByPriority",0,0,arguments.length),new ta(this.database,ka(this._delegate,function wr(){return new Un}()))}orderByValue(){return(0,z.Dv)("Query.orderByValue",0,0,arguments.length),new ta(this.database,ka(this._delegate,function Fs(){return new yr}()))}startAt(c=null,d){return(0,z.Dv)("Query.startAt",0,2,arguments.length),new ta(this.database,ka(this._delegate,function vd(f=null,c){return Su("startAt","key",c,!0),new cc(f,c)}(c,d)))}startAfter(c=null,d){return(0,z.Dv)("Query.startAfter",0,2,arguments.length),new ta(this.database,ka(this._delegate,function b(f,c){return Su("startAfter","key",c,!0),new dc(f,c)}(c,d)))}endAt(c=null,d){return(0,z.Dv)("Query.endAt",0,2,arguments.length),new ta(this.database,ka(this._delegate,function Vc(f,c){return Su("endAt","key",c,!0),new Ha(f,c)}(c,d)))}endBefore(c=null,d){return(0,z.Dv)("Query.endBefore",0,2,arguments.length),new ta(this.database,ka(this._delegate,function xs(f,c){return Su("endBefore","key",c,!0),new Uc(f,c)}(c,d)))}equalTo(c,d){return(0,z.Dv)("Query.equalTo",1,2,arguments.length),new ta(this.database,ka(this._delegate,function hc(f,c){return Su("equalTo","key",c,!0),new Ea(f,c)}(c,d)))}toString(){return(0,z.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,z.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(c){if((0,z.Dv)("Query.isEqual",1,1,arguments.length),!(c instanceof ta))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(c._delegate)}static getCancelAndContextArgs_(c,d,v){const A={cancel:void 0,context:void 0};if(d&&v)A.cancel=d,(0,z.Wj)(c,"cancel",A.cancel,!0),A.context=v,(0,z.lb)(c,"context",A.context,!0);else if(d)if("object"==typeof d&&null!==d)A.context=d;else{if("function"!=typeof d)throw new Error((0,z.gK)(c,"cancelOrContext")+" must either be a cancel callback or a context object.");A.cancel=d}return A}get ref(){return new gl(this.database,new so(this._delegate._repo,this._delegate._path))}}class gl extends ta{constructor(c,d){super(c,new cs(d._repo,d._path,new pr,!1)),this.database=c,this._delegate=d}getKey(){return(0,z.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(c){return(0,z.Dv)("Reference.child",1,1,arguments.length),"number"==typeof c&&(c=String(c)),new gl(this.database,va(this._delegate,c))}getParent(){(0,z.Dv)("Reference.parent",0,0,arguments.length);const c=this._delegate.parent;return c?new gl(this.database,c):null}getRoot(){return(0,z.Dv)("Reference.root",0,0,arguments.length),new gl(this.database,this._delegate.root)}set(c,d){(0,z.Dv)("Reference.set",1,2,arguments.length),(0,z.Wj)("Reference.set","onComplete",d,!0);const v=Lc(this._delegate,c);return d&&v.then(()=>d(null),A=>d(A)),v}update(c,d){if((0,z.Dv)("Reference.update",1,2,arguments.length),Array.isArray(c)){const A={};for(let k=0;k<c.length;++k)A[""+k]=c[k];c=A,Vh("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ea("Reference.update",this._delegate._path),(0,z.Wj)("Reference.update","onComplete",d,!0);const v=fu(this._delegate,c);return d&&v.then(()=>d(null),A=>d(A)),v}setWithPriority(c,d,v){(0,z.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,z.Wj)("Reference.setWithPriority","onComplete",v,!0);const A=function Oa(f,c,d){if(ea("setWithPriority",f._path),Ta("setWithPriority",c,f._path,!1),Hl("setWithPriority",d,!1),".length"===f.key||".keys"===f.key)throw"setWithPriority failed: "+f.key+" is a read-only object.";const v=new z.BH;return Gl(f._repo,f._path,c,d,v.wrapCallback(()=>{})),v.promise}(this._delegate,c,d);return v&&A.then(()=>v(null),k=>v(k)),A}remove(c){(0,z.Dv)("Reference.remove",0,1,arguments.length),(0,z.Wj)("Reference.remove","onComplete",c,!0);const d=function $r(f){return ea("remove",f._path),Lc(f,null)}(this._delegate);return c&&d.then(()=>c(null),v=>c(v)),d}transaction(c,d,v){(0,z.Dv)("Reference.transaction",1,3,arguments.length),(0,z.Wj)("Reference.transaction","transactionUpdate",c,!1),(0,z.Wj)("Reference.transaction","onComplete",d,!0),function(f,c,d,v){if(void 0!==d&&"boolean"!=typeof d)throw new Error((0,z.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,v);const A=function Bh(f,c,d){var v;if(f=(0,z.m9)(f),ea("Reference.transaction",f._path),".length"===f.key||".keys"===f.key)throw"Reference.transaction failed: "+f.key+" is a read-only object.";const A=null===(v=null==d?void 0:d.applyLocally)||void 0===v||v,k=new z.BH,ie=Wo(f,()=>{});return function pd(f,c,d,v,A,k){xl(f,"transaction on "+c);const H={path:c,update:d,onComplete:v,status:null,order:Nt(),applyLocally:k,retryCount:0,unwatcher:A,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},ie=ic(f,c,void 0);H.currentInputSnapshot=ie;const ve=H.update(ie.val());if(void 0===ve)H.unwatcher(),H.currentOutputSnapshotRaw=null,H.currentOutputSnapshotResolved=null,H.onComplete&&H.onComplete(null,!1,H.currentInputSnapshot);else{ja("transaction failed: Data returned ",ve,H.path),H.status=0;const je=Bl(f.transactionQueueTree_,c),Lt=bl(je)||[];let Ot;Lt.push(H),ud(je,Lt),"object"==typeof ve&&null!==ve&&(0,z.r3)(ve,".priority")?(Ot=(0,z.DV)(ve,".priority"),(0,z.hu)(ec(Ot),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Ot=(te(f.serverSyncTree_,c)||Jn.EMPTY_NODE).getPriority().val();const qt=fl(f),Ln=Vr(ve,Ot),ar=Mc(Ln,ie,qt);H.currentOutputSnapshotRaw=Ln,H.currentOutputSnapshotResolved=ar,H.currentWriteId=cu(f);const Ti=V(f.serverSyncTree_,c,ar,H.currentWriteId,H.applyLocally);Ro(f.eventQueue_,c,Ti),Xi(f,f.transactionQueueTree_)}}(f._repo,f._path,c,(ve,je,Lt)=>{let Ot=null;ve?k.reject(ve):(Ot=new ks(Lt,new so(f._repo,f._path),Lr),k.resolve(new Bp(je,Ot)))},ie,A),k.promise}(this._delegate,c,{applyLocally:v}).then(k=>new Gp(k.committed,new Yl(this.database,k.snapshot)));return d&&A.then(k=>d(null,k.committed,k.snapshot),k=>d(k,!1,null)),A}setPriority(c,d){(0,z.Dv)("Reference.setPriority",1,2,arguments.length),(0,z.Wj)("Reference.setPriority","onComplete",d,!0);const v=function $c(f,c){f=(0,z.m9)(f),ea("setPriority",f._path),Hl("setPriority",c,!1);const d=new z.BH;return Gl(f._repo,Fr(f._path,".priority"),c,null,d.wrapCallback(()=>{})),d.promise}(this._delegate,c);return d&&v.then(()=>d(null),A=>d(A)),v}push(c,d){(0,z.Dv)("Reference.push",0,2,arguments.length),(0,z.Wj)("Reference.push","onComplete",d,!0);const v=function yd(f,c){f=(0,z.m9)(f),ea("push",f._path),Ta("push",c,f._path,!0);const d=hl(f._repo),v=xf(d),A=va(f,v),k=va(f,v);let H;return H=null!=c?Lc(k,c).then(()=>k):Promise.resolve(k),A.then=H.then.bind(H),A.catch=H.then.bind(H,void 0),A}(this._delegate,c),A=v.then(H=>new gl(this.database,H));d&&A.then(()=>d(null),H=>d(H));const k=new gl(this.database,v);return k.then=A.then.bind(A),k.catch=A.catch.bind(A,void 0),k}onDisconnect(){return ea("Reference.onDisconnect",this._delegate._path),new Nf(new Nu(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Rl{constructor(c,d){this._delegate=c,this.app=d,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:_d,forceLongPolling:Yd}}useEmulator(c,d,v={}){!function Mf(f,c,d,v={}){(f=(0,z.m9)(f))._checkNotDeleted("useEmulator"),f._instanceStarted&&lr("Cannot call useEmulator() after instance has already been initialized.");const A=f._repoInternal;let k;if(A.repoInfo_.nodeAdmin)v.mockUserToken&&lr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),k=new Tn(Tn.OWNER);else if(v.mockUserToken){const H="string"==typeof v.mockUserToken?v.mockUserToken:(0,z.Sg)(v.mockUserToken,f.app.options.projectId);k=new Tn(H)}!function gu(f,c,d,v){f.repoInfo_=new me(`${c}:${d}`,!1,f.repoInfo_.namespace,f.repoInfo_.webSocketOnly,f.repoInfo_.nodeAdmin,f.repoInfo_.persistenceKey,f.repoInfo_.includeNamespaceInQueryParams,!0),v&&(f.authTokenProvider_=v)}(A,c,d,k)}(this._delegate,c,d,v)}ref(c){if((0,z.Dv)("database.ref",0,1,arguments.length),c instanceof gl){const d=ku(this._delegate,c.toString());return new gl(this,d)}{const d=Oo(this._delegate,c);return new gl(this,d)}}refFromURL(c){(0,z.Dv)("database.refFromURL",1,1,arguments.length);const v=ku(this._delegate,c);return new gl(this,v)}goOffline(){return(0,z.Dv)("database.goOffline",0,0,arguments.length),function Ed(f){(f=(0,z.m9)(f))._checkNotDeleted("goOffline"),Al(f._repo)}(this._delegate)}goOnline(){return(0,z.Dv)("database.goOnline",0,0,arguments.length),function Rf(f){(f=(0,z.m9)(f))._checkNotDeleted("goOnline"),function Pc(f){f.persistentConnection_&&f.persistentConnection_.resume(tc)}(f._repo)}(this._delegate)}}Rl.ServerValue={TIMESTAMP:function Of(){return $p}(),increment:f=>function qd(f){return{".sv":{increment:f}}}(f)};var Zd=Object.freeze({__proto__:null,initStandalone:function go({app:f,url:c,version:d,customAuthImpl:v,namespace:A,nodeAdmin:k=!1}){be(d);const H=new He.zt("auth-internal",new He.H0("database-standalone"));return H.setComponent(new He.wA("auth-internal",()=>v,"PRIVATE")),{instance:new Rl(za(f,H,void 0,c,k),f),namespace:A}}});const Qd=Rl.ServerValue;!function Xd(f){f.INTERNAL.registerComponent(new He.wA("database-compat",(c,{instanceIdentifier:d})=>{const v=c.getProvider("app-compat").getImmediate(),A=c.getProvider("database").getImmediate({identifier:d});return new Rl(A,v)},"PUBLIC").setServiceProps({Reference:gl,Query:ta,Database:Rl,DataSnapshot:Yl,enableLogging:Fp,INTERNAL:Zd,ServerValue:Qd}).setMultipleInstances(!0)),f.registerVersion("@firebase/database-compat","0.3.4")}(ke.Z);var pc=B(6217),kf=B(9260);function gc(f){return null==f}function mc(f){return"function"==typeof f.set}function ql(f,c){return mc(c)?c:f.ref(c)}function Vu(f,c){if(function Ff(f){return"string"==typeof f}(f))return c.stringCase();if(mc(f))return c.firebaseCase();if(function Uh(f){return"function"==typeof f.exportVal}(f))return c.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof f)}function Ol(f,c,d="on",v=Ve.z){return new ge.y(A=>{let k=null;return k=f[d](c,(H,ie)=>{v.schedule(()=>{A.next({snapshot:H,prevKey:ie})}),"once"===d&&v.schedule(()=>A.complete())},H=>{v.schedule(()=>A.error(H))}),"on"===d?{unsubscribe(){null!=k&&f.off(c,k)}}:{unsubscribe(){}}}).pipe((0,Ce.U)(A=>{const{snapshot:k,prevKey:H}=A;let ie=null;return k.exists()&&(ie=k.key),{type:c,payload:k,prevKey:H,key:ie}}),(0,Fe.B)())}function Id(f,c){const d=f.length;for(let v=0;v<d;v++)if(f[v].payload.key===c)return v;return-1}function Lf(f,c){const{payload:d,prevKey:v,key:A}=c,k=Id(f,A),H=function mu(f,c){if(gc(c))return 0;{const d=Id(f,c);return-1===d?f.length:d+1}}(f,v);switch(c.type){case"value":if(c.payload&&c.payload.exists()){let ie=null;c.payload.forEach(ve=>{const je={payload:ve,type:"value",prevKey:ie,key:ve.key};return ie=ve.key,f=[...f,je],!1})}return f;case"child_added":if(k>-1){const ie=f[k-1];(ie&&ie.key||null)!==v&&(f=f.filter(ve=>ve.payload.key!==d.key)).splice(H,0,c)}else{if(null==v)return[c,...f];(f=f.slice()).splice(H,0,c)}return f;case"child_removed":return f.filter(ie=>ie.payload.key!==d.key);case"child_changed":return f.map(ie=>ie.payload.key===A?c:ie);case"child_moved":if(k>-1){const ie=f.splice(k,1)[0];return(f=f.slice()).splice(H,0,ie),f}return f;default:return f}}function wd(f){return(gc(f)||0===f.length)&&(f=["child_added","child_removed","child_changed","child_moved"]),f}function Cd(f,c,d){return function jh(f,c,d){return Ol(f,"value","once",d).pipe((0,it.w)(v=>{const A=[(0,ce.of)(v)];return c.forEach(k=>A.push(Ol(f,k,"on",d))),(0,de.T)(...A).pipe((0,Ct.R)(Lf,[]))}),(0,Te.x)())}(f,c=wd(c),d)}function Hh(f,c,d){const v=(c=wd(c)).map(A=>Ol(f,A,"on",d));return(0,de.T)(...v)}function yu(f,c){return function(v,A){return Vu(v,{stringCase:()=>f.child(v)[c](A),firebaseCase:()=>v[c](A),snapshotCase:()=>v.ref[c](A)})}}function Gh(f){return function(d){return d?Vu(d,{stringCase:()=>f.child(d).remove(),firebaseCase:()=>d.remove(),snapshotCase:()=>d.ref.remove()}):f.remove()}}function Bf(f,c){return function(){return Ol(f,"value","on",c)}}const Hc=new J.OlP("angularfire2.realtimeDatabaseURL"),bd=new J.OlP("angularfire2.database.use-emulator");let vc=(()=>{class f{constructor(d,v,A,k,H,ie,ve,je,Lt,Ot,qt,Ln,ar,Ti,_s){this.schedulers=ie;const Ia=ve,Zl=(0,Ae.on)(d,H,v);je&&(0,he.nw)(Zl,H,Lt,qt,Ln,ar,Ot,Ti),this.database=(0,Ae.cc)(`${Zl.name}.database.${A}`,"AngularFireDatabase",Zl.name,()=>{const ml=H.runOutsideAngular(()=>Zl.database(A||void 0));return Ia&&ml.useEmulator(...Ia),ml},[Ia])}list(d,v){const A=this.schedulers.ngZone.runOutsideAngular(()=>ql(this.database,d));let k=A;return v&&(k=v(A)),function $f(f,c){const d=c.schedulers.outsideAngular,v=c.schedulers.ngZone.run(()=>f.ref);return{query:f,update:yu(v,"update"),set:yu(v,"set"),push:A=>v.push(A),remove:Gh(v),snapshotChanges:A=>Cd(f,A,d).pipe(Q.iC),stateChanges:A=>Hh(f,A,d).pipe(Q.iC),auditTrail:A=>function Jd(f,c,d){return function Pl(f,c,d){return function yc(f,c){return Ol(f,"value","on",c).pipe((0,Ce.U)(d=>{let v;return d.payload.forEach(A=>(v=A.key,!1)),{data:d,lastKeyToLoad:v}}))}(f,d).pipe(function Pe(...f){const c=(0,Ze.jO)(f);return(0,ye.e)((d,v)=>{const A=f.length,k=new Array(A);let H=f.map(()=>!1),ie=!1;for(let ve=0;ve<A;ve++)(0,at.Xf)(f[ve]).subscribe((0,le.x)(v,je=>{k[ve]=je,!ie&&!H[ve]&&(H[ve]=!0,(ie=H.every(st.y))&&(H=null))},Xe.Z));d.subscribe((0,le.x)(v,ve=>{if(ie){const je=[ve,...k];v.next(c?c(...je):je)}}))})}(c),(0,Ce.U)(([A,k])=>{const H=A.lastKeyToLoad,ie=k.map(ve=>ve.key);return{actions:k,lastKeyToLoad:H,loadedKeys:ie}}),function Oe(f){return(0,ye.e)((c,d)=>{let v=!1,A=0;c.subscribe((0,le.x)(d,k=>(v||(v=!f(k,A++)))&&d.next(k)))})}(A=>-1===A.loadedKeys.indexOf(A.lastKeyToLoad)),(0,Ce.U)(A=>A.actions))}(f,Hh(f,c).pipe((0,Ct.R)((A,k)=>[...A,k],[])),d)}(f,A,d).pipe(Q.iC),valueChanges:(A,k)=>Cd(f,A,d).pipe((0,Ce.U)(ie=>ie.map(ve=>k&&k.idField?Object.assign(Object.assign({},ve.payload.val()),{[k.idField]:ve.key}):ve.payload.val())),Q.iC)}}(k,this)}object(d){return function Vf(f,c){return{query:f,snapshotChanges:()=>Bf(f,c.schedulers.outsideAngular)().pipe(Q.iC),update:d=>f.ref.update(d),set:d=>f.ref.set(d),remove:()=>f.ref.remove(),valueChanges:()=>Bf(f,c.schedulers.outsideAngular)().pipe(Q.iC,(0,Ce.U)(v=>v.payload.exists()?v.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>ql(this.database,d)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return f.\u0275fac=function(d){return new(d||f)(J.LFG(Ae.Dh),J.LFG(Ae.xv,8),J.LFG(Hc,8),J.LFG(J.Lbi),J.LFG(J.R0b),J.LFG(Q.HU),J.LFG(bd,8),J.LFG(he.zQ,8),J.LFG(he.Qv,8),J.LFG(he.L6,8),J.LFG(he._Q,8),J.LFG(he.rT,8),J.LFG(he.lh,8),J.LFG(he.f7,8),J.LFG(pc.nm,8))},f.\u0275prov=J.Yz7({token:f,factory:f.\u0275fac,providedIn:"any"}),f})(),Uu=(()=>{class f{constructor(){kf.Z.registerVersion("angularfire",Q.q4.full,"rtdb-compat")}}return f.\u0275fac=function(d){return new(d||f)},f.\u0275mod=J.oAB({type:f}),f.\u0275inj=J.cJS({providers:[vc]}),f})(),eh=(()=>{class f{constructor(){}}return f.\u0275fac=function(d){return new(d||f)},f.\u0275cmp=J.Xpm({type:f,selectors:[["app-root"]],decls:2,vars:0,template:function(d,v){1&d&&(J.TgZ(0,"ion-app"),J._UZ(1,"ion-router-outlet"),J.qZA())},dependencies:[Me.dr,Me.jP]}),f})(),Uf=(()=>{class f{constructor(d,v){this.aFaut=d,this.router=v}canActivate(d,v){return this.aFaut.authState.pipe((0,Ce.U)(A=>null==A||(this.router.navigate(["/home"]),!1)))}}return f.\u0275fac=function(d){return new(d||f)(J.LFG(he.zQ),J.LFG(De.F0))},f.\u0275prov=J.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})();const zp=[{path:"home",canActivate:[(()=>{class f{constructor(d,v){this.aFaut=d,this.router=v}canActivate(d,v){return this.aFaut.authState.pipe((0,Ce.U)(A=>null!=A||(this.router.navigate(["/login"]),!1)))}}return f.\u0275fac=function(d){return new(d||f)(J.LFG(he.zQ),J.LFG(De.F0))},f.\u0275prov=J.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()],loadChildren:()=>B.e(781).then(B.bind(B,781)).then(f=>f.HomePageModule)},{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",canActivate:[Uf],loadChildren:()=>B.e(4515).then(B.bind(B,4515)).then(f=>f.LoginPageModule)},{path:"registro",canActivate:[Uf],loadChildren:()=>B.e(9056).then(B.bind(B,9056)).then(f=>f.RegistroPageModule)}];let th=(()=>{class f{}return f.\u0275fac=function(d){return new(d||f)},f.\u0275mod=J.oAB({type:f}),f.\u0275inj=J.cJS({imports:[De.Bz.forRoot(zp,{preloadingStrategy:De.wm}),De.Bz]}),f})();var Hf=B(433);const _c={apiKey:"AIzaSyD2tQmGROqW_Vse6n--SVGhR9bzKu-32MQ",authDomain:"chat-online-9a633.firebaseapp.com",projectId:"chat-online-9a633",storageBucket:"chat-online-9a633.appspot.com",messagingSenderId:"766252059431",appId:"1:766252059431:web:4859727c7e843705567702"};var zh=B(6893);let Ec=(()=>{class f{}return f.\u0275fac=function(d){return new(d||f)},f.\u0275mod=J.oAB({type:f,bootstrap:[eh]}),f.\u0275inj=J.cJS({providers:[{provide:De.wN,useClass:Me.r4},zh.e,G.a],imports:[a.b2,Me.Pc.forRoot(),th,Hf.u5,Ae.hO.initializeApp(_c),he.ww,xe.yb,Uu]}),f})();(0,J.G48)(),a.q6().bootstrapModule(Ec).catch(f=>console.log(f))},1135:(sn,ht,B)=>{"use strict";B.d(ht,{X:()=>J});var a=B(7579);class J extends a.x{constructor(De){super(),this._value=De}get value(){return this.getValue()}_subscribe(De){const Me=super._subscribe(De);return!Me.closed&&De.next(this._value),Me}getValue(){const{hasError:De,thrownError:Me,_value:Ae}=this;if(De)throw Me;return this._throwIfClosed(),Ae}next(De){super.next(this._value=De)}}},9751:(sn,ht,B)=>{"use strict";B.d(ht,{y:()=>xe});var a=B(930),J=B(727),G=B(8822),De=B(9635),Me=B(2416),Ae=B(576),he=B(2806);let xe=(()=>{class de{constructor(Fe){Fe&&(this._subscribe=Fe)}lift(Fe){const it=new de;return it.source=this,it.operator=Fe,it}subscribe(Fe,it,Ct){const Te=function ce(de){return de&&de instanceof a.Lv||function ge(de){return de&&(0,Ae.m)(de.next)&&(0,Ae.m)(de.error)&&(0,Ae.m)(de.complete)}(de)&&(0,J.Nn)(de)}(Fe)?Fe:new a.Hp(Fe,it,Ct);return(0,he.x)(()=>{const{operator:ye,source:le}=this;Te.add(ye?ye.call(Te,le):le?this._subscribe(Te):this._trySubscribe(Te))}),Te}_trySubscribe(Fe){try{return this._subscribe(Fe)}catch(it){Fe.error(it)}}forEach(Fe,it){return new(it=Ve(it))((Ct,Te)=>{const ye=new a.Hp({next:le=>{try{Fe(le)}catch(at){Te(at),ye.unsubscribe()}},error:Te,complete:Ct});this.subscribe(ye)})}_subscribe(Fe){var it;return null===(it=this.source)||void 0===it?void 0:it.subscribe(Fe)}[G.L](){return this}pipe(...Fe){return(0,De.U)(Fe)(this)}toPromise(Fe){return new(Fe=Ve(Fe))((it,Ct)=>{let Te;this.subscribe(ye=>Te=ye,ye=>Ct(ye),()=>it(Te))})}}return de.create=Ce=>new de(Ce),de})();function Ve(de){var Ce;return null!==(Ce=null!=de?de:Me.v.Promise)&&void 0!==Ce?Ce:Promise}},7579:(sn,ht,B)=>{"use strict";B.d(ht,{x:()=>he});var a=B(9751),J=B(727);const De=(0,B(3888).d)(Ve=>function(){Ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Me=B(8737),Ae=B(2806);let he=(()=>{class Ve extends a.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ce){const de=new xe(this,this);return de.operator=ce,de}_throwIfClosed(){if(this.closed)throw new De}next(ce){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const de of this.currentObservers)de.next(ce)}})}error(ce){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ce;const{observers:de}=this;for(;de.length;)de.shift().error(ce)}})}complete(){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ce}=this;for(;ce.length;)ce.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ce;return(null===(ce=this.observers)||void 0===ce?void 0:ce.length)>0}_trySubscribe(ce){return this._throwIfClosed(),super._trySubscribe(ce)}_subscribe(ce){return this._throwIfClosed(),this._checkFinalizedStatuses(ce),this._innerSubscribe(ce)}_innerSubscribe(ce){const{hasError:de,isStopped:Ce,observers:Fe}=this;return de||Ce?J.Lc:(this.currentObservers=null,Fe.push(ce),new J.w0(()=>{this.currentObservers=null,(0,Me.P)(Fe,ce)}))}_checkFinalizedStatuses(ce){const{hasError:de,thrownError:Ce,isStopped:Fe}=this;de?ce.error(Ce):Fe&&ce.complete()}asObservable(){const ce=new a.y;return ce.source=this,ce}}return Ve.create=(ge,ce)=>new xe(ge,ce),Ve})();class xe extends he{constructor(ge,ce){super(),this.destination=ge,this.source=ce}next(ge){var ce,de;null===(de=null===(ce=this.destination)||void 0===ce?void 0:ce.next)||void 0===de||de.call(ce,ge)}error(ge){var ce,de;null===(de=null===(ce=this.destination)||void 0===ce?void 0:ce.error)||void 0===de||de.call(ce,ge)}complete(){var ge,ce;null===(ce=null===(ge=this.destination)||void 0===ge?void 0:ge.complete)||void 0===ce||ce.call(ge)}_subscribe(ge){var ce,de;return null!==(de=null===(ce=this.source)||void 0===ce?void 0:ce.subscribe(ge))&&void 0!==de?de:J.Lc}}},930:(sn,ht,B)=>{"use strict";B.d(ht,{Hp:()=>Ct,Lv:()=>de});var a=B(576),J=B(727),G=B(2416),De=B(7849),Me=B(5032);const Ae=Ve("C",void 0,void 0);function Ve(st,Xe,Ze){return{kind:st,value:Xe,error:Ze}}var ge=B(3410),ce=B(2806);class de extends J.w0{constructor(Xe){super(),this.isStopped=!1,Xe?(this.destination=Xe,(0,J.Nn)(Xe)&&Xe.add(this)):this.destination=at}static create(Xe,Ze,Pe){return new Ct(Xe,Ze,Pe)}next(Xe){this.isStopped?le(function xe(st){return Ve("N",st,void 0)}(Xe),this):this._next(Xe)}error(Xe){this.isStopped?le(function he(st){return Ve("E",void 0,st)}(Xe),this):(this.isStopped=!0,this._error(Xe))}complete(){this.isStopped?le(Ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Xe){this.destination.next(Xe)}_error(Xe){try{this.destination.error(Xe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ce=Function.prototype.bind;function Fe(st,Xe){return Ce.call(st,Xe)}class it{constructor(Xe){this.partialObserver=Xe}next(Xe){const{partialObserver:Ze}=this;if(Ze.next)try{Ze.next(Xe)}catch(Pe){Te(Pe)}}error(Xe){const{partialObserver:Ze}=this;if(Ze.error)try{Ze.error(Xe)}catch(Pe){Te(Pe)}else Te(Xe)}complete(){const{partialObserver:Xe}=this;if(Xe.complete)try{Xe.complete()}catch(Ze){Te(Ze)}}}class Ct extends de{constructor(Xe,Ze,Pe){let Oe;if(super(),(0,a.m)(Xe)||!Xe)Oe={next:null!=Xe?Xe:void 0,error:null!=Ze?Ze:void 0,complete:null!=Pe?Pe:void 0};else{let Q;this&&G.v.useDeprecatedNextContext?(Q=Object.create(Xe),Q.unsubscribe=()=>this.unsubscribe(),Oe={next:Xe.next&&Fe(Xe.next,Q),error:Xe.error&&Fe(Xe.error,Q),complete:Xe.complete&&Fe(Xe.complete,Q)}):Oe=Xe}this.destination=new it(Oe)}}function Te(st){G.v.useDeprecatedSynchronousErrorHandling?(0,ce.O)(st):(0,De.h)(st)}function le(st,Xe){const{onStoppedNotification:Ze}=G.v;Ze&&ge.z.setTimeout(()=>Ze(st,Xe))}const at={closed:!0,next:Me.Z,error:function ye(st){throw st},complete:Me.Z}},727:(sn,ht,B)=>{"use strict";B.d(ht,{Lc:()=>Ae,w0:()=>Me,Nn:()=>he});var a=B(576);const G=(0,B(3888).d)(Ve=>function(ce){Ve(this),this.message=ce?`${ce.length} errors occurred during unsubscription:\n${ce.map((de,Ce)=>`${Ce+1}) ${de.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ce});var De=B(8737);class Me{constructor(ge){this.initialTeardown=ge,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ge;if(!this.closed){this.closed=!0;const{_parentage:ce}=this;if(ce)if(this._parentage=null,Array.isArray(ce))for(const Fe of ce)Fe.remove(this);else ce.remove(this);const{initialTeardown:de}=this;if((0,a.m)(de))try{de()}catch(Fe){ge=Fe instanceof G?Fe.errors:[Fe]}const{_finalizers:Ce}=this;if(Ce){this._finalizers=null;for(const Fe of Ce)try{xe(Fe)}catch(it){ge=null!=ge?ge:[],it instanceof G?ge=[...ge,...it.errors]:ge.push(it)}}if(ge)throw new G(ge)}}add(ge){var ce;if(ge&&ge!==this)if(this.closed)xe(ge);else{if(ge instanceof Me){if(ge.closed||ge._hasParent(this))return;ge._addParent(this)}(this._finalizers=null!==(ce=this._finalizers)&&void 0!==ce?ce:[]).push(ge)}}_hasParent(ge){const{_parentage:ce}=this;return ce===ge||Array.isArray(ce)&&ce.includes(ge)}_addParent(ge){const{_parentage:ce}=this;this._parentage=Array.isArray(ce)?(ce.push(ge),ce):ce?[ce,ge]:ge}_removeParent(ge){const{_parentage:ce}=this;ce===ge?this._parentage=null:Array.isArray(ce)&&(0,De.P)(ce,ge)}remove(ge){const{_finalizers:ce}=this;ce&&(0,De.P)(ce,ge),ge instanceof Me&&ge._removeParent(this)}}Me.EMPTY=(()=>{const Ve=new Me;return Ve.closed=!0,Ve})();const Ae=Me.EMPTY;function he(Ve){return Ve instanceof Me||Ve&&"closed"in Ve&&(0,a.m)(Ve.remove)&&(0,a.m)(Ve.add)&&(0,a.m)(Ve.unsubscribe)}function xe(Ve){(0,a.m)(Ve)?Ve():Ve.unsubscribe()}},2416:(sn,ht,B)=>{"use strict";B.d(ht,{v:()=>a});const a={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(sn,ht,B)=>{"use strict";B.d(ht,{z:()=>Me});var a=B(8189),G=B(7669),De=B(8996);function Me(...Ae){return function J(){return(0,a.J)(1)}()((0,De.D)(Ae,(0,G.yG)(Ae)))}},515:(sn,ht,B)=>{"use strict";B.d(ht,{E:()=>J});const J=new(B(9751).y)(Me=>Me.complete())},8996:(sn,ht,B)=>{"use strict";B.d(ht,{D:()=>Xe});var a=B(8421),J=B(5363),G=B(9468),Ae=B(9751),xe=B(2202),Ve=B(576),ge=B(9672);function de(Ze,Pe){if(!Ze)throw new Error("Iterable cannot be null");return new Ae.y(Oe=>{(0,ge.f)(Oe,Pe,()=>{const Q=Ze[Symbol.asyncIterator]();(0,ge.f)(Oe,Pe,()=>{Q.next().then(et=>{et.done?Oe.complete():Oe.next(et.value)})},0,!0)})})}var Ce=B(3670),Fe=B(8239),it=B(1144),Ct=B(6495),Te=B(2206),ye=B(4532),le=B(3260);function Xe(Ze,Pe){return Pe?function st(Ze,Pe){if(null!=Ze){if((0,Ce.c)(Ze))return function De(Ze,Pe){return(0,a.Xf)(Ze).pipe((0,G.R)(Pe),(0,J.Q)(Pe))}(Ze,Pe);if((0,it.z)(Ze))return function he(Ze,Pe){return new Ae.y(Oe=>{let Q=0;return Pe.schedule(function(){Q===Ze.length?Oe.complete():(Oe.next(Ze[Q++]),Oe.closed||this.schedule())})})}(Ze,Pe);if((0,Fe.t)(Ze))return function Me(Ze,Pe){return(0,a.Xf)(Ze).pipe((0,G.R)(Pe),(0,J.Q)(Pe))}(Ze,Pe);if((0,Te.D)(Ze))return de(Ze,Pe);if((0,Ct.T)(Ze))return function ce(Ze,Pe){return new Ae.y(Oe=>{let Q;return(0,ge.f)(Oe,Pe,()=>{Q=Ze[xe.h](),(0,ge.f)(Oe,Pe,()=>{let et,ke;try{({value:et,done:ke}=Q.next())}catch(He){return void Oe.error(He)}ke?Oe.complete():Oe.next(et)},0,!0)}),()=>(0,Ve.m)(null==Q?void 0:Q.return)&&Q.return()})}(Ze,Pe);if((0,le.L)(Ze))return function at(Ze,Pe){return de((0,le.Q)(Ze),Pe)}(Ze,Pe)}throw(0,ye.z)(Ze)}(Ze,Pe):(0,a.Xf)(Ze)}},8421:(sn,ht,B)=>{"use strict";B.d(ht,{Xf:()=>Ce});var a=B(655),J=B(1144),G=B(8239),De=B(9751),Me=B(3670),Ae=B(2206),he=B(4532),xe=B(6495),Ve=B(3260),ge=B(576),ce=B(7849),de=B(8822);function Ce(st){if(st instanceof De.y)return st;if(null!=st){if((0,Me.c)(st))return function Fe(st){return new De.y(Xe=>{const Ze=st[de.L]();if((0,ge.m)(Ze.subscribe))return Ze.subscribe(Xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(st);if((0,J.z)(st))return function it(st){return new De.y(Xe=>{for(let Ze=0;Ze<st.length&&!Xe.closed;Ze++)Xe.next(st[Ze]);Xe.complete()})}(st);if((0,G.t)(st))return function Ct(st){return new De.y(Xe=>{st.then(Ze=>{Xe.closed||(Xe.next(Ze),Xe.complete())},Ze=>Xe.error(Ze)).then(null,ce.h)})}(st);if((0,Ae.D)(st))return ye(st);if((0,xe.T)(st))return function Te(st){return new De.y(Xe=>{for(const Ze of st)if(Xe.next(Ze),Xe.closed)return;Xe.complete()})}(st);if((0,Ve.L)(st))return function le(st){return ye((0,Ve.Q)(st))}(st)}throw(0,he.z)(st)}function ye(st){return new De.y(Xe=>{(function at(st,Xe){var Ze,Pe,Oe,Q;return(0,a.mG)(this,void 0,void 0,function*(){try{for(Ze=(0,a.KL)(st);!(Pe=yield Ze.next()).done;)if(Xe.next(Pe.value),Xe.closed)return}catch(et){Oe={error:et}}finally{try{Pe&&!Pe.done&&(Q=Ze.return)&&(yield Q.call(Ze))}finally{if(Oe)throw Oe.error}}Xe.complete()})})(st,Xe).catch(Ze=>Xe.error(Ze))})}},6451:(sn,ht,B)=>{"use strict";B.d(ht,{T:()=>Ae});var a=B(8189),J=B(8421),G=B(515),De=B(7669),Me=B(8996);function Ae(...he){const xe=(0,De.yG)(he),Ve=(0,De._6)(he,1/0),ge=he;return ge.length?1===ge.length?(0,J.Xf)(ge[0]):(0,a.J)(Ve)((0,Me.D)(ge,xe)):G.E}},9646:(sn,ht,B)=>{"use strict";B.d(ht,{of:()=>G});var a=B(7669),J=B(8996);function G(...De){const Me=(0,a.yG)(De);return(0,J.D)(De,Me)}},5403:(sn,ht,B)=>{"use strict";B.d(ht,{x:()=>J});var a=B(930);function J(De,Me,Ae,he,xe){return new G(De,Me,Ae,he,xe)}class G extends a.Lv{constructor(Me,Ae,he,xe,Ve,ge){super(Me),this.onFinalize=Ve,this.shouldUnsubscribe=ge,this._next=Ae?function(ce){try{Ae(ce)}catch(de){Me.error(de)}}:super._next,this._error=xe?function(ce){try{xe(ce)}catch(de){Me.error(de)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch(ce){Me.error(ce)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Me;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ae}=this;super.unsubscribe(),!Ae&&(null===(Me=this.onFinalize)||void 0===Me||Me.call(this))}}}},6590:(sn,ht,B)=>{"use strict";B.d(ht,{d:()=>G});var a=B(4482),J=B(5403);function G(De){return(0,a.e)((Me,Ae)=>{let he=!1;Me.subscribe((0,J.x)(Ae,xe=>{he=!0,Ae.next(xe)},()=>{he||Ae.next(De),Ae.complete()}))})}},1884:(sn,ht,B)=>{"use strict";B.d(ht,{x:()=>De});var a=B(4671),J=B(4482),G=B(5403);function De(Ae,he=a.y){return Ae=null!=Ae?Ae:Me,(0,J.e)((xe,Ve)=>{let ge,ce=!0;xe.subscribe((0,G.x)(Ve,de=>{const Ce=he(de);(ce||!Ae(ge,Ce))&&(ce=!1,ge=Ce,Ve.next(de))}))})}function Me(Ae,he){return Ae===he}},9300:(sn,ht,B)=>{"use strict";B.d(ht,{h:()=>G});var a=B(4482),J=B(5403);function G(De,Me){return(0,a.e)((Ae,he)=>{let xe=0;Ae.subscribe((0,J.x)(he,Ve=>De.call(Me,Ve,xe++)&&he.next(Ve)))})}},590:(sn,ht,B)=>{"use strict";B.d(ht,{P:()=>he});var a=B(6805),J=B(9300),G=B(5698),De=B(6590),Me=B(8068),Ae=B(4671);function he(xe,Ve){const ge=arguments.length>=2;return ce=>ce.pipe(xe?(0,J.h)((de,Ce)=>xe(de,Ce,ce)):Ae.y,(0,G.q)(1),ge?(0,De.d)(Ve):(0,Me.T)(()=>new a.K))}},4004:(sn,ht,B)=>{"use strict";B.d(ht,{U:()=>G});var a=B(4482),J=B(5403);function G(De,Me){return(0,a.e)((Ae,he)=>{let xe=0;Ae.subscribe((0,J.x)(he,Ve=>{he.next(De.call(Me,Ve,xe++))}))})}},8189:(sn,ht,B)=>{"use strict";B.d(ht,{J:()=>G});var a=B(5577),J=B(4671);function G(De=1/0){return(0,a.z)(J.y,De)}},5577:(sn,ht,B)=>{"use strict";B.d(ht,{z:()=>xe});var a=B(4004),J=B(8421),G=B(4482),De=B(9672),Me=B(5403),he=B(576);function xe(Ve,ge,ce=1/0){return(0,he.m)(ge)?xe((de,Ce)=>(0,a.U)((Fe,it)=>ge(de,Fe,Ce,it))((0,J.Xf)(Ve(de,Ce))),ce):("number"==typeof ge&&(ce=ge),(0,G.e)((de,Ce)=>function Ae(Ve,ge,ce,de,Ce,Fe,it,Ct){const Te=[];let ye=0,le=0,at=!1;const st=()=>{at&&!Te.length&&!ye&&ge.complete()},Xe=Pe=>ye<de?Ze(Pe):Te.push(Pe),Ze=Pe=>{Fe&&ge.next(Pe),ye++;let Oe=!1;(0,J.Xf)(ce(Pe,le++)).subscribe((0,Me.x)(ge,Q=>{null==Ce||Ce(Q),Fe?Xe(Q):ge.next(Q)},()=>{Oe=!0},void 0,()=>{if(Oe)try{for(ye--;Te.length&&ye<de;){const Q=Te.shift();it?(0,De.f)(ge,it,()=>Ze(Q)):Ze(Q)}st()}catch(Q){ge.error(Q)}}))};return Ve.subscribe((0,Me.x)(ge,Xe,()=>{at=!0,st()})),()=>{null==Ct||Ct()}}(de,Ce,Ve,ce)))}},5363:(sn,ht,B)=>{"use strict";B.d(ht,{Q:()=>De});var a=B(9672),J=B(4482),G=B(5403);function De(Me,Ae=0){return(0,J.e)((he,xe)=>{he.subscribe((0,G.x)(xe,Ve=>(0,a.f)(xe,Me,()=>xe.next(Ve),Ae),()=>(0,a.f)(xe,Me,()=>xe.complete(),Ae),Ve=>(0,a.f)(xe,Me,()=>xe.error(Ve),Ae)))})}},5026:(sn,ht,B)=>{"use strict";B.d(ht,{R:()=>De});var a=B(4482),J=B(5403);function De(Me,Ae){return(0,a.e)(function G(Me,Ae,he,xe,Ve){return(ge,ce)=>{let de=he,Ce=Ae,Fe=0;ge.subscribe((0,J.x)(ce,it=>{const Ct=Fe++;Ce=de?Me(Ce,it,Ct):(de=!0,it),xe&&ce.next(Ce)},Ve&&(()=>{de&&ce.next(Ce),ce.complete()})))}}(Me,Ae,arguments.length>=2,!0))}},3099:(sn,ht,B)=>{"use strict";B.d(ht,{B:()=>Me});var a=B(8421),J=B(7579),G=B(930),De=B(4482);function Me(he={}){const{connector:xe=(()=>new J.x),resetOnError:Ve=!0,resetOnComplete:ge=!0,resetOnRefCountZero:ce=!0}=he;return de=>{let Ce,Fe,it,Ct=0,Te=!1,ye=!1;const le=()=>{null==Fe||Fe.unsubscribe(),Fe=void 0},at=()=>{le(),Ce=it=void 0,Te=ye=!1},st=()=>{const Xe=Ce;at(),null==Xe||Xe.unsubscribe()};return(0,De.e)((Xe,Ze)=>{Ct++,!ye&&!Te&&le();const Pe=it=null!=it?it:xe();Ze.add(()=>{Ct--,0===Ct&&!ye&&!Te&&(Fe=Ae(st,ce))}),Pe.subscribe(Ze),!Ce&&Ct>0&&(Ce=new G.Hp({next:Oe=>Pe.next(Oe),error:Oe=>{ye=!0,le(),Fe=Ae(at,Ve,Oe),Pe.error(Oe)},complete:()=>{Te=!0,le(),Fe=Ae(at,ge),Pe.complete()}}),(0,a.Xf)(Xe).subscribe(Ce))})(de)}}function Ae(he,xe,...Ve){if(!0===xe)return void he();if(!1===xe)return;const ge=new G.Hp({next:()=>{ge.unsubscribe(),he()}});return xe(...Ve).subscribe(ge)}},8675:(sn,ht,B)=>{"use strict";B.d(ht,{O:()=>De});var a=B(7272),J=B(7669),G=B(4482);function De(...Me){const Ae=(0,J.yG)(Me);return(0,G.e)((he,xe)=>{(Ae?(0,a.z)(Me,he,Ae):(0,a.z)(Me,he)).subscribe(xe)})}},9468:(sn,ht,B)=>{"use strict";B.d(ht,{R:()=>J});var a=B(4482);function J(G,De=0){return(0,a.e)((Me,Ae)=>{Ae.add(G.schedule(()=>Me.subscribe(Ae),De))})}},3900:(sn,ht,B)=>{"use strict";B.d(ht,{w:()=>De});var a=B(8421),J=B(4482),G=B(5403);function De(Me,Ae){return(0,J.e)((he,xe)=>{let Ve=null,ge=0,ce=!1;const de=()=>ce&&!Ve&&xe.complete();he.subscribe((0,G.x)(xe,Ce=>{null==Ve||Ve.unsubscribe();let Fe=0;const it=ge++;(0,a.Xf)(Me(Ce,it)).subscribe(Ve=(0,G.x)(xe,Ct=>xe.next(Ae?Ae(Ce,Ct,it,Fe++):Ct),()=>{Ve=null,de()}))},()=>{ce=!0,de()}))})}},5698:(sn,ht,B)=>{"use strict";B.d(ht,{q:()=>De});var a=B(515),J=B(4482),G=B(5403);function De(Me){return Me<=0?()=>a.E:(0,J.e)((Ae,he)=>{let xe=0;Ae.subscribe((0,G.x)(he,Ve=>{++xe<=Me&&(he.next(Ve),Me<=xe&&he.complete())}))})}},8505:(sn,ht,B)=>{"use strict";B.d(ht,{b:()=>Me});var a=B(576),J=B(4482),G=B(5403),De=B(4671);function Me(Ae,he,xe){const Ve=(0,a.m)(Ae)||he||xe?{next:Ae,error:he,complete:xe}:Ae;return Ve?(0,J.e)((ge,ce)=>{var de;null===(de=Ve.subscribe)||void 0===de||de.call(Ve);let Ce=!0;ge.subscribe((0,G.x)(ce,Fe=>{var it;null===(it=Ve.next)||void 0===it||it.call(Ve,Fe),ce.next(Fe)},()=>{var Fe;Ce=!1,null===(Fe=Ve.complete)||void 0===Fe||Fe.call(Ve),ce.complete()},Fe=>{var it;Ce=!1,null===(it=Ve.error)||void 0===it||it.call(Ve,Fe),ce.error(Fe)},()=>{var Fe,it;Ce&&(null===(Fe=Ve.unsubscribe)||void 0===Fe||Fe.call(Ve)),null===(it=Ve.finalize)||void 0===it||it.call(Ve)}))}):De.y}},8068:(sn,ht,B)=>{"use strict";B.d(ht,{T:()=>De});var a=B(6805),J=B(4482),G=B(5403);function De(Ae=Me){return(0,J.e)((he,xe)=>{let Ve=!1;he.subscribe((0,G.x)(xe,ge=>{Ve=!0,xe.next(ge)},()=>Ve?xe.complete():xe.error(Ae())))})}function Me(){return new a.K}},4408:(sn,ht,B)=>{"use strict";B.d(ht,{o:()=>Me});var a=B(727);class J extends a.w0{constructor(he,xe){super()}schedule(he,xe=0){return this}}const G={setInterval(Ae,he,...xe){const{delegate:Ve}=G;return null!=Ve&&Ve.setInterval?Ve.setInterval(Ae,he,...xe):setInterval(Ae,he,...xe)},clearInterval(Ae){const{delegate:he}=G;return((null==he?void 0:he.clearInterval)||clearInterval)(Ae)},delegate:void 0};var De=B(8737);class Me extends J{constructor(he,xe){super(he,xe),this.scheduler=he,this.work=xe,this.pending=!1}schedule(he,xe=0){var Ve;if(this.closed)return this;this.state=he;const ge=this.id,ce=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(ce,ge,xe)),this.pending=!0,this.delay=xe,this.id=null!==(Ve=this.id)&&void 0!==Ve?Ve:this.requestAsyncId(ce,this.id,xe),this}requestAsyncId(he,xe,Ve=0){return G.setInterval(he.flush.bind(he,this),Ve)}recycleAsyncId(he,xe,Ve=0){if(null!=Ve&&this.delay===Ve&&!1===this.pending)return xe;null!=xe&&G.clearInterval(xe)}execute(he,xe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ve=this._execute(he,xe);if(Ve)return Ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,xe){let ge,Ve=!1;try{this.work(he)}catch(ce){Ve=!0,ge=ce||new Error("Scheduled action threw falsy error")}if(Ve)return this.unsubscribe(),ge}unsubscribe(){if(!this.closed){const{id:he,scheduler:xe}=this,{actions:Ve}=xe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,De.P)(Ve,this),null!=he&&(this.id=this.recycleAsyncId(xe,he,null)),this.delay=null,super.unsubscribe()}}}},7565:(sn,ht,B)=>{"use strict";B.d(ht,{v:()=>G});var a=B(6063);class J{constructor(Me,Ae=J.now){this.schedulerActionCtor=Me,this.now=Ae}schedule(Me,Ae=0,he){return new this.schedulerActionCtor(this,Me).schedule(he,Ae)}}J.now=a.l.now;class G extends J{constructor(Me,Ae=J.now){super(Me,Ae),this.actions=[],this._active=!1}flush(Me){const{actions:Ae}=this;if(this._active)return void Ae.push(Me);let he;this._active=!0;do{if(he=Me.execute(Me.state,Me.delay))break}while(Me=Ae.shift());if(this._active=!1,he){for(;Me=Ae.shift();)Me.unsubscribe();throw he}}}},4986:(sn,ht,B)=>{"use strict";B.d(ht,{z:()=>G});var a=B(4408);const G=new(B(7565).v)(a.o)},6063:(sn,ht,B)=>{"use strict";B.d(ht,{l:()=>a});const a={now:()=>(a.delegate||Date).now(),delegate:void 0}},3410:(sn,ht,B)=>{"use strict";B.d(ht,{z:()=>a});const a={setTimeout(J,G,...De){const{delegate:Me}=a;return null!=Me&&Me.setTimeout?Me.setTimeout(J,G,...De):setTimeout(J,G,...De)},clearTimeout(J){const{delegate:G}=a;return((null==G?void 0:G.clearTimeout)||clearTimeout)(J)},delegate:void 0}},2202:(sn,ht,B)=>{"use strict";B.d(ht,{h:()=>J});const J=function a(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(sn,ht,B)=>{"use strict";B.d(ht,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(sn,ht,B)=>{"use strict";B.d(ht,{K:()=>J});const J=(0,B(3888).d)(G=>function(){G(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(sn,ht,B)=>{"use strict";B.d(ht,{_6:()=>Ae,jO:()=>De,yG:()=>Me});var a=B(576);function G(he){return he[he.length-1]}function De(he){return(0,a.m)(G(he))?he.pop():void 0}function Me(he){return function J(he){return he&&(0,a.m)(he.schedule)}(G(he))?he.pop():void 0}function Ae(he,xe){return"number"==typeof G(he)?he.pop():xe}},4742:(sn,ht,B)=>{"use strict";B.d(ht,{D:()=>Me});const{isArray:a}=Array,{getPrototypeOf:J,prototype:G,keys:De}=Object;function Me(he){if(1===he.length){const xe=he[0];if(a(xe))return{args:xe,keys:null};if(function Ae(he){return he&&"object"==typeof he&&J(he)===G}(xe)){const Ve=De(xe);return{args:Ve.map(ge=>xe[ge]),keys:Ve}}}return{args:he,keys:null}}},8737:(sn,ht,B)=>{"use strict";function a(J,G){if(J){const De=J.indexOf(G);0<=De&&J.splice(De,1)}}B.d(ht,{P:()=>a})},3888:(sn,ht,B)=>{"use strict";function a(J){const De=J(Me=>{Error.call(Me),Me.stack=(new Error).stack});return De.prototype=Object.create(Error.prototype),De.prototype.constructor=De,De}B.d(ht,{d:()=>a})},1810:(sn,ht,B)=>{"use strict";function a(J,G){return J.reduce((De,Me,Ae)=>(De[Me]=G[Ae],De),{})}B.d(ht,{n:()=>a})},2806:(sn,ht,B)=>{"use strict";B.d(ht,{O:()=>De,x:()=>G});var a=B(2416);let J=null;function G(Me){if(a.v.useDeprecatedSynchronousErrorHandling){const Ae=!J;if(Ae&&(J={errorThrown:!1,error:null}),Me(),Ae){const{errorThrown:he,error:xe}=J;if(J=null,he)throw xe}}else Me()}function De(Me){a.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=Me)}},9672:(sn,ht,B)=>{"use strict";function a(J,G,De,Me=0,Ae=!1){const he=G.schedule(function(){De(),Ae?J.add(this.schedule(null,Me)):this.unsubscribe()},Me);if(J.add(he),!Ae)return he}B.d(ht,{f:()=>a})},4671:(sn,ht,B)=>{"use strict";function a(J){return J}B.d(ht,{y:()=>a})},1144:(sn,ht,B)=>{"use strict";B.d(ht,{z:()=>a});const a=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(sn,ht,B)=>{"use strict";B.d(ht,{D:()=>J});var a=B(576);function J(G){return Symbol.asyncIterator&&(0,a.m)(null==G?void 0:G[Symbol.asyncIterator])}},576:(sn,ht,B)=>{"use strict";function a(J){return"function"==typeof J}B.d(ht,{m:()=>a})},3670:(sn,ht,B)=>{"use strict";B.d(ht,{c:()=>G});var a=B(8822),J=B(576);function G(De){return(0,J.m)(De[a.L])}},6495:(sn,ht,B)=>{"use strict";B.d(ht,{T:()=>G});var a=B(2202),J=B(576);function G(De){return(0,J.m)(null==De?void 0:De[a.h])}},8239:(sn,ht,B)=>{"use strict";B.d(ht,{t:()=>J});var a=B(576);function J(G){return(0,a.m)(null==G?void 0:G.then)}},3260:(sn,ht,B)=>{"use strict";B.d(ht,{L:()=>De,Q:()=>G});var a=B(655),J=B(576);function G(Me){return(0,a.FC)(this,arguments,function*(){const he=Me.getReader();try{for(;;){const{value:xe,done:Ve}=yield(0,a.qq)(he.read());if(Ve)return yield(0,a.qq)(void 0);yield yield(0,a.qq)(xe)}}finally{he.releaseLock()}})}function De(Me){return(0,J.m)(null==Me?void 0:Me.getReader)}},4482:(sn,ht,B)=>{"use strict";B.d(ht,{A:()=>J,e:()=>G});var a=B(576);function J(De){return(0,a.m)(null==De?void 0:De.lift)}function G(De){return Me=>{if(J(Me))return Me.lift(function(Ae){try{return De(Ae,this)}catch(he){this.error(he)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(sn,ht,B)=>{"use strict";B.d(ht,{Z:()=>De});var a=B(4004);const{isArray:J}=Array;function De(Me){return(0,a.U)(Ae=>function G(Me,Ae){return J(Ae)?Me(...Ae):Me(Ae)}(Me,Ae))}},5032:(sn,ht,B)=>{"use strict";function a(){}B.d(ht,{Z:()=>a})},9635:(sn,ht,B)=>{"use strict";B.d(ht,{U:()=>G,z:()=>J});var a=B(4671);function J(...De){return G(De)}function G(De){return 0===De.length?a.y:1===De.length?De[0]:function(Ae){return De.reduce((he,xe)=>xe(he),Ae)}}},7849:(sn,ht,B)=>{"use strict";B.d(ht,{h:()=>G});var a=B(2416),J=B(3410);function G(De){J.z.setTimeout(()=>{const{onUnhandledError:Me}=a.v;if(!Me)throw De;Me(De)})}},4532:(sn,ht,B)=>{"use strict";function a(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(ht,{z:()=>a})},863:(sn,ht,B)=>{var a={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,3236],"./ion-avatar_3.entry.js":[4753,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,5652],"./ion-card_5.entry.js":[388,388],"./ion-checkbox.entry.js":[9922,9922],"./ion-chip.entry.js":[657,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime-button.entry.js":[9230,7206,9230],"./ion-datetime_3.entry.js":[4959,7206,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,5817],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,4651],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,8592,3804],"./ion-progress-bar.entry.js":[4174,4174],"./ion-radio_2.entry.js":[4432,4432],"./ion-range.entry.js":[1709,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,2175],"./ion-reorder_2.entry.js":[3583,8592,1186],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,2773],"./ion-slide_2.entry.js":[1650,1650],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,8592,1536],"./ion-text.entry.js":[4376,4376],"./ion-textarea.entry.js":[6560,6560],"./ion-toast.entry.js":[6120,6120],"./ion-toggle.entry.js":[5168,8592,5168],"./ion-virtual-scroll.entry.js":[2289,2289]};function J(G){if(!B.o(a,G))return Promise.resolve().then(()=>{var Ae=new Error("Cannot find module '"+G+"'");throw Ae.code="MODULE_NOT_FOUND",Ae});var De=a[G],Me=De[0];return Promise.all(De.slice(1).map(B.e)).then(()=>B(Me))}J.keys=()=>Object.keys(a),J.id=863,sn.exports=J},655:(sn,ht,B)=>{"use strict";function De(z,ft){var nt={};for(var Ie in z)Object.prototype.hasOwnProperty.call(z,Ie)&&ft.indexOf(Ie)<0&&(nt[Ie]=z[Ie]);if(null!=z&&"function"==typeof Object.getOwnPropertySymbols){var Ee=0;for(Ie=Object.getOwnPropertySymbols(z);Ee<Ie.length;Ee++)ft.indexOf(Ie[Ee])<0&&Object.prototype.propertyIsEnumerable.call(z,Ie[Ee])&&(nt[Ie[Ee]]=z[Ie[Ee]])}return nt}function Me(z,ft,nt,Ie){var tt,Ee=arguments.length,be=Ee<3?ft:null===Ie?Ie=Object.getOwnPropertyDescriptor(ft,nt):Ie;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)be=Reflect.decorate(z,ft,nt,Ie);else for(var $e=z.length-1;$e>=0;$e--)(tt=z[$e])&&(be=(Ee<3?tt(be):Ee>3?tt(ft,nt,be):tt(ft,nt))||be);return Ee>3&&be&&Object.defineProperty(ft,nt,be),be}function de(z,ft,nt,Ie){return new(nt||(nt=Promise))(function(be,tt){function $e(Pt){try{Ke(Ie.next(Pt))}catch(At){tt(At)}}function Je(Pt){try{Ke(Ie.throw(Pt))}catch(At){tt(At)}}function Ke(Pt){Pt.done?be(Pt.value):function Ee(be){return be instanceof nt?be:new nt(function(tt){tt(be)})}(Pt.value).then($e,Je)}Ke((Ie=Ie.apply(z,ft||[])).next())})}function st(z){return this instanceof st?(this.v=z,this):new st(z)}function Xe(z,ft,nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,Ie=nt.apply(z,ft||[]),be=[];return Ee={},tt("next"),tt("throw"),tt("return"),Ee[Symbol.asyncIterator]=function(){return this},Ee;function tt(Nt){Ie[Nt]&&(Ee[Nt]=function(vt){return new Promise(function(Sn,En){be.push([Nt,vt,Sn,En])>1||$e(Nt,vt)})})}function $e(Nt,vt){try{!function Je(Nt){Nt.value instanceof st?Promise.resolve(Nt.value.v).then(Ke,Pt):At(be[0][2],Nt)}(Ie[Nt](vt))}catch(Sn){At(be[0][3],Sn)}}function Ke(Nt){$e("next",Nt)}function Pt(Nt){$e("throw",Nt)}function At(Nt,vt){Nt(vt),be.shift(),be.length&&$e(be[0][0],be[0][1])}}function Pe(z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var nt,ft=z[Symbol.asyncIterator];return ft?ft.call(z):(z=function Ct(z){var ft="function"==typeof Symbol&&Symbol.iterator,nt=ft&&z[ft],Ie=0;if(nt)return nt.call(z);if(z&&"number"==typeof z.length)return{next:function(){return z&&Ie>=z.length&&(z=void 0),{value:z&&z[Ie++],done:!z}}};throw new TypeError(ft?"Object is not iterable.":"Symbol.iterator is not defined.")}(z),nt={},Ie("next"),Ie("throw"),Ie("return"),nt[Symbol.asyncIterator]=function(){return this},nt);function Ie(be){nt[be]=z[be]&&function(tt){return new Promise(function($e,Je){!function Ee(be,tt,$e,Je){Promise.resolve(Je).then(function(Ke){be({value:Ke,done:$e})},tt)}($e,Je,(tt=z[be](tt)).done,tt.value)})}}}B.d(ht,{FC:()=>Xe,KL:()=>Pe,_T:()=>De,gn:()=>Me,mG:()=>de,qq:()=>st})},6895:(sn,ht,B)=>{"use strict";B.d(ht,{Do:()=>le,EM:()=>es,HT:()=>De,JF:()=>Zi,K0:()=>Ae,Mx:()=>ji,O5:()=>lt,PM:()=>Bs,S$:()=>Ct,V_:()=>Ve,Ye:()=>at,b0:()=>ye,bD:()=>$s,ez:()=>Xs,q:()=>G,sg:()=>ee,tP:()=>Kr,w_:()=>Me});var a=B(4650);let J=null;function G(){return J}function De(N){J||(J=N)}class Me{}const Ae=new a.OlP("DocumentToken");let he=(()=>{class N{historyGo($){throw new Error("Not implemented")}}return N.\u0275fac=function($){return new($||N)},N.\u0275prov=a.Yz7({token:N,factory:function(){return function xe(){return(0,a.LFG)(ge)}()},providedIn:"platform"}),N})();const Ve=new a.OlP("Location Initialized");let ge=(()=>{class N extends he{constructor($){super(),this._doc=$,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return G().getBaseHref(this._doc)}onPopState($){const re=G().getGlobalEventTarget(this._doc,"window");return re.addEventListener("popstate",$,!1),()=>re.removeEventListener("popstate",$)}onHashChange($){const re=G().getGlobalEventTarget(this._doc,"window");return re.addEventListener("hashchange",$,!1),()=>re.removeEventListener("hashchange",$)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname($){this._location.pathname=$}pushState($,re,pe){ce()?this._history.pushState($,re,pe):this._location.hash=pe}replaceState($,re,pe){ce()?this._history.replaceState($,re,pe):this._location.hash=pe}forward(){this._history.forward()}back(){this._history.back()}historyGo($=0){this._history.go($)}getState(){return this._history.state}}return N.\u0275fac=function($){return new($||N)(a.LFG(Ae))},N.\u0275prov=a.Yz7({token:N,factory:function(){return function de(){return new ge((0,a.LFG)(Ae))}()},providedIn:"platform"}),N})();function ce(){return!!window.history.pushState}function Ce(N,K){if(0==N.length)return K;if(0==K.length)return N;let $=0;return N.endsWith("/")&&$++,K.startsWith("/")&&$++,2==$?N+K.substring(1):1==$?N+K:N+"/"+K}function Fe(N){const K=N.match(/#|\?|$/),$=K&&K.index||N.length;return N.slice(0,$-("/"===N[$-1]?1:0))+N.slice($)}function it(N){return N&&"?"!==N[0]?"?"+N:N}let Ct=(()=>{class N{historyGo($){throw new Error("Not implemented")}}return N.\u0275fac=function($){return new($||N)},N.\u0275prov=a.Yz7({token:N,factory:function(){return(0,a.f3M)(ye)},providedIn:"root"}),N})();const Te=new a.OlP("appBaseHref");let ye=(()=>{class N extends Ct{constructor($,re){var pe,_t,Bt;super(),this._platformLocation=$,this._removeListenerFns=[],this._baseHref=null!==(pe=null!==(_t=null!=re?re:this._platformLocation.getBaseHrefFromDOM())&&void 0!==_t?_t:null===(Bt=(0,a.f3M)(Ae).location)||void 0===Bt?void 0:Bt.origin)&&void 0!==pe?pe:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}prepareExternalUrl($){return Ce(this._baseHref,$)}path($=!1){const re=this._platformLocation.pathname+it(this._platformLocation.search),pe=this._platformLocation.hash;return pe&&$?`${re}${pe}`:re}pushState($,re,pe,_t){const Bt=this.prepareExternalUrl(pe+it(_t));this._platformLocation.pushState($,re,Bt)}replaceState($,re,pe,_t){const Bt=this.prepareExternalUrl(pe+it(_t));this._platformLocation.replaceState($,re,Bt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){var re,pe;null===(re=(pe=this._platformLocation).historyGo)||void 0===re||re.call(pe,$)}}return N.\u0275fac=function($){return new($||N)(a.LFG(he),a.LFG(Te,8))},N.\u0275prov=a.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})(),le=(()=>{class N extends Ct{constructor($,re){super(),this._platformLocation=$,this._baseHref="",this._removeListenerFns=[],null!=re&&(this._baseHref=re)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}path($=!1){let re=this._platformLocation.hash;return null==re&&(re="#"),re.length>0?re.substring(1):re}prepareExternalUrl($){const re=Ce(this._baseHref,$);return re.length>0?"#"+re:re}pushState($,re,pe,_t){let Bt=this.prepareExternalUrl(pe+it(_t));0==Bt.length&&(Bt=this._platformLocation.pathname),this._platformLocation.pushState($,re,Bt)}replaceState($,re,pe,_t){let Bt=this.prepareExternalUrl(pe+it(_t));0==Bt.length&&(Bt=this._platformLocation.pathname),this._platformLocation.replaceState($,re,Bt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){var re,pe;null===(re=(pe=this._platformLocation).historyGo)||void 0===re||re.call(pe,$)}}return N.\u0275fac=function($){return new($||N)(a.LFG(he),a.LFG(Te,8))},N.\u0275prov=a.Yz7({token:N,factory:N.\u0275fac}),N})(),at=(()=>{class N{constructor($){this._subject=new a.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=$;const re=this._locationStrategy.getBaseHref();this._basePath=function Pe(N){if(new RegExp("^(https?:)?//").test(N)){const[,$]=N.split(/\/\/[^\/]+/);return $}return N}(Fe(Ze(re))),this._locationStrategy.onPopState(pe=>{this._subject.emit({url:this.path(!0),pop:!0,state:pe.state,type:pe.type})})}ngOnDestroy(){var $;null===($=this._urlChangeSubscription)||void 0===$||$.unsubscribe(),this._urlChangeListeners=[]}path($=!1){return this.normalize(this._locationStrategy.path($))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo($,re=""){return this.path()==this.normalize($+it(re))}normalize($){return N.stripTrailingSlash(function Xe(N,K){if(!N||!K.startsWith(N))return K;const $=K.substring(N.length);return""===$||["/",";","?","#"].includes($[0])?$:K}(this._basePath,Ze($)))}prepareExternalUrl($){return $&&"/"!==$[0]&&($="/"+$),this._locationStrategy.prepareExternalUrl($)}go($,re="",pe=null){this._locationStrategy.pushState(pe,"",$,re),this._notifyUrlChangeListeners(this.prepareExternalUrl($+it(re)),pe)}replaceState($,re="",pe=null){this._locationStrategy.replaceState(pe,"",$,re),this._notifyUrlChangeListeners(this.prepareExternalUrl($+it(re)),pe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo($=0){var re,pe;null===(re=(pe=this._locationStrategy).historyGo)||void 0===re||re.call(pe,$)}onUrlChange($){return this._urlChangeListeners.push($),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(re=>{this._notifyUrlChangeListeners(re.url,re.state)})),()=>{const re=this._urlChangeListeners.indexOf($);var pe;this._urlChangeListeners.splice(re,1),0===this._urlChangeListeners.length&&(null===(pe=this._urlChangeSubscription)||void 0===pe||pe.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners($="",re){this._urlChangeListeners.forEach(pe=>pe($,re))}subscribe($,re,pe){return this._subject.subscribe({next:$,error:re,complete:pe})}}return N.normalizeQueryParams=it,N.joinWithSlash=Ce,N.stripTrailingSlash=Fe,N.\u0275fac=function($){return new($||N)(a.LFG(Ct))},N.\u0275prov=a.Yz7({token:N,factory:function(){return function st(){return new at((0,a.LFG)(Ct))}()},providedIn:"root"}),N})();function Ze(N){return N.replace(/\/index.html$/,"")}function ji(N,K){K=encodeURIComponent(K);for(const $ of N.split(";")){const re=$.indexOf("="),[pe,_t]=-1==re?[$,""]:[$.slice(0,re),$.slice(re+1)];if(pe.trim()===K)return decodeURIComponent(_t)}return null}class Hi{constructor(K,$,re,pe){this.$implicit=K,this.ngForOf=$,this.index=re,this.count=pe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ee=(()=>{class N{set ngForOf($){this._ngForOf=$,this._ngForOfDirty=!0}set ngForTrackBy($){this._trackByFn=$}get ngForTrackBy(){return this._trackByFn}constructor($,re,pe){this._viewContainer=$,this._template=re,this._differs=pe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate($){$&&(this._template=$)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const $=this._ngForOf;!this._differ&&$&&(this._differ=this._differs.find($).create(this.ngForTrackBy))}if(this._differ){const $=this._differ.diff(this._ngForOf);$&&this._applyChanges($)}}_applyChanges($){const re=this._viewContainer;$.forEachOperation((pe,_t,Bt)=>{if(null==pe.previousIndex)re.createEmbeddedView(this._template,new Hi(pe.item,this._ngForOf,-1,-1),null===Bt?void 0:Bt);else if(null==Bt)re.remove(null===_t?void 0:_t);else if(null!==_t){const un=re.get(_t);re.move(un,Bt),fe(un,pe)}});for(let pe=0,_t=re.length;pe<_t;pe++){const un=re.get(pe).context;un.index=pe,un.count=_t,un.ngForOf=this._ngForOf}$.forEachIdentityChange(pe=>{fe(re.get(pe.currentIndex),pe)})}static ngTemplateContextGuard($,re){return!0}}return N.\u0275fac=function($){return new($||N)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},N.\u0275dir=a.lG2({type:N,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),N})();function fe(N,K){N.context.$implicit=K.item}let lt=(()=>{class N{constructor($,re){this._viewContainer=$,this._context=new xt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=re}set ngIf($){this._context.$implicit=this._context.ngIf=$,this._updateView()}set ngIfThen($){ae("ngIfThen",$),this._thenTemplateRef=$,this._thenViewRef=null,this._updateView()}set ngIfElse($){ae("ngIfElse",$),this._elseTemplateRef=$,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard($,re){return!0}}return N.\u0275fac=function($){return new($||N)(a.Y36(a.s_b),a.Y36(a.Rgc))},N.\u0275dir=a.lG2({type:N,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),N})();class xt{constructor(){this.$implicit=null,this.ngIf=null}}function ae(N,K){if(K&&!K.createEmbeddedView)throw new Error(`${N} must be a TemplateRef, but received '${(0,a.AaK)(K)}'.`)}let Kr=(()=>{class N{constructor($){this._viewContainerRef=$,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges($){if($.ngTemplateOutlet||$.ngTemplateOutletInjector){const re=this._viewContainerRef;if(this._viewRef&&re.remove(re.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:pe,ngTemplateOutletContext:_t,ngTemplateOutletInjector:Bt}=this;this._viewRef=re.createEmbeddedView(pe,_t,Bt?{injector:Bt}:void 0)}else this._viewRef=null}else this._viewRef&&$.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return N.\u0275fac=function($){return new($||N)(a.Y36(a.s_b))},N.\u0275dir=a.lG2({type:N,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[a.TTD]}),N})(),Xs=(()=>{class N{}return N.\u0275fac=function($){return new($||N)},N.\u0275mod=a.oAB({type:N}),N.\u0275inj=a.cJS({}),N})();const $s="browser",Ai="server";function Bs(N){return N===Ai}let es=(()=>{class N{}return N.\u0275prov=(0,a.Yz7)({token:N,providedIn:"root",factory:()=>new os((0,a.LFG)(Ae),window)}),N})();class os{constructor(K,$){this.document=K,this.window=$,this.offset=()=>[0,0]}setOffset(K){this.offset=Array.isArray(K)?()=>K:K}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(K){this.supportsScrolling()&&this.window.scrollTo(K[0],K[1])}scrollToAnchor(K){if(!this.supportsScrolling())return;const $=function xi(N,K){const $=N.getElementById(K)||N.getElementsByName(K)[0];if($)return $;if("function"==typeof N.createTreeWalker&&N.body&&(N.body.createShadowRoot||N.body.attachShadow)){const re=N.createTreeWalker(N.body,NodeFilter.SHOW_ELEMENT);let pe=re.currentNode;for(;pe;){const _t=pe.shadowRoot;if(_t){const Bt=_t.getElementById(K)||_t.querySelector(`[name="${K}"]`);if(Bt)return Bt}pe=re.nextNode()}}return null}(this.document,K);$&&(this.scrollToElement($),$.focus())}setHistoryScrollRestoration(K){if(this.supportScrollRestoration()){const $=this.window.history;$&&$.scrollRestoration&&($.scrollRestoration=K)}}scrollToElement(K){const $=K.getBoundingClientRect(),re=$.left+this.window.pageXOffset,pe=$.top+this.window.pageYOffset,_t=this.offset();this.window.scrollTo(re-_t[0],pe-_t[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const K=Vs(this.window.history)||Vs(Object.getPrototypeOf(this.window.history));return!(!K||!K.writable&&!K.set)}catch(K){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(K){return!1}}}function Vs(N){return Object.getOwnPropertyDescriptor(N,"scrollRestoration")}class Zi{}},4650:(sn,ht,B)=>{"use strict";B.d(ht,{$8M:()=>ba,$WT:()=>Ei,$Z:()=>sg,AFp:()=>oE,AaK:()=>xe,AsE:()=>tm,CHM:()=>D,CRH:()=>$0,CZH:()=>hv,CqO:()=>gp,D6c:()=>Aw,EJc:()=>HI,EpF:()=>hp,F$t:()=>kd,F4k:()=>pp,FYo:()=>d,FiY:()=>F,G48:()=>cw,Gf:()=>F0,GfV:()=>H,GkF:()=>dp,Gpc:()=>ce,Hsn:()=>vp,JOm:()=>_i,KtG:()=>W,LFG:()=>en,Lbi:()=>VI,Lck:()=>Ye,MMx:()=>ir,NdJ:()=>cf,OlP:()=>vi,Oqu:()=>mf,P3R:()=>Yl,PXZ:()=>iw,Q6J:()=>cp,QGY:()=>fp,Qsj:()=>v,R0b:()=>Yu,RDi:()=>Lu,Rgc:()=>gm,SBq:()=>f,Sil:()=>zI,Suo:()=>L0,TTD:()=>es,TgZ:()=>uf,X6Q:()=>uw,XFs:()=>Wt,Xpm:()=>fr,Xts:()=>go,Y36:()=>oh,YKP:()=>ue,YNc:()=>up,Yjl:()=>Ui,Yz7:()=>At,Z0I:()=>En,ZZ4:()=>o0,_Bn:()=>j,_UZ:()=>Bg,_Vd:()=>_c,_c5:()=>Tw,_uU:()=>em,aQg:()=>a0,c2e:()=>UI,cJS:()=>vt,cg1:()=>xp,dDg:()=>ew,dqk:()=>Dn,eFA:()=>_E,eJc:()=>H_,ekj:()=>Xg,eoX:()=>gE,f3M:()=>gn,g9A:()=>lE,h0i:()=>Z,hGG:()=>Sw,hij:()=>wp,iGM:()=>k0,ifc:()=>gt,ip1:()=>sE,jDz:()=>vo,kL8:()=>bf,lG2:()=>is,lqb:()=>Pl,lri:()=>fE,n5z:()=>ru,oAB:()=>fi,oxw:()=>yp,q4F:()=>ie,qLn:()=>qt,qOj:()=>Cg,qZA:()=>Nd,rWj:()=>pE,sBO:()=>dw,s_b:()=>uv,soG:()=>fv,tb:()=>yE,tp0:()=>te,uIk:()=>lf,vHH:()=>Te,vpe:()=>sd,wAp:()=>Pr,xp6:()=>Am,z2F:()=>pv,zSh:()=>wd,zs3:()=>Ic});var a=B(7579),J=B(727),G=B(9751),De=B(6451),Me=B(3099);function Ae(n){for(let r in n)if(n[r]===Ae)return r;throw Error("Could not find renamed property on target object.")}function he(n,r){for(const o in r)r.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=r[o])}function xe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(xe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function Ve(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const ge=Ae({__forward_ref__:Ae});function ce(n){return n.__forward_ref__=ce,n.toString=function(){return xe(this())},n}function de(n){return Ce(n)?n():n}function Ce(n){return"function"==typeof n&&n.hasOwnProperty(ge)&&n.__forward_ref__===ce}function Fe(n){return n&&!!n.\u0275providers}const Ct="https://g.co/ng/security#xss";class Te extends Error{constructor(r,o){super(ye(r,o)),this.code=r}}function ye(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}function le(n){return"string"==typeof n?n:null==n?"":String(n)}function Pe(n,r){throw new Te(-201,!1)}function tt(n,r){null==n&&function $e(n,r,o,l){throw new Error(`ASSERTION ERROR: ${n}`+(null==l?"":` [Expected=> ${o} ${l} ${r} <=Actual]`))}(r,n,null,"!=")}function At(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function vt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Sn(n){return Fn(n,vr)||Fn(n,hn)}function En(n){return null!==Sn(n)}function Fn(n,r){return n.hasOwnProperty(r)?n[r]:null}function Qn(n){return n&&(n.hasOwnProperty(lr)||n.hasOwnProperty(_r))?n[lr]:null}const vr=Ae({\u0275prov:Ae}),lr=Ae({\u0275inj:Ae}),hn=Ae({ngInjectableDef:Ae}),_r=Ae({ngInjectorDef:Ae});var Wt=(()=>((Wt=Wt||{})[Wt.Default=0]="Default",Wt[Wt.Host=1]="Host",Wt[Wt.Self=2]="Self",Wt[Wt.SkipSelf=4]="SkipSelf",Wt[Wt.Optional=8]="Optional",Wt))();let Jr;function Er(n){const r=Jr;return Jr=n,r}function Zr(n,r,o){const l=Sn(n);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:o&Wt.Optional?null:void 0!==r?r:void Pe(xe(n))}const Dn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),mr={},Kt="__NG_DI_FLAG__",Ar="ngTempTokenPath",yi="ngTokenPath",Li=/\n/gm,Dr="\u0275",di="__source";let rr;function Nn(n){const r=rr;return rr=n,r}function hi(n,r=Wt.Default){if(void 0===rr)throw new Te(-203,!1);return null===rr?Zr(n,void 0,r):rr.get(n,r&Wt.Optional?null:void 0,r)}function en(n,r=Wt.Default){return(function Cr(){return Jr}()||hi)(de(n),r)}function gn(n,r=Wt.Default){return en(n,Tn(r))}function Tn(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function On(n){const r=[];for(let o=0;o<n.length;o++){const l=de(n[o]);if(Array.isArray(l)){if(0===l.length)throw new Te(900,!1);let p,_=Wt.Default;for(let T=0;T<l.length;T++){const P=l[T],L=xr(P);"number"==typeof L?-1===L?p=P.token:_|=L:p=P}r.push(en(p,_))}else r.push(en(l))}return r}function Vn(n,r){return n[Kt]=r,n.prototype[Kt]=r,n}function xr(n){return n[Kt]}function ze(n){return{toString:n}.toString()}var Mt=(()=>((Mt=Mt||{})[Mt.OnPush=0]="OnPush",Mt[Mt.Default=1]="Default",Mt))(),gt=(()=>{return(n=gt||(gt={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",gt;var n})();const dn={},Le=[],Be=Ae({\u0275cmp:Ae}),me=Ae({\u0275dir:Ae}),mt=Ae({\u0275pipe:Ae}),Rt=Ae({\u0275mod:Ae}),jt=Ae({\u0275fac:Ae}),xn=Ae({__NG_ELEMENT_ID__:Ae});let Hn=0;function fr(n){return ze(()=>{const r=jr(n),o={...r,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Mt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||gt.Emulated,id:"c"+Hn++,styles:n.styles||Le,_:null,schemas:n.schemas||null,tView:null};ji(o);const l=n.dependencies;return o.directiveDefs=Ji(l,!1),o.pipeDefs=Ji(l,!0),o})}function Bi(n){return Zn(n)||Wr(n)}function Yi(n){return null!==n}function fi(n){return ze(()=>({type:n.type,bootstrap:n.bootstrap||Le,declarations:n.declarations||Le,imports:n.imports||Le,exports:n.exports||Le,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Rr(n,r){if(null==n)return dn;const o={};for(const l in n)if(n.hasOwnProperty(l)){let p=n[l],_=p;Array.isArray(p)&&(_=p[1],p=p[0]),o[p]=l,r&&(r[p]=_)}return o}function is(n){return ze(()=>{const r=jr(n);return ji(r),r})}function Ui(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Zn(n){return n[Be]||null}function Wr(n){return n[me]||null}function kr(n){return n[mt]||null}function Ei(n){const r=Zn(n)||Wr(n)||kr(n);return null!==r&&r.standalone}function ei(n,r){const o=n[Rt]||null;if(!o&&!0===r)throw new Error(`Type ${xe(n)} does not have '\u0275mod' property.`);return o}function jr(n){const r={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||Le,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Rr(n.inputs,r),outputs:Rr(n.outputs)}}function ji(n){var r;null===(r=n.features)||void 0===r||r.forEach(o=>o(n))}function Ji(n,r){if(!n)return null;const o=r?kr:Bi;return()=>("function"==typeof n?n():n).map(l=>o(l)).filter(Yi)}const Si=0,ln=1,Kn=2,Tr=3,ti=4,Hi=5,ee=6,fe=7,We=8,lt=9,xt=10,ae=11,qe=12,pt=13,Dt=14,Ft=15,Xt=16,wn=17,Mn=18,Ir=19,Kr=20,ot=21,Ne=22,Ut=1,tn=2,kn=7,zn=8,Qr=9,sr=10;function Yn(n){return Array.isArray(n)&&"object"==typeof n[Ut]}function Bn(n){return Array.isArray(n)&&!0===n[Ut]}function qi(n){return 0!=(4&n.flags)}function Br(n){return n.componentOffset>-1}function ds(n){return 1==(1&n.flags)}function Gi(n){return!!n.template}function Ys(n){return 0!=(256&n[Kn])}function Ii(n,r){return n.hasOwnProperty(jt)?n[jt]:null}class ur{constructor(r,o,l){this.previousValue=r,this.currentValue=o,this.firstChange=l}isFirstChange(){return this.firstChange}}function es(){return os}function os(n){return n.type.prototype.ngOnChanges&&(n.setInput=xi),Vs}function Vs(){const n=Zi(this),r=null==n?void 0:n.current;if(r){const o=n.previous;if(o===dn)n.previous=r;else for(let l in r)o[l]=r[l];n.current=null,this.ngOnChanges(r)}}function xi(n,r,o,l){const p=this.declaredInputs[o],_=Zi(n)||function Yo(n,r){return n[hs]=r}(n,{previous:dn,current:null}),T=_.current||(_.current={}),P=_.previous,L=P[p];T[p]=new ur(L&&L.currentValue,r,P===dn),n[l]=r}es.ngInherit=!0;const hs="__ngSimpleChanges__";function Zi(n){return n[hs]||null}const Or=function(n,r,o){};function oi(n){for(;Array.isArray(n);)n=n[Si];return n}function js(n,r){return oi(r[n])}function ui(n,r){return oi(r[n.index])}function Zo(n,r){return n.data[r]}function Mi(n,r){const o=r[n];return Yn(o)?o:o[Si]}function Lr(n){return 64==(64&n[Kn])}function fs(n,r){return null==r?null:n[r]}function Bo(n){n[Mn]=0}function Vo(n,r){n[Hi]+=r;let o=n,l=n[Tr];for(;null!==l&&(1===r&&1===o[Hi]||-1===r&&0===o[Hi]);)l[Hi]+=r,o=l,l=l[Tr]}const Xn={lFrame:Xa(null),bindingsEnabled:!0};function Qo(){return Xn.bindingsEnabled}function E(){return Xn.lFrame.lView}function h(){return Xn.lFrame.tView}function D(n){return Xn.lFrame.contextLView=n,n[We]}function W(n){return Xn.lFrame.contextLView=null,n}function Ue(){let n=Gt();for(;null!==n&&64===n.type;)n=n.parent;return n}function Gt(){return Xn.lFrame.currentTNode}function Pn(n,r){const o=Xn.lFrame;o.currentTNode=n,o.isParent=r}function cr(){return Xn.lFrame.isParent}function Yr(){Xn.lFrame.isParent=!1}function Do(){return Xn.lFrame.bindingIndex++}function eo(n){const r=Xn.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}function Fa(n,r){const o=Xn.lFrame;o.bindingIndex=o.bindingRootIndex=n,Os(r)}function Os(n){Xn.lFrame.currentDirectiveIndex=n}function jo(){return Xn.lFrame.currentQueryIndex}function To(n){Xn.lFrame.currentQueryIndex=n}function Za(n){const r=n[ln];return 2===r.type?r.declTNode:1===r.type?n[ee]:null}function Qa(n,r,o){if(o&Wt.SkipSelf){let p=r,_=n;for(;!(p=p.parent,null!==p||o&Wt.Host||(p=Za(_),null===p||(_=_[Ft],10&p.type))););if(null===p)return!1;r=p,n=_}const l=Xn.lFrame=tu();return l.currentTNode=r,l.lView=n,!0}function $a(n){const r=tu(),o=n[ln];Xn.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function tu(){const n=Xn.lFrame,r=null===n?null:n.child;return null===r?Xa(n):r}function Xa(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Ho(){const n=Xn.lFrame;return Xn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const nu=Ho;function ws(){const n=Ho();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Vi(){return Xn.lFrame.selectedIndex}function Pi(n){Xn.lFrame.selectedIndex=n}function Xr(){const n=Xn.lFrame;return Zo(n.tView,n.selectedIndex)}function fa(n,r){for(let o=r.directiveStart,l=r.directiveEnd;o<l;o++){const _=n.data[o].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:P,ngAfterViewInit:L,ngAfterViewChecked:q,ngOnDestroy:se}=_;T&&(n.contentHooks||(n.contentHooks=[])).push(-o,T),P&&((n.contentHooks||(n.contentHooks=[])).push(o,P),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,P)),L&&(n.viewHooks||(n.viewHooks=[])).push(-o,L),q&&((n.viewHooks||(n.viewHooks=[])).push(o,q),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,q)),null!=se&&(n.destroyHooks||(n.destroyHooks=[])).push(o,se)}}function el(n,r,o){$(n,r,3,o)}function N(n,r,o,l){(3&n[Kn])===o&&$(n,r,o,l)}function K(n,r){let o=n[Kn];(3&o)===r&&(o&=2047,o+=1,n[Kn]=o)}function $(n,r,o,l){const _=null!=l?l:-1,T=r.length-1;let P=0;for(let L=void 0!==l?65535&n[Mn]:0;L<T;L++)if("number"==typeof r[L+1]){if(P=r[L],null!=l&&P>=l)break}else r[L]<0&&(n[Mn]+=65536),(P<_||-1==_)&&(re(n,o,r,L),n[Mn]=(4294901760&n[Mn])+L+2),L++}function re(n,r,o,l){const p=o[l]<0,_=o[l+1],P=n[p?-o[l]:o[l]];if(p){if(n[Kn]>>11<n[Mn]>>16&&(3&n[Kn])===r){n[Kn]+=2048,Or(4,P,_);try{_.call(P)}finally{Or(5,P,_)}}}else{Or(4,P,_);try{_.call(P)}finally{Or(5,P,_)}}}const pe=-1;class _t{constructor(r,o,l){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=l}}function mn(n,r,o){let l=0;for(;l<o.length;){const p=o[l];if("number"==typeof p){if(0!==p)break;l++;const _=o[l++],T=o[l++],P=o[l++];n.setAttribute(r,T,P,_)}else{const _=p,T=o[++l];cn(_)?n.setProperty(r,_,T):n.setAttribute(r,_,T),l++}}return l}function ls(n){return 3===n||4===n||6===n}function cn(n){return 64===n.charCodeAt(0)}function wt(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let l=0;l<r.length;l++){const p=r[l];"number"==typeof p?o=p:0===o||zt(n,o,p,null,-1===o||2===o?r[++l]:null)}}return n}function zt(n,r,o,l,p){let _=0,T=n.length;if(-1===r)T=-1;else for(;_<n.length;){const P=n[_++];if("number"==typeof P){if(P===r){T=-1;break}if(P>r){T=_-1;break}}}for(;_<n.length;){const P=n[_];if("number"==typeof P)break;if(P===o){if(null===l)return void(null!==p&&(n[_+1]=p));if(l===n[_+1])return void(n[_+2]=p)}_++,null!==l&&_++,null!==p&&_++}-1!==T&&(n.splice(T,0,r),_=T+1),n.splice(_++,0,o),null!==l&&n.splice(_++,0,l),null!==p&&n.splice(_++,0,p)}function wi(n){return n!==pe}function Ps(n){return 32767&n}function pa(n,r){let o=function tl(n){return n>>16}(n),l=r;for(;o>0;)l=l[Ft],o--;return l}let _l=!0;function So(n){const r=_l;return _l=n,r}const rl=255,il=5;let kl=0;const Ao={};function hr(n,r){const o=Ba(n,r);if(-1!==o)return o;const l=r[ln];l.firstCreatePass&&(n.injectorIndex=r.length,la(l.data,n),la(r,null),la(l.blueprint,null));const p=Ni(n,r),_=n.injectorIndex;if(wi(p)){const T=Ps(p),P=pa(p,r),L=P[ln].data;for(let q=0;q<8;q++)r[_+q]=P[T+q]|L[T+q]}return r[_+8]=p,_}function la(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Ba(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Ni(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,l=null,p=r;for(;null!==p;){if(l=Ds(p),null===l)return pe;if(o++,p=p[Ft],-1!==l.injectorIndex)return l.injectorIndex|o<<16}return pe}function Gn(n,r,o){!function Fl(n,r,o){let l;"string"==typeof o?l=o.charCodeAt(0)||0:o.hasOwnProperty(xn)&&(l=o[xn]),null==l&&(l=o[xn]=kl++);const p=l&rl;r.data[n+(p>>il)]|=1<<p}(n,r,o)}function Ur(n,r,o){if(o&Wt.Optional||void 0!==n)return n;Pe()}function El(n,r,o,l){if(o&Wt.Optional&&void 0===l&&(l=null),!(o&(Wt.Self|Wt.Host))){const p=n[lt],_=Er(void 0);try{return p?p.get(r,l,o&Wt.Optional):Zr(r,l,o&Wt.Optional)}finally{Er(_)}}return Ur(l,0,o)}function pi(n,r,o,l=Wt.Default,p){if(null!==n){if(1024&r[Kn]){const T=function Il(n,r,o,l,p){let _=n,T=r;for(;null!==_&&null!==T&&1024&T[Kn]&&!(256&T[Kn]);){const P=pn(_,T,o,l|Wt.Self,Ao);if(P!==Ao)return P;let L=_.parent;if(!L){const q=T[ot];if(q){const se=q.get(o,Ao,l);if(se!==Ao)return se}L=Ds(T),T=T[Ft]}_=L}return p}(n,r,o,l,Ao);if(T!==Ao)return T}const _=pn(n,r,o,l,Ao);if(_!==Ao)return _}return El(r,o,l,p)}function pn(n,r,o,l,p){const _=function bu(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(xn)?n[xn]:void 0;return"number"==typeof r?r>=0?r&rl:qu:r}(o);if("function"==typeof _){if(!Qa(r,n,l))return l&Wt.Host?Ur(p,0,l):El(r,o,l,p);try{const T=_(l);if(null!=T||l&Wt.Optional)return T;Pe()}finally{nu()}}else if("number"==typeof _){let T=null,P=Ba(n,r),L=pe,q=l&Wt.Host?r[Xt][ee]:null;for((-1===P||l&Wt.SkipSelf)&&(L=-1===P?Ni(n,r):r[P+8],L!==pe&&ua(l,!1)?(T=r[ln],P=Ps(L),r=pa(L,r)):P=-1);-1!==P;){const se=r[ln];if(uo(_,P,se.data)){const we=ms(P,r,o,T,l,q);if(we!==Ao)return we}L=r[P+8],L!==pe&&ua(l,r[ln].data[P+8]===q)&&uo(_,P,r)?(T=se,P=Ps(L),r=pa(L,r)):P=-1}}return p}function ms(n,r,o,l,p,_){const T=r[ln],P=T.data[n+8],se=Xo(P,T,o,null==l?Br(P)&&_l:l!=T&&0!=(3&P.type),p&Wt.Host&&_===P);return null!==se?Cs(r,T,se,P):Ao}function Xo(n,r,o,l,p){const _=n.providerIndexes,T=r.data,P=1048575&_,L=n.directiveStart,se=_>>20,ct=p?P+se:n.directiveEnd;for(let St=l?P:P+se;St<ct;St++){const Qt=T[St];if(St<L&&o===Qt||St>=L&&Qt.type===o)return St}if(p){const St=T[L];if(St&&Gi(St)&&St.type===o)return L}return null}function Cs(n,r,o,l){let p=n[o];const _=r.data;if(function Bt(n){return n instanceof _t}(p)){const T=p;T.resolving&&function st(n,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Te(-200,`Circular dependency in DI detected for ${n}${o}`)}(function at(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():le(n)}(_[o]));const P=So(T.canSeeViewProviders);T.resolving=!0;const L=T.injectImpl?Er(T.injectImpl):null;Qa(n,l,Wt.Default);try{p=n[o]=T.factory(void 0,_,n,l),r.firstCreatePass&&o>=l.directiveStart&&function Ca(n,r,o){const{ngOnChanges:l,ngOnInit:p,ngDoCheck:_}=r.type.prototype;if(l){const T=os(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,T),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,T)}p&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,p),_&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,_),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,_))}(o,_[o],r)}finally{null!==L&&Er(L),So(P),T.resolving=!1,nu()}}return p}function uo(n,r,o){return!!(o[r+(n>>il)]&1<<n)}function ua(n,r){return!(n&Wt.Self||n&Wt.Host&&r)}class ga{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,l){return pi(this._tNode,this._lView,r,Tn(l),o)}}function qu(){return new ga(Ue(),E())}function ru(n){return ze(()=>{const r=n.prototype.constructor,o=r[jt]||bs(r),l=Object.prototype;let p=Object.getPrototypeOf(n.prototype).constructor;for(;p&&p!==l;){const _=p[jt]||bs(p);if(_&&_!==o)return _;p=Object.getPrototypeOf(p)}return _=>new _})}function bs(n){return Ce(n)?()=>{const r=bs(de(n));return r&&r()}:Ii(n)}function Ds(n){const r=n[ln],o=r.type;return 2===o?r.declTNode:1===o?n[ee]:null}function ba(n){return function lo(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const l=o.length;let p=0;for(;p<l;){const _=o[p];if(ls(_))break;if(0===_)p+=2;else if("number"==typeof _)for(p++;p<l&&"string"==typeof o[p];)p++;else{if(_===r)return o[p+1];p+=2}}}return null}(Ue(),n)}const sl="__parameters__";function ol(n,r,o){return ze(()=>{const l=function co(n){return function(...o){if(n){const l=n(...o);for(const p in l)this[p]=l[p]}}}(r);function p(..._){if(this instanceof p)return l.apply(this,_),this;const T=new p(..._);return P.annotation=T,P;function P(L,q,se){const we=L.hasOwnProperty(sl)?L[sl]:Object.defineProperty(L,sl,{value:[]})[sl];for(;we.length<=se;)we.push(null);return(we[se]=we[se]||[]).push(T),L}}return o&&(p.prototype=Object.create(o.prototype)),p.prototype.ngMetadataName=n,p.annotationCls=p,p})}class vi{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=At({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function fo(n,r){n.forEach(o=>Array.isArray(o)?fo(o,r):r(o))}function Cl(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function Ua(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function zs(n,r){const o=[];for(let l=0;l<n;l++)o.push(r);return o}function Qi(n,r,o){let l=x(n,r);return l>=0?n[1|l]=o:(l=~l,function to(n,r,o,l){let p=n.length;if(p==r)n.push(o,l);else if(1===p)n.push(l,n[0]),n[0]=o;else{for(p--,n.push(n[p-1],n[p]);p>r;)n[p]=n[p-2],p--;n[r]=o,n[r+1]=l}}(n,l,r,o)),l}function S(n,r){const o=x(n,r);if(o>=0)return n[1|o]}function x(n,r){return function R(n,r,o){let l=0,p=n.length>>o;for(;p!==l;){const _=l+(p-l>>1),T=n[_<<o];if(r===T)return _<<o;T>r?p=_:l=_+1}return~(p<<o)}(n,r,1)}const F=Vn(ol("Optional"),8),te=Vn(ol("SkipSelf"),4);var _i=(()=>((_i=_i||{})[_i.Important=1]="Important",_i[_i.DashCase=2]="DashCase",_i))();const au=new Map;let Hl=0;const Ro="__ngContext__";function vs(n,r){Yn(r)?(n[Ro]=r[Kr],function lu(n){au.set(n[Kr],n)}(r)):n[Ro]=r}let cu;function Rc(n,r){return cu(n,r)}function rc(n){const r=n[Tr];return Bn(r)?r[Tr]:r}function Tl(n){return fd(n[pt])}function Sl(n){return fd(n[ti])}function fd(n){for(;null!==n&&!Bn(n);)n=n[ti];return n}function Sa(n,r,o,l,p){if(null!=l){let _,T=!1;Bn(l)?_=l:Yn(l)&&(T=!0,l=l[Si]);const P=oi(l);0===n&&null!==o?null==p?ac(r,o,P):Ra(r,o,P,p||null,!0):1===n&&null!==o?Ra(r,o,P,p||null,!0):2===n?function ku(n,r,o){const l=us(n,r);l&&function Fc(n,r,o,l){n.removeChild(r,o,l)}(n,l,r,o)}(r,P,T):3===n&&r.destroyNode(P),null!=_&&function Lc(n,r,o,l,p){const _=o[kn];_!==oi(o)&&Sa(r,n,l,_,p);for(let P=sr;P<o.length;P++){const L=o[P];Fu(L[ln],L,n,r,l,_)}}(r,n,_,o,p)}}function xl(n,r,o){return n.createElement(r,o)}function gd(n,r){const o=n[Qr],l=o.indexOf(r),p=r[Tr];512&r[Kn]&&(r[Kn]&=-513,Vo(p,-1)),o.splice(l,1)}function kc(n,r){if(n.length<=sr)return;const o=sr+r,l=n[o];if(l){const p=l[wn];null!==p&&p!==n&&gd(p,l),r>0&&(n[o-1][ti]=l[ti]);const _=Ua(n,sr+r);!function Aa(n,r){Fu(n,r,r[ae],2,null,null),r[Si]=null,r[ee]=null}(l[ln],l);const T=_[Ir];null!==T&&T.detachView(_[ln]),l[Tr]=null,l[ti]=null,l[Kn]&=-65}return l}function du(n,r){if(!(128&r[Kn])){const o=r[ae];o.destroyNode&&Fu(n,r,o,3,null,null),function Xi(n){let r=n[pt];if(!r)return sc(n[ln],n);for(;r;){let o=null;if(Yn(r))o=r[pt];else{const l=r[sr];l&&(o=l)}if(!o){for(;r&&!r[ti]&&r!==n;)Yn(r)&&sc(r[ln],r),r=r[Tr];null===r&&(r=n),Yn(r)&&sc(r[ln],r),o=r&&r[ti]}r=o}}(r)}}function sc(n,r){if(!(128&r[Kn])){r[Kn]&=-65,r[Kn]|=128,function zl(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let l=0;l<o.length;l+=2){const p=r[o[l]];if(!(p instanceof _t)){const _=o[l+1];if(Array.isArray(_))for(let T=0;T<_.length;T+=2){const P=p[_[T]],L=_[T+1];Or(4,P,L);try{L.call(P)}finally{Or(5,P,L)}}else{Or(4,p,_);try{_.call(p)}finally{Or(5,p,_)}}}}}(n,r),function oc(n,r){const o=n.cleanup,l=r[fe];let p=-1;if(null!==o)for(let _=0;_<o.length-1;_+=2)if("string"==typeof o[_]){const T=o[_+3];T>=0?l[p=T]():l[p=-T].unsubscribe(),_+=2}else{const T=l[p=o[_+1]];o[_].call(T)}if(null!==l){for(let _=p+1;_<l.length;_++)(0,l[_])();r[fe]=null}}(n,r),1===r[ln].type&&r[ae].destroy();const o=r[wn];if(null!==o&&Bn(r[Tr])){o!==r[Tr]&&gd(o,r);const l=r[Ir];null!==l&&l.detachView(n)}!function ea(n){au.delete(n[Kr])}(r)}}function Ma(n,r,o){return function md(n,r,o){let l=r;for(;null!==l&&40&l.type;)l=(r=l).parent;if(null===l)return o[Si];{const{componentOffset:p}=l;if(p>-1){const{encapsulation:_}=n.data[l.directiveStart+p];if(_===gt.None||_===gt.Emulated)return null}return ui(l,o)}}(n,r.parent,o)}function Ra(n,r,o,l,p){n.insertBefore(r,o,l,p)}function ac(n,r,o){n.appendChild(r,o)}function Wl(n,r,o,l,p){null!==l?Ra(n,r,o,l,p):ac(n,r,o)}function us(n,r){return n.parentNode(r)}function Pu(n,r,o){return cs(n,r,o)}let hu,Na,Ha,cs=function Nu(n,r,o){return 40&n.type?ui(n,o):null};function pl(n,r,o,l){const p=Ma(n,l,r),_=r[ae],P=Pu(l.parent||r[ee],l,r);if(null!=p)if(Array.isArray(o))for(let L=0;L<o.length;L++)Wl(_,p,o[L],P,!1);else Wl(_,p,o,P,!1);void 0!==hu&&hu(_,l,r,o,p)}function so(n,r){if(null!==r){const o=r.type;if(3&o)return ui(r,n);if(4&o)return Oo(-1,n[r.index]);if(8&o){const l=r.child;if(null!==l)return so(n,l);{const p=n[r.index];return Bn(p)?Oo(-1,p):oi(p)}}if(32&o)return Rc(r,n)()||oi(n[r.index]);{const l=ks(n,r);return null!==l?Array.isArray(l)?l[0]:so(rc(n[Xt]),l):so(n,r.next)}}return null}function ks(n,r){return null!==r?n[Xt][ee].projection[r.projection]:null}function Oo(n,r){const o=sr+n+1;if(o<r.length){const l=r[o],p=l[ln].firstChild;if(null!==p)return so(l,p)}return r[kn]}function va(n,r,o,l,p,_,T){for(;null!=o;){const P=l[o.index],L=o.type;if(T&&0===r&&(P&&vs(oi(P),l),o.flags|=2),32!=(32&o.flags))if(8&L)va(n,r,o.child,l,p,_,!1),Sa(r,n,p,P,_);else if(32&L){const q=Rc(o,l);let se;for(;se=q();)Sa(r,n,p,se,_);Sa(r,n,p,P,_)}else 16&L?$r(n,r,l,o,p,_):Sa(r,n,p,P,_);o=T?o.projectionNext:o.next}}function Fu(n,r,o,l,p,_){va(o,l,n.firstChild,r,p,_,!1)}function $r(n,r,o,l,p,_){const T=o[Xt],L=T[ee].projection[l.projection];if(Array.isArray(L))for(let q=0;q<L.length;q++)Sa(r,n,p,L[q],_);else va(n,r,L,T[Tr],p,_,!0)}function fu(n,r,o){""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o)}function lc(n,r,o){const{mergedAttrs:l,classes:p,styles:_}=o;null!==l&&mn(n,r,l),null!==p&&fu(n,r,p),null!==_&&function Oa(n,r,o){n.setAttribute(r,"style",o)}(n,r,_)}function Lu(n){Na=n}function cc(n){var r;return(null===(r=function Vc(){if(void 0===Ha&&(Ha=null,Dn.trustedTypes))try{Ha=Dn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Ha}())||void 0===r?void 0:r.createScriptURL(n))||n}class vd{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ct})`}}function Y(n){return n instanceof vd?n.changingThisBreaksApplicationSecurity:n}function oe(n,r){const o=function dt(n){return n instanceof vd&&n.getTypeName()||null}(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see ${Ct})`)}return o===r}const jc=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var No=(()=>((No=No||{})[No.NONE=0]="NONE",No[No.HTML=1]="HTML",No[No.STYLE=2]="STYLE",No[No.SCRIPT=3]="SCRIPT",No[No.URL=4]="URL",No[No.RESOURCE_URL=5]="RESOURCE_URL",No))();function Pf(n){const r=Rl();return r?r.sanitize(No.URL,n)||"":oe(n,"URL")?Y(n):function $u(n){return(n=String(n)).match(jc)?n:"unsafe:"+n}(le(n))}function Vh(n){const r=Rl();if(r)return cc(r.sanitize(No.RESOURCE_URL,n)||"");if(oe(n,"ResourceURL"))return cc(Y(n));throw new Te(904,!1)}function Yl(n,r,o){return function Gp(n,r){return"src"===r&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===r&&("base"===n||"link"===n)?Vh:Pf}(r,o)(n)}function Rl(){const n=E();return n&&n[qe]}const go=new vi("ENVIRONMENT_INITIALIZER"),Zd=new vi("INJECTOR",-1),Qd=new vi("INJECTOR_DEF_TYPES");class Xd{get(r,o=mr){if(o===mr){const l=new Error(`NullInjectorError: No provider for ${xe(r)}!`);throw l.name="NullInjectorError",l}return o}}function kf(...n){return{\u0275providers:Ff(0,n),\u0275fromNgModule:!0}}function Ff(n,...r){const o=[],l=new Set;let p;return fo(r,_=>{const T=_;gc(T,o,[],l)&&(p||(p=[]),p.push(T))}),void 0!==p&&Uh(p,o),o}function Uh(n,r){for(let o=0;o<n.length;o++){const{providers:p}=n[o];ql(p,_=>{r.push(_)})}}function gc(n,r,o,l){if(!(n=de(n)))return!1;let p=null,_=Qn(n);const T=!_&&Zn(n);if(_||T){if(T&&!T.standalone)return!1;p=n}else{const L=n.ngModule;if(_=Qn(L),!_)return!1;p=L}const P=l.has(p);if(T){if(P)return!1;if(l.add(p),T.dependencies){const L="function"==typeof T.dependencies?T.dependencies():T.dependencies;for(const q of L)gc(q,r,o,l)}}else{if(!_)return!1;{if(null!=_.imports&&!P){let q;l.add(p);try{fo(_.imports,se=>{gc(se,r,o,l)&&(q||(q=[]),q.push(se))})}finally{}void 0!==q&&Uh(q,r)}if(!P){const q=Ii(p)||(()=>new p);r.push({provide:p,useFactory:q,deps:Le},{provide:Qd,useValue:p,multi:!0},{provide:go,useValue:()=>en(p),multi:!0})}const L=_.providers;null==L||P||ql(L,se=>{r.push(se)})}}return p!==n&&void 0!==n.providers}function ql(n,r){for(let o of n)Fe(o)&&(o=o.\u0275providers),Array.isArray(o)?ql(o,r):r(o)}const Vu=Ae({provide:String,useValue:Ae});function Ol(n){return null!==n&&"object"==typeof n&&Vu in n}function mu(n){return"function"==typeof n}const wd=new vi("Set Injector scope."),Cd={},Hh={};let Jd;function yc(){return void 0===Jd&&(Jd=new Xd),Jd}class Pl{}class yu extends Pl{get destroyed(){return this._destroyed}constructor(r,o,l,p){super(),this.parent=o,this.source=l,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,eh(r,T=>this.processProvider(T)),this.records.set(Zd,Hc(void 0,this)),p.has("environment")&&this.records.set(Pl,Hc(void 0,this));const _=this.records.get(wd);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(Qd.multi,Le,Wt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const o=Nn(this),l=Er(void 0);try{return r()}finally{Nn(o),Er(l)}}get(r,o=mr,l=Wt.Default){this.assertNotDestroyed(),l=Tn(l);const p=Nn(this),_=Er(void 0);try{if(!(l&Wt.SkipSelf)){let P=this.records.get(r);if(void 0===P){const L=function Uu(n){return"function"==typeof n||"object"==typeof n&&n instanceof vi}(r)&&Sn(r);P=L&&this.injectableDefInScope(L)?Hc(Gh(r),Cd):null,this.records.set(r,P)}if(null!=P)return this.hydrate(r,P)}return(l&Wt.Self?yc():this.parent).get(r,o=l&Wt.Optional&&o===mr?null:o)}catch(T){if("NullInjectorError"===T.name){if((T[Ar]=T[Ar]||[]).unshift(xe(r)),p)throw T;return function Re(n,r,o,l){const p=n[Ar];throw r[di]&&p.unshift(r[di]),n.message=function _e(n,r,o,l=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==Dr?n.slice(2):n;let p=xe(r);if(Array.isArray(r))p=r.map(xe).join(" -> ");else if("object"==typeof r){let _=[];for(let T in r)if(r.hasOwnProperty(T)){let P=r[T];_.push(T+":"+("string"==typeof P?JSON.stringify(P):xe(P)))}p=`{${_.join(", ")}}`}return`${o}${l?"("+l+")":""}[${p}]: ${n.replace(Li,"\n  ")}`}("\n"+n.message,p,o,l),n[yi]=p,n[Ar]=null,n}(T,r,"R3InjectorError",this.source)}throw T}finally{Er(_),Nn(p)}}resolveInjectorInitializers(){const r=Nn(this),o=Er(void 0);try{const l=this.get(go.multi,Le,Wt.Self);for(const p of l)p()}finally{Nn(r),Er(o)}}toString(){const r=[],o=this.records;for(const l of o.keys())r.push(xe(l));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Te(205,!1)}processProvider(r){let o=mu(r=de(r))?r:de(r&&r.provide);const l=function Bf(n){return Ol(n)?Hc(void 0,n.useValue):Hc(Vf(n),Cd)}(r);if(mu(r)||!0!==r.multi)this.records.get(o);else{let p=this.records.get(o);p||(p=Hc(void 0,Cd,!0),p.factory=()=>On(p.multi),this.records.set(o,p)),o=r,p.multi.push(r)}this.records.set(o,l)}hydrate(r,o){return o.value===Cd&&(o.value=Hh,o.value=o.factory()),"object"==typeof o.value&&o.value&&function vc(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=de(r.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Gh(n){const r=Sn(n),o=null!==r?r.factory:Ii(n);if(null!==o)return o;if(n instanceof vi)throw new Te(204,!1);if(n instanceof Function)return function $f(n){const r=n.length;if(r>0)throw zs(r,"?"),new Te(204,!1);const o=function $n(n){const r=n&&(n[vr]||n[hn]);return r?(function Zt(n){if(n.hasOwnProperty("name"))return n.name;(""+n).match(/^function\s*([^\s(]+)/)}(n),r):null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Te(204,!1)}function Vf(n,r,o){let l;if(mu(n)){const p=de(n);return Ii(p)||Gh(p)}if(Ol(n))l=()=>de(n.useValue);else if(function Id(n){return!(!n||!n.useFactory)}(n))l=()=>n.useFactory(...On(n.deps||[]));else if(function jh(n){return!(!n||!n.useExisting)}(n))l=()=>en(de(n.useExisting));else{const p=de(n&&(n.useClass||n.provide));if(!function bd(n){return!!n.deps}(n))return Ii(p)||Gh(p);l=()=>new p(...On(n.deps))}return l}function Hc(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function eh(n,r){for(const o of n)Array.isArray(o)?eh(o,r):o&&Fe(o)?eh(o.\u0275providers,r):r(o)}class Uf{}class jf{}class Gf{resolveComponentFactory(r){throw function zp(n){const r=Error(`No component factory found for ${xe(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let _c=(()=>{class n{}return n.NULL=new Gf,n})();function zh(){return Ec(Ue(),E())}function Ec(n,r){return new f(ui(n,r))}let f=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=zh,n})();function c(n){return n instanceof f?n.nativeElement:n}class d{}let v=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function A(){const n=E(),o=Mi(Ue().index,n);return(Yn(o)?o:n)[ae]}(),n})(),k=(()=>{class n{}return n.\u0275prov=At({token:n,providedIn:"root",factory:()=>null}),n})();class H{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const ie=new H("15.2.4"),ve={},je="ngOriginalError";function Ot(n){return n[je]}class qt{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r);this._console.error("ERROR",r),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&Ot(r);for(;o&&Ot(o);)o=Ot(o);return o||null}}function yl(n){return n instanceof Function?n():n}function Em(n,r,o){let l=n.length;for(;;){const p=n.indexOf(r,o);if(-1===p)return p;if(0===p||n.charCodeAt(p-1)<=32){const _=r.length;if(p+_===l||n.charCodeAt(p+_)<=32)return p}o=p+1}}const Wh="ng-template";function Im(n,r,o){let l=0,p=!0;for(;l<n.length;){let _=n[l++];if("string"==typeof _&&p){const T=n[l++];if(o&&"class"===_&&-1!==Em(T.toLowerCase(),r,0))return!0}else{if(1===_){for(;l<n.length&&"string"==typeof(_=n[l++]);)if(_.toLowerCase()===r)return!0;return!1}"number"==typeof _&&(p=!1)}}return!1}function wm(n){return 4===n.type&&n.value!==Wh}function Cm(n,r,o){return r===(4!==n.type||o?n.value:Wh)}function _v(n,r,o){let l=4;const p=n.attrs||[],_=function Dm(n){for(let r=0;r<n.length;r++)if(ls(n[r]))return r;return n.length}(p);let T=!1;for(let P=0;P<r.length;P++){const L=r[P];if("number"!=typeof L){if(!T)if(4&l){if(l=2|1&l,""!==L&&!Cm(n,L,o)||""===L&&1===r.length){if(Ql(l))return!1;T=!0}}else{const q=8&l?L:r[++P];if(8&l&&null!==n.attrs){if(!Im(n.attrs,q,o)){if(Ql(l))return!1;T=!0}continue}const we=Dd(8&l?"class":L,p,wm(n),o);if(-1===we){if(Ql(l))return!1;T=!0;continue}if(""!==q){let ct;ct=we>_?"":p[we+1].toLowerCase();const St=8&l?ct:null;if(St&&-1!==Em(St,q,0)||2&l&&q!==ct){if(Ql(l))return!1;T=!0}}}}else{if(!T&&!Ql(l)&&!Ql(L))return!1;if(T&&Ql(L))continue;T=!1,l=L|1&l}}return Ql(l)||T}function Ql(n){return 0==(1&n)}function Dd(n,r,o,l){if(null===r)return-1;let p=0;if(l||!o){let _=!1;for(;p<r.length;){const T=r[p];if(T===n)return p;if(3===T||6===T)_=!0;else{if(1===T||2===T){let P=r[++p];for(;"string"==typeof P;)P=r[++p];continue}if(4===T)break;if(0===T){p+=4;continue}}p+=_?1:2}return-1}return function Ev(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const l=n[o];if("number"==typeof l)return-1;if(l===r)return o;o++}return-1}(r,n)}function nh(n,r,o=!1){for(let l=0;l<r.length;l++)if(_v(n,r[l],o))return!0;return!1}function Tm(n,r){e:for(let o=0;o<r.length;o++){const l=r[o];if(n.length===l.length){for(let p=0;p<n.length;p++)if(n[p]!==l[p])continue e;return!0}}return!1}function Sm(n,r){return n?":not("+r.trim()+")":r}function Iv(n){let r=n[0],o=1,l=2,p="",_=!1;for(;o<n.length;){let T=n[o];if("string"==typeof T)if(2&l){const P=n[++o];p+="["+T+(P.length>0?'="'+P+'"':"")+"]"}else 8&l?p+="."+T:4&l&&(p+=" "+T);else""!==p&&!Ql(T)&&(r+=Sm(_,p),p=""),l=T,_=_||!Ql(l);o++}return""!==p&&(r+=Sm(_,p)),r}const qr={};function Am(n){xm(h(),E(),Vi()+n,!1)}function xm(n,r,o,l){if(!l)if(3==(3&r[Kn])){const _=n.preOrderCheckHooks;null!==_&&el(r,_,o)}else{const _=n.preOrderHooks;null!==_&&N(r,_,0,o)}Pi(o)}function Yh(n,r=null,o=null,l){const p=Wf(n,r,o,l);return p.resolveInjectorInitializers(),p}function Wf(n,r=null,o=null,l,p=new Set){const _=[o||Le,kf(n)];return l=l||("object"==typeof n?void 0:xe(n)),new yu(_,r||yc(),l||null,p)}let Ic=(()=>{class n{static create(o,l){if(Array.isArray(o))return Yh({name:""},l,o,"");{var p;const _=null!==(p=o.name)&&void 0!==p?p:"";return Yh({name:_},o.parent,o.providers,_)}}}return n.THROW_IF_NOT_FOUND=mr,n.NULL=new Xd,n.\u0275prov=At({token:n,providedIn:"any",factory:()=>en(Zd)}),n.__NG_ELEMENT_ID__=-1,n})();function oh(n,r=Wt.Default){const o=E();return null===o?en(n,r):pi(Ue(),o,de(n),r)}function sg(){throw new Error("invalid")}function qf(n,r){const o=n.contentQueries;if(null!==o)for(let l=0;l<o.length;l+=2){const _=o[l+1];if(-1!==_){const T=n.data[_];To(o[l]),T.contentQueries(2,r[_],_)}}}function na(n,r,o,l,p,_,T,P,L,q,se){const we=r.blueprint.slice();return we[Si]=p,we[Kn]=76|l,(null!==se||n&&1024&n[Kn])&&(we[Kn]|=1024),Bo(we),we[Tr]=we[Ft]=n,we[We]=o,we[xt]=T||n&&n[xt],we[ae]=P||n&&n[ae],we[qe]=L||n&&n[qe]||null,we[lt]=q||n&&n[lt]||null,we[ee]=_,we[Kr]=function Su(){return Hl++}(),we[ot]=se,we[Xt]=2==r.type?n[Xt]:we,we}function ah(n,r,o,l,p){let _=n.data[r];if(null===_)_=function Zf(n,r,o,l,p){const _=Gt(),T=cr(),L=n.data[r]=function cg(n,r,o,l,p,_){return{type:o,index:l,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?_:_&&_.parent,o,r,l,p);return null===n.firstChild&&(n.firstChild=L),null!==_&&(T?null==_.child&&null!==L.parent&&(_.child=L):null===_.next&&(_.next=L,L.prev=_)),L}(n,r,o,l,p),function ia(){return Xn.lFrame.inI18n}()&&(_.flags|=32);else if(64&_.type){_.type=o,_.value=l,_.attrs=p;const T=function an(){const n=Xn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();_.injectorIndex=null===T?-1:T.injectorIndex}return Pn(_,!0),_}function Wc(n,r,o,l){if(0===o)return-1;const p=r.length;for(let _=0;_<o;_++)r.push(l),n.blueprint.push(l),n.data.push(null);return p}function Td(n,r,o){$a(r);try{const l=n.viewQuery;null!==l&&Kc(1,l,o);const p=n.template;null!==p&&og(n,r,p,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&qf(n,r),n.staticViewQueries&&Kc(2,n.viewQuery,o);const _=n.components;null!==_&&function Mv(n,r){for(let o=0;o<r.length;o++)Vv(n,r[o])}(r,_)}catch(l){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),l}finally{r[Kn]&=-5,ws()}}function lh(n,r,o,l){const p=r[Kn];if(128!=(128&p)){$a(r);try{Bo(r),function bo(n){return Xn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&og(n,r,o,2,l);const T=3==(3&p);if(T){const q=n.preOrderCheckHooks;null!==q&&el(r,q,null)}else{const q=n.preOrderHooks;null!==q&&N(r,q,0,null),K(r,0)}if(function vg(n){for(let r=Tl(n);null!==r;r=Sl(r)){if(!r[tn])continue;const o=r[Qr];for(let l=0;l<o.length;l++){const p=o[l];512&p[Kn]||Vo(p[Tr],1),p[Kn]|=512}}}(r),function $v(n){for(let r=Tl(n);null!==r;r=Sl(r))for(let o=sr;o<r.length;o++){const l=r[o],p=l[ln];Lr(l)&&lh(p,l,p.template,l[We])}}(r),null!==n.contentQueries&&qf(n,r),T){const q=n.contentCheckHooks;null!==q&&el(r,q)}else{const q=n.contentHooks;null!==q&&N(r,q,1),K(r,1)}!function Yf(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let l=0;l<o.length;l++){const p=o[l];if(p<0)Pi(~p);else{const _=p,T=o[++l],P=o[++l];Fa(T,_),P(2,r[_])}}}finally{Pi(-1)}}(n,r);const P=n.components;null!==P&&function xv(n,r){for(let o=0;o<r.length;o++)Bv(n,r[o])}(r,P);const L=n.viewQuery;if(null!==L&&Kc(2,L,l),T){const q=n.viewCheckHooks;null!==q&&el(r,q)}else{const q=n.viewHooks;null!==q&&N(r,q,2),K(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[Kn]&=-41,512&r[Kn]&&(r[Kn]&=-513,Vo(r[Tr],-1))}finally{ws()}}}function og(n,r,o,l,p){const _=Vi(),T=2&l;try{Pi(-1),T&&r.length>Ne&&xm(n,r,Ne,!1),Or(T?2:0,p),o(l,p)}finally{Pi(_),Or(T?3:1,p)}}function ag(n,r,o){if(qi(r)){const p=r.directiveEnd;for(let _=r.directiveStart;_<p;_++){const T=n.data[_];T.contentQueries&&T.contentQueries(1,o[_],_)}}}function lg(n,r,o){Qo()&&(function Nv(n,r,o,l){const p=o.directiveStart,_=o.directiveEnd;Br(o)&&function Fv(n,r,o){const l=ui(r,n),p=$m(o),_=n[xt],T=nf(n,na(n,p,null,o.onPush?32:16,l,r,_,_.createRenderer(l,o),null,null,null));n[r.index]=T}(r,o,n.data[p+o.componentOffset]),n.firstCreatePass||hr(o,r),vs(l,r);const T=o.initialInputs;for(let P=p;P<_;P++){const L=n.data[P],q=Cs(r,n,P,o);vs(q,r),null!==T&&Um(0,P-p,q,L,0,T),Gi(L)&&(Mi(o.index,r)[We]=Cs(r,n,P,o))}}(n,r,o,ui(o,r)),64==(64&o.flags)&&Jf(n,r,o))}function ug(n,r,o=ui){const l=r.localNames;if(null!==l){let p=r.index+1;for(let _=0;_<l.length;_+=2){const T=l[_+1],P=-1===T?o(r,n):n[T];n[p++]=P}}}function $m(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Jh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Jh(n,r,o,l,p,_,T,P,L,q){const se=Ne+l,we=se+p,ct=function Rv(n,r){const o=[];for(let l=0;l<r;l++)o.push(l<n?null:qr);return o}(se,we),St="function"==typeof q?q():q;return ct[ln]={type:n,blueprint:ct,template:o,queries:null,viewQuery:P,declTNode:r,data:ct.slice().fill(null,se),bindingStartIndex:se,expandoStartIndex:we,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:L,consts:St,incompleteFirstPass:!1}}function uh(n,r,o,l){const p=np(r);null===o?p.push(l):(p.push(o),n.firstCreatePass&&xd(n).push(l,p.length-1))}function Sd(n,r,o,l){for(let p in n)if(n.hasOwnProperty(p)){o=null===o?{}:o;const _=n[p];null===l?Qf(o,r,p,_):l.hasOwnProperty(p)&&Qf(o,r,l[p],_)}return o}function Qf(n,r,o,l){n.hasOwnProperty(o)?n[o].push(r,l):n[o]=[r,l]}function dg(n,r){const o=Mi(r,n);16&o[Kn]||(o[Kn]|=32)}function _u(n,r,o,l){if(Qo()){const p=null===l?null:{"":-1},_=function gg(n,r){const o=n.directiveRegistry;let l=null,p=null;if(o)for(let T=0;T<o.length;T++){const P=o[T];if(nh(r,P.selectors,!1))if(l||(l=[]),Gi(P))if(null!==P.findHostDirectiveDefs){const L=[];p=p||new Map,P.findHostDirectiveDefs(P,L,p),l.unshift(...L,P),ch(n,r,L.length)}else l.unshift(P),ch(n,r,0);else{var _;p=p||new Map,null===(_=P.findHostDirectiveDefs)||void 0===_||_.call(P,P,l,p),l.push(P)}}return null===l?null:[l,p]}(n,o);let T,P;null===_?T=P=null:[T,P]=_,null!==T&&fg(n,r,o,T,p,P),p&&function mg(n,r,o){if(r){const l=n.localNames=[];for(let p=0;p<r.length;p+=2){const _=o[r[p+1]];if(null==_)throw new Te(-301,!1);l.push(r[p],_)}}}(o,l,p)}o.mergedAttrs=wt(o.mergedAttrs,o.attrs)}function fg(n,r,o,l,p,_){for(let q=0;q<l.length;q++)Gn(hr(o,r),n,l[q].type);!function dh(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}(o,n.data.length,l.length);for(let q=0;q<l.length;q++){const se=l[q];se.providersResolver&&se.providersResolver(se)}let T=!1,P=!1,L=Wc(n,r,l.length,null);for(let q=0;q<l.length;q++){const se=l[q];o.mergedAttrs=wt(o.mergedAttrs,se.hostAttrs),yg(n,o,r,L,se),Vm(L,se,p),null!==se.contentQueries&&(o.flags|=4),(null!==se.hostBindings||null!==se.hostAttrs||0!==se.hostVars)&&(o.flags|=64);const we=se.type.prototype;!T&&(we.ngOnChanges||we.ngOnInit||we.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),T=!0),!P&&(we.ngOnChanges||we.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),P=!0),L++}!function Xf(n,r,o){const p=r.directiveEnd,_=n.data,T=r.attrs,P=[];let L=null,q=null;for(let se=r.directiveStart;se<p;se++){const we=_[se],ct=o?o.get(we):null,Qt=ct?ct.outputs:null;L=Sd(we.inputs,se,L,ct?ct.inputs:null),q=Sd(we.outputs,se,q,Qt);const fn=null===L||null===T||wm(r)?null:Lv(L,se,T);P.push(fn)}null!==L&&(L.hasOwnProperty("class")&&(r.flags|=8),L.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=P,r.inputs=L,r.outputs=q}(n,o,_)}function Jf(n,r,o){const l=o.directiveStart,p=o.directiveEnd,_=o.index,T=function La(){return Xn.lFrame.currentDirectiveIndex}();try{Pi(_);for(let P=l;P<p;P++){const L=n.data[P],q=r[P];Os(P),(null!==L.hostBindings||0!==L.hostVars||null!==L.hostAttrs)&&kv(L,q)}}finally{Pi(-1),Os(T)}}function kv(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function ch(n,r,o){r.componentOffset=o,(n.components||(n.components=[])).push(r.index)}function Vm(n,r,o){if(o){if(r.exportAs)for(let l=0;l<r.exportAs.length;l++)o[r.exportAs[l]]=n;Gi(r)&&(o[""]=n)}}function yg(n,r,o,l,p){n.data[l]=p;const _=p.factory||(p.factory=Ii(p.type)),T=new _t(_,Gi(p),oh);n.blueprint[l]=T,o[l]=T,function Pv(n,r,o,l,p){const _=p.hostBindings;if(_){let T=n.hostBindingOpCodes;null===T&&(T=n.hostBindingOpCodes=[]);const P=~r.index;(function pg(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(T)!=P&&T.push(P),T.push(o,l,_)}}(n,r,l,Wc(n,o,p.hostVars,qr),p)}function ju(n,r,o,l,p,_){const T=ui(n,r);!function ep(n,r,o,l,p,_,T){if(null==_)n.removeAttribute(r,p,o);else{const P=null==T?le(_):T(_,l||"",p);n.setAttribute(r,p,P,o)}}(r[ae],T,_,n.value,o,l,p)}function Um(n,r,o,l,p,_){const T=_[r];if(null!==T){const P=l.setInput;for(let L=0;L<T.length;){const q=T[L++],se=T[L++],we=T[L++];null!==P?l.setInput(o,we,q,se):o[se]=we}}}function Lv(n,r,o){let l=null,p=0;for(;p<o.length;){const _=o[p];if(0!==_)if(5!==_){if("number"==typeof _)break;if(n.hasOwnProperty(_)){null===l&&(l=[]);const T=n[_];for(let P=0;P<T.length;P+=2)if(T[P]===r){l.push(_,T[P+1],o[p+1]);break}}p+=2}else p+=2;else p+=4}return l}function tp(n,r,o,l){return[n,!0,!1,r,null,0,l,o,null,null]}function Bv(n,r){const o=Mi(r,n);if(Lr(o)){const l=o[ln];48&o[Kn]?lh(l,o,l.template,o[We]):o[Hi]>0&&tf(o)}}function tf(n){for(let l=Tl(n);null!==l;l=Sl(l))for(let p=sr;p<l.length;p++){const _=l[p];if(Lr(_))if(512&_[Kn]){const T=_[ln];lh(T,_,T.template,_[We])}else _[Hi]>0&&tf(_)}const o=n[ln].components;if(null!==o)for(let l=0;l<o.length;l++){const p=Mi(o[l],n);Lr(p)&&p[Hi]>0&&tf(p)}}function Vv(n,r){const o=Mi(r,n),l=o[ln];(function _g(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(l,o),Td(l,o,o[We])}function nf(n,r){return n[pt]?n[Dt][ti]=r:n[pt]=r,n[Dt]=r,r}function rf(n){for(;n;){n[Kn]|=32;const r=rc(n);if(Ys(n)&&!r)return n;n=r}return null}function hh(n,r,o,l=!0){const p=r[xt];p.begin&&p.begin();try{lh(n,r,n.template,o)}catch(T){throw l&&Eg(r,T),T}finally{p.end&&p.end()}}function Kc(n,r,o){To(0),r(n,o)}function np(n){return n[fe]||(n[fe]=[])}function xd(n){return n.cleanup||(n.cleanup=[])}function Eg(n,r){const o=n[lt],l=o?o.get(qt,null):null;l&&l.handleError(r)}function Yc(n,r,o,l,p){for(let _=0;_<o.length;){const T=o[_++],P=o[_++],L=r[T],q=n.data[T];null!==q.setInput?q.setInput(L,p,l,P):L[P]=p}}function wc(n,r,o){const l=js(r,n);!function Al(n,r,o){n.setValue(r,o)}(n[ae],l,o)}function rp(n,r,o){let l=o?n.styles:null,p=o?n.classes:null,_=0;if(null!==r)for(let T=0;T<r.length;T++){const P=r[T];"number"==typeof P?_=P:1==_?p=Ve(p,P):2==_&&(l=Ve(l,P+": "+r[++T]+";"))}o?n.styles=l:n.stylesWithoutHost=l,o?n.classes=p:n.classesWithoutHost=p}function fh(n,r,o,l,p=!1){for(;null!==o;){const _=r[o.index];if(null!==_&&l.push(oi(_)),Bn(_))for(let P=sr;P<_.length;P++){const L=_[P],q=L[ln].firstChild;null!==q&&fh(L[ln],L,q,l)}const T=o.type;if(8&T)fh(n,r,o.child,l);else if(32&T){const P=Rc(o,r);let L;for(;L=P();)l.push(L)}else if(16&T){const P=ks(r,o);if(Array.isArray(P))l.push(...P);else{const L=rc(r[Xt]);fh(L[ln],L,P,l,!0)}}o=p?o.projectionNext:o.next}return l}class Rd{get rootNodes(){const r=this._lView,o=r[ln];return fh(o,r,o.firstChild,[])}constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[We]}set context(r){this._lView[We]=r}get destroyed(){return 128==(128&this._lView[Kn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[Tr];if(Bn(r)){const o=r[zn],l=o?o.indexOf(this):-1;l>-1&&(kc(r,l),Ua(o,l))}this._attachedToViewContainer=!1}du(this._lView[ln],this._lView)}onDestroy(r){uh(this._lView[ln],this._lView,null,r)}markForCheck(){rf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Kn]&=-65}reattach(){this._lView[Kn]|=64}detectChanges(){hh(this._lView[ln],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ic(n,r){Fu(n,r,r[ae],2,null,null)}(this._lView[ln],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Te(902,!1);this._appRef=r}}class Ig extends Rd{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;hh(r[ln],r,r[We],!1)}checkNoChanges(){}get context(){return null}}class ip extends _c{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=Zn(r);return new Od(o,this.ngModule)}}function Hm(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}class wg{constructor(r,o){this.injector=r,this.parentInjector=o}get(r,o,l){l=Tn(l);const p=this.injector.get(r,ve,l);return p!==ve||o===ve?p:this.parentInjector.get(r,o,l)}}class Od extends jf{get inputs(){return Hm(this.componentDef.inputs)}get outputs(){return Hm(this.componentDef.outputs)}constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function Wp(n){return n.map(Iv).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}create(r,o,l,p){var _;let T=(p=p||this.ngModule)instanceof Pl?p:null===(_=p)||void 0===_?void 0:_.injector;T&&null!==this.componentDef.getStandaloneInjector&&(T=this.componentDef.getStandaloneInjector(T)||T);const P=T?new wg(r,T):r,L=P.get(d,null);if(null===L)throw new Te(407,!1);const q=P.get(k,null),se=L.createRenderer(null,this.componentDef),we=this.componentDef.selectors[0][0]||"div",ct=l?function Ov(n,r,o){return n.selectRootElement(r,o===gt.ShadowDom)}(se,l,this.componentDef.encapsulation):xl(se,we,function Uv(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(we)),St=this.componentDef.onPush?288:272,Qt=Jh(0,null,null,1,0,null,null,null,null,null),fn=na(null,Qt,null,St,null,null,L,se,q,P,null);let jn,gr;$a(fn);try{const Nr=this.componentDef;let rn,zr=null;Nr.findHostDirectiveDefs?(rn=[],zr=new Map,Nr.findHostDirectiveDefs(Nr,rn,zr),rn.push(Nr)):rn=[Nr];const Ls=function Gv(n,r){const o=n[ln],l=Ne;return n[l]=r,ah(o,l,2,"#host",null)}(fn,ct),Fo=function Gm(n,r,o,l,p,_,T,P){const L=p[ln];!function zm(n,r,o,l){for(const p of n)r.mergedAttrs=wt(r.mergedAttrs,p.hostAttrs);null!==r.mergedAttrs&&(rp(r,r.mergedAttrs,!0),null!==o&&lc(l,o,r))}(l,n,r,T);const q=_.createRenderer(r,o),se=na(p,$m(o),null,o.onPush?32:16,p[n.index],n,_,q,P||null,null,null);return L.firstCreatePass&&ch(L,n,l.length-1),nf(p,se),p[n.index]=se}(Ls,ct,Nr,rn,fn,L,se);gr=Zo(Qt,Ne),ct&&function Km(n,r,o,l){if(l)mn(n,o,["ng-version",ie.full]);else{const{attrs:p,classes:_}=function ca(n){const r=[],o=[];let l=1,p=2;for(;l<n.length;){let _=n[l];if("string"==typeof _)2===p?""!==_&&r.push(_,n[++l]):8===p&&o.push(_);else{if(!Ql(p))break;p=_}l++}return{attrs:r,classes:o}}(r.selectors[0]);p&&mn(n,o,p),_&&_.length>0&&fu(n,o,_.join(" "))}}(se,Nr,ct,l),void 0!==o&&function zv(n,r,o){const l=n.projection=[];for(let p=0;p<r.length;p++){const _=o[p];l.push(null!=_?Array.from(_):null)}}(gr,this.ngContentSelectors,o),jn=function Wm(n,r,o,l,p,_){const T=Ue(),P=p[ln],L=ui(T,p);fg(P,p,T,o,null,l);for(let se=0;se<o.length;se++)vs(Cs(p,P,T.directiveStart+se,T),p);Jf(P,p,T),L&&vs(L,p);const q=Cs(p,P,T.directiveStart+T.componentOffset,T);if(n[We]=p[We]=q,null!==_)for(const se of _)se(q,r);return ag(P,T,n),q}(Fo,Nr,rn,zr,fn,[Wv]),Td(Qt,fn,null)}finally{ws()}return new jv(this.componentType,jn,Ec(gr,fn),fn,gr)}}class jv extends Uf{constructor(r,o,l,p,_){super(),this.location=l,this._rootLView=p,this._tNode=_,this.instance=o,this.hostView=this.changeDetectorRef=new Ig(p),this.componentType=r}setInput(r,o){const l=this._tNode.inputs;let p;if(null!==l&&(p=l[r])){const _=this._rootLView;Yc(_[ln],_,p,r,o),dg(_,this._tNode.index)}}get injector(){return new ga(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Wv(){const n=Ue();fa(E()[ln],n)}function Cg(n){let r=function Ym(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const l=[n];for(;r;){let p;if(Gi(n))p=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Te(903,!1);p=r.\u0275dir}if(p){if(o){l.push(p);const T=n;T.inputs=sf(n.inputs),T.declaredInputs=sf(n.declaredInputs),T.outputs=sf(n.outputs);const P=p.hostBindings;P&&Tg(n,P);const L=p.viewQuery,q=p.contentQueries;if(L&&Dg(n,L),q&&Kv(n,q),he(n.inputs,p.inputs),he(n.declaredInputs,p.declaredInputs),he(n.outputs,p.outputs),Gi(p)&&p.data.animation){const se=n.data;se.animation=(se.animation||[]).concat(p.data.animation)}}const _=p.features;if(_)for(let T=0;T<_.length;T++){const P=_[T];P&&P.ngInherit&&P(n),P===Cg&&(o=!1)}}r=Object.getPrototypeOf(r)}!function bg(n){let r=0,o=null;for(let l=n.length-1;l>=0;l--){const p=n[l];p.hostVars=r+=p.hostVars,p.hostAttrs=wt(p.hostAttrs,o=wt(o,p.hostAttrs))}}(l)}function sf(n){return n===dn?{}:n===Le?[]:n}function Dg(n,r){const o=n.viewQuery;n.viewQuery=o?(l,p)=>{r(l,p),o(l,p)}:r}function Kv(n,r){const o=n.contentQueries;n.contentQueries=o?(l,p,_)=>{r(l,p,_),o(l,p,_)}:r}function Tg(n,r){const o=n.hostBindings;n.hostBindings=o?(l,p)=>{r(l,p),o(l,p)}:r}function ph(n){return!!af(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function af(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function da(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function lf(n,r,o,l){const p=E();return da(p,Do(),r)&&(h(),ju(Xr(),p,n,r,o,l)),lf}function vh(n,r,o,l,p,_){const P=function Pd(n,r,o,l){const p=da(n,r,o);return da(n,r+1,l)||p}(n,function Ci(){return Xn.lFrame.bindingIndex}(),o,p);return eo(2),P?r+le(o)+l+le(p)+_:qr}function up(n,r,o,l,p,_,T,P){const L=E(),q=h(),se=n+Ne,we=q.firstCreatePass?function Fg(n,r,o,l,p,_,T,P,L){const q=r.consts,se=ah(r,n,4,T||null,fs(q,P));_u(r,o,se,fs(q,L)),fa(r,se);const we=se.tView=Jh(2,se,l,p,_,r.directiveRegistry,r.pipeRegistry,null,r.schemas,q);return null!==r.queries&&(r.queries.template(r,se),we.queries=r.queries.embeddedTView(se)),se}(se,q,L,r,o,l,p,_,T):q.data[se];Pn(we,!1);const ct=L[ae].createComment("");pl(q,L,ct,we),vs(ct,L),nf(L,L[se]=tp(ct,L,ct,we)),ds(we)&&lg(q,L,we),null!=T&&ug(L,we,P)}function cp(n,r,o){const l=E();return da(l,Do(),r)&&function Wa(n,r,o,l,p,_,T,P){const L=ui(r,o);let se,q=r.inputs;!P&&null!=q&&(se=q[l])?(Yc(n,o,se,l,p),Br(r)&&dg(o,r.index)):3&r.type&&(l=function ef(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(l),p=null!=T?T(p,r.value||"",l):p,_.setProperty(L,l,p))}(h(),Xr(),l,n,r,l[ae],o,!1),cp}function Lg(n,r,o,l,p){const T=p?"class":"style";Yc(n,o,r.inputs[T],T,l)}function uf(n,r,o,l){const p=E(),_=h(),T=Ne+n,P=p[ae],L=_.firstCreatePass?function $g(n,r,o,l,p,_){const T=r.consts,L=ah(r,n,2,l,fs(T,p));return _u(r,o,L,fs(T,_)),null!==L.attrs&&rp(L,L.attrs,!1),null!==L.mergedAttrs&&rp(L,L.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,L),L}(T,_,p,r,o,l):_.data[T],q=p[T]=xl(P,r,function vl(){return Xn.lFrame.currentNamespace}()),se=ds(L);return Pn(L,!0),lc(P,q,L),32!=(32&L.flags)&&pl(_,p,q,L),0===function Jn(){return Xn.lFrame.elementDepthCount}()&&vs(q,p),function ao(){Xn.lFrame.elementDepthCount++}(),se&&(lg(_,p,L),ag(_,L,p)),null!==l&&ug(p,L),uf}function Nd(){let n=Ue();cr()?Yr():(n=n.parent,Pn(n,!1));const r=n;!function Uo(){Xn.lFrame.elementDepthCount--}();const o=h();return o.firstCreatePass&&(fa(o,n),qi(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function er(n){return 0!=(8&n.flags)}(r)&&Lg(o,r,E(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function dr(n){return 0!=(16&n.flags)}(r)&&Lg(o,r,E(),r.stylesWithoutHost,!1),Nd}function Bg(n,r,o,l){return uf(n,r,o,l),Nd(),Bg}function Vg(n,r,o){const l=E(),p=h(),_=n+Ne,T=p.firstCreatePass?function Qv(n,r,o,l,p){const _=r.consts,T=fs(_,l),P=ah(r,n,8,"ng-container",T);return null!==T&&rp(P,T,!0),_u(r,o,P,fs(_,p)),null!==r.queries&&r.queries.elementStart(r,P),P}(_,p,l,r,o):p.data[_];Pn(T,!0);const P=l[_]=l[ae].createComment("");return pl(p,l,P,T),vs(P,l),ds(T)&&(lg(p,l,T),ag(p,T,l)),null!=o&&ug(l,T),Vg}function Ug(){let n=Ue();const r=h();return cr()?Yr():(n=n.parent,Pn(n,!1)),r.firstCreatePass&&(fa(r,n),qi(n)&&r.queries.elementEnd(n)),Ug}function dp(n,r,o){return Vg(n,r,o),Ug(),dp}function hp(){return E()}function fp(n){return!!n&&"function"==typeof n.then}function pp(n){return!!n&&"function"==typeof n.subscribe}const gp=pp;function cf(n,r,o,l){const p=E(),_=h(),T=Ue();return function Hg(n,r,o,l,p,_,T){const P=ds(l),q=n.firstCreatePass&&xd(n),se=r[We],we=np(r);let ct=!0;if(3&l.type||T){const fn=ui(l,r),jn=T?T(fn):fn,gr=we.length,Nr=T?zr=>T(oi(zr[l.index])):l.index;let rn=null;if(!T&&P&&(rn=function jg(n,r,o,l){const p=n.cleanup;if(null!=p)for(let _=0;_<p.length-1;_+=2){const T=p[_];if(T===o&&p[_+1]===l){const P=r[fe],L=p[_+2];return P.length>L?P[L]:null}"string"==typeof T&&(_+=2)}return null}(n,r,p,l.index)),null!==rn)(rn.__ngLastListenerFn__||rn).__ngNextListenerFn__=_,rn.__ngLastListenerFn__=_,ct=!1;else{_=mp(l,r,se,_,!1);const zr=o.listen(jn,p,_);we.push(_,zr),q&&q.push(p,Nr,gr,gr+1)}}else _=mp(l,r,se,_,!1);const St=l.outputs;let Qt;if(ct&&null!==St&&(Qt=St[p])){const fn=Qt.length;if(fn)for(let jn=0;jn<fn;jn+=2){const Ls=r[Qt[jn]][Qt[jn+1]].subscribe(_),Fo=we.length;we.push(_,Ls),q&&q.push(p,l.index,Fo,-(Fo+1))}}}(_,p,p[ae],T,n,r,l),cf}function hf(n,r,o,l){try{return Or(6,r,o),!1!==o(l)}catch(p){return Eg(n,p),!1}finally{Or(7,r,o)}}function mp(n,r,o,l,p){return function _(T){if(T===Function)return l;rf(n.componentOffset>-1?Mi(n.index,r):r);let L=hf(r,o,l,T),q=_.__ngNextListenerFn__;for(;q;)L=hf(r,o,q,T)&&L,q=q.__ngNextListenerFn__;return p&&!1===L&&(T.preventDefault(),T.returnValue=!1),L}}function yp(n=1){return function oa(n){return(Xn.lFrame.contextLView=function Ja(n,r){for(;n>0;)r=r[Ft],n--;return r}(n,Xn.lFrame.contextLView))[We]}(n)}function ny(n,r){let o=null;const l=function bm(n){const r=n.attrs;if(null!=r){const o=r.indexOf(5);if(!(1&o))return r[o+1]}return null}(n);for(let p=0;p<r.length;p++){const _=r[p];if("*"!==_){if(null===l?nh(n,_,!0):Tm(l,_))return p}else o=p}return o}function kd(n){const r=E()[Xt][ee];if(!r.projection){const l=r.projection=zs(n?n.length:1,null),p=l.slice();let _=r.child;for(;null!==_;){const T=n?ny(_,n):0;null!==T&&(p[T]?p[T].projectionNext=_:l[T]=_,p[T]=_),_=_.next}}}function vp(n,r=0,o){const l=E(),p=h(),_=ah(p,Ne+n,16,null,o||null);null===_.projection&&(_.projection=r),Yr(),32!=(32&_.flags)&&function yd(n,r,o){$r(r[ae],0,r,o,Ma(n,o,r),Pu(o.parent||r[ee],o,r))}(p,l,_)}function wh(n,r){return n<<17|r<<2}function Cc(n){return n>>17&32767}function Ch(n){return 2|n}function si(n){return(131068&n)>>2}function _p(n,r){return-131069&n|r<<2}function Fd(n){return 1|n}function Yg(n,r,o,l,p){const _=n[o+1],T=null===r;let P=l?Cc(_):si(_),L=!1;for(;0!==P&&(!1===L||T);){const se=n[P+1];Jv(n[P],r)&&(L=!0,n[P+1]=l?Fd(se):Ch(se)),P=l?Cc(se):si(se)}L&&(n[o+1]=l?Ch(_):Fd(_))}function Jv(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&x(n,r)>=0}function Xg(n,r){return function Eu(n,r,o,l){const p=E(),_=h(),T=eo(2);_.firstUpdatePass&&function gy(n,r,o,l){const p=n.data;if(null===p[o+1]){const _=p[Vi()],T=function bh(n,r){return r>=n.expandoStartIndex}(n,o);(function Th(n,r){return 0!=(n.flags&(r?8:16))})(_,l)&&null===r&&!T&&(r=!1),r=function Wu(n,r,o,l){const p=function sa(n){const r=Xn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let _=l?r.residualClasses:r.residualStyles;if(null===p)0===(l?r.classBindings:r.styleBindings)&&(o=pf(o=Dh(null,n,r,o,l),r.attrs,l),_=null);else{const T=r.directiveStylingLast;if(-1===T||n[T]!==p)if(o=Dh(p,n,r,o,l),null===_){let L=function bc(n,r,o){const l=o?r.classBindings:r.styleBindings;if(0!==si(l))return n[Cc(l)]}(n,r,l);void 0!==L&&Array.isArray(L)&&(L=Dh(null,n,r,L[1],l),L=pf(L,r.attrs,l),function m0(n,r,o,l){n[Cc(o?r.classBindings:r.styleBindings)]=l}(n,r,l,L))}else _=function Ld(n,r,o){let l;const p=r.directiveEnd;for(let _=1+r.directiveStylingLast;_<p;_++)l=pf(l,n[_].hostAttrs,o);return pf(l,r.attrs,o)}(n,r,l)}return void 0!==_&&(l?r.residualClasses=_:r.residualStyles=_),o}(p,_,r,l),function wa(n,r,o,l,p,_){let T=_?r.classBindings:r.styleBindings,P=Cc(T),L=si(T);n[l]=o;let se,q=!1;if(Array.isArray(o)?(se=o[1],(null===se||x(o,se)>0)&&(q=!0)):se=o,p)if(0!==L){const ct=Cc(n[P+1]);n[l+1]=wh(ct,P),0!==ct&&(n[ct+1]=_p(n[ct+1],l)),n[P+1]=function cy(n,r){return 131071&n|r<<17}(n[P+1],l)}else n[l+1]=wh(P,0),0!==P&&(n[P+1]=_p(n[P+1],l)),P=l;else n[l+1]=wh(L,0),0===P?P=l:n[L+1]=_p(n[L+1],l),L=l;q&&(n[l+1]=Ch(n[l+1])),Yg(n,se,l,!0),Yg(n,se,l,!1),function Hu(n,r,o,l,p){const _=p?n.residualClasses:n.residualStyles;null!=_&&"string"==typeof r&&x(_,r)>=0&&(o[l+1]=Fd(o[l+1]))}(r,se,n,l,_),T=wh(P,L),_?r.classBindings=T:r.styleBindings=T}(p,_,r,o,T,l)}}(_,n,T,l),r!==qr&&da(p,T,r)&&function gf(n,r,o,l,p,_,T,P){if(!(3&r.type))return;const L=n.data,q=L[P+1],se=function dy(n){return 1==(1&n)}(q)?yy(L,r,o,p,si(q),T):void 0;Ku(se)||(Ku(_)||function uy(n){return 2==(2&n)}(q)&&(_=yy(L,null,o,p,P,T)),function $c(n,r,o,l,p){if(r)p?n.addClass(o,l):n.removeClass(o,l);else{let _=-1===l.indexOf("-")?void 0:_i.DashCase;null==p?n.removeStyle(o,l,_):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),_|=_i.Important),n.setStyle(o,l,p,_))}}(l,T,js(Vi(),o),p,_))}(_,_.data[Vi()],p,p[ae],n,p[T+1]=function Ip(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=xe(Y(n)))),n}(r,o),l,T)}(n,r,null,!0),Xg}function Dh(n,r,o,l,p){let _=null;const T=o.directiveEnd;let P=o.directiveStylingLast;for(-1===P?P=o.directiveStart:P++;P<T&&(_=r[P],l=pf(l,_.hostAttrs,p),_!==n);)P++;return null!==n&&(o.directiveStylingLast=P),l}function pf(n,r,o){const l=o?1:2;let p=-1;if(null!==r)for(let _=0;_<r.length;_++){const T=r[_];"number"==typeof T?p=T:p===l&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Qi(n,T,!!o||r[++_]))}return void 0===n?null:n}function yy(n,r,o,l,p,_){const T=null===r;let P;for(;p>0;){const L=n[p],q=Array.isArray(L),se=q?L[1]:L,we=null===se;let ct=o[p+1];ct===qr&&(ct=we?Le:void 0);let St=we?S(ct,l):se===l?ct:void 0;if(q&&!Ku(St)&&(St=S(L,l)),Ku(St)&&(P=St,T))return P;const Qt=n[p+1];p=T?Cc(Qt):si(Qt)}if(null!==r){let L=_?r.residualClasses:r.residualStyles;null!=L&&(P=S(L,l))}return P}function Ku(n){return void 0!==n}function em(n,r=""){const o=E(),l=h(),p=n+Ne,_=l.firstCreatePass?ah(l,p,1,r,null):l.data[p],T=o[p]=function Ou(n,r){return n.createText(r)}(o[ae],r);pl(l,o,T,_),Pn(_,!1)}function mf(n){return wp("",n,""),mf}function wp(n,r,o){const l=E(),p=function qc(n,r,o,l){return da(n,Do(),o)?r+le(o)+l:qr}(l,n,r,o);return p!==qr&&wc(l,Vi(),p),wp}function tm(n,r,o,l,p){const _=E(),T=vh(_,n,r,o,l,p);return T!==qr&&wc(_,Vi(),T),tm}const td=void 0;var xy=["en",[["a","p"],["AM","PM"],td],[["AM","PM"],td,td],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],td,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],td,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",td,"{1} 'at' {0}",td],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Ay(n){const o=Math.floor(Math.abs(n)),l=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===l?1:5}];let $d={};function xp(n){const r=function c_(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=Ry(r);if(o)return o;const l=r.split("-")[0];if(o=Ry(l),o)return o;if("en"===l)return xy;throw new Te(701,!1)}function bf(n){return xp(n)[Pr.PluralCase]}function Ry(n){return n in $d||($d[n]=Dn.ng&&Dn.ng.common&&Dn.ng.common.locales&&Dn.ng.common.locales[n]),$d[n]}var Pr=(()=>((Pr=Pr||{})[Pr.LocaleId=0]="LocaleId",Pr[Pr.DayPeriodsFormat=1]="DayPeriodsFormat",Pr[Pr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Pr[Pr.DaysFormat=3]="DaysFormat",Pr[Pr.DaysStandalone=4]="DaysStandalone",Pr[Pr.MonthsFormat=5]="MonthsFormat",Pr[Pr.MonthsStandalone=6]="MonthsStandalone",Pr[Pr.Eras=7]="Eras",Pr[Pr.FirstDayOfWeek=8]="FirstDayOfWeek",Pr[Pr.WeekendRange=9]="WeekendRange",Pr[Pr.DateFormat=10]="DateFormat",Pr[Pr.TimeFormat=11]="TimeFormat",Pr[Pr.DateTimeFormat=12]="DateTimeFormat",Pr[Pr.NumberSymbols=13]="NumberSymbols",Pr[Pr.NumberFormats=14]="NumberFormats",Pr[Pr.CurrencyCode=15]="CurrencyCode",Pr[Pr.CurrencySymbol=16]="CurrencySymbol",Pr[Pr.CurrencyName=17]="CurrencyName",Pr[Pr.Currencies=18]="Currencies",Pr[Pr.Directionality=19]="Directionality",Pr[Pr.PluralCase=20]="PluralCase",Pr[Pr.ExtraData=21]="ExtraData",Pr))();const Jl="en-US";let Oy=Jl;function i(n,r,o,l,p){if(n=de(n),Array.isArray(n))for(let _=0;_<n.length;_++)i(n[_],r,o,l,p);else{const _=h(),T=E();let P=mu(n)?n:de(n.provide),L=Vf(n);const q=Ue(),se=1048575&q.providerIndexes,we=q.directiveStart,ct=q.providerIndexes>>20;if(mu(n)||!n.multi){const St=new _t(L,p,oh),Qt=s(P,r,p?se:se+ct,we);-1===Qt?(Gn(hr(q,T),_,P),e(_,n,r.length),r.push(P),q.directiveStart++,q.directiveEnd++,p&&(q.providerIndexes+=1048576),o.push(St),T.push(St)):(o[Qt]=St,T[Qt]=St)}else{const St=s(P,r,se+ct,we),Qt=s(P,r,se,se+ct),jn=Qt>=0&&o[Qt];if(p&&!jn||!p&&!(St>=0&&o[St])){Gn(hr(q,T),_,P);const gr=function O(n,r,o,l,p){const _=new _t(n,o,oh);return _.multi=[],_.index=r,_.componentProviders=0,t(_,p,l&&!o),_}(p?y:u,o.length,p,l,L);!p&&jn&&(o[Qt].providerFactory=gr),e(_,n,r.length,0),r.push(P),q.directiveStart++,q.directiveEnd++,p&&(q.providerIndexes+=1048576),o.push(gr),T.push(gr)}else e(_,n,St>-1?St:Qt,t(o[p?Qt:St],L,!p&&l));!p&&l&&jn&&o[Qt].componentProviders++}}}function e(n,r,o,l){const p=mu(r),_=function Lf(n){return!!n.useClass}(r);if(p||_){const L=(_?de(r.useClass):r).prototype.ngOnDestroy;if(L){const q=n.destroyHooks||(n.destroyHooks=[]);if(!p&&r.multi){const se=q.indexOf(o);-1===se?q.push(o,[l,L]):q[se+1].push(l,L)}else q.push(o,L)}}}function t(n,r,o){return o&&n.componentProviders++,n.multi.push(r)-1}function s(n,r,o,l){for(let p=o;p<l;p++)if(r[p]===n)return p;return-1}function u(n,r,o,l){return C(this.multi,[])}function y(n,r,o,l){const p=this.multi;let _;if(this.providerFactory){const T=this.providerFactory.componentProviders,P=Cs(o,o[ln],this.providerFactory.index,l);_=P.slice(0,T),C(p,_);for(let L=T;L<P.length;L++)_.push(P[L])}else _=[],C(p,_);return _}function C(n,r){for(let o=0;o<n.length;o++)r.push((0,n[o])());return r}function j(n,r=[]){return o=>{o.providersResolver=(l,p)=>function N_(n,r,o){const l=h();if(l.firstCreatePass){const p=Gi(n);i(o,l.data,l.blueprint,p,!0),i(r,l.data,l.blueprint,p,!1)}}(l,p?p(n):n,r)}}class Z{}class ue{}function Ye(n,r){return new Ht(n,null!=r?r:null)}class Ht extends Z{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ip(this);const l=ei(r);this._bootstrapComponents=yl(l.bootstrap),this._r3Injector=Wf(r,o,[{provide:Z,useValue:this},{provide:_c,useValue:this.componentFactoryResolver}],xe(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class nn extends ue{constructor(r){super(),this.moduleType=r}create(r){return new Ht(this.moduleType,r)}}class Rn extends Z{constructor(r,o,l){super(),this.componentFactoryResolver=new ip(this),this.instance=null;const p=new yu([...r,{provide:Z,useValue:this},{provide:_c,useValue:this.componentFactoryResolver}],o||yc(),l,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function ir(n,r,o=null){return new Rn(n,r,o).injector}let ts=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const l=Ff(0,o.type),p=l.length>0?ir([l],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,p)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=At({token:n,providedIn:"environment",factory:()=>new n(en(Pl))}),n})();function vo(n){n.getStandaloneInjector=r=>r.get(ts).getOrCreateStandaloneInjector(n)}function k_(n){return r=>{setTimeout(n,void 0,r)}}const sd=class aI extends a.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,l){let p=r,_=o||(()=>null),T=l;if(r&&"object"==typeof r){var P,L,q;const we=r;p=null===(P=we.next)||void 0===P?void 0:P.bind(we),_=null===(L=we.error)||void 0===L?void 0:L.bind(we),T=null===(q=we.complete)||void 0===q?void 0:q.bind(we)}this.__isAsync&&(_=k_(_),p&&(p=k_(p)),T&&(T=k_(T)));const se=super.subscribe({next:p,error:_,complete:T});return r instanceof J.w0&&r.add(se),se}};function lI(){return this._results[Symbol.iterator]()}class F_{get changes(){return this._changes||(this._changes=new sd)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=F_.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=lI)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const l=this;l.dirty=!1;const p=function rs(n){return n.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function ul(n,r,o){if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++){let p=n[l],_=r[l];if(o&&(p=o(p),_=o(_)),_!==p)return!1}return!0}(l._results,p,o))&&(l._results=p,l.length=p.length,l.last=p[this.length-1],l.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let gm=(()=>{class n{}return n.__NG_ELEMENT_ID__=dI,n})();const uI=gm,cI=class extends uI{constructor(r,o,l){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=l}createEmbeddedView(r,o){const l=this._declarationTContainer.tView,p=na(this._declarationLView,l,r,16,null,l.declTNode,null,null,null,null,o||null);p[wn]=this._declarationLView[this._declarationTContainer.index];const T=this._declarationLView[Ir];return null!==T&&(p[Ir]=T.createEmbeddedView(l)),Td(l,p,r),new Rd(p)}};function dI(){return lv(Ue(),E())}function lv(n,r){return 4&n.type?new cI(r,n,Ec(n,r)):null}let uv=(()=>{class n{}return n.__NG_ELEMENT_ID__=hI,n})();function hI(){return O0(Ue(),E())}const fI=uv,M0=class extends fI{constructor(r,o,l){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=l}get element(){return Ec(this._hostTNode,this._hostLView)}get injector(){return new ga(this._hostTNode,this._hostLView)}get parentInjector(){const r=Ni(this._hostTNode,this._hostLView);if(wi(r)){const o=pa(r,this._hostLView),l=Ps(r);return new ga(o[ln].data[l+8],o)}return new ga(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=R0(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-sr}createEmbeddedView(r,o,l){let p,_;"number"==typeof l?p=l:null!=l&&(p=l.index,_=l.injector);const T=r.createEmbeddedView(o||{},_);return this.insert(T,p),T}createComponent(r,o,l,p,_){const T=r&&!function ho(n){return"function"==typeof n}(r);let P;if(T)P=o;else{const we=o||{};P=we.index,l=we.injector,p=we.projectableNodes,_=we.environmentInjector||we.ngModuleRef}const L=T?r:new Od(Zn(r)),q=l||this.parentInjector;if(!_&&null==L.ngModule){const ct=(T?q:this.parentInjector).get(Pl,null);ct&&(_=ct)}const se=L.create(q,p,void 0,_);return this.insert(se.hostView,P),se}insert(r,o){const l=r._lView,p=l[ln];if(function Co(n){return Bn(n[Tr])}(l)){const se=this.indexOf(r);if(-1!==se)this.detach(se);else{const we=l[Tr],ct=new M0(we,we[ee],we[Tr]);ct.detach(ct.indexOf(r))}}const _=this._adjustIndex(o),T=this._lContainer;!function Nc(n,r,o,l){const p=sr+l,_=o.length;l>0&&(o[p-1][ti]=r),l<_-sr?(r[ti]=o[p],Cl(o,sr+l,r)):(o.push(r),r[ti]=null),r[Tr]=o;const T=r[wn];null!==T&&o!==T&&function xa(n,r){const o=n[Qr];r[Xt]!==r[Tr][Tr][Xt]&&(n[tn]=!0),null===o?n[Qr]=[r]:o.push(r)}(T,r);const P=r[Ir];null!==P&&P.insertView(n),r[Kn]|=64}(p,l,T,_);const P=Oo(_,T),L=l[ae],q=us(L,T[kn]);return null!==q&&function pd(n,r,o,l,p,_){l[Si]=p,l[ee]=r,Fu(n,l,o,1,p,_)}(p,T[ee],L,l,q,P),r.attachToViewContainerRef(),Cl(L_(T),_,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=R0(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),l=kc(this._lContainer,o);l&&(Ua(L_(this._lContainer),o),du(l[ln],l))}detach(r){const o=this._adjustIndex(r,-1),l=kc(this._lContainer,o);return l&&null!=Ua(L_(this._lContainer),o)?new Rd(l):null}_adjustIndex(r,o=0){return null==r?this.length+o:r}};function R0(n){return n[zn]}function L_(n){return n[zn]||(n[zn]=[])}function O0(n,r){let o;const l=r[n.index];if(Bn(l))o=l;else{let p;if(8&n.type)p=oi(l);else{const _=r[ae];p=_.createComment("");const T=ui(n,r);Ra(_,us(_,T),p,function mi(n,r){return n.nextSibling(r)}(_,T),!1)}r[n.index]=o=tp(l,r,p,n),nf(r,o)}return new M0(o,n,r)}class $_{constructor(r){this.queryList=r,this.matches=null}clone(){return new $_(this.queryList)}setDirty(){this.queryList.setDirty()}}class B_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const l=null!==r.contentQueries?r.contentQueries[0]:o.length,p=[];for(let _=0;_<l;_++){const T=o.getByIndex(_);p.push(this.queries[T.indexInDeclarationView].clone())}return new B_(p)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==U0(r,o).matches&&this.queries[o].setDirty()}}class P0{constructor(r,o,l=null){this.predicate=r,this.flags=o,this.read=l}}class V_{constructor(r=[]){this.queries=r}elementStart(r,o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let l=0;l<this.length;l++){const p=null!==o?o.length:0,_=this.getByIndex(l).embeddedTView(r,p);_&&(_.indexInDeclarationView=l,null!==o?o.push(_):o=[_])}return null!==o?new V_(o):null}template(r,o){for(let l=0;l<this.queries.length;l++)this.queries[l].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class U_{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new U_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let l=r.parent;for(;null!==l&&8&l.type&&l.index!==o;)l=l.parent;return o===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const l=this.metadata.predicate;if(Array.isArray(l))for(let p=0;p<l.length;p++){const _=l[p];this.matchTNodeWithReadOption(r,o,pI(o,_)),this.matchTNodeWithReadOption(r,o,Xo(o,r,_,!1,!1))}else l===gm?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,Xo(o,r,l,!1,!1))}matchTNodeWithReadOption(r,o,l){if(null!==l){const p=this.metadata.read;if(null!==p)if(p===f||p===uv||p===gm&&4&o.type)this.addMatch(o.index,-2);else{const _=Xo(o,r,p,!1,!1);null!==_&&this.addMatch(o.index,_)}else this.addMatch(o.index,l)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function pI(n,r){const o=n.localNames;if(null!==o)for(let l=0;l<o.length;l+=2)if(o[l]===r)return o[l+1];return null}function mI(n,r,o,l){return-1===o?function gI(n,r){return 11&n.type?Ec(n,r):4&n.type?lv(n,r):null}(r,n):-2===o?function yI(n,r,o){return o===f?Ec(r,n):o===gm?lv(r,n):o===uv?O0(r,n):void 0}(n,r,l):Cs(n,n[ln],o,r)}function N0(n,r,o,l){const p=r[Ir].queries[l];if(null===p.matches){const _=n.data,T=o.matches,P=[];for(let L=0;L<T.length;L+=2){const q=T[L];P.push(q<0?null:mI(r,_[q],T[L+1],o.metadata.read))}p.matches=P}return p.matches}function j_(n,r,o,l){const p=n.queries.getByIndex(o),_=p.matches;if(null!==_){const T=N0(n,r,p,o);for(let P=0;P<_.length;P+=2){const L=_[P];if(L>0)l.push(T[P/2]);else{const q=_[P+1],se=r[-L];for(let we=sr;we<se.length;we++){const ct=se[we];ct[wn]===ct[Tr]&&j_(ct[ln],ct,q,l)}if(null!==se[Qr]){const we=se[Qr];for(let ct=0;ct<we.length;ct++){const St=we[ct];j_(St[ln],St,q,l)}}}}}return l}function k0(n){const r=E(),o=h(),l=jo();To(l+1);const p=U0(o,l);if(n.dirty&&function as(n){return 4==(4&n[Kn])}(r)===(2==(2&p.metadata.flags))){if(null===p.matches)n.reset([]);else{const _=p.crossesNgTemplate?j_(o,r,l,[]):N0(o,r,p,l);n.reset(_,c),n.notifyOnChanges()}return!0}return!1}function F0(n,r,o){const l=h();l.firstCreatePass&&(V0(l,new P0(n,r,o),-1),2==(2&r)&&(l.staticViewQueries=!0)),B0(l,E(),r)}function L0(n,r,o,l){const p=h();if(p.firstCreatePass){const _=Ue();V0(p,new P0(r,o,l),_.index),function _I(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(p,n),2==(2&o)&&(p.staticContentQueries=!0)}B0(p,E(),o)}function $0(){return function vI(n,r){return n[Ir].queries[r].queryList}(E(),jo())}function B0(n,r,o){const l=new F_(4==(4&o));uh(n,r,l,l.destroy),null===r[Ir]&&(r[Ir]=new B_),r[Ir].queries.push(new $_(l))}function V0(n,r,o){null===n.queries&&(n.queries=new V_),n.queries.track(new U_(r,o))}function U0(n,r){return n.queries.getByIndex(r)}function H_(n){return!!ei(n)}function dv(...n){}const sE=new vi("Application Initializer");let hv=(()=>{class n{constructor(o){this.appInits=o,this.resolve=dv,this.reject=dv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,p)=>{this.resolve=l,this.reject=p})}runInitializers(){if(this.initialized)return;const o=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const _=this.appInits[p]();if(fp(_))o.push(_);else if(gp(_)){const T=new Promise((P,L)=>{_.subscribe({complete:P,error:L})});o.push(T)}}Promise.all(o).then(()=>{l()}).catch(p=>{this.reject(p)}),0===o.length&&l(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(en(sE,8))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const oE=new vi("AppId",{providedIn:"root",factory:function aE(){return`${Y_()}${Y_()}${Y_()}`}});function Y_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const lE=new vi("Platform Initializer"),VI=new vi("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let UI=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const fv=new vi("LocaleId",{providedIn:"root",factory:()=>gn(fv,Wt.Optional|Wt.SkipSelf)||function jI(){return typeof $localize<"u"&&$localize.locale||Jl}()}),HI=new vi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class GI{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let zI=(()=>{class n{compileModuleSync(o){return new nn(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const l=this.compileModuleSync(o),_=yl(ei(o).declarations).reduce((T,P)=>{const L=Zn(P);return L&&T.push(new Od(L)),T},[]);return new GI(l,_)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const YI=(()=>Promise.resolve(0))();function q_(n){typeof Zone>"u"?YI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Yu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new sd(!1),this.onMicrotaskEmpty=new sd(!1),this.onStable=new sd(!1),this.onError=new sd(!1),typeof Zone>"u")throw new Te(908,!1);Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!l&&o,p.shouldCoalesceRunChangeDetection=l,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function qI(){let n=Dn.requestAnimationFrame,r=Dn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const l=r[Zone.__symbol__("OriginalDelegate")];l&&(r=l)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function XI(n){const r=()=>{!function QI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Dn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Q_(n),n.isCheckStableRunning=!0,Z_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Q_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,l,p,_,T,P)=>{try{return dE(n),o.invokeTask(p,_,T,P)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||n.shouldCoalesceRunChangeDetection)&&r(),hE(n)}},onInvoke:(o,l,p,_,T,P,L)=>{try{return dE(n),o.invoke(p,_,T,P,L)}finally{n.shouldCoalesceRunChangeDetection&&r(),hE(n)}},onHasTask:(o,l,p,_)=>{o.hasTask(p,_),l===p&&("microTask"==_.change?(n._hasPendingMicrotasks=_.microTask,Q_(n),Z_(n)):"macroTask"==_.change&&(n.hasPendingMacrotasks=_.macroTask))},onHandleError:(o,l,p,_)=>(o.handleError(p,_),n.runOutsideAngular(()=>n.onError.emit(_)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yu.isInAngularZone())throw new Te(909,!1)}static assertNotInAngularZone(){if(Yu.isInAngularZone())throw new Te(909,!1)}run(r,o,l){return this._inner.run(r,o,l)}runTask(r,o,l,p){const _=this._inner,T=_.scheduleEventTask("NgZoneEvent: "+p,r,ZI,dv,dv);try{return _.runTask(T,o,l)}finally{_.cancelTask(T)}}runGuarded(r,o,l){return this._inner.runGuarded(r,o,l)}runOutsideAngular(r){return this._outer.run(r)}}const ZI={};function Z_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Q_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function dE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function hE(n){n._nesting--,Z_(n)}class JI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new sd,this.onMicrotaskEmpty=new sd,this.onStable=new sd,this.onError=new sd}run(r,o,l){return r.apply(o,l)}runGuarded(r,o,l){return r.apply(o,l)}runOutsideAngular(r){return r()}runTask(r,o,l,p){return r.apply(o,l)}}const fE=new vi(""),pE=new vi("");let X_,ew=(()=>{class n{constructor(o,l,p){this._ngZone=o,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,X_||(function tw(n){X_=n}(p),p.addToWindow(l)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yu.assertNotInAngularZone(),q_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())q_(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(o)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,l,p){let _=-1;l&&l>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==_),o(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:o,timeoutId:_,updateCb:p})}whenStable(o,l,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,l,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,l,p){return[]}}return n.\u0275fac=function(o){return new(o||n)(en(Yu),en(gE),en(pE))},n.\u0275prov=At({token:n,factory:n.\u0275fac}),n})(),gE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,l){this._applications.set(o,l)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,l=!0){var p,_;return null!==(p=null===(_=X_)||void 0===_?void 0:_.findTestabilityInTree(this,o,l))&&void 0!==p?p:null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Hd=!1;let Oh=null;const mE=new vi("AllowMultipleToken"),J_=new vi("PlatformDestroyListeners"),yE=new vi("appBootstrapListener");class iw{constructor(r,o){this.name=r,this.token=o}}function _E(n,r,o=[]){const l=`Platform: ${r}`,p=new vi(l);return(_=[])=>{let T=e0();if(!T||T.injector.get(mE,!1)){const P=[...o,..._,{provide:p,useValue:!0}];n?n(P):function sw(n){if(Oh&&!Oh.get(mE,!1))throw new Te(400,!1);Oh=n;const r=n.get(IE);(function vE(n){const r=n.get(lE,null);r&&r.forEach(o=>o())})(n)}(function EE(n=[],r){return Ic.create({name:r,providers:[{provide:wd,useValue:"platform"},{provide:J_,useValue:new Set([()=>Oh=null])},...n]})}(P,l))}return function aw(n){const r=e0();if(!r)throw new Te(401,!1);return r}()}}function e0(){var n,r;return null!==(n=null===(r=Oh)||void 0===r?void 0:r.get(IE))&&void 0!==n?n:null}let IE=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,l){const p=function CE(n,r){let o;return o="noop"===n?new JI:("zone.js"===n?void 0:n)||new Yu(r),o}(null==l?void 0:l.ngZone,function wE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(l)),_=[{provide:Yu,useValue:p}];return p.run(()=>{const T=Ic.create({providers:_,parent:this.injector,name:o.moduleType.name}),P=o.create(T),L=P.injector.get(qt,null);if(!L)throw new Te(402,!1);return p.runOutsideAngular(()=>{const q=p.onError.subscribe({next:se=>{L.handleError(se)}});P.onDestroy(()=>{gv(this._modules,P),q.unsubscribe()})}),function bE(n,r,o){try{const l=o();return fp(l)?l.catch(p=>{throw r.runOutsideAngular(()=>n.handleError(p)),p}):l}catch(l){throw r.runOutsideAngular(()=>n.handleError(l)),l}}(L,p,()=>{const q=P.injector.get(hv);return q.runInitializers(),q.donePromise.then(()=>(function Tc(n){tt(n,"Expected localeId to be defined"),"string"==typeof n&&(Oy=n.toLowerCase().replace(/_/g,"-"))}(P.injector.get(fv,Jl)||Jl),this._moduleDoBootstrap(P),P))})})}bootstrapModule(o,l=[]){const p=DE({},l);return function nw(n,r,o){const l=new nn(o);return Promise.resolve(l)}(0,0,o).then(_=>this.bootstrapModuleFactory(_,p))}_moduleDoBootstrap(o){const l=o.injector.get(pv);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(p=>l.bootstrap(p));else{if(!o.instance.ngDoBootstrap)throw new Te(-403,!1);o.instance.ngDoBootstrap(l)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Te(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const o=this._injector.get(J_,null);o&&(o.forEach(l=>l()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(en(Ic))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function DE(n,r){return Array.isArray(r)?r.reduce(DE,n):{...n,...r}}let pv=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,l,p){this._zone=o,this._injector=l,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new G.y(P=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{P.next(this._stable),P.complete()})}),T=new G.y(P=>{let L;this._zone.runOutsideAngular(()=>{L=this._zone.onStable.subscribe(()=>{Yu.assertNotInAngularZone(),q_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,P.next(!0))})})});const q=this._zone.onUnstable.subscribe(()=>{Yu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{P.next(!1)}))});return()=>{L.unsubscribe(),q.unsubscribe()}});this.isStable=(0,De.T)(_,T.pipe((0,Me.B)()))}bootstrap(o,l){const p=o instanceof jf;if(!this._injector.get(hv).done){!p&&Ei(o);throw new Te(405,Hd)}let T;T=p?o:this._injector.get(_c).resolveComponentFactory(o),this.componentTypes.push(T.componentType);const P=function rw(n){return n.isBoundToModule}(T)?void 0:this._injector.get(Z),q=T.create(Ic.NULL,[],l||T.selector,P),se=q.location.nativeElement,we=q.injector.get(fE,null);return null==we||we.registerApplication(se),q.onDestroy(()=>{this.detachView(q.hostView),gv(this.components,q),null==we||we.unregisterApplication(se)}),this._loadComponent(q),q}tick(){if(this._runningTick)throw new Te(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const l=o;this._views.push(l),l.attachToAppRef(this)}detachView(o){const l=o;gv(this._views,l),l.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const l=this._injector.get(yE,[]);l.push(...this._bootstrapListeners),l.forEach(p=>p(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>gv(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Te(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(en(Yu),en(Pl),en(qt))},n.\u0275prov=At({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function gv(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}function uw(){return!1}function cw(){}let dw=(()=>{class n{}return n.__NG_ELEMENT_ID__=hw,n})();function hw(n){return function fw(n,r,o){if(Br(n)&&!o){const l=Mi(n.index,r);return new Rd(l,l)}return 47&n.type?new Rd(r[Xt],r):null}(Ue(),E(),16==(16&n))}class ME{constructor(){}supports(r){return ph(r)}create(r){return new _w(r)}}const vw=(n,r)=>r;class _w{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||vw}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,l=this._removalsHead,p=0,_=null;for(;o||l;){const T=!l||o&&o.currentIndex<OE(l,p,_)?o:l,P=OE(T,p,_),L=T.currentIndex;if(T===l)p--,l=l._nextRemoved;else if(o=o._next,null==T.previousIndex)p++;else{_||(_=[]);const q=P-p,se=L-p;if(q!=se){for(let ct=0;ct<q;ct++){const St=ct<_.length?_[ct]:_[ct]=0,Qt=St+ct;se<=Qt&&Qt<q&&(_[ct]=St+1)}_[T.previousIndex]=se-q}}P!==L&&r(T,P,L)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!ph(r))throw new Te(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let p,_,T,o=this._itHead,l=!1;if(Array.isArray(r)){this.length=r.length;for(let P=0;P<this.length;P++)_=r[P],T=this._trackByFn(P,_),null!==o&&Object.is(o.trackById,T)?(l&&(o=this._verifyReinsertion(o,_,T,P)),Object.is(o.item,_)||this._addIdentityChange(o,_)):(o=this._mismatch(o,_,T,P),l=!0),o=o._next}else p=0,function Rg(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[Symbol.iterator]();let l;for(;!(l=o.next()).done;)r(l.value)}}(r,P=>{T=this._trackByFn(p,P),null!==o&&Object.is(o.trackById,T)?(l&&(o=this._verifyReinsertion(o,P,T,p)),Object.is(o.item,P)||this._addIdentityChange(o,P)):(o=this._mismatch(o,P,T,p),l=!0),o=o._next,p++}),this.length=p;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,l,p){let _;return null===r?_=this._itTail:(_=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,_,p)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(l,p))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,_,p)):r=this._addAfter(new Ew(o,l),_,p),r}_verifyReinsertion(r,o,l,p){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==_?r=this._reinsertAfter(_,r._prev,p):r.currentIndex!=p&&(r.currentIndex=p,this._addToMoves(r,p)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const p=r._prevRemoved,_=r._nextRemoved;return null===p?this._removalsHead=_:p._nextRemoved=_,null===_?this._removalsTail=p:_._prevRemoved=p,this._insertAfter(r,o,l),this._addToMoves(r,l),r}_moveAfter(r,o,l){return this._unlink(r),this._insertAfter(r,o,l),this._addToMoves(r,l),r}_addAfter(r,o,l){return this._insertAfter(r,o,l),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,l){const p=null===o?this._itHead:o._next;return r._next=p,r._prev=o,null===p?this._itTail=r:p._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new RE),this._linkedRecords.put(r),r.currentIndex=l,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,l=r._next;return null===o?this._itHead=l:o._next=l,null===l?this._itTail=o:l._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new RE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class Ew{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Iw{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===o||o<=l.currentIndex)&&Object.is(l.trackById,r))return l;return null}remove(r){const o=r._prevDup,l=r._nextDup;return null===o?this._head=l:o._nextDup=l,null===l?this._tail=o:l._prevDup=o,null===this._head}}class RE{constructor(){this.map=new Map}put(r){const o=r.trackById;let l=this.map.get(o);l||(l=new Iw,this.map.set(o,l)),l.add(r)}get(r,o){const p=this.map.get(r);return p?p.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function OE(n,r,o){const l=n.previousIndex;if(null===l)return l;let p=0;return o&&l<o.length&&(p=o[l]),l+r+p}class PE{constructor(){}supports(r){return r instanceof Map||af(r)}create(){return new ww}}class ww{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||af(r)))throw new Te(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(l,p)=>{if(o&&o.key===p)this._maybeAddToChanges(o,l),this._appendAfter=o,o=o._next;else{const _=this._getOrCreateRecordForKey(p,l);o=this._insertBeforeOrAppend(o,_)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let l=o;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const l=r._prev;return o._next=r,o._prev=l,r._prev=o,l&&(l._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const p=this._records.get(r);this._maybeAddToChanges(p,o);const _=p._prev,T=p._next;return _&&(_._next=T),T&&(T._prev=_),p._next=null,p._prev=null,p}const l=new Cw(r);return this._records.set(r,l),l.currentValue=o,this._addToAdditions(l),l}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(l=>o(r[l],l))}}class Cw{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function NE(){return new o0([new ME])}let o0=(()=>{class n{constructor(o){this.factories=o}static create(o,l){if(null!=l){const p=l.factories.slice();o=o.concat(p)}return new n(o)}static extend(o){return{provide:n,useFactory:l=>n.create(o,l||NE()),deps:[[n,new te,new F]]}}find(o){const l=this.factories.find(p=>p.supports(o));if(null!=l)return l;throw new Te(901,!1)}}return n.\u0275prov=At({token:n,providedIn:"root",factory:NE}),n})();function kE(){return new a0([new PE])}let a0=(()=>{class n{constructor(o){this.factories=o}static create(o,l){if(l){const p=l.factories.slice();o=o.concat(p)}return new n(o)}static extend(o){return{provide:n,useFactory:l=>n.create(o,l||kE()),deps:[[n,new te,new F]]}}find(o){const l=this.factories.find(p=>p.supports(o));if(l)return l;throw new Te(901,!1)}}return n.\u0275prov=At({token:n,providedIn:"root",factory:kE}),n})();const Tw=_E(null,"core",[]);let Sw=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(en(pv))},n.\u0275mod=fi({type:n}),n.\u0275inj=vt({}),n})();function Aw(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(sn,ht,B)=>{"use strict";B.d(ht,{u5:()=>Qo,JU:()=>it,a5:()=>Jr,JJ:()=>Sr,On:()=>zn});var a=B(4650),J=B(6895),G=B(8996),De=B(9751),Me=B(4742),Ae=B(8421),he=B(7669),xe=B(5403),Ve=B(3268),ge=B(1810),de=B(4004);let Ce=(()=>{class g{constructor(h,D){this._renderer=h,this._elementRef=D,this.onChange=W=>{},this.onTouched=()=>{}}setProperty(h,D){this._renderer.setProperty(this._elementRef.nativeElement,h,D)}registerOnTouched(h){this.onTouched=h}registerOnChange(h){this.onChange=h}setDisabledState(h){this.setProperty("disabled",h)}}return g.\u0275fac=function(h){return new(h||g)(a.Y36(a.Qsj),a.Y36(a.SBq))},g.\u0275dir=a.lG2({type:g}),g})(),Fe=(()=>{class g extends Ce{}return g.\u0275fac=function(){let E;return function(D){return(E||(E=a.n5z(g)))(D||g)}}(),g.\u0275dir=a.lG2({type:g,features:[a.qOj]}),g})();const it=new a.OlP("NgValueAccessor"),ye={provide:it,useExisting:(0,a.Gpc)(()=>st),multi:!0},at=new a.OlP("CompositionEventMode");let st=(()=>{class g extends Ce{constructor(h,D,W){super(h,D),this._compositionMode=W,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function le(){const g=(0,J.q)()?(0,J.q)().getUserAgent():"";return/android (\d+)/.test(g.toLowerCase())}())}writeValue(h){this.setProperty("value",null==h?"":h)}_handleInput(h){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(h)}_compositionStart(){this._composing=!0}_compositionEnd(h){this._composing=!1,this._compositionMode&&this.onChange(h)}}return g.\u0275fac=function(h){return new(h||g)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(at,8))},g.\u0275dir=a.lG2({type:g,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(h,D){1&h&&a.NdJ("input",function(Ue){return D._handleInput(Ue.target.value)})("blur",function(){return D.onTouched()})("compositionstart",function(){return D._compositionStart()})("compositionend",function(Ue){return D._compositionEnd(Ue.target.value)})},features:[a._Bn([ye]),a.qOj]}),g})();const Xe=!1,Oe=new a.OlP("NgValidators"),Q=new a.OlP("NgAsyncValidators");function tt(g){return null!=g}function $e(g){const E=(0,a.QGY)(g)?(0,G.D)(g):g;if(Xe&&!(0,a.CqO)(E)){let h="Expected async validator to return Promise or Observable.";throw"object"==typeof g&&(h+=" Are you using a synchronous validator where an async validator is expected?"),new a.vHH(-1101,h)}return E}function Je(g){let E={};return g.forEach(h=>{E=null!=h?{...E,...h}:E}),0===Object.keys(E).length?null:E}function Ke(g,E){return E.map(h=>h(g))}function At(g){return g.map(E=>function Pt(g){return!g.validate}(E)?E:h=>E.validate(h))}function vt(g){return null!=g?function Nt(g){if(!g)return null;const E=g.filter(tt);return 0==E.length?null:function(h){return Je(Ke(h,E))}}(At(g)):null}function En(g){return null!=g?function Sn(g){if(!g)return null;const E=g.filter(tt);return 0==E.length?null:function(h){return function ce(...g){const E=(0,he.jO)(g),{args:h,keys:D}=(0,Me.D)(g),W=new De.y(Ue=>{const{length:Gt}=h;if(!Gt)return void Ue.complete();const an=new Array(Gt);let Pn=Gt,cr=Gt;for(let Yr=0;Yr<Gt;Yr++){let pr=!1;(0,Ae.Xf)(h[Yr]).subscribe((0,xe.x)(Ue,ns=>{pr||(pr=!0,cr--),an[Yr]=ns},()=>Pn--,void 0,()=>{(!Pn||!pr)&&(cr||Ue.next(D?(0,ge.n)(D,an):an),Ue.complete())}))}});return E?W.pipe((0,Ve.Z)(E)):W}(Ke(h,E).map($e)).pipe((0,de.U)(Je))}}(At(g)):null}function Fn(g,E){return null===g?[E]:Array.isArray(g)?[...g,E]:[g,E]}function Qn(g){return g?Array.isArray(g)?g:[g]:[]}function vr(g,E){return Array.isArray(g)?g.includes(E):g===E}function lr(g,E){const h=Qn(E);return Qn(g).forEach(W=>{vr(h,W)||h.push(W)}),h}function hn(g,E){return Qn(E).filter(h=>!vr(g,h))}class _r{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(E){this._rawValidators=E||[],this._composedValidatorFn=vt(this._rawValidators)}_setAsyncValidators(E){this._rawAsyncValidators=E||[],this._composedAsyncValidatorFn=En(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(E){this._onDestroyCallbacks.push(E)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(E=>E()),this._onDestroyCallbacks=[]}reset(E){this.control&&this.control.reset(E)}hasError(E,h){return!!this.control&&this.control.hasError(E,h)}getError(E,h){return this.control?this.control.getError(E,h):null}}class Wt extends _r{get formDirective(){return null}get path(){return null}}class Jr extends _r{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Cr{constructor(E){this._cd=E}get isTouched(){var E,h;return!(null===(E=this._cd)||void 0===E||null===(h=E.control)||void 0===h||!h.touched)}get isUntouched(){var E,h;return!(null===(E=this._cd)||void 0===E||null===(h=E.control)||void 0===h||!h.untouched)}get isPristine(){var E,h;return!(null===(E=this._cd)||void 0===E||null===(h=E.control)||void 0===h||!h.pristine)}get isDirty(){var E,h;return!(null===(E=this._cd)||void 0===E||null===(h=E.control)||void 0===h||!h.dirty)}get isValid(){var E,h;return!(null===(E=this._cd)||void 0===E||null===(h=E.control)||void 0===h||!h.valid)}get isInvalid(){var E,h;return!(null===(E=this._cd)||void 0===E||null===(h=E.control)||void 0===h||!h.invalid)}get isPending(){var E,h;return!(null===(E=this._cd)||void 0===E||null===(h=E.control)||void 0===h||!h.pending)}get isSubmitted(){var E;return!(null===(E=this._cd)||void 0===E||!E.submitted)}}let Sr=(()=>{class g extends Cr{constructor(h){super(h)}}return g.\u0275fac=function(h){return new(h||g)(a.Y36(Jr,2))},g.\u0275dir=a.lG2({type:g,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(h,D){2&h&&a.ekj("ng-untouched",D.isUntouched)("ng-touched",D.isTouched)("ng-pristine",D.isPristine)("ng-dirty",D.isDirty)("ng-valid",D.isValid)("ng-invalid",D.isInvalid)("ng-pending",D.isPending)},features:[a.qOj]}),g})();const Vn="VALID",xr="INVALID",Re="PENDING",_e="DISABLED";function Le(g){return null!=g&&!Array.isArray(g)&&"object"==typeof g}class mt{constructor(E,h){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(E),this._assignAsyncValidators(h)}get validator(){return this._composedValidatorFn}set validator(E){this._rawValidators=this._composedValidatorFn=E}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(E){this._rawAsyncValidators=this._composedAsyncValidatorFn=E}get parent(){return this._parent}get valid(){return this.status===Vn}get invalid(){return this.status===xr}get pending(){return this.status==Re}get disabled(){return this.status===_e}get enabled(){return this.status!==_e}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(E){this._assignValidators(E)}setAsyncValidators(E){this._assignAsyncValidators(E)}addValidators(E){this.setValidators(lr(E,this._rawValidators))}addAsyncValidators(E){this.setAsyncValidators(lr(E,this._rawAsyncValidators))}removeValidators(E){this.setValidators(hn(E,this._rawValidators))}removeAsyncValidators(E){this.setAsyncValidators(hn(E,this._rawAsyncValidators))}hasValidator(E){return vr(this._rawValidators,E)}hasAsyncValidator(E){return vr(this._rawAsyncValidators,E)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(E={}){this.touched=!0,this._parent&&!E.onlySelf&&this._parent.markAsTouched(E)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(E=>E.markAllAsTouched())}markAsUntouched(E={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(h=>{h.markAsUntouched({onlySelf:!0})}),this._parent&&!E.onlySelf&&this._parent._updateTouched(E)}markAsDirty(E={}){this.pristine=!1,this._parent&&!E.onlySelf&&this._parent.markAsDirty(E)}markAsPristine(E={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(h=>{h.markAsPristine({onlySelf:!0})}),this._parent&&!E.onlySelf&&this._parent._updatePristine(E)}markAsPending(E={}){this.status=Re,!1!==E.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!E.onlySelf&&this._parent.markAsPending(E)}disable(E={}){const h=this._parentMarkedDirty(E.onlySelf);this.status=_e,this.errors=null,this._forEachChild(D=>{D.disable({...E,onlySelf:!0})}),this._updateValue(),!1!==E.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...E,skipPristineCheck:h}),this._onDisabledChange.forEach(D=>D(!0))}enable(E={}){const h=this._parentMarkedDirty(E.onlySelf);this.status=Vn,this._forEachChild(D=>{D.enable({...E,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:E.emitEvent}),this._updateAncestors({...E,skipPristineCheck:h}),this._onDisabledChange.forEach(D=>D(!1))}_updateAncestors(E){this._parent&&!E.onlySelf&&(this._parent.updateValueAndValidity(E),E.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(E){this._parent=E}getRawValue(){return this.value}updateValueAndValidity(E={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vn||this.status===Re)&&this._runAsyncValidator(E.emitEvent)),!1!==E.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!E.onlySelf&&this._parent.updateValueAndValidity(E)}_updateTreeValidity(E={emitEvent:!0}){this._forEachChild(h=>h._updateTreeValidity(E)),this.updateValueAndValidity({onlySelf:!0,emitEvent:E.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_e:Vn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(E){if(this.asyncValidator){this.status=Re,this._hasOwnPendingAsyncValidator=!0;const h=$e(this.asyncValidator(this));this._asyncValidationSubscription=h.subscribe(D=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(D,{emitEvent:E})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(E,h={}){this.errors=E,this._updateControlsErrors(!1!==h.emitEvent)}get(E){let h=E;return null==h||(Array.isArray(h)||(h=h.split(".")),0===h.length)?null:h.reduce((D,W)=>D&&D._find(W),this)}getError(E,h){const D=h?this.get(h):this;return D&&D.errors?D.errors[E]:null}hasError(E,h){return!!this.getError(E,h)}get root(){let E=this;for(;E._parent;)E=E._parent;return E}_updateControlsErrors(E){this.status=this._calculateStatus(),E&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(E)}_initObservables(){this.valueChanges=new a.vpe,this.statusChanges=new a.vpe}_calculateStatus(){return this._allControlsDisabled()?_e:this.errors?xr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Re)?Re:this._anyControlsHaveStatus(xr)?xr:Vn}_anyControlsHaveStatus(E){return this._anyControls(h=>h.status===E)}_anyControlsDirty(){return this._anyControls(E=>E.dirty)}_anyControlsTouched(){return this._anyControls(E=>E.touched)}_updatePristine(E={}){this.pristine=!this._anyControlsDirty(),this._parent&&!E.onlySelf&&this._parent._updatePristine(E)}_updateTouched(E={}){this.touched=this._anyControlsTouched(),this._parent&&!E.onlySelf&&this._parent._updateTouched(E)}_registerOnCollectionChange(E){this._onCollectionChange=E}_setUpdateStrategy(E){Le(E)&&null!=E.updateOn&&(this._updateOn=E.updateOn)}_parentMarkedDirty(E){return!E&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(E){return null}_assignValidators(E){this._rawValidators=Array.isArray(E)?E.slice():E,this._composedValidatorFn=function Mt(g){return Array.isArray(g)?vt(g):g||null}(this._rawValidators)}_assignAsyncValidators(E){this._rawAsyncValidators=Array.isArray(E)?E.slice():E,this._composedAsyncValidatorFn=function dn(g){return Array.isArray(g)?En(g):g||null}(this._rawAsyncValidators)}}const $i=new a.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Bi}),Bi="always";function fi(g,E,h=Bi){var D,W;(function Ui(g,E){const h=function $n(g){return g._rawValidators}(g);null!==E.validator?g.setValidators(Fn(h,E.validator)):"function"==typeof h&&g.setValidators([h]);const D=function Zt(g){return g._rawAsyncValidators}(g);null!==E.asyncValidator?g.setAsyncValidators(Fn(D,E.asyncValidator)):"function"==typeof D&&g.setAsyncValidators([D]);const W=()=>g.updateValueAndValidity();Rr(E._rawValidators,W),Rr(E._rawAsyncValidators,W)})(g,E),E.valueAccessor.writeValue(g.value),(g.disabled||"always"===h)&&(null===(D=(W=E.valueAccessor).setDisabledState)||void 0===D||D.call(W,g.disabled)),function Wr(g,E){E.valueAccessor.registerOnChange(h=>{g._pendingValue=h,g._pendingChange=!0,g._pendingDirty=!0,"change"===g.updateOn&&Ei(g,E)})}(g,E),function ei(g,E){const h=(D,W)=>{E.valueAccessor.writeValue(D),W&&E.viewToModelUpdate(D)};g.registerOnChange(h),E._registerOnDestroy(()=>{g._unregisterOnChange(h)})}(g,E),function kr(g,E){E.valueAccessor.registerOnTouched(()=>{g._pendingTouched=!0,"blur"===g.updateOn&&g._pendingChange&&Ei(g,E),"submit"!==g.updateOn&&g.markAsTouched()})}(g,E),function is(g,E){if(E.valueAccessor.setDisabledState){const h=D=>{E.valueAccessor.setDisabledState(D)};g.registerOnDisabledChange(h),E._registerOnDestroy(()=>{g._unregisterOnDisabledChange(h)})}}(g,E)}function Rr(g,E){g.forEach(h=>{h.registerOnValidatorChange&&h.registerOnValidatorChange(E)})}function Ei(g,E){g._pendingDirty&&g.markAsDirty(),g.setValue(g._pendingValue,{emitModelToViewChange:!1}),E.viewToModelUpdate(g._pendingValue),g._pendingChange=!1}function pt(g,E){const h=g.indexOf(E);h>-1&&g.splice(h,1)}function Dt(g){return"object"==typeof g&&null!==g&&2===Object.keys(g).length&&"value"in g&&"disabled"in g}const Ft=class extends mt{constructor(E=null,h,D){super(function ze(g){return(Le(g)?g.validators:g)||null}(h),function gt(g,E){return(Le(E)?E.asyncValidators:g)||null}(D,h)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(E),this._setUpdateStrategy(h),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Le(h)&&(h.nonNullable||h.initialValueIsDefault)&&(this.defaultValue=Dt(E)?E.value:E)}setValue(E,h={}){this.value=this._pendingValue=E,this._onChange.length&&!1!==h.emitModelToViewChange&&this._onChange.forEach(D=>D(this.value,!1!==h.emitViewToModelChange)),this.updateValueAndValidity(h)}patchValue(E,h={}){this.setValue(E,h)}reset(E=this.defaultValue,h={}){this._applyFormState(E),this.markAsPristine(h),this.markAsUntouched(h),this.setValue(this.value,h),this._pendingChange=!1}_updateValue(){}_anyControls(E){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(E){this._onChange.push(E)}_unregisterOnChange(E){pt(this._onChange,E)}registerOnDisabledChange(E){this._onDisabledChange.push(E)}_unregisterOnDisabledChange(E){pt(this._onDisabledChange,E)}_forEachChild(E){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(E){Dt(E)?(this.value=this._pendingValue=E.value,E.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=E}},tn={provide:Jr,useExisting:(0,a.Gpc)(()=>zn)},kn=(()=>Promise.resolve())();let zn=(()=>{class g extends Jr{constructor(h,D,W,Ue,Gt,an){super(),this._changeDetectorRef=Gt,this.callSetDisabledState=an,this.control=new Ft,this._registered=!1,this.update=new a.vpe,this._parent=h,this._setValidators(D),this._setAsyncValidators(W),this.valueAccessor=function fe(g,E){if(!E)return null;let h,D,W;return Array.isArray(E),E.forEach(Ue=>{Ue.constructor===st?h=Ue:function Hi(g){return Object.getPrototypeOf(g.constructor)===Fe}(Ue)?D=Ue:W=Ue}),W||D||h||null}(0,Ue)}ngOnChanges(h){if(this._checkForErrors(),!this._registered||"name"in h){if(this._registered&&(this._checkName(),this.formDirective)){const D=h.name.previousValue;this.formDirective.removeControl({name:D,path:this._getPath(D)})}this._setUpControl()}"isDisabled"in h&&this._updateDisabled(h),function ti(g,E){if(!g.hasOwnProperty("model"))return!1;const h=g.model;return!!h.isFirstChange()||!Object.is(E,h.currentValue)}(h,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(h){this.viewModel=h,this.update.emit(h)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){fi(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(h){kn.then(()=>{var D;this.control.setValue(h,{emitViewToModelChange:!1}),null===(D=this._changeDetectorRef)||void 0===D||D.markForCheck()})}_updateDisabled(h){const D=h.isDisabled.currentValue,W=0!==D&&(0,a.D6c)(D);kn.then(()=>{var Ue;W&&!this.control.disabled?this.control.disable():!W&&this.control.disabled&&this.control.enable(),null===(Ue=this._changeDetectorRef)||void 0===Ue||Ue.markForCheck()})}_getPath(h){return this._parent?function Yi(g,E){return[...E.path,g]}(h,this._parent):[h]}}return g.\u0275fac=function(h){return new(h||g)(a.Y36(Wt,9),a.Y36(Oe,10),a.Y36(Q,10),a.Y36(it,10),a.Y36(a.sBO,8),a.Y36($i,8))},g.\u0275dir=a.lG2({type:g,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[a._Bn([tn]),a.qOj,a.TTD]}),g})(),qi=(()=>{class g{}return g.\u0275fac=function(h){return new(h||g)},g.\u0275mod=a.oAB({type:g}),g.\u0275inj=a.cJS({}),g})(),fs=(()=>{class g{}return g.\u0275fac=function(h){return new(h||g)},g.\u0275mod=a.oAB({type:g}),g.\u0275inj=a.cJS({imports:[qi]}),g})(),Qo=(()=>{class g{static withConfig(h){var D;return{ngModule:g,providers:[{provide:$i,useValue:null!==(D=h.callSetDisabledState)&&void 0!==D?D:Bi}]}}}return g.\u0275fac=function(h){return new(h||g)},g.\u0275mod=a.oAB({type:g}),g.\u0275inj=a.cJS({imports:[fs]}),g})()},1481:(sn,ht,B)=>{"use strict";B.d(ht,{Dx:()=>Dn,b2:()=>Jr,q6:()=>lr});var a=B(6895),J=B(4650);class G extends a.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class De extends G{static makeCurrent(){(0,a.HT)(new De)}onAndCancel(Be,me,mt){return Be.addEventListener(me,mt,!1),()=>{Be.removeEventListener(me,mt,!1)}}dispatchEvent(Be,me){Be.dispatchEvent(me)}remove(Be){Be.parentNode&&Be.parentNode.removeChild(Be)}createElement(Be,me){return(me=me||this.getDefaultDocument()).createElement(Be)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Be){return Be.nodeType===Node.ELEMENT_NODE}isShadowRoot(Be){return Be instanceof DocumentFragment}getGlobalEventTarget(Be,me){return"window"===me?window:"document"===me?Be:"body"===me?Be.body:null}getBaseHref(Be){const me=function Ae(){return Me=Me||document.querySelector("base"),Me?Me.getAttribute("href"):null}();return null==me?null:function xe(Le){he=he||document.createElement("a"),he.setAttribute("href",Le);const Be=he.pathname;return"/"===Be.charAt(0)?Be:`/${Be}`}(me)}resetBaseElement(){Me=null}getUserAgent(){return window.navigator.userAgent}getCookie(Be){return(0,a.Mx)(document.cookie,Be)}}let he,Me=null;const Ve=new J.OlP("TRANSITION_ID"),ce=[{provide:J.ip1,useFactory:function ge(Le,Be,me){return()=>{me.get(J.CZH).donePromise.then(()=>{const mt=(0,a.q)(),Rt=Be.querySelectorAll(`style[ng-transition="${Le}"]`);for(let jt=0;jt<Rt.length;jt++)mt.remove(Rt[jt])})}},deps:[Ve,a.K0,J.zs3],multi:!0}];let Ce=(()=>{class Le{build(){return new XMLHttpRequest}}return Le.\u0275fac=function(me){return new(me||Le)},Le.\u0275prov=J.Yz7({token:Le,factory:Le.\u0275fac}),Le})();const Fe=new J.OlP("EventManagerPlugins");let it=(()=>{class Le{constructor(me,mt){this._zone=mt,this._eventNameToPlugin=new Map,me.forEach(Rt=>{Rt.manager=this}),this._plugins=me.slice().reverse()}addEventListener(me,mt,Rt){return this._findPluginFor(mt).addEventListener(me,mt,Rt)}addGlobalEventListener(me,mt,Rt){return this._findPluginFor(mt).addGlobalEventListener(me,mt,Rt)}getZone(){return this._zone}_findPluginFor(me){const mt=this._eventNameToPlugin.get(me);if(mt)return mt;const Rt=this._plugins;for(let jt=0;jt<Rt.length;jt++){const xn=Rt[jt];if(xn.supports(me))return this._eventNameToPlugin.set(me,xn),xn}throw new Error(`No event manager plugin found for event ${me}`)}}return Le.\u0275fac=function(me){return new(me||Le)(J.LFG(Fe),J.LFG(J.R0b))},Le.\u0275prov=J.Yz7({token:Le,factory:Le.\u0275fac}),Le})();class Ct{constructor(Be){this._doc=Be}addGlobalEventListener(Be,me,mt){const Rt=(0,a.q)().getGlobalEventTarget(this._doc,Be);if(!Rt)throw new Error(`Unsupported event target ${Rt} for event ${me}`);return this.addEventListener(Rt,me,mt)}}let Te=(()=>{class Le{constructor(){this.usageCount=new Map}addStyles(me){for(const mt of me)1===this.changeUsageCount(mt,1)&&this.onStyleAdded(mt)}removeStyles(me){for(const mt of me)0===this.changeUsageCount(mt,-1)&&this.onStyleRemoved(mt)}onStyleRemoved(me){}onStyleAdded(me){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(me,mt){var Rt;const jt=this.usageCount;let xn=null!==(Rt=jt.get(me))&&void 0!==Rt?Rt:0;return xn+=mt,xn>0?jt.set(me,xn):jt.delete(me),xn}ngOnDestroy(){for(const me of this.getAllStyles())this.onStyleRemoved(me);this.usageCount.clear()}}return Le.\u0275fac=function(me){return new(me||Le)},Le.\u0275prov=J.Yz7({token:Le,factory:Le.\u0275fac}),Le})(),ye=(()=>{class Le extends Te{constructor(me){super(),this.doc=me,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(me){for(const mt of this.hostNodes)this.addStyleToHost(mt,me)}onStyleRemoved(me){const mt=this.styleRef,Rt=mt.get(me);null==Rt||Rt.forEach(jt=>jt.remove()),mt.delete(me)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(me){this.hostNodes.add(me);for(const mt of this.getAllStyles())this.addStyleToHost(me,mt)}removeHost(me){this.hostNodes.delete(me)}addStyleToHost(me,mt){const Rt=this.doc.createElement("style");Rt.textContent=mt,me.appendChild(Rt);const jt=this.styleRef.get(mt);jt?jt.push(Rt):this.styleRef.set(mt,[Rt])}resetHostNodes(){const me=this.hostNodes;me.clear(),me.add(this.doc.head)}}return Le.\u0275fac=function(me){return new(me||Le)(J.LFG(a.K0))},Le.\u0275prov=J.Yz7({token:Le,factory:Le.\u0275fac}),Le})();const le={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},at=/%COMP%/g,Q=new J.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function He(Le,Be){return Be.flat(100).map(me=>me.replace(at,Le))}function Ge(Le){return Be=>{if("__ngUnwrap__"===Be)return Le;!1===Le(Be)&&(Be.preventDefault(),Be.returnValue=!1)}}let rt=(()=>{class Le{constructor(me,mt,Rt,jt){this.eventManager=me,this.sharedStylesHost=mt,this.appId=Rt,this.removeStylesOnCompDestory=jt,this.rendererByCompId=new Map,this.defaultRenderer=new z(me)}createRenderer(me,mt){if(!me||!mt)return this.defaultRenderer;const Rt=this.getOrCreateRenderer(me,mt);return Rt instanceof tt?Rt.applyToHost(me):Rt instanceof be&&Rt.applyStyles(),Rt}getOrCreateRenderer(me,mt){const Rt=this.rendererByCompId;let jt=Rt.get(mt.id);if(!jt){const xn=this.eventManager,Hn=this.sharedStylesHost,fr=this.removeStylesOnCompDestory;switch(mt.encapsulation){case J.ifc.Emulated:jt=new tt(xn,Hn,mt,this.appId,fr);break;case J.ifc.ShadowDom:return new Ee(xn,Hn,me,mt);default:jt=new be(xn,Hn,mt,fr)}jt.onDestroy=()=>Rt.delete(mt.id),Rt.set(mt.id,jt)}return jt}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return Le.\u0275fac=function(me){return new(me||Le)(J.LFG(it),J.LFG(ye),J.LFG(J.AFp),J.LFG(Q))},Le.\u0275prov=J.Yz7({token:Le,factory:Le.\u0275fac}),Le})();class z{constructor(Be){this.eventManager=Be,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Be,me){return me?document.createElementNS(le[me]||me,Be):document.createElement(Be)}createComment(Be){return document.createComment(Be)}createText(Be){return document.createTextNode(Be)}appendChild(Be,me){(Ie(Be)?Be.content:Be).appendChild(me)}insertBefore(Be,me,mt){Be&&(Ie(Be)?Be.content:Be).insertBefore(me,mt)}removeChild(Be,me){Be&&Be.removeChild(me)}selectRootElement(Be,me){let mt="string"==typeof Be?document.querySelector(Be):Be;if(!mt)throw new Error(`The selector "${Be}" did not match any elements`);return me||(mt.textContent=""),mt}parentNode(Be){return Be.parentNode}nextSibling(Be){return Be.nextSibling}setAttribute(Be,me,mt,Rt){if(Rt){me=Rt+":"+me;const jt=le[Rt];jt?Be.setAttributeNS(jt,me,mt):Be.setAttribute(me,mt)}else Be.setAttribute(me,mt)}removeAttribute(Be,me,mt){if(mt){const Rt=le[mt];Rt?Be.removeAttributeNS(Rt,me):Be.removeAttribute(`${mt}:${me}`)}else Be.removeAttribute(me)}addClass(Be,me){Be.classList.add(me)}removeClass(Be,me){Be.classList.remove(me)}setStyle(Be,me,mt,Rt){Rt&(J.JOm.DashCase|J.JOm.Important)?Be.style.setProperty(me,mt,Rt&J.JOm.Important?"important":""):Be.style[me]=mt}removeStyle(Be,me,mt){mt&J.JOm.DashCase?Be.style.removeProperty(me):Be.style[me]=""}setProperty(Be,me,mt){Be[me]=mt}setValue(Be,me){Be.nodeValue=me}listen(Be,me,mt){return"string"==typeof Be?this.eventManager.addGlobalEventListener(Be,me,Ge(mt)):this.eventManager.addEventListener(Be,me,Ge(mt))}}function Ie(Le){return"TEMPLATE"===Le.tagName&&void 0!==Le.content}class Ee extends z{constructor(Be,me,mt,Rt){super(Be),this.sharedStylesHost=me,this.hostEl=mt,this.shadowRoot=mt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const jt=He(Rt.id,Rt.styles);for(const xn of jt){const Hn=document.createElement("style");Hn.textContent=xn,this.shadowRoot.appendChild(Hn)}}nodeOrShadowRoot(Be){return Be===this.hostEl?this.shadowRoot:Be}appendChild(Be,me){return super.appendChild(this.nodeOrShadowRoot(Be),me)}insertBefore(Be,me,mt){return super.insertBefore(this.nodeOrShadowRoot(Be),me,mt)}removeChild(Be,me){return super.removeChild(this.nodeOrShadowRoot(Be),me)}parentNode(Be){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Be)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class be extends z{constructor(Be,me,mt,Rt,jt=mt.id){super(Be),this.sharedStylesHost=me,this.removeStylesOnCompDestory=Rt,this.rendererUsageCount=0,this.styles=He(jt,mt.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){var Be;this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount)&&(null===(Be=this.onDestroy)||void 0===Be||Be.call(this))}}class tt extends be{constructor(Be,me,mt,Rt,jt){const xn=Rt+"-"+mt.id;super(Be,me,mt,jt,xn),this.contentAttr=function et(Le){return"_ngcontent-%COMP%".replace(at,Le)}(xn),this.hostAttr=function ke(Le){return"_nghost-%COMP%".replace(at,Le)}(xn)}applyToHost(Be){this.applyStyles(),this.setAttribute(Be,this.hostAttr,"")}createElement(Be,me){const mt=super.createElement(Be,me);return super.setAttribute(mt,this.contentAttr,""),mt}}let $e=(()=>{class Le extends Ct{constructor(me){super(me)}supports(me){return!0}addEventListener(me,mt,Rt){return me.addEventListener(mt,Rt,!1),()=>this.removeEventListener(me,mt,Rt)}removeEventListener(me,mt,Rt){return me.removeEventListener(mt,Rt)}}return Le.\u0275fac=function(me){return new(me||Le)(J.LFG(a.K0))},Le.\u0275prov=J.Yz7({token:Le,factory:Le.\u0275fac}),Le})();const Je=["alt","control","meta","shift"],Ke={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pt={alt:Le=>Le.altKey,control:Le=>Le.ctrlKey,meta:Le=>Le.metaKey,shift:Le=>Le.shiftKey};let At=(()=>{class Le extends Ct{constructor(me){super(me)}supports(me){return null!=Le.parseEventName(me)}addEventListener(me,mt,Rt){const jt=Le.parseEventName(mt),xn=Le.eventCallback(jt.fullKey,Rt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,a.q)().onAndCancel(me,jt.domEventName,xn))}static parseEventName(me){const mt=me.toLowerCase().split("."),Rt=mt.shift();if(0===mt.length||"keydown"!==Rt&&"keyup"!==Rt)return null;const jt=Le._normalizeKey(mt.pop());let xn="",Hn=mt.indexOf("code");if(Hn>-1&&(mt.splice(Hn,1),xn="code."),Je.forEach($i=>{const Bi=mt.indexOf($i);Bi>-1&&(mt.splice(Bi,1),xn+=$i+".")}),xn+=jt,0!=mt.length||0===jt.length)return null;const fr={};return fr.domEventName=Rt,fr.fullKey=xn,fr}static matchEventFullKeyCode(me,mt){let Rt=Ke[me.key]||me.key,jt="";return mt.indexOf("code.")>-1&&(Rt=me.code,jt="code."),!(null==Rt||!Rt)&&(Rt=Rt.toLowerCase()," "===Rt?Rt="space":"."===Rt&&(Rt="dot"),Je.forEach(xn=>{xn!==Rt&&(0,Pt[xn])(me)&&(jt+=xn+".")}),jt+=Rt,jt===mt)}static eventCallback(me,mt,Rt){return jt=>{Le.matchEventFullKeyCode(jt,me)&&Rt.runGuarded(()=>mt(jt))}}static _normalizeKey(me){return"esc"===me?"escape":me}}return Le.\u0275fac=function(me){return new(me||Le)(J.LFG(a.K0))},Le.\u0275prov=J.Yz7({token:Le,factory:Le.\u0275fac}),Le})();const lr=(0,J.eFA)(J._c5,"browser",[{provide:J.Lbi,useValue:a.bD},{provide:J.g9A,useValue:function $n(){De.makeCurrent()},multi:!0},{provide:a.K0,useFactory:function Qn(){return(0,J.RDi)(document),document},deps:[]}]),hn=new J.OlP(""),_r=[{provide:J.rWj,useClass:class de{addToWindow(Be){J.dqk.getAngularTestability=(mt,Rt=!0)=>{const jt=Be.findTestabilityInTree(mt,Rt);if(null==jt)throw new Error("Could not find testability for element.");return jt},J.dqk.getAllAngularTestabilities=()=>Be.getAllTestabilities(),J.dqk.getAllAngularRootElements=()=>Be.getAllRootElements(),J.dqk.frameworkStabilizers||(J.dqk.frameworkStabilizers=[]),J.dqk.frameworkStabilizers.push(mt=>{const Rt=J.dqk.getAllAngularTestabilities();let jt=Rt.length,xn=!1;const Hn=function(fr){xn=xn||fr,jt--,0==jt&&mt(xn)};Rt.forEach(function(fr){fr.whenStable(Hn)})})}findTestabilityInTree(Be,me,mt){if(null==me)return null;const Rt=Be.getTestability(me);return null!=Rt?Rt:mt?(0,a.q)().isShadowRoot(me)?this.findTestabilityInTree(Be,me.host,!0):this.findTestabilityInTree(Be,me.parentElement,!0):null}},deps:[]},{provide:J.lri,useClass:J.dDg,deps:[J.R0b,J.eoX,J.rWj]},{provide:J.dDg,useClass:J.dDg,deps:[J.R0b,J.eoX,J.rWj]}],Wt=[{provide:J.zSh,useValue:"root"},{provide:J.qLn,useFactory:function Zt(){return new J.qLn},deps:[]},{provide:Fe,useClass:$e,multi:!0,deps:[a.K0,J.R0b,J.Lbi]},{provide:Fe,useClass:At,multi:!0,deps:[a.K0]},{provide:rt,useClass:rt,deps:[it,ye,J.AFp,Q]},{provide:J.FYo,useExisting:rt},{provide:Te,useExisting:ye},{provide:ye,useClass:ye,deps:[a.K0]},{provide:it,useClass:it,deps:[Fe,J.R0b]},{provide:a.JF,useClass:Ce,deps:[]},[]];let Jr=(()=>{class Le{constructor(me){}static withServerTransition(me){return{ngModule:Le,providers:[{provide:J.AFp,useValue:me.appId},{provide:Ve,useExisting:J.AFp},ce]}}}return Le.\u0275fac=function(me){return new(me||Le)(J.LFG(hn,12))},Le.\u0275mod=J.oAB({type:Le}),Le.\u0275inj=J.cJS({providers:[...Wt,..._r],imports:[a.ez,J.hGG]}),Le})(),Dn=(()=>{class Le{constructor(me){this._doc=me}getTitle(){return this._doc.title}setTitle(me){this._doc.title=me||""}}return Le.\u0275fac=function(me){return new(me||Le)(J.LFG(a.K0))},Le.\u0275prov=J.Yz7({token:Le,factory:function(me){let mt=null;return mt=me?new me:function Sr(){return new Dn((0,J.LFG)(a.K0))}(),mt},providedIn:"root"}),Le})();typeof window<"u"&&window},2435:(sn,ht,B)=>{"use strict";B.d(ht,{gz:()=>Es,y6:()=>hs,OD:()=>Ft,eC:()=>Zt,wm:()=>ga,wN:()=>Ao,F0:()=>ms,rH:()=>Cs,Bz:()=>fo,Hx:()=>Tn});var a=B(4650),J=B(8996),G=B(9646),De=B(1135),Me=B(6805),Ae=B(9751),he=B(4742),xe=B(4671),Ve=B(3268),ge=B(7669),ce=B(1810),de=B(5403),Ce=B(9672);function Fe(...S){const x=(0,ge.yG)(S),w=(0,ge.jO)(S),{args:R,keys:V}=(0,he.D)(S);if(0===R.length)return(0,J.D)([],x);const X=new Ae.y(function it(S,x,w=xe.y){return R=>{Ct(x,()=>{const{length:V}=S,X=new Array(V);let ne=V,Qe=V;for(let Tt=0;Tt<V;Tt++)Ct(x,()=>{const on=(0,J.D)(S[Tt],x);let Cn=!1;on.subscribe((0,de.x)(R,_n=>{X[Tt]=_n,Cn||(Cn=!0,Qe--),Qe||R.next(w(X.slice()))},()=>{--ne||R.complete()}))},R)},R)}}(R,x,V?ne=>(0,ce.n)(V,ne):xe.y));return w?X.pipe((0,Ve.Z)(w)):X}function Ct(S,x,w){S?(0,Ce.f)(w,S,x):x()}var Te=B(7272),ye=B(8421);function le(S){return new Ae.y(x=>{(0,ye.Xf)(S()).subscribe(x)})}var at=B(9635),st=B(576);function Xe(S,x){const w=(0,st.m)(S)?S:()=>S,R=V=>V.error(w());return new Ae.y(x?V=>x.schedule(R,0,V):R)}var Ze=B(515),Pe=B(727),Oe=B(4482);function Q(){return(0,Oe.e)((S,x)=>{let w=null;S._refCount++;const R=(0,de.x)(x,void 0,void 0,void 0,()=>{if(!S||S._refCount<=0||0<--S._refCount)return void(w=null);const V=S._connection,X=w;w=null,V&&(!X||V===X)&&V.unsubscribe(),x.unsubscribe()});S.subscribe(R),R.closed||(w=S.connect())})}class et extends Ae.y{constructor(x,w){super(),this.source=x,this.subjectFactory=w,this._subject=null,this._refCount=0,this._connection=null,(0,Oe.A)(x)&&(this.lift=x.lift)}_subscribe(x){return this.getSubject().subscribe(x)}getSubject(){const x=this._subject;return(!x||x.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:x}=this;this._subject=this._connection=null,null==x||x.unsubscribe()}connect(){let x=this._connection;if(!x){x=this._connection=new Pe.w0;const w=this.getSubject();x.add(this.source.subscribe((0,de.x)(w,void 0,()=>{this._teardown(),w.complete()},R=>{this._teardown(),w.error(R)},()=>this._teardown()))),x.closed&&(this._connection=null,x=Pe.w0.EMPTY)}return x}refCount(){return Q()(this)}}var ke=B(7579),He=B(6895),Ge=B(4004),rt=B(3900),z=B(5698),ft=B(8675),nt=B(9300),Ie=B(5577),Ee=B(590);function be(S,x){return(0,st.m)(x)?(0,Ie.z)(S,x,1):(0,Ie.z)(S,1)}var tt=B(8505);function $e(S){return(0,Oe.e)((x,w)=>{let X,R=null,V=!1;R=x.subscribe((0,de.x)(w,void 0,void 0,ne=>{X=(0,ye.Xf)(S(ne,$e(S)(x))),R?(R.unsubscribe(),R=null,X.subscribe(w)):V=!0})),V&&(R.unsubscribe(),R=null,X.subscribe(w))})}var Je=B(5026);function Ke(S){return S<=0?()=>Ze.E:(0,Oe.e)((x,w)=>{let R=[];x.subscribe((0,de.x)(w,V=>{R.push(V),S<R.length&&R.shift()},()=>{for(const V of R)w.next(V);w.complete()},void 0,()=>{R=null}))})}var Pt=B(8068),At=B(6590);function Nt(S,x){const w=arguments.length>=2;return R=>R.pipe(S?(0,nt.h)((V,X)=>S(V,X,R)):xe.y,Ke(1),w?(0,At.d)(x):(0,Pt.T)(()=>new Me.K))}function En(S){return(0,Oe.e)((x,w)=>{try{x.subscribe(w)}finally{w.add(S)}})}var Fn=B(8189),$n=B(1481);const Zt="primary",Qn=Symbol("RouteTitle");class vr{constructor(x){this.params=x||{}}has(x){return Object.prototype.hasOwnProperty.call(this.params,x)}get(x){if(this.has(x)){const w=this.params[x];return Array.isArray(w)?w[0]:w}return null}getAll(x){if(this.has(x)){const w=this.params[x];return Array.isArray(w)?w:[w]}return[]}get keys(){return Object.keys(this.params)}}function lr(S){return new vr(S)}function hn(S,x,w){const R=w.path.split("/");if(R.length>S.length||"full"===w.pathMatch&&(x.hasChildren()||R.length<S.length))return null;const V={};for(let X=0;X<R.length;X++){const ne=R[X],Qe=S[X];if(ne.startsWith(":"))V[ne.substring(1)]=Qe;else if(ne!==Qe.path)return null}return{consumed:S.slice(0,R.length),posParams:V}}function Wt(S,x){const w=S?Object.keys(S):void 0,R=x?Object.keys(x):void 0;if(!w||!R||w.length!=R.length)return!1;let V;for(let X=0;X<w.length;X++)if(V=w[X],!Jr(S[V],x[V]))return!1;return!0}function Jr(S,x){if(Array.isArray(S)&&Array.isArray(x)){if(S.length!==x.length)return!1;const w=[...S].sort(),R=[...x].sort();return w.every((V,X)=>R[X]===V)}return S===x}function Cr(S){return Array.prototype.concat.apply([],S)}function Er(S){return S.length>0?S[S.length-1]:null}function Sr(S,x){for(const w in S)S.hasOwnProperty(w)&&x(S[w],w)}function Dn(S){return(0,a.CqO)(S)?S:(0,a.QGY)(S)?(0,J.D)(Promise.resolve(S)):(0,G.of)(S)}const yn=!1,In={exact:function Ar(S,x,w){if(!$t(S.segments,x.segments)||!di(S.segments,x.segments,w)||S.numberOfChildren!==x.numberOfChildren)return!1;for(const R in x.children)if(!S.children[R]||!Ar(S.children[R],x.children[R],w))return!1;return!0},subset:Li},An={exact:function Kt(S,x){return Wt(S,x)},subset:function yi(S,x){return Object.keys(x).length<=Object.keys(S).length&&Object.keys(x).every(w=>Jr(S[w],x[w]))},ignored:()=>!0};function mr(S,x,w){return In[w.paths](S.root,x.root,w.matrixParams)&&An[w.queryParams](S.queryParams,x.queryParams)&&!("exact"===w.fragment&&S.fragment!==x.fragment)}function Li(S,x,w){return Dr(S,x,x.segments,w)}function Dr(S,x,w,R){if(S.segments.length>w.length){const V=S.segments.slice(0,w.length);return!(!$t(V,w)||x.hasChildren()||!di(V,w,R))}if(S.segments.length===w.length){if(!$t(S.segments,w)||!di(S.segments,w,R))return!1;for(const V in x.children)if(!S.children[V]||!Li(S.children[V],x.children[V],R))return!1;return!0}{const V=w.slice(0,S.segments.length),X=w.slice(S.segments.length);return!!($t(S.segments,V)&&di(S.segments,V,R)&&S.children[Zt])&&Dr(S.children[Zt],x,X,R)}}function di(S,x,w){return x.every((R,V)=>An[w](S[V].parameters,R.parameters))}class rr{constructor(x=new Nn([],{}),w={},R=null){this.root=x,this.queryParams=w,this.fragment=R}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lr(this.queryParams)),this._queryParamMap}toString(){return Vn.serialize(this)}}class Nn{constructor(x,w){this.segments=x,this.children=w,this.parent=null,Sr(w,(R,V)=>R.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xr(this)}}class hi{constructor(x,w){this.path=x,this.parameters=w}get parameterMap(){return this._parameterMap||(this._parameterMap=lr(this.parameters)),this._parameterMap}toString(){return Be(this)}}function $t(S,x){return S.length===x.length&&S.every((w,R)=>w.path===x[R].path)}let Tn=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=a.Yz7({token:S,factory:function(){return new On},providedIn:"root"}),S})();class On{parse(x){const w=new Bi(x);return new rr(w.parseRootSegment(),w.parseQueryParams(),w.parseFragment())}serialize(x){const w=`/${Re(x.root,!0)}`,R=function mt(S){const x=Object.keys(S).map(w=>{const R=S[w];return Array.isArray(R)?R.map(V=>`${ze(w)}=${ze(V)}`).join("&"):`${ze(w)}=${ze(R)}`}).filter(w=>!!w);return x.length?`?${x.join("&")}`:""}(x.queryParams);return`${w}${R}${"string"==typeof x.fragment?`#${function Mt(S){return encodeURI(S)}(x.fragment)}`:""}`}}const Vn=new On;function xr(S){return S.segments.map(x=>Be(x)).join("/")}function Re(S,x){if(!S.hasChildren())return xr(S);if(x){const w=S.children[Zt]?Re(S.children[Zt],!1):"",R=[];return Sr(S.children,(V,X)=>{X!==Zt&&R.push(`${X}:${Re(V,!1)}`)}),R.length>0?`${w}(${R.join("//")})`:w}{const w=function gn(S,x){let w=[];return Sr(S.children,(R,V)=>{V===Zt&&(w=w.concat(x(R,V)))}),Sr(S.children,(R,V)=>{V!==Zt&&(w=w.concat(x(R,V)))}),w}(S,(R,V)=>V===Zt?[Re(S.children[Zt],!1)]:[`${V}:${Re(R,!1)}`]);return 1===Object.keys(S.children).length&&null!=S.children[Zt]?`${xr(S)}/${w[0]}`:`${xr(S)}/(${w.join("//")})`}}function _e(S){return encodeURIComponent(S).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ze(S){return _e(S).replace(/%3B/gi,";")}function gt(S){return _e(S).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dn(S){return decodeURIComponent(S)}function Le(S){return dn(S.replace(/\+/g,"%20"))}function Be(S){return`${gt(S.path)}${function me(S){return Object.keys(S).map(x=>`;${gt(x)}=${gt(S[x])}`).join("")}(S.parameters)}`}const Rt=/^[^\/()?;=#]+/;function jt(S){const x=S.match(Rt);return x?x[0]:""}const xn=/^[^=?&#]+/,fr=/^[^&#]+/;class Bi{constructor(x){this.url=x,this.remaining=x}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Nn([],{}):new Nn([],this.parseChildren())}parseQueryParams(){const x={};if(this.consumeOptional("?"))do{this.parseQueryParam(x)}while(this.consumeOptional("&"));return x}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const x=[];for(this.peekStartsWith("(")||x.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),x.push(this.parseSegment());let w={};this.peekStartsWith("/(")&&(this.capture("/"),w=this.parseParens(!0));let R={};return this.peekStartsWith("(")&&(R=this.parseParens(!1)),(x.length>0||Object.keys(w).length>0)&&(R[Zt]=new Nn(x,w)),R}parseSegment(){const x=jt(this.remaining);if(""===x&&this.peekStartsWith(";"))throw new a.vHH(4009,yn);return this.capture(x),new hi(dn(x),this.parseMatrixParams())}parseMatrixParams(){const x={};for(;this.consumeOptional(";");)this.parseParam(x);return x}parseParam(x){const w=jt(this.remaining);if(!w)return;this.capture(w);let R="";if(this.consumeOptional("=")){const V=jt(this.remaining);V&&(R=V,this.capture(R))}x[dn(w)]=dn(R)}parseQueryParam(x){const w=function Hn(S){const x=S.match(xn);return x?x[0]:""}(this.remaining);if(!w)return;this.capture(w);let R="";if(this.consumeOptional("=")){const ne=function $i(S){const x=S.match(fr);return x?x[0]:""}(this.remaining);ne&&(R=ne,this.capture(R))}const V=Le(w),X=Le(R);if(x.hasOwnProperty(V)){let ne=x[V];Array.isArray(ne)||(ne=[ne],x[V]=ne),ne.push(X)}else x[V]=X}parseParens(x){const w={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const R=jt(this.remaining),V=this.remaining[R.length];if("/"!==V&&")"!==V&&";"!==V)throw new a.vHH(4010,yn);let X;R.indexOf(":")>-1?(X=R.slice(0,R.indexOf(":")),this.capture(X),this.capture(":")):x&&(X=Zt);const ne=this.parseChildren();w[X]=1===Object.keys(ne).length?ne[Zt]:new Nn([],ne),this.consumeOptional("//")}return w}peekStartsWith(x){return this.remaining.startsWith(x)}consumeOptional(x){return!!this.peekStartsWith(x)&&(this.remaining=this.remaining.substring(x.length),!0)}capture(x){if(!this.consumeOptional(x))throw new a.vHH(4011,yn)}}function Yi(S){return S.segments.length>0?new Nn([],{[Zt]:S}):S}function fi(S){const x={};for(const R of Object.keys(S.children)){const X=fi(S.children[R]);(X.segments.length>0||X.hasChildren())&&(x[R]=X)}return function Oi(S){if(1===S.numberOfChildren&&S.children[Zt]){const x=S.children[Zt];return new Nn(S.segments.concat(x.segments),x.children)}return S}(new Nn(S.segments,x))}function Rr(S){return S instanceof rr}const is=!1;function kr(S,x,w,R,V){var X;if(0===w.length)return jr(x.root,x.root,x.root,R,V);const ne=function Si(S){if("string"==typeof S[0]&&1===S.length&&"/"===S[0])return new Ji(!0,0,S);let x=0,w=!1;const R=S.reduce((V,X,ne)=>{if("object"==typeof X&&null!=X){if(X.outlets){const Qe={};return Sr(X.outlets,(Tt,on)=>{Qe[on]="string"==typeof Tt?Tt.split("/"):Tt}),[...V,{outlets:Qe}]}if(X.segmentPath)return[...V,X.segmentPath]}return"string"!=typeof X?[...V,X]:0===ne?(X.split("/").forEach((Qe,Tt)=>{0==Tt&&"."===Qe||(0==Tt&&""===Qe?w=!0:".."===Qe?x++:""!=Qe&&V.push(Qe))}),V):[...V,X]},[]);return new Ji(w,x,R)}(w);return ne.toRoot()?jr(x.root,x.root,new Nn([],{}),R,V):function Qe(on){var Cn;const _n=function Tr(S,x,w,R){if(S.isAbsolute)return new ln(x.root,!0,0);if(-1===R)return new ln(w,w===x.root,0);return function ti(S,x,w){let R=S,V=x,X=w;for(;X>V;){if(X-=V,R=R.parent,!R)throw new a.vHH(4005,is&&"Invalid number of '../'");V=R.segments.length}return new ln(R,!1,V-X)}(w,R+(Ei(S.commands[0])?0:1),S.numberOfDoubleDots)}(ne,x,null===(Cn=S.snapshot)||void 0===Cn?void 0:Cn._urlSegment,on),Hr=_n.processChildren?fe(_n.segmentGroup,_n.index,ne.commands):ee(_n.segmentGroup,_n.index,ne.commands);return jr(x.root,_n.segmentGroup,Hr,R,V)}(null===(X=S.snapshot)||void 0===X?void 0:X._lastPathIndex)}function Ei(S){return"object"==typeof S&&null!=S&&!S.outlets&&!S.segmentPath}function ei(S){return"object"==typeof S&&null!=S&&S.outlets}function jr(S,x,w,R,V){let ne,X={};R&&Sr(R,(Tt,on)=>{X[on]=Array.isArray(Tt)?Tt.map(Cn=>`${Cn}`):`${Tt}`}),ne=S===x?w:ji(S,x,w);const Qe=Yi(fi(ne));return new rr(Qe,X,V)}function ji(S,x,w){const R={};return Sr(S.children,(V,X)=>{R[X]=V===x?w:ji(V,x,w)}),new Nn(S.segments,R)}class Ji{constructor(x,w,R){if(this.isAbsolute=x,this.numberOfDoubleDots=w,this.commands=R,x&&R.length>0&&Ei(R[0]))throw new a.vHH(4003,is&&"Root segment cannot have matrix parameters");const V=R.find(ei);if(V&&V!==Er(R))throw new a.vHH(4004,is&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ln{constructor(x,w,R){this.segmentGroup=x,this.processChildren=w,this.index=R}}function ee(S,x,w){if(S||(S=new Nn([],{})),0===S.segments.length&&S.hasChildren())return fe(S,x,w);const R=function We(S,x,w){let R=0,V=x;const X={match:!1,pathIndex:0,commandIndex:0};for(;V<S.segments.length;){if(R>=w.length)return X;const ne=S.segments[V],Qe=w[R];if(ei(Qe))break;const Tt=`${Qe}`,on=R<w.length-1?w[R+1]:null;if(V>0&&void 0===Tt)break;if(Tt&&on&&"object"==typeof on&&void 0===on.outlets){if(!qe(Tt,on,ne))return X;R+=2}else{if(!qe(Tt,{},ne))return X;R++}V++}return{match:!0,pathIndex:V,commandIndex:R}}(S,x,w),V=w.slice(R.commandIndex);if(R.match&&R.pathIndex<S.segments.length){const X=new Nn(S.segments.slice(0,R.pathIndex),{});return X.children[Zt]=new Nn(S.segments.slice(R.pathIndex),S.children),fe(X,0,V)}return R.match&&0===V.length?new Nn(S.segments,{}):R.match&&!S.hasChildren()?lt(S,x,w):R.match?fe(S,0,V):lt(S,x,w)}function fe(S,x,w){if(0===w.length)return new Nn(S.segments,{});{const R=function Hi(S){return ei(S[0])?S[0].outlets:{[Zt]:S}}(w),V={};return!R[Zt]&&S.children[Zt]&&1===S.numberOfChildren&&0===S.children[Zt].segments.length?fe(S.children[Zt],x,w):(Sr(R,(X,ne)=>{"string"==typeof X&&(X=[X]),null!==X&&(V[ne]=ee(S.children[ne],x,X))}),Sr(S.children,(X,ne)=>{void 0===R[ne]&&(V[ne]=X)}),new Nn(S.segments,V))}}function lt(S,x,w){const R=S.segments.slice(0,x);let V=0;for(;V<w.length;){const X=w[V];if(ei(X)){const Tt=xt(X.outlets);return new Nn(R,Tt)}if(0===V&&Ei(w[0])){R.push(new hi(S.segments[x].path,ae(w[0]))),V++;continue}const ne=ei(X)?X.outlets[Zt]:`${X}`,Qe=V<w.length-1?w[V+1]:null;ne&&Qe&&Ei(Qe)?(R.push(new hi(ne,ae(Qe))),V+=2):(R.push(new hi(ne,{})),V++)}return new Nn(R,{})}function xt(S){const x={};return Sr(S,(w,R)=>{"string"==typeof w&&(w=[w]),null!==w&&(x[R]=lt(new Nn([],{}),0,w))}),x}function ae(S){const x={};return Sr(S,(w,R)=>x[R]=`${w}`),x}function qe(S,x,w){return S==w.path&&Wt(x,w.parameters)}const pt="imperative";class Dt{constructor(x,w){this.id=x,this.url=w}}class Ft extends Dt{constructor(x,w,R="imperative",V=null){super(x,w),this.type=0,this.navigationTrigger=R,this.restoredState=V}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Xt extends Dt{constructor(x,w,R){super(x,w),this.urlAfterRedirects=R,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class wn extends Dt{constructor(x,w,R,V){super(x,w),this.reason=R,this.code=V,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Mn extends Dt{constructor(x,w,R,V){super(x,w),this.reason=R,this.code=V,this.type=16}}class Ir extends Dt{constructor(x,w,R,V){super(x,w),this.error=R,this.target=V,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Kr extends Dt{constructor(x,w,R,V){super(x,w),this.urlAfterRedirects=R,this.state=V,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ot extends Dt{constructor(x,w,R,V){super(x,w),this.urlAfterRedirects=R,this.state=V,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ne extends Dt{constructor(x,w,R,V,X){super(x,w),this.urlAfterRedirects=R,this.state=V,this.shouldActivate=X,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class yt extends Dt{constructor(x,w,R,V){super(x,w),this.urlAfterRedirects=R,this.state=V,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ut extends Dt{constructor(x,w,R,V){super(x,w),this.urlAfterRedirects=R,this.state=V,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tn{constructor(x){this.route=x,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kn{constructor(x){this.route=x,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class zn{constructor(x){this.snapshot=x,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qr{constructor(x){this.snapshot=x,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sr{constructor(x){this.snapshot=x,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class br{constructor(x){this.snapshot=x,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yn{constructor(x,w,R){this.routerEvent=x,this.position=w,this.anchor=R,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Br=(()=>{class S{createUrlTree(w,R,V,X,ne,Qe){return kr(w||R.root,V,X,ne,Qe)}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac}),S})(),Gi=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=a.Yz7({token:S,factory:function(x){return Br.\u0275fac(x)},providedIn:"root"}),S})();class Ys{constructor(x){this._root=x}get root(){return this._root.value}parent(x){const w=this.pathFromRoot(x);return w.length>1?w[w.length-2]:null}children(x){const w=Eo(x,this._root);return w?w.children.map(R=>R.value):[]}firstChild(x){const w=Eo(x,this._root);return w&&w.children.length>0?w.children[0].value:null}siblings(x){const w=Fr(x,this._root);return w.length<2?[]:w[w.length-2].children.map(V=>V.value).filter(V=>V!==x)}pathFromRoot(x){return Fr(x,this._root).map(w=>w.value)}}function Eo(S,x){if(S===x.value)return x;for(const w of x.children){const R=Eo(S,w);if(R)return R}return null}function Fr(S,x){if(S===x.value)return[x];for(const w of x.children){const R=Fr(S,w);if(R.length)return R.unshift(x),R}return[]}class qn{constructor(x,w){this.value=x,this.children=w}toString(){return`TreeNode(${this.value})`}}function ni(S){const x={};return S&&S.children.forEach(w=>x[w.value.outlet]=w),x}class Io extends Ys{constructor(x,w){super(x),this.snapshot=w,Xs(this,x)}toString(){return this.snapshot.toString()}}function qs(S,x){const w=function zi(S,x){const ne=new ss([],{},{},"",{},Zt,x,null,S.root,-1,{});return new Qs("",new qn(ne,[]))}(S,x),R=new De.X([new hi("",{})]),V=new De.X({}),X=new De.X({}),ne=new De.X({}),Qe=new De.X(""),Tt=new Es(R,V,ne,Qe,X,Zt,x,w.root);return Tt.snapshot=w.root,new Io(new qn(Tt,[]),w)}class Es{constructor(x,w,R,V,X,ne,Qe,Tt){var on,Cn;this.url=x,this.params=w,this.queryParams=R,this.fragment=V,this.data=X,this.outlet=ne,this.component=Qe,this.title=null!==(on=null===(Cn=this.data)||void 0===Cn?void 0:Cn.pipe((0,Ge.U)(_n=>_n[Qn])))&&void 0!==on?on:(0,G.of)(void 0),this._futureSnapshot=Tt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ge.U)(x=>lr(x)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ge.U)(x=>lr(x)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Is(S,x="emptyOnly"){const w=S.pathFromRoot;let R=0;if("always"!==x)for(R=w.length-1;R>=1;){const V=w[R],X=w[R-1];if(V.routeConfig&&""===V.routeConfig.path)R--;else{if(X.component)break;R--}}return function Zs(S){return S.reduce((x,w)=>{var R;return{params:{...x.params,...w.params},data:{...x.data,...w.data},resolve:{...w.data,...x.resolve,...null===(R=w.routeConfig)||void 0===R?void 0:R.data,...w._resolvedData}}},{params:{},data:{},resolve:{}})}(w.slice(R))}class ss{get title(){var x;return null===(x=this.data)||void 0===x?void 0:x[Qn]}constructor(x,w,R,V,X,ne,Qe,Tt,on,Cn,_n){this.url=x,this.params=w,this.queryParams=R,this.fragment=V,this.data=X,this.outlet=ne,this.component=Qe,this.routeConfig=Tt,this._urlSegment=on,this._lastPathIndex=Cn,this._resolve=_n}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=lr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(R=>R.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Qs extends Ys{constructor(x,w){super(w),this.url=x,Xs(this,w)}toString(){return $s(this._root)}}function Xs(S,x){x.value._routerState=S,x.children.forEach(w=>Xs(S,w))}function $s(S){const x=S.children.length>0?` { ${S.children.map($s).join(", ")} } `:"";return`${S.value}${x}`}function Ai(S){if(S.snapshot){const x=S.snapshot,w=S._futureSnapshot;S.snapshot=w,Wt(x.queryParams,w.queryParams)||S.queryParams.next(w.queryParams),x.fragment!==w.fragment&&S.fragment.next(w.fragment),Wt(x.params,w.params)||S.params.next(w.params),function _r(S,x){if(S.length!==x.length)return!1;for(let w=0;w<S.length;++w)if(!Wt(S[w],x[w]))return!1;return!0}(x.url,w.url)||S.url.next(w.url),Wt(x.data,w.data)||S.data.next(w.data)}else S.snapshot=S._futureSnapshot,S.data.next(S._futureSnapshot.data)}function Wi(S,x){const w=Wt(S.params,x.params)&&function en(S,x){return $t(S,x)&&S.every((w,R)=>Wt(w.parameters,x[R].parameters))}(S.url,x.url);return w&&!(!S.parent!=!x.parent)&&(!S.parent||Wi(S.parent,x.parent))}function oo(S,x,w){if(w&&S.shouldReuseRoute(x.value,w.value.snapshot)){const R=w.value;R._futureSnapshot=x.value;const V=function Bs(S,x,w){return x.children.map(R=>{for(const V of w.children)if(S.shouldReuseRoute(R.value,V.value.snapshot))return oo(S,R,V);return oo(S,R)})}(S,x,w);return new qn(R,V)}{if(S.shouldAttach(x.value)){const X=S.retrieve(x.value);if(null!==X){const ne=X.route;return ne.value._futureSnapshot=x.value,ne.children=x.children.map(Qe=>oo(S,Qe)),ne}}const R=function ri(S){return new Es(new De.X(S.url),new De.X(S.params),new De.X(S.queryParams),new De.X(S.fragment),new De.X(S.data),S.outlet,S.component,S)}(x.value),V=x.children.map(X=>oo(S,X));return new qn(R,V)}}const Ii="ngNavigationCancelingError";function ur(S,x){const{redirectTo:w,navigationBehaviorOptions:R}=Rr(x)?{redirectTo:x,navigationBehaviorOptions:void 0}:x,V=es(!1,0,x);return V.url=w,V.navigationBehaviorOptions=R,V}function es(S,x,w){const R=new Error("NavigationCancelingError: "+(S||""));return R[Ii]=!0,R.cancellationCode=x,w&&(R.url=w),R}function os(S){return Vs(S)&&Rr(S.url)}function Vs(S){return S&&S[Ii]}class xi{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new hs,this.attachRef=null}}let hs=(()=>{class S{constructor(){this.contexts=new Map}onChildOutletCreated(w,R){const V=this.getOrCreateContext(w);V.outlet=R,this.contexts.set(w,V)}onChildOutletDestroyed(w){const R=this.getContext(w);R&&(R.outlet=null,R.attachRef=null)}onOutletDeactivated(){const w=this.contexts;return this.contexts=new Map,w}onOutletReAttached(w){this.contexts=w}getOrCreateContext(w){let R=this.getContext(w);return R||(R=new xi,this.contexts.set(w,R)),R}getContext(w){return this.contexts.get(w)||null}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const Zi=!1;let Yo=(()=>{class S{constructor(){this.activated=null,this._activatedRoute=null,this.name=Zt,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.attachEvents=new a.vpe,this.detachEvents=new a.vpe,this.parentContexts=(0,a.f3M)(hs),this.location=(0,a.f3M)(a.s_b),this.changeDetector=(0,a.f3M)(a.sBO),this.environmentInjector=(0,a.f3M)(a.lqb)}ngOnChanges(w){if(w.name){const{firstChange:R,previousValue:V}=w.name;if(R)return;this.isTrackedInParentContexts(V)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(V)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(w){var R;return(null===(R=this.parentContexts.getContext(w))||void 0===R?void 0:R.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const w=this.parentContexts.getContext(this.name);null!=w&&w.route&&(w.attachRef?this.attach(w.attachRef,w.route):this.activateWith(w.route,w.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new a.vHH(4012,Zi);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new a.vHH(4012,Zi);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new a.vHH(4012,Zi);this.location.detach();const w=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(w.instance),w}attach(w,R){this.activated=w,this._activatedRoute=R,this.location.insert(w.hostView),this.attachEvents.emit(w.instance)}deactivate(){if(this.activated){const w=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(w)}}activateWith(w,R){if(this.isActivated)throw new a.vHH(4013,Zi);this._activatedRoute=w;const V=this.location,ne=w.snapshot.component,Qe=this.parentContexts.getOrCreateContext(this.name).children,Tt=new li(w,Qe,V.injector);if(R&&function Us(S){return!!S.resolveComponentFactory}(R)){const on=R.resolveComponentFactory(ne);this.activated=V.createComponent(on,V.length,Tt)}else this.activated=V.createComponent(ne,{index:V.length,injector:Tt,environmentInjector:null!=R?R:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275dir=a.lG2({type:S,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[a.TTD]}),S})();class li{constructor(x,w,R){this.route=x,this.childContexts=w,this.parent=R}get(x,w){return x===Es?this.route:x===hs?this.childContexts:this.parent.get(x,w)}}let Or=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275cmp=a.Xpm({type:S,selectors:[["ng-component"]],standalone:!0,features:[a.jDz],decls:1,vars:0,template:function(w,R){1&w&&a._UZ(0,"router-outlet")},dependencies:[Yo],encapsulation:2}),S})();function Rs(S,x){var w;return S.providers&&!S._injector&&(S._injector=(0,a.MMx)(S.providers,x,`Route: ${S.path}`)),null!==(w=S._injector)&&void 0!==w?w:x}function Mi(S){const x=S.children&&S.children.map(Mi),w=x?{...S,children:x}:{...S};return!w.component&&!w.loadComponent&&(x||w.loadChildren)&&w.outlet&&w.outlet!==Zt&&(w.component=Or),w}function as(S){return S.outlet||Zt}function Lr(S,x){const w=S.filter(R=>as(R)===x);return w.push(...S.filter(R=>as(R)!==x)),w}function Co(S){var x;if(!S)return null;if(null!==(x=S.routeConfig)&&void 0!==x&&x._injector)return S.routeConfig._injector;for(let w=S.parent;w;w=w.parent){const R=w.routeConfig;if(null!=R&&R._loadedInjector)return R._loadedInjector;if(null!=R&&R._injector)return R._injector}return null}class Bo{constructor(x,w,R,V){this.routeReuseStrategy=x,this.futureState=w,this.currState=R,this.forwardEvent=V}activate(x){const w=this.futureState._root,R=this.currState?this.currState._root:null;this.deactivateChildRoutes(w,R,x),Ai(this.futureState.root),this.activateChildRoutes(w,R,x)}deactivateChildRoutes(x,w,R){const V=ni(w);x.children.forEach(X=>{const ne=X.value.outlet;this.deactivateRoutes(X,V[ne],R),delete V[ne]}),Sr(V,(X,ne)=>{this.deactivateRouteAndItsChildren(X,R)})}deactivateRoutes(x,w,R){const V=x.value,X=w?w.value:null;if(V===X)if(V.component){const ne=R.getContext(V.outlet);ne&&this.deactivateChildRoutes(x,w,ne.children)}else this.deactivateChildRoutes(x,w,R);else X&&this.deactivateRouteAndItsChildren(w,R)}deactivateRouteAndItsChildren(x,w){x.value.component&&this.routeReuseStrategy.shouldDetach(x.value.snapshot)?this.detachAndStoreRouteSubtree(x,w):this.deactivateRouteAndOutlet(x,w)}detachAndStoreRouteSubtree(x,w){const R=w.getContext(x.value.outlet),V=R&&x.value.component?R.children:w,X=ni(x);for(const ne of Object.keys(X))this.deactivateRouteAndItsChildren(X[ne],V);if(R&&R.outlet){const ne=R.outlet.detach(),Qe=R.children.onOutletDeactivated();this.routeReuseStrategy.store(x.value.snapshot,{componentRef:ne,route:x,contexts:Qe})}}deactivateRouteAndOutlet(x,w){const R=w.getContext(x.value.outlet),V=R&&x.value.component?R.children:w,X=ni(x);for(const ne of Object.keys(X))this.deactivateRouteAndItsChildren(X[ne],V);R&&R.outlet&&(R.outlet.deactivate(),R.children.onOutletDeactivated(),R.attachRef=null,R.resolver=null,R.route=null)}activateChildRoutes(x,w,R){const V=ni(w);x.children.forEach(X=>{this.activateRoutes(X,V[X.value.outlet],R),this.forwardEvent(new br(X.value.snapshot))}),x.children.length&&this.forwardEvent(new Qr(x.value.snapshot))}activateRoutes(x,w,R){const V=x.value,X=w?w.value:null;if(Ai(V),V===X)if(V.component){const Qe=R.getOrCreateContext(V.outlet);this.activateChildRoutes(x,w,Qe.children)}else this.activateChildRoutes(x,w,R);else if(V.component){const Qe=R.getOrCreateContext(V.outlet);if(this.routeReuseStrategy.shouldAttach(V.snapshot)){const Tt=this.routeReuseStrategy.retrieve(V.snapshot);this.routeReuseStrategy.store(V.snapshot,null),Qe.children.onOutletReAttached(Tt.contexts),Qe.attachRef=Tt.componentRef,Qe.route=Tt.route.value,Qe.outlet&&Qe.outlet.attach(Tt.componentRef,Tt.route.value),Ai(Tt.route.value),this.activateChildRoutes(x,null,Qe.children)}else{var ne;const Tt=Co(V.snapshot),on=null!==(ne=null==Tt?void 0:Tt.get(a._Vd))&&void 0!==ne?ne:null;Qe.attachRef=null,Qe.route=V,Qe.resolver=on,Qe.injector=Tt,Qe.outlet&&Qe.outlet.activateWith(V,Qe.injector),this.activateChildRoutes(x,null,Qe.children)}}else this.activateChildRoutes(x,null,R)}}class Vo{constructor(x){this.path=x,this.route=this.path[this.path.length-1]}}class Xn{constructor(x,w){this.component=x,this.route=w}}function ps(S,x,w){const R=S._root;return ao(R,x?x._root:null,w,[R.value])}function Jn(S,x){const w=Symbol(),R=x.get(S,w);return R===w?"function"!=typeof S||(0,a.Z0I)(S)?x.get(S):S:R}function ao(S,x,w,R,V={canDeactivateChecks:[],canActivateChecks:[]}){const X=ni(x);return S.children.forEach(ne=>{(function Uo(S,x,w,R,V={canDeactivateChecks:[],canActivateChecks:[]}){const X=S.value,ne=x?x.value:null,Qe=w?w.getContext(S.value.outlet):null;if(ne&&X.routeConfig===ne.routeConfig){const Tt=function Qo(S,x,w){if("function"==typeof w)return w(S,x);switch(w){case"pathParamsChange":return!$t(S.url,x.url);case"pathParamsOrQueryParamsChange":return!$t(S.url,x.url)||!Wt(S.queryParams,x.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Wi(S,x)||!Wt(S.queryParams,x.queryParams);default:return!Wi(S,x)}}(ne,X,X.routeConfig.runGuardsAndResolvers);Tt?V.canActivateChecks.push(new Vo(R)):(X.data=ne.data,X._resolvedData=ne._resolvedData),ao(S,x,X.component?Qe?Qe.children:null:w,R,V),Tt&&Qe&&Qe.outlet&&Qe.outlet.isActivated&&V.canDeactivateChecks.push(new Xn(Qe.outlet.component,ne))}else ne&&Vr(x,Qe,V),V.canActivateChecks.push(new Vo(R)),ao(S,null,X.component?Qe?Qe.children:null:w,R,V)})(ne,X[ne.value.outlet],w,R.concat([ne.value]),V),delete X[ne.value.outlet]}),Sr(X,(ne,Qe)=>Vr(ne,w.getContext(Qe),V)),V}function Vr(S,x,w){const R=ni(S),V=S.value;Sr(R,(X,ne)=>{Vr(X,V.component?x?x.children.getContext(ne):null:x,w)}),w.canDeactivateChecks.push(new Xn(V.component&&x&&x.outlet&&x.outlet.isActivated?x.outlet.component:null,V))}function g(S){return"function"==typeof S}function cr(S){return S instanceof Me.K||"EmptyError"===(null==S?void 0:S.name)}const Yr=Symbol("INITIAL_VALUE");function pr(){return(0,rt.w)(S=>Fe(S.map(x=>x.pipe((0,z.q)(1),(0,ft.O)(Yr)))).pipe((0,Ge.U)(x=>{for(const w of x)if(!0!==w){if(w===Yr)return Yr;if(!1===w||w instanceof rr)return w}return!0}),(0,nt.h)(x=>x!==Yr),(0,z.q)(1)))}function Fa(S){return(0,at.z)((0,tt.b)(x=>{if(Rr(x))throw ur(0,x)}),(0,Ge.U)(x=>!0===x))}const Os={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function sa(S,x,w,R,V){const X=jo(S,x,w);return X.matched?function La(S,x,w,R){const V=x.canMatch;if(!V||0===V.length)return(0,G.of)(!0);const X=V.map(ne=>{const Qe=Jn(ne,S);return Dn(function Gt(S){return S&&g(S.canMatch)}(Qe)?Qe.canMatch(x,w):S.runInContext(()=>Qe(x,w)))});return(0,G.of)(X).pipe(pr(),Fa())}(R=Rs(x,R),x,w).pipe((0,Ge.U)(ne=>!0===ne?X:{...Os})):(0,G.of)(X)}function jo(S,x,w){var R;if(""===x.path)return"full"===x.pathMatch&&(S.hasChildren()||w.length>0)?{...Os}:{matched:!0,consumedSegments:[],remainingSegments:w,parameters:{},positionalParamSegments:{}};const X=(x.matcher||hn)(w,S,x);if(!X)return{...Os};const ne={};Sr(X.posParams,(Tt,on)=>{ne[on]=Tt.path});const Qe=X.consumed.length>0?{...ne,...X.consumed[X.consumed.length-1].parameters}:ne;return{matched:!0,consumedSegments:X.consumed,remainingSegments:w.slice(X.consumed.length),parameters:Qe,positionalParamSegments:null!==(R=X.posParams)&&void 0!==R?R:{}}}function To(S,x,w,R){if(w.length>0&&function $a(S,x,w){return w.some(R=>Xa(S,x,R)&&as(R)!==Zt)}(S,w,R)){const X=new Nn(x,function Qa(S,x,w,R){const V={};V[Zt]=R,R._sourceSegment=S,R._segmentIndexShift=x.length;for(const X of w)if(""===X.path&&as(X)!==Zt){const ne=new Nn([],{});ne._sourceSegment=S,ne._segmentIndexShift=x.length,V[as(X)]=ne}return V}(S,x,R,new Nn(w,S.children)));return X._sourceSegment=S,X._segmentIndexShift=x.length,{segmentGroup:X,slicedSegments:[]}}if(0===w.length&&function tu(S,x,w){return w.some(R=>Xa(S,x,R))}(S,w,R)){const X=new Nn(S.segments,function Za(S,x,w,R,V){const X={};for(const ne of R)if(Xa(S,w,ne)&&!V[as(ne)]){const Qe=new Nn([],{});Qe._sourceSegment=S,Qe._segmentIndexShift=x.length,X[as(ne)]=Qe}return{...V,...X}}(S,x,w,R,S.children));return X._sourceSegment=S,X._segmentIndexShift=x.length,{segmentGroup:X,slicedSegments:w}}const V=new Nn(S.segments,S.children);return V._sourceSegment=S,V._segmentIndexShift=x.length,{segmentGroup:V,slicedSegments:w}}function Xa(S,x,w){return(!(S.hasChildren()||x.length>0)||"full"!==w.pathMatch)&&""===w.path}function Ho(S,x,w,R){return!!(as(S)===R||R!==Zt&&Xa(x,w,S))&&("**"===S.path||jo(x,S,w).matched)}function nu(S,x,w){return 0===x.length&&!S.children[w]}const ws=!1;class oa{constructor(x){this.segmentGroup=x||null}}class Ja{constructor(x){this.urlTree=x}}function Vi(S){return Xe(new oa(S))}function Pi(S){return Xe(new Ja(S))}class aa{constructor(x,w,R,V,X){this.injector=x,this.configLoader=w,this.urlSerializer=R,this.urlTree=V,this.config=X,this.allowRedirects=!0}apply(){const x=To(this.urlTree.root,[],[],this.config).segmentGroup,w=new Nn(x.segments,x.children);return this.expandSegmentGroup(this.injector,this.config,w,Zt).pipe((0,Ge.U)(X=>this.createUrlTree(fi(X),this.urlTree.queryParams,this.urlTree.fragment))).pipe($e(X=>{if(X instanceof Ja)return this.allowRedirects=!1,this.match(X.urlTree);throw X instanceof oa?this.noMatchError(X):X}))}match(x){return this.expandSegmentGroup(this.injector,this.config,x.root,Zt).pipe((0,Ge.U)(V=>this.createUrlTree(fi(V),x.queryParams,x.fragment))).pipe($e(V=>{throw V instanceof oa?this.noMatchError(V):V}))}noMatchError(x){return new a.vHH(4002,ws)}createUrlTree(x,w,R){const V=Yi(x);return new rr(V,w,R)}expandSegmentGroup(x,w,R,V){return 0===R.segments.length&&R.hasChildren()?this.expandChildren(x,w,R).pipe((0,Ge.U)(X=>new Nn([],X))):this.expandSegment(x,R,w,R.segments,V,!0)}expandChildren(x,w,R){const V=[];for(const X of Object.keys(R.children))"primary"===X?V.unshift(X):V.push(X);return(0,J.D)(V).pipe(be(X=>{const ne=R.children[X],Qe=Lr(w,X);return this.expandSegmentGroup(x,Qe,ne,X).pipe((0,Ge.U)(Tt=>({segment:Tt,outlet:X})))}),(0,Je.R)((X,ne)=>(X[ne.outlet]=ne.segment,X),{}),Nt())}expandSegment(x,w,R,V,X,ne){return(0,J.D)(R).pipe(be(Qe=>this.expandSegmentAgainstRoute(x,w,R,Qe,V,X,ne).pipe($e(on=>{if(on instanceof oa)return(0,G.of)(null);throw on}))),(0,Ee.P)(Qe=>!!Qe),$e((Qe,Tt)=>{if(cr(Qe))return nu(w,V,X)?(0,G.of)(new Nn([],{})):Vi(w);throw Qe}))}expandSegmentAgainstRoute(x,w,R,V,X,ne,Qe){return Ho(V,w,X,ne)?void 0===V.redirectTo?this.matchSegmentAgainstRoute(x,w,V,X,ne):Qe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(x,w,R,V,X,ne):Vi(w):Vi(w)}expandSegmentAgainstRouteUsingRedirect(x,w,R,V,X,ne){return"**"===V.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(x,R,V,ne):this.expandRegularSegmentAgainstRouteUsingRedirect(x,w,R,V,X,ne)}expandWildCardWithParamsAgainstRouteUsingRedirect(x,w,R,V){const X=this.applyRedirectCommands([],R.redirectTo,{});return R.redirectTo.startsWith("/")?Pi(X):this.lineralizeSegments(R,X).pipe((0,Ie.z)(ne=>{const Qe=new Nn(ne,{});return this.expandSegment(x,Qe,w,ne,V,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(x,w,R,V,X,ne){const{matched:Qe,consumedSegments:Tt,remainingSegments:on,positionalParamSegments:Cn}=jo(w,V,X);if(!Qe)return Vi(w);const _n=this.applyRedirectCommands(Tt,V.redirectTo,Cn);return V.redirectTo.startsWith("/")?Pi(_n):this.lineralizeSegments(V,_n).pipe((0,Ie.z)(Hr=>this.expandSegment(x,w,R,Hr.concat(on),ne,!1)))}matchSegmentAgainstRoute(x,w,R,V,X){return"**"===R.path?(x=Rs(R,x),R.loadChildren?(R._loadedRoutes?(0,G.of)({routes:R._loadedRoutes,injector:R._loadedInjector}):this.configLoader.loadChildren(x,R)).pipe((0,Ge.U)(Qe=>(R._loadedRoutes=Qe.routes,R._loadedInjector=Qe.injector,new Nn(V,{})))):(0,G.of)(new Nn(V,{}))):sa(w,R,V,x).pipe((0,rt.w)(({matched:ne,consumedSegments:Qe,remainingSegments:Tt})=>{var on;return ne?(x=null!==(on=R._injector)&&void 0!==on?on:x,this.getChildConfig(x,R,V).pipe((0,Ie.z)(_n=>{var Hr;const F=null!==(Hr=_n.injector)&&void 0!==Hr?Hr:x,U=_n.routes,{segmentGroup:te,slicedSegments:Se}=To(w,Qe,Tt,U),ut=new Nn(te.segments,te.children);if(0===Se.length&&ut.hasChildren())return this.expandChildren(F,U,ut).pipe((0,Ge.U)(Wn=>new Nn(Qe,Wn)));if(0===U.length&&0===Se.length)return(0,G.of)(new Nn(Qe,{}));const Et=as(R)===X;return this.expandSegment(F,ut,U,Se,Et?Zt:X,!0).pipe((0,Ge.U)(bn=>new Nn(Qe.concat(bn.segments),bn.children)))}))):Vi(w)}))}getChildConfig(x,w,R){return w.children?(0,G.of)({routes:w.children,injector:x}):w.loadChildren?void 0!==w._loadedRoutes?(0,G.of)({routes:w._loadedRoutes,injector:w._loadedInjector}):function ha(S,x,w,R){const V=x.canLoad;if(void 0===V||0===V.length)return(0,G.of)(!0);const X=V.map(ne=>{const Qe=Jn(ne,S);return Dn(function h(S){return S&&g(S.canLoad)}(Qe)?Qe.canLoad(x,w):S.runInContext(()=>Qe(x,w)))});return(0,G.of)(X).pipe(pr(),Fa())}(x,w,R).pipe((0,Ie.z)(V=>V?this.configLoader.loadChildren(x,w).pipe((0,tt.b)(X=>{w._loadedRoutes=X.routes,w._loadedInjector=X.injector})):function Go(S){return Xe(es(ws,3))}())):(0,G.of)({routes:[],injector:x})}lineralizeSegments(x,w){let R=[],V=w.root;for(;;){if(R=R.concat(V.segments),0===V.numberOfChildren)return(0,G.of)(R);if(V.numberOfChildren>1||!V.children[Zt])return x.redirectTo,Xe(new a.vHH(4e3,ws));V=V.children[Zt]}}applyRedirectCommands(x,w,R){return this.applyRedirectCreateUrlTree(w,this.urlSerializer.parse(w),x,R)}applyRedirectCreateUrlTree(x,w,R,V){const X=this.createSegmentGroup(x,w.root,R,V);return new rr(X,this.createQueryParams(w.queryParams,this.urlTree.queryParams),w.fragment)}createQueryParams(x,w){const R={};return Sr(x,(V,X)=>{if("string"==typeof V&&V.startsWith(":")){const Qe=V.substring(1);R[X]=w[Qe]}else R[X]=V}),R}createSegmentGroup(x,w,R,V){const X=this.createSegments(x,w.segments,R,V);let ne={};return Sr(w.children,(Qe,Tt)=>{ne[Tt]=this.createSegmentGroup(x,Qe,R,V)}),new Nn(X,ne)}createSegments(x,w,R,V){return w.map(X=>X.path.startsWith(":")?this.findPosParam(x,X,V):this.findOrReturn(X,R))}findPosParam(x,w,R){const V=R[w.path.substring(1)];if(!V)throw new a.vHH(4001,ws);return V}findOrReturn(x,w){let R=0;for(const V of w){if(V.path===x.path)return w.splice(R),V;R++}return x}}class Ca{}class N{constructor(x,w,R,V,X,ne,Qe){this.injector=x,this.rootComponentType=w,this.config=R,this.urlTree=V,this.url=X,this.paramsInheritanceStrategy=ne,this.urlSerializer=Qe}recognize(){const x=To(this.urlTree.root,[],[],this.config.filter(w=>void 0===w.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,x,Zt).pipe((0,Ge.U)(w=>{if(null===w)return null;const R=new ss([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Zt,this.rootComponentType,null,this.urlTree.root,-1,{}),V=new qn(R,w),X=new Qs(this.url,V);return this.inheritParamsAndData(X._root),X}))}inheritParamsAndData(x){const w=x.value,R=Is(w,this.paramsInheritanceStrategy);w.params=Object.freeze(R.params),w.data=Object.freeze(R.data),x.children.forEach(V=>this.inheritParamsAndData(V))}processSegmentGroup(x,w,R,V){return 0===R.segments.length&&R.hasChildren()?this.processChildren(x,w,R):this.processSegment(x,w,R,R.segments,V)}processChildren(x,w,R){return(0,J.D)(Object.keys(R.children)).pipe(be(V=>{const X=R.children[V],ne=Lr(w,V);return this.processSegmentGroup(x,ne,X,V)}),(0,Je.R)((V,X)=>V&&X?(V.push(...X),V):null),function vt(S,x=!1){return(0,Oe.e)((w,R)=>{let V=0;w.subscribe((0,de.x)(R,X=>{const ne=S(X,V++);(ne||x)&&R.next(X),!ne&&R.complete()}))})}(V=>null!==V),(0,At.d)(null),Nt(),(0,Ge.U)(V=>{if(null===V)return null;const X=pe(V);return function K(S){S.sort((x,w)=>x.value.outlet===Zt?-1:w.value.outlet===Zt?1:x.value.outlet.localeCompare(w.value.outlet))}(X),X}))}processSegment(x,w,R,V,X){return(0,J.D)(w).pipe(be(ne=>{var Qe;return this.processSegmentAgainstRoute(null!==(Qe=ne._injector)&&void 0!==Qe?Qe:x,ne,R,V,X)}),(0,Ee.P)(ne=>!!ne),$e(ne=>{if(cr(ne))return nu(R,V,X)?(0,G.of)([]):(0,G.of)(null);throw ne}))}processSegmentAgainstRoute(x,w,R,V,X){if(w.redirectTo||!Ho(w,R,V,X))return(0,G.of)(null);let ne;if("**"===w.path){var Qe,Tt;const on=V.length>0?Er(V).parameters:{},Cn=un(R)+V.length,_n=new ss(V,on,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,kt(w),as(w),null!==(Qe=null!==(Tt=w.component)&&void 0!==Tt?Tt:w._loadedComponent)&&void 0!==Qe?Qe:null,w,Bt(R),Cn,er(w));ne=(0,G.of)({snapshot:_n,consumedSegments:[],remainingSegments:[]})}else ne=sa(R,w,V,x).pipe((0,Ge.U)(({matched:on,consumedSegments:Cn,remainingSegments:_n,parameters:Hr})=>{var F,U;if(!on)return null;const te=un(R)+Cn.length;return{snapshot:new ss(Cn,Hr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,kt(w),as(w),null!==(F=null!==(U=w.component)&&void 0!==U?U:w._loadedComponent)&&void 0!==F?F:null,w,Bt(R),te,er(w)),consumedSegments:Cn,remainingSegments:_n}}));return ne.pipe((0,rt.w)(on=>{var Cn,_n;if(null===on)return(0,G.of)(null);const{snapshot:Hr,consumedSegments:F,remainingSegments:U}=on;x=null!==(Cn=w._injector)&&void 0!==Cn?Cn:x;const te=null!==(_n=w._loadedInjector)&&void 0!==_n?_n:x,Se=function $(S){return S.children?S.children:S.loadChildren?S._loadedRoutes:[]}(w),{segmentGroup:ut,slicedSegments:Et}=To(R,F,U,Se.filter(bn=>void 0===bn.redirectTo));if(0===Et.length&&ut.hasChildren())return this.processChildren(te,Se,ut).pipe((0,Ge.U)(bn=>null===bn?null:[new qn(Hr,bn)]));if(0===Se.length&&0===Et.length)return(0,G.of)([new qn(Hr,[])]);const Jt=as(w)===X;return this.processSegment(te,Se,ut,Et,Jt?Zt:X).pipe((0,Ge.U)(bn=>null===bn?null:[new qn(Hr,bn)]))}))}}function re(S){const x=S.value.routeConfig;return x&&""===x.path&&void 0===x.redirectTo}function pe(S){const x=[],w=new Set;for(const R of S){if(!re(R)){x.push(R);continue}const V=x.find(X=>R.value.routeConfig===X.value.routeConfig);void 0!==V?(V.children.push(...R.children),w.add(V)):x.push(R)}for(const R of w){const V=pe(R.children);x.push(new qn(R.value,V))}return x.filter(R=>!w.has(R))}function Bt(S){let x=S;for(;x._sourceSegment;)x=x._sourceSegment;return x}function un(S){var x;let w=S,R=null!==(x=w._segmentIndexShift)&&void 0!==x?x:0;for(;w._sourceSegment;){var V;w=w._sourceSegment,R+=null!==(V=w._segmentIndexShift)&&void 0!==V?V:0}return R-1}function kt(S){return S.data||{}}function er(S){return S.resolve||{}}function wt(S){return"string"==typeof S.title||null===S.title}function zt(S){return(0,rt.w)(x=>{const w=S(x);return w?(0,J.D)(w).pipe((0,Ge.U)(()=>x)):(0,G.of)(x)})}const Ps=new a.OlP("ROUTES");let tl=(()=>{class S{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,a.f3M)(a.Sil)}loadComponent(w){if(this.componentLoaders.get(w))return this.componentLoaders.get(w);if(w._loadedComponent)return(0,G.of)(w._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(w);const R=Dn(w.loadComponent()).pipe((0,Ge.U)(_l),(0,tt.b)(X=>{this.onLoadEndListener&&this.onLoadEndListener(w),w._loadedComponent=X}),En(()=>{this.componentLoaders.delete(w)})),V=new et(R,()=>new ke.x).pipe(Q());return this.componentLoaders.set(w,V),V}loadChildren(w,R){if(this.childrenLoaders.get(R))return this.childrenLoaders.get(R);if(R._loadedRoutes)return(0,G.of)({routes:R._loadedRoutes,injector:R._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(R);const X=this.loadModuleFactoryOrRoutes(R.loadChildren).pipe((0,Ge.U)(Qe=>{this.onLoadEndListener&&this.onLoadEndListener(R);let Tt,on,Cn=!1;Array.isArray(Qe)?on=Qe:(Tt=Qe.create(w).injector,on=Cr(Tt.get(Ps,[],a.XFs.Self|a.XFs.Optional)));return{routes:on.map(Mi),injector:Tt}}),En(()=>{this.childrenLoaders.delete(R)})),ne=new et(X,()=>new ke.x).pipe(Q());return this.childrenLoaders.set(R,ne),ne}loadModuleFactoryOrRoutes(w){return Dn(w()).pipe((0,Ge.U)(_l),(0,Ie.z)(R=>R instanceof a.YKP||Array.isArray(R)?(0,G.of)(R):(0,J.D)(this.compiler.compileModuleAsync(R))))}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function _l(S){return function pa(S){return S&&"object"==typeof S&&"default"in S}(S)?S.default:S}let nl=(()=>{class S{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ke.x,this.configLoader=(0,a.f3M)(tl),this.environmentInjector=(0,a.f3M)(a.lqb),this.urlSerializer=(0,a.f3M)(Tn),this.rootContexts=(0,a.f3M)(hs),this.navigationId=0,this.afterPreactivation=()=>(0,G.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=V=>this.events.next(new kn(V)),this.configLoader.onLoadStartListener=V=>this.events.next(new tn(V))}complete(){var w;null===(w=this.transitions)||void 0===w||w.complete()}handleNavigationRequest(w){var R;const V=++this.navigationId;null===(R=this.transitions)||void 0===R||R.next({...this.transitions.value,...w,id:V})}setupNavigations(w){return this.transitions=new De.X({id:0,targetPageId:0,currentUrlTree:w.currentUrlTree,currentRawUrl:w.currentUrlTree,extractedUrl:w.urlHandlingStrategy.extract(w.currentUrlTree),urlAfterRedirects:w.urlHandlingStrategy.extract(w.currentUrlTree),rawUrl:w.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:pt,restoredState:null,currentSnapshot:w.routerState.snapshot,targetSnapshot:null,currentRouterState:w.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,nt.h)(R=>0!==R.id),(0,Ge.U)(R=>({...R,extractedUrl:w.urlHandlingStrategy.extract(R.rawUrl)})),(0,rt.w)(R=>{let V=!1,X=!1;return(0,G.of)(R).pipe((0,tt.b)(ne=>{this.currentNavigation={id:ne.id,initialUrl:ne.rawUrl,extractedUrl:ne.extractedUrl,trigger:ne.source,extras:ne.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,rt.w)(ne=>{var Qe;const Tt=w.browserUrlTree.toString(),on=!w.navigated||ne.extractedUrl.toString()!==Tt||Tt!==w.currentUrlTree.toString(),Cn=null!==(Qe=ne.extras.onSameUrlNavigation)&&void 0!==Qe?Qe:w.onSameUrlNavigation;if(!on&&"reload"!==Cn){const _n="";return this.events.next(new Mn(ne.id,w.serializeUrl(R.rawUrl),_n,0)),w.rawUrlTree=ne.rawUrl,ne.resolve(null),Ze.E}if(w.urlHandlingStrategy.shouldProcessUrl(ne.rawUrl))return rl(ne.source)&&(w.browserUrlTree=ne.extractedUrl),(0,G.of)(ne).pipe((0,rt.w)(_n=>{var Hr,F;const U=null===(Hr=this.transitions)||void 0===Hr?void 0:Hr.getValue();return this.events.next(new Ft(_n.id,this.urlSerializer.serialize(_n.extractedUrl),_n.source,_n.restoredState)),U!==(null===(F=this.transitions)||void 0===F?void 0:F.getValue())?Ze.E:Promise.resolve(_n)}),function Cu(S,x,w,R){return(0,rt.w)(V=>function bi(S,x,w,R,V){return new aa(S,x,w,R,V).apply()}(S,x,w,V.extractedUrl,R).pipe((0,Ge.U)(X=>({...V,urlAfterRedirects:X}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,w.config),(0,tt.b)(_n=>{this.currentNavigation={...this.currentNavigation,finalUrl:_n.urlAfterRedirects},R.urlAfterRedirects=_n.urlAfterRedirects}),function dr(S,x,w,R,V){return(0,Ie.z)(X=>function el(S,x,w,R,V,X,ne="emptyOnly"){return new N(S,x,w,R,V,ne,X).recognize().pipe((0,rt.w)(Qe=>null===Qe?function fa(S){return new Ae.y(x=>x.error(S))}(new Ca):(0,G.of)(Qe)))}(S,x,w,X.urlAfterRedirects,R.serialize(X.urlAfterRedirects),R,V).pipe((0,Ge.U)(ne=>({...X,targetSnapshot:ne}))))}(this.environmentInjector,this.rootComponentType,w.config,this.urlSerializer,w.paramsInheritanceStrategy),(0,tt.b)(_n=>{if(R.targetSnapshot=_n.targetSnapshot,"eager"===w.urlUpdateStrategy){if(!_n.extras.skipLocationChange){const F=w.urlHandlingStrategy.merge(_n.urlAfterRedirects,_n.rawUrl);w.setBrowserUrl(F,_n)}w.browserUrlTree=_n.urlAfterRedirects}const Hr=new Kr(_n.id,this.urlSerializer.serialize(_n.extractedUrl),this.urlSerializer.serialize(_n.urlAfterRedirects),_n.targetSnapshot);this.events.next(Hr)}));if(on&&w.urlHandlingStrategy.shouldProcessUrl(w.rawUrlTree)){const{id:_n,extractedUrl:Hr,source:F,restoredState:U,extras:te}=ne,Se=new Ft(_n,this.urlSerializer.serialize(Hr),F,U);this.events.next(Se);const ut=qs(Hr,this.rootComponentType).snapshot;return R={...ne,targetSnapshot:ut,urlAfterRedirects:Hr,extras:{...te,skipLocationChange:!1,replaceUrl:!1}},(0,G.of)(R)}{const _n="";return this.events.next(new Mn(ne.id,w.serializeUrl(R.extractedUrl),_n,1)),w.rawUrlTree=ne.rawUrl,ne.resolve(null),Ze.E}}),(0,tt.b)(ne=>{const Qe=new ot(ne.id,this.urlSerializer.serialize(ne.extractedUrl),this.urlSerializer.serialize(ne.urlAfterRedirects),ne.targetSnapshot);this.events.next(Qe)}),(0,Ge.U)(ne=>R={...ne,guards:ps(ne.targetSnapshot,ne.currentSnapshot,this.rootContexts)}),function ns(S,x){return(0,Ie.z)(w=>{const{targetSnapshot:R,currentSnapshot:V,guards:{canActivateChecks:X,canDeactivateChecks:ne}}=w;return 0===ne.length&&0===X.length?(0,G.of)({...w,guardsResult:!0}):function gs(S,x,w,R){return(0,J.D)(S).pipe((0,Ie.z)(V=>function ia(S,x,w,R,V){const X=x&&x.routeConfig?x.routeConfig.canDeactivate:null;if(!X||0===X.length)return(0,G.of)(!0);const ne=X.map(Qe=>{var Tt;const on=null!==(Tt=Co(x))&&void 0!==Tt?Tt:V,Cn=Jn(Qe,on);return Dn(function Ue(S){return S&&g(S.canDeactivate)}(Cn)?Cn.canDeactivate(S,x,w,R):on.runInContext(()=>Cn(S,x,w,R))).pipe((0,Ee.P)())});return(0,G.of)(ne).pipe(pr())}(V.component,V.route,w,x,R)),(0,Ee.P)(V=>!0!==V,!0))}(ne,R,V,S).pipe((0,Ie.z)(Qe=>Qe&&function E(S){return"boolean"==typeof S}(Qe)?function ii(S,x,w,R){return(0,J.D)(x).pipe(be(V=>(0,Te.z)(function bo(S,x){return null!==S&&x&&x(new zn(S)),(0,G.of)(!0)}(V.route.parent,R),function Ci(S,x){return null!==S&&x&&x(new sr(S)),(0,G.of)(!0)}(V.route,R),function eo(S,x,w){const R=x[x.length-1],X=x.slice(0,x.length-1).reverse().map(ne=>function Js(S){const x=S.routeConfig?S.routeConfig.canActivateChild:null;return x&&0!==x.length?{node:S,guards:x}:null}(ne)).filter(ne=>null!==ne).map(ne=>le(()=>{const Qe=ne.guards.map(Tt=>{var on;const Cn=null!==(on=Co(ne.node))&&void 0!==on?on:w,_n=Jn(Tt,Cn);return Dn(function W(S){return S&&g(S.canActivateChild)}(_n)?_n.canActivateChild(R,S):Cn.runInContext(()=>_n(R,S))).pipe((0,Ee.P)())});return(0,G.of)(Qe).pipe(pr())}));return(0,G.of)(X).pipe(pr())}(S,V.path,w),function Do(S,x,w){const R=x.routeConfig?x.routeConfig.canActivate:null;if(!R||0===R.length)return(0,G.of)(!0);const V=R.map(X=>le(()=>{var ne;const Qe=null!==(ne=Co(x))&&void 0!==ne?ne:w,Tt=Jn(X,Qe);return Dn(function D(S){return S&&g(S.canActivate)}(Tt)?Tt.canActivate(x,S):Qe.runInContext(()=>Tt(x,S))).pipe((0,Ee.P)())}));return(0,G.of)(V).pipe(pr())}(S,V.route,w))),(0,Ee.P)(V=>!0!==V,!0))}(R,X,S,x):(0,G.of)(Qe)),(0,Ge.U)(Qe=>({...w,guardsResult:Qe})))})}(this.environmentInjector,ne=>this.events.next(ne)),(0,tt.b)(ne=>{if(R.guardsResult=ne.guardsResult,Rr(ne.guardsResult))throw ur(0,ne.guardsResult);const Qe=new Ne(ne.id,this.urlSerializer.serialize(ne.extractedUrl),this.urlSerializer.serialize(ne.urlAfterRedirects),ne.targetSnapshot,!!ne.guardsResult);this.events.next(Qe)}),(0,nt.h)(ne=>!!ne.guardsResult||(w.restoreHistory(ne),this.cancelNavigationTransition(ne,"",3),!1)),zt(ne=>{if(ne.guards.canActivateChecks.length)return(0,G.of)(ne).pipe((0,tt.b)(Qe=>{const Tt=new yt(Qe.id,this.urlSerializer.serialize(Qe.extractedUrl),this.urlSerializer.serialize(Qe.urlAfterRedirects),Qe.targetSnapshot);this.events.next(Tt)}),(0,rt.w)(Qe=>{let Tt=!1;return(0,G.of)(Qe).pipe(function Di(S,x){return(0,Ie.z)(w=>{const{targetSnapshot:R,guards:{canActivateChecks:V}}=w;if(!V.length)return(0,G.of)(w);let X=0;return(0,J.D)(V).pipe(be(ne=>function Yt(S,x,w,R){const V=S.routeConfig,X=S._resolve;return void 0!==(null==V?void 0:V.title)&&!wt(V)&&(X[Qn]=V.title),function mn(S,x,w,R){const V=function ls(S){return[...Object.keys(S),...Object.getOwnPropertySymbols(S)]}(S);if(0===V.length)return(0,G.of)({});const X={};return(0,J.D)(V).pipe((0,Ie.z)(ne=>function cn(S,x,w,R){var V;const X=null!==(V=Co(x))&&void 0!==V?V:R,ne=Jn(S,X);return Dn(ne.resolve?ne.resolve(x,w):X.runInContext(()=>ne(x,w)))}(S[ne],x,w,R).pipe((0,Ee.P)(),(0,tt.b)(Qe=>{X[ne]=Qe}))),Ke(1),function Sn(S){return(0,Ge.U)(()=>S)}(X),$e(ne=>cr(ne)?Ze.E:Xe(ne)))}(X,S,x,R).pipe((0,Ge.U)(ne=>(S._resolvedData=ne,S.data=Is(S,w).resolve,V&&wt(V)&&(S.data[Qn]=V.title),null)))}(ne.route,R,S,x)),(0,tt.b)(()=>X++),Ke(1),(0,Ie.z)(ne=>X===V.length?(0,G.of)(w):Ze.E))})}(w.paramsInheritanceStrategy,this.environmentInjector),(0,tt.b)({next:()=>Tt=!0,complete:()=>{Tt||(w.restoreHistory(Qe),this.cancelNavigationTransition(Qe,"",2))}}))}),(0,tt.b)(Qe=>{const Tt=new Ut(Qe.id,this.urlSerializer.serialize(Qe.extractedUrl),this.urlSerializer.serialize(Qe.urlAfterRedirects),Qe.targetSnapshot);this.events.next(Tt)}))}),zt(ne=>{const Qe=Tt=>{var on;const Cn=[];null!==(on=Tt.routeConfig)&&void 0!==on&&on.loadComponent&&!Tt.routeConfig._loadedComponent&&Cn.push(this.configLoader.loadComponent(Tt.routeConfig).pipe((0,tt.b)(_n=>{Tt.component=_n}),(0,Ge.U)(()=>{})));for(const _n of Tt.children)Cn.push(...Qe(_n));return Cn};return Fe(Qe(ne.targetSnapshot.root)).pipe((0,At.d)(),(0,z.q)(1))}),zt(()=>this.afterPreactivation()),(0,Ge.U)(ne=>{const Qe=function wo(S,x,w){const R=oo(S,x._root,w?w._root:void 0);return new Io(R,x)}(w.routeReuseStrategy,ne.targetSnapshot,ne.currentRouterState);return R={...ne,targetRouterState:Qe}}),(0,tt.b)(ne=>{w.currentUrlTree=ne.urlAfterRedirects,w.rawUrlTree=w.urlHandlingStrategy.merge(ne.urlAfterRedirects,ne.rawUrl),w.routerState=ne.targetRouterState,"deferred"===w.urlUpdateStrategy&&(ne.extras.skipLocationChange||w.setBrowserUrl(w.rawUrlTree,ne),w.browserUrlTree=ne.urlAfterRedirects)}),((S,x,w)=>(0,Ge.U)(R=>(new Bo(x,R.targetRouterState,R.currentRouterState,w).activate(S),R)))(this.rootContexts,w.routeReuseStrategy,ne=>this.events.next(ne)),(0,tt.b)({next:ne=>{var Qe;V=!0,this.lastSuccessfulNavigation=this.currentNavigation,w.navigated=!0,this.events.next(new Xt(ne.id,this.urlSerializer.serialize(ne.extractedUrl),this.urlSerializer.serialize(w.currentUrlTree))),null===(Qe=w.titleStrategy)||void 0===Qe||Qe.updateTitle(ne.targetRouterState.snapshot),ne.resolve(!0)},complete:()=>{V=!0}}),En(()=>{var ne;V||X||this.cancelNavigationTransition(R,"",1),(null===(ne=this.currentNavigation)||void 0===ne?void 0:ne.id)===R.id&&(this.currentNavigation=null)}),$e(ne=>{if(X=!0,Vs(ne)){os(ne)||(w.navigated=!0,w.restoreHistory(R,!0));const Tt=new wn(R.id,this.urlSerializer.serialize(R.extractedUrl),ne.message,ne.cancellationCode);if(this.events.next(Tt),os(ne)){const on=w.urlHandlingStrategy.merge(ne.url,w.rawUrlTree),Cn={skipLocationChange:R.extras.skipLocationChange,replaceUrl:"eager"===w.urlUpdateStrategy||rl(R.source)};w.scheduleNavigation(on,pt,null,Cn,{resolve:R.resolve,reject:R.reject,promise:R.promise})}else R.resolve(!1)}else{var Qe;w.restoreHistory(R,!0);const Tt=new Ir(R.id,this.urlSerializer.serialize(R.extractedUrl),ne,null!==(Qe=R.targetSnapshot)&&void 0!==Qe?Qe:void 0);this.events.next(Tt);try{R.resolve(w.errorHandler(ne))}catch(on){R.reject(on)}}return Ze.E}))}))}cancelNavigationTransition(w,R,V){const X=new wn(w.id,this.urlSerializer.serialize(w.extractedUrl),R,V);this.events.next(X),w.resolve(!1)}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function rl(S){return S!==pt}let il=(()=>{class S{buildTitle(w){let R,V=w.root;for(;void 0!==V;){var X;R=null!==(X=this.getResolvedTitleForRoute(V))&&void 0!==X?X:R,V=V.children.find(ne=>ne.outlet===Zt)}return R}getResolvedTitleForRoute(w){return w.data[Qn]}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=a.Yz7({token:S,factory:function(){return(0,a.f3M)(kl)},providedIn:"root"}),S})(),kl=(()=>{class S extends il{constructor(w){super(),this.title=w}updateTitle(w){const R=this.buildTitle(w);void 0!==R&&this.title.setTitle(R)}}return S.\u0275fac=function(w){return new(w||S)(a.LFG($n.Dx))},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),Ao=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=a.Yz7({token:S,factory:function(){return(0,a.f3M)(hr)},providedIn:"root"}),S})();class Fl{shouldDetach(x){return!1}store(x,w){}shouldAttach(x){return!1}retrieve(x){return null}shouldReuseRoute(x,w){return x.routeConfig===w.routeConfig}}let hr=(()=>{class S extends Fl{}return S.\u0275fac=function(){let x;return function(R){return(x||(x=a.n5z(S)))(R||S)}}(),S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const Ba=new a.OlP("",{providedIn:"root",factory:()=>({})});let Ni=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=a.Yz7({token:S,factory:function(){return(0,a.f3M)(Gn)},providedIn:"root"}),S})(),Gn=(()=>{class S{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,R){return w}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function Ur(S){throw S}function El(S,x,w){return x.parse("/")}const pi={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pn={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ms=(()=>{class S{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){var w;return null===(w=this.location.getState())||void 0===w?void 0:w.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){var w;this.disposed=!1,this.currentPageId=0,this.console=(0,a.f3M)(a.c2e),this.isNgZoneEnabled=!1,this.options=(0,a.f3M)(Ba,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Ur,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||El,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,a.f3M)(Ni),this.routeReuseStrategy=(0,a.f3M)(Ao),this.urlCreationStrategy=(0,a.f3M)(Gi),this.titleStrategy=(0,a.f3M)(il),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Cr(null!==(w=(0,a.f3M)(Ps,{optional:!0}))&&void 0!==w?w:[]),this.navigationTransitions=(0,a.f3M)(nl),this.urlSerializer=(0,a.f3M)(Tn),this.location=(0,a.f3M)(He.Ye),this.isNgZoneEnabled=(0,a.f3M)(a.R0b)instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new rr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=qs(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(R=>{this.lastSuccessfulId=R.id,this.currentPageId=R.targetPageId},R=>{this.console.warn(`Unhandled Navigation Error: ${R}`)})}resetRootComponentType(w){this.routerState.root.component=w,this.navigationTransitions.rootComponentType=w}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const w=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),pt,w)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(w=>{const R="popstate"===w.type?"popstate":"hashchange";"popstate"===R&&setTimeout(()=>{this.navigateToSyncWithBrowser(w.url,R,w.state)},0)}))}navigateToSyncWithBrowser(w,R,V){const X={replaceUrl:!0},ne=null!=V&&V.navigationId?V:null;if(V){const Tt={...V};delete Tt.navigationId,delete Tt.\u0275routerPageId,0!==Object.keys(Tt).length&&(X.state=Tt)}const Qe=this.parseUrl(w);this.scheduleNavigation(Qe,R,ne,X)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(w){this.config=w.map(Mi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(w,R={}){const{relativeTo:V,queryParams:X,fragment:ne,queryParamsHandling:Qe,preserveFragment:Tt}=R,on=Tt?this.currentUrlTree.fragment:ne;let Cn=null;switch(Qe){case"merge":Cn={...this.currentUrlTree.queryParams,...X};break;case"preserve":Cn=this.currentUrlTree.queryParams;break;default:Cn=X||null}return null!==Cn&&(Cn=this.removeEmptyProps(Cn)),this.urlCreationStrategy.createUrlTree(V,this.routerState,this.currentUrlTree,w,Cn,null!=on?on:null)}navigateByUrl(w,R={skipLocationChange:!1}){const V=Rr(w)?w:this.parseUrl(w),X=this.urlHandlingStrategy.merge(V,this.rawUrlTree);return this.scheduleNavigation(X,pt,null,R)}navigate(w,R={skipLocationChange:!1}){return function Xo(S){for(let x=0;x<S.length;x++){const w=S[x];if(null==w)throw new a.vHH(4008,false)}}(w),this.navigateByUrl(this.createUrlTree(w,R),R)}serializeUrl(w){return this.urlSerializer.serialize(w)}parseUrl(w){let R;try{R=this.urlSerializer.parse(w)}catch(V){R=this.malformedUriErrorHandler(V,this.urlSerializer,w)}return R}isActive(w,R){let V;if(V=!0===R?{...pi}:!1===R?{...pn}:R,Rr(w))return mr(this.currentUrlTree,w,V);const X=this.parseUrl(w);return mr(this.currentUrlTree,X,V)}removeEmptyProps(w){return Object.keys(w).reduce((R,V)=>{const X=w[V];return null!=X&&(R[V]=X),R},{})}scheduleNavigation(w,R,V,X,ne){if(this.disposed)return Promise.resolve(!1);let Qe,Tt,on,Cn;if(ne?(Qe=ne.resolve,Tt=ne.reject,on=ne.promise):on=new Promise((F,U)=>{Qe=F,Tt=U}),"computed"===this.canceledNavigationResolution)if(V&&V.\u0275routerPageId)Cn=V.\u0275routerPageId;else if(X.replaceUrl||X.skipLocationChange){var _n;Cn=null!==(_n=this.browserPageId)&&void 0!==_n?_n:0}else{var Hr;Cn=(null!==(Hr=this.browserPageId)&&void 0!==Hr?Hr:0)+1}else Cn=0;return this.navigationTransitions.handleNavigationRequest({targetPageId:Cn,source:R,restoredState:V,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:w,extras:X,resolve:Qe,reject:Tt,promise:on,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),on.catch(F=>Promise.reject(F))}setBrowserUrl(w,R){const V=this.urlSerializer.serialize(w),X={...R.extras.state,...this.generateNgRouterState(R.id,R.targetPageId)};this.location.isCurrentPathEqualTo(V)||R.extras.replaceUrl?this.location.replaceState(V,"",X):this.location.go(V,"",X)}restoreHistory(w,R=!1){if("computed"===this.canceledNavigationResolution){var V,X;const ne=this.currentPageId-w.targetPageId;"popstate"!==w.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(V=this.getCurrentNavigation())||void 0===V?void 0:V.finalUrl)||0===ne?this.currentUrlTree===(null===(X=this.getCurrentNavigation())||void 0===X?void 0:X.finalUrl)&&0===ne&&(this.resetState(w),this.browserUrlTree=w.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ne)}else"replace"===this.canceledNavigationResolution&&(R&&this.resetState(w),this.resetUrlToCurrentUrlTree())}resetState(w){this.routerState=w.currentRouterState,this.currentUrlTree=w.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,w.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(w,R){return"computed"===this.canceledNavigationResolution?{navigationId:w,\u0275routerPageId:R}:{navigationId:w}}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),Cs=(()=>{class S{constructor(w,R,V,X,ne,Qe){var Tt;this.router=w,this.route=R,this.tabIndexAttribute=V,this.renderer=X,this.el=ne,this.locationStrategy=Qe,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new ke.x;const on=null===(Tt=ne.nativeElement.tagName)||void 0===Tt?void 0:Tt.toLowerCase();this.isAnchorElement="a"===on||"area"===on,this.isAnchorElement?this.subscription=w.events.subscribe(Cn=>{Cn instanceof Xt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(w){this._preserveFragment=(0,a.D6c)(w)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(w){this._skipLocationChange=(0,a.D6c)(w)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(w){this._replaceUrl=(0,a.D6c)(w)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(w){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",w)}ngOnChanges(w){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(w){null!=w?(this.commands=Array.isArray(w)?w:[w],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(w,R,V,X,ne){return!!(null===this.urlTree||this.isAnchorElement&&(0!==w||R||V||X||ne||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){var w;null===(w=this.subscription)||void 0===w||w.unsubscribe()}updateHref(){var w;this.href=null!==this.urlTree&&this.locationStrategy?null===(w=this.locationStrategy)||void 0===w?void 0:w.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const R=null===this.href?null:(0,a.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",R)}applyAttributeValue(w,R){const V=this.renderer,X=this.el.nativeElement;null!==R?V.setAttribute(X,w,R):V.removeAttribute(X,w)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return S.\u0275fac=function(w){return new(w||S)(a.Y36(ms),a.Y36(Es),a.$8M("tabindex"),a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(He.S$))},S.\u0275dir=a.lG2({type:S,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(w,R){1&w&&a.NdJ("click",function(X){return R.onClick(X.button,X.ctrlKey,X.shiftKey,X.altKey,X.metaKey)}),2&w&&a.uIk("target",R.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[a.TTD]}),S})();class ua{}let ga=(()=>{class S{preload(w,R){return R().pipe($e(()=>(0,G.of)(null)))}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),ru=(()=>{class S{constructor(w,R,V,X,ne){this.router=w,this.injector=V,this.preloadingStrategy=X,this.loader=ne}setUpPreloading(){this.subscription=this.router.events.pipe((0,nt.h)(w=>w instanceof Xt),be(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(w,R){const V=[];for(const Tt of R){var X,ne;Tt.providers&&!Tt._injector&&(Tt._injector=(0,a.MMx)(Tt.providers,w,`Route: ${Tt.path}`));const on=null!==(X=Tt._injector)&&void 0!==X?X:w,Cn=null!==(ne=Tt._loadedInjector)&&void 0!==ne?ne:on;if(Tt.loadChildren&&!Tt._loadedRoutes&&void 0===Tt.canLoad||Tt.loadComponent&&!Tt._loadedComponent)V.push(this.preloadConfig(on,Tt));else if(Tt.children||Tt._loadedRoutes){var Qe;V.push(this.processRoutes(Cn,null!==(Qe=Tt.children)&&void 0!==Qe?Qe:Tt._loadedRoutes))}}return(0,J.D)(V).pipe((0,Fn.J)())}preloadConfig(w,R){return this.preloadingStrategy.preload(R,()=>{let V;V=R.loadChildren&&void 0===R.canLoad?this.loader.loadChildren(w,R):(0,G.of)(null);const X=V.pipe((0,Ie.z)(ne=>{var Qe;return null===ne?(0,G.of)(void 0):(R._loadedRoutes=ne.routes,R._loadedInjector=ne.injector,this.processRoutes(null!==(Qe=ne.injector)&&void 0!==Qe?Qe:w,ne.routes))}));if(R.loadComponent&&!R._loadedComponent){const ne=this.loader.loadComponent(R);return(0,J.D)([X,ne]).pipe((0,Fn.J)())}return X})}}return S.\u0275fac=function(w){return new(w||S)(a.LFG(ms),a.LFG(a.Sil),a.LFG(a.lqb),a.LFG(ua),a.LFG(tl))},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const bs=new a.OlP("");let Il=(()=>{class S{constructor(w,R,V,X,ne={}){this.urlSerializer=w,this.transitions=R,this.viewportScroller=V,this.zone=X,this.options=ne,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ne.scrollPositionRestoration=ne.scrollPositionRestoration||"disabled",ne.anchorScrolling=ne.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof Ft?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=w.navigationTrigger,this.restoredId=w.restoredState?w.restoredState.navigationId:0):w instanceof Xt&&(this.lastId=w.id,this.scheduleScrollEvent(w,this.urlSerializer.parse(w.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof Yn&&(w.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(w.position):w.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(w.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(w,R){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Yn(w,"popstate"===this.lastSource?this.store[this.restoredId]:null,R))})},0)})}ngOnDestroy(){var w,R;null===(w=this.routerEventsSubscription)||void 0===w||w.unsubscribe(),null===(R=this.scrollEventsSubscription)||void 0===R||R.unsubscribe()}}return S.\u0275fac=function(w){a.$Z()},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac}),S})();var Ds=(()=>((Ds=Ds||{})[Ds.COMPLETE=0]="COMPLETE",Ds[Ds.FAILED=1]="FAILED",Ds[Ds.REDIRECTING=2]="REDIRECTING",Ds))();const Ts=!1;function xo(S,x){return{\u0275kind:S,\u0275providers:x}}const co=new a.OlP("",{providedIn:"root",factory:()=>!1});function vi(){const S=(0,a.f3M)(a.zs3);return x=>{var w,R;const V=S.get(a.z2F);if(x!==V.components[0])return;const X=S.get(ms),ne=S.get(Va);1===S.get(wl)&&X.initialNavigation(),null===(w=S.get(Gs,null,a.XFs.Optional))||void 0===w||w.setUpPreloading(),null===(R=S.get(bs,null,a.XFs.Optional))||void 0===R||R.init(),X.resetRootComponentType(V.componentTypes[0]),ne.closed||(ne.next(),ne.unsubscribe())}}const Va=new a.OlP(Ts?"bootstrap done indicator":"",{factory:()=>new ke.x}),wl=new a.OlP(Ts?"initial navigation":"",{providedIn:"root",factory:()=>1});function $l(){let S=[];return S=Ts?[{provide:a.Xts,multi:!0,useFactory:()=>{const x=(0,a.f3M)(ms);return()=>x.events.subscribe(w=>{var R,V,X,ne;null===(R=(V=console).group)||void 0===R||R.call(V,`Router Event: ${w.constructor.name}`),console.log(function Bn(S){var x,w,R,V;if(!("type"in S))return`Unknown Router Event: ${S.constructor.name}`;switch(S.type){case 14:return`ActivationEnd(path: '${(null===(x=S.snapshot.routeConfig)||void 0===x?void 0:x.path)||""}')`;case 13:return`ActivationStart(path: '${(null===(w=S.snapshot.routeConfig)||void 0===w?void 0:w.path)||""}')`;case 12:return`ChildActivationEnd(path: '${(null===(R=S.snapshot.routeConfig)||void 0===R?void 0:R.path)||""}')`;case 11:return`ChildActivationStart(path: '${(null===(V=S.snapshot.routeConfig)||void 0===V?void 0:V.path)||""}')`;case 8:return`GuardsCheckEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state}, shouldActivate: ${S.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 2:return`NavigationCancel(id: ${S.id}, url: '${S.url}')`;case 16:return`NavigationSkipped(id: ${S.id}, url: '${S.url}')`;case 1:return`NavigationEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${S.id}, url: '${S.url}', error: ${S.error})`;case 0:return`NavigationStart(id: ${S.id}, url: '${S.url}')`;case 6:return`ResolveEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 5:return`ResolveStart(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 10:return`RouteConfigLoadEnd(path: ${S.route.path})`;case 9:return`RouteConfigLoadStart(path: ${S.route.path})`;case 4:return`RoutesRecognized(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 15:return`Scroll(anchor: '${S.anchor}', position: '${S.position?`${S.position[0]}, ${S.position[1]}`:null}')`}}(w)),console.log(w),null===(X=(ne=console).groupEnd)||void 0===X||X.call(ne)})}}]:[],xo(1,S)}const Gs=new a.OlP(Ts?"router preloader":"");function od(S){return xo(0,[{provide:Gs,useExisting:ru},{provide:ua,useExisting:S}])}const ci=!1,ho=new a.OlP(ci?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),ul=[He.Ye,{provide:Tn,useClass:On},ms,hs,{provide:Es,useFactory:function bt(S){return S.routerState.root},deps:[ms]},tl,ci?{provide:co,useValue:!0}:[]];function rs(){return new a.PXZ("Router",ms)}let fo=(()=>{class S{constructor(w){}static forRoot(w,R){return{ngModule:S,providers:[ul,ci&&null!=R&&R.enableTracing?$l().\u0275providers:[],{provide:Ps,multi:!0,useValue:w},{provide:ho,useFactory:ys,deps:[[ms,new a.FiY,new a.tp0]]},{provide:Ba,useValue:R||{}},null!=R&&R.useHash?{provide:He.S$,useClass:He.Do}:{provide:He.S$,useClass:He.b0},{provide:bs,useFactory:()=>{const S=(0,a.f3M)(He.EM),x=(0,a.f3M)(a.R0b),w=(0,a.f3M)(Ba),R=(0,a.f3M)(nl),V=(0,a.f3M)(Tn);return w.scrollOffset&&S.setOffset(w.scrollOffset),new Il(V,R,S,x,w)}},null!=R&&R.preloadingStrategy?od(R.preloadingStrategy).\u0275providers:[],{provide:a.PXZ,multi:!0,useFactory:rs},null!=R&&R.initialNavigation?Tu(R):[],[{provide:to,useFactory:vi},{provide:a.tb,multi:!0,useExisting:to}]]}}static forChild(w){return{ngModule:S,providers:[{provide:Ps,multi:!0,useValue:w}]}}}return S.\u0275fac=function(w){return new(w||S)(a.LFG(ho,8))},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[Or]}),S})();function ys(S){if(ci&&S)throw new a.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Tu(S){return["disabled"===S.initialNavigation?xo(3,[{provide:a.ip1,multi:!0,useFactory:()=>{const x=(0,a.f3M)(ms);return()=>{x.setUpLocationChangeListener()}}},{provide:wl,useValue:2}]).\u0275providers:[],"enabledBlocking"===S.initialNavigation?xo(2,[{provide:wl,useValue:0},{provide:a.ip1,multi:!0,deps:[a.zs3],useFactory:x=>{const w=x.get(He.V_,Promise.resolve());return()=>w.then(()=>new Promise(R=>{const V=x.get(ms),X=x.get(Va);(function ba(S,x){S.events.pipe((0,nt.h)(w=>w instanceof Xt||w instanceof wn||w instanceof Ir||w instanceof Mn),(0,Ge.U)(w=>w instanceof Xt||w instanceof Mn?Ds.COMPLETE:w instanceof wn&&(0===w.code||1===w.code)?Ds.REDIRECTING:Ds.FAILED),(0,nt.h)(w=>w!==Ds.REDIRECTING),(0,z.q)(1)).subscribe(()=>{x()})})(V,()=>{R(!0)}),x.get(nl).afterPreactivation=()=>(R(!0),X.closed?(0,G.of)(void 0):X),V.initialNavigation()}))}}]).\u0275providers:[]]}const to=new a.OlP(ci?"Router Initializer":"")},3942:(sn,ht,B)=>{"use strict";B.d(ht,{Z:()=>it});var a=B(2090),J=B(4859),G=B(9681),De=B(1877);class Me{constructor(Te,ye){this._delegate=Te,this.firebase=ye,(0,G._addComponent)(Te,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=Te.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this._delegate.automaticDataCollectionEnabled=Te}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Te=>{this._delegate.checkDestroyed(),Te()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,G.deleteApp)(this._delegate)))}_getService(Te,ye=G._DEFAULT_ENTRY_NAME){var le;this._delegate.checkDestroyed();const at=this._delegate.container.getProvider(Te);return!at.isInitialized()&&"EXPLICIT"===(null===(le=at.getComponent())||void 0===le?void 0:le.instantiationMode)&&at.initialize(),at.getImmediate({identifier:ye})}_removeServiceInstance(Te,ye=G._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Te).clearInstance(ye)}_addComponent(Te){(0,G._addComponent)(this._delegate,Te)}_addOrOverwriteComponent(Te){(0,G._addOrOverwriteComponent)(this._delegate,Te)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new a.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ge=function Ve(){const Ct=function xe(Ct){const Te={},ye={__esModule:!0,initializeApp:function st(Oe,Q={}){const et=G.initializeApp(Oe,Q);if((0,a.r3)(Te,et.name))return Te[et.name];const ke=new Ct(et,ye);return Te[et.name]=ke,ke},app:at,registerVersion:G.registerVersion,setLogLevel:G.setLogLevel,onLog:G.onLog,apps:null,SDK_VERSION:G.SDK_VERSION,INTERNAL:{registerComponent:function Ze(Oe){const Q=Oe.name,et=Q.replace("-compat","");if(G._registerComponent(Oe)&&"PUBLIC"===Oe.type){const ke=(He=at())=>{if("function"!=typeof He[et])throw he.create("invalid-app-argument",{appName:Q});return He[et]()};void 0!==Oe.serviceProps&&(0,a.ZB)(ke,Oe.serviceProps),ye[et]=ke,Ct.prototype[et]=function(...He){return this._getService.bind(this,Q).apply(this,Oe.multipleInstances?He:[])}}return"PUBLIC"===Oe.type?ye[et]:null},removeApp:function le(Oe){delete Te[Oe]},useAsService:function Pe(Oe,Q){return"serverAuth"===Q?null:Q},modularAPIs:G}};function at(Oe){if(!(0,a.r3)(Te,Oe=Oe||G._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:Oe});return Te[Oe]}return ye.default=ye,Object.defineProperty(ye,"apps",{get:function Xe(){return Object.keys(Te).map(Oe=>Te[Oe])}}),at.App=Ct,ye}(Me);return Ct.INTERNAL=Object.assign(Object.assign({},Ct.INTERNAL),{createFirebaseNamespace:Ve,extendNamespace:function Te(ye){(0,a.ZB)(Ct,ye)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),Ct}(),ce=new De.Yd("@firebase/app-compat");if((0,a.jU)()&&void 0!==self.firebase){ce.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ct=self.firebase.SDK_VERSION;Ct&&Ct.indexOf("LITE")>=0&&ce.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const it=ge;!function Fe(Ct){(0,G.registerVersion)("@firebase/app-compat","0.2.5",Ct)}()},9681:(sn,ht,B)=>{"use strict";B.r(ht),B.d(ht,{FirebaseError:()=>De.ZR,SDK_VERSION:()=>$n,_DEFAULT_ENTRY_NAME:()=>Ee,_addComponent:()=>Je,_addOrOverwriteComponent:()=>Ke,_apps:()=>tt,_clearComponents:()=>vt,_components:()=>$e,_getProvider:()=>At,_registerComponent:()=>Pt,_removeServiceInstance:()=>Nt,deleteApp:()=>lr,getApp:()=>Qn,getApps:()=>vr,initializeApp:()=>Zt,onLog:()=>Wt,registerVersion:()=>_r,setLogLevel:()=>Jr});var a=B(5861),J=B(4859),G=B(1877),De=B(2090),Me=B(8766);class Ae{constructor($t){this.container=$t}getPlatformInfoString(){return this.container.getProviders().map(gn=>{if(function he(en){const $t=en.getComponent();return"VERSION"===(null==$t?void 0:$t.type)}(gn)){const Tn=gn.getImmediate();return`${Tn.library}/${Tn.version}`}return null}).filter(gn=>gn).join(" ")}}const xe="@firebase/app",ge=new G.Yd("@firebase/app"),Ee="[DEFAULT]",be={[xe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tt=new Map,$e=new Map;function Je(en,$t){try{en.container.addComponent($t)}catch(gn){ge.debug(`Component ${$t.name} failed to register with FirebaseApp ${en.name}`,gn)}}function Ke(en,$t){en.container.addOrOverwriteComponent($t)}function Pt(en){const $t=en.name;if($e.has($t))return ge.debug(`There were multiple attempts to register component ${$t}.`),!1;$e.set($t,en);for(const gn of tt.values())Je(gn,en);return!0}function At(en,$t){const gn=en.container.getProvider("heartbeat").getImmediate({optional:!0});return gn&&gn.triggerHeartbeat(),en.container.getProvider($t)}function Nt(en,$t,gn=Ee){At(en,$t).clearInstance(gn)}function vt(){$e.clear()}const En=new De.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Fn{constructor($t,gn,Tn){this._isDeleted=!1,this._options=Object.assign({},$t),this._config=Object.assign({},gn),this._name=gn.name,this._automaticDataCollectionEnabled=gn.automaticDataCollectionEnabled,this._container=Tn,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($t){this.checkDestroyed(),this._automaticDataCollectionEnabled=$t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($t){this._isDeleted=$t}checkDestroyed(){if(this.isDeleted)throw En.create("app-deleted",{appName:this._name})}}const $n="9.18.0";function Zt(en,$t={}){let gn=en;"object"!=typeof $t&&($t={name:$t});const Tn=Object.assign({name:Ee,automaticDataCollectionEnabled:!1},$t),On=Tn.name;if("string"!=typeof On||!On)throw En.create("bad-app-name",{appName:String(On)});if(gn||(gn=(0,De.aH)()),!gn)throw En.create("no-options");const Vn=tt.get(On);if(Vn){if((0,De.vZ)(gn,Vn.options)&&(0,De.vZ)(Tn,Vn.config))return Vn;throw En.create("duplicate-app",{appName:On})}const xr=new J.H0(On);for(const _e of $e.values())xr.addComponent(_e);const Re=new Fn(gn,Tn,xr);return tt.set(On,Re),Re}function Qn(en=Ee){const $t=tt.get(en);if(!$t&&en===Ee)return Zt();if(!$t)throw En.create("no-app",{appName:en});return $t}function vr(){return Array.from(tt.values())}function lr(en){return hn.apply(this,arguments)}function hn(){return(hn=(0,a.Z)(function*(en){const $t=en.name;tt.has($t)&&(tt.delete($t),yield Promise.all(en.container.getProviders().map(gn=>gn.delete())),en.isDeleted=!0)})).apply(this,arguments)}function _r(en,$t,gn){var Tn;let On=null!==(Tn=be[en])&&void 0!==Tn?Tn:en;gn&&(On+=`-${gn}`);const Vn=On.match(/\s|\//),xr=$t.match(/\s|\//);if(Vn||xr){const Re=[`Unable to register library "${On}" with version "${$t}":`];return Vn&&Re.push(`library name "${On}" contains illegal characters (whitespace or "/")`),Vn&&xr&&Re.push("and"),xr&&Re.push(`version name "${$t}" contains illegal characters (whitespace or "/")`),void ge.warn(Re.join(" "))}Pt(new J.wA(`${On}-version`,()=>({library:On,version:$t}),"VERSION"))}function Wt(en,$t){if(null!==en&&"function"!=typeof en)throw En.create("invalid-log-argument");(0,G.Am)(en,$t)}function Jr(en){(0,G.Ub)(en)}const Cr="firebase-heartbeat-database",Er=1,Zr="firebase-heartbeat-store";let Sr=null;function Dn(){return Sr||(Sr=(0,Me.X3)(Cr,Er,{upgrade:(en,$t)=>{0===$t&&en.createObjectStore(Zr)}}).catch(en=>{throw En.create("idb-open",{originalErrorMessage:en.message})})),Sr}function In(){return(In=(0,a.Z)(function*(en){try{return(yield Dn()).transaction(Zr).objectStore(Zr).get(Kt(en))}catch($t){if($t instanceof De.ZR)ge.warn($t.message);else{const gn=En.create("idb-get",{originalErrorMessage:null==$t?void 0:$t.message});ge.warn(gn.message)}}})).apply(this,arguments)}function An(en,$t){return mr.apply(this,arguments)}function mr(){return(mr=(0,a.Z)(function*(en,$t){try{const Tn=(yield Dn()).transaction(Zr,"readwrite");return yield Tn.objectStore(Zr).put($t,Kt(en)),Tn.done}catch(gn){if(gn instanceof De.ZR)ge.warn(gn.message);else{const Tn=En.create("idb-set",{originalErrorMessage:null==gn?void 0:gn.message});ge.warn(Tn.message)}}})).apply(this,arguments)}function Kt(en){return`${en.name}!${en.options.appId}`}class Li{constructor($t){this.container=$t,this._heartbeatsCache=null;const gn=this.container.getProvider("app").getImmediate();this._storage=new rr(gn),this._heartbeatsCachePromise=this._storage.read().then(Tn=>(this._heartbeatsCache=Tn,Tn))}triggerHeartbeat(){var $t=this;return(0,a.Z)(function*(){const Tn=$t.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),On=Dr();if(null===$t._heartbeatsCache&&($t._heartbeatsCache=yield $t._heartbeatsCachePromise),$t._heartbeatsCache.lastSentHeartbeatDate!==On&&!$t._heartbeatsCache.heartbeats.some(Vn=>Vn.date===On))return $t._heartbeatsCache.heartbeats.push({date:On,agent:Tn}),$t._heartbeatsCache.heartbeats=$t._heartbeatsCache.heartbeats.filter(Vn=>{const xr=new Date(Vn.date).valueOf();return Date.now()-xr<=2592e6}),$t._storage.overwrite($t._heartbeatsCache)})()}getHeartbeatsHeader(){var $t=this;return(0,a.Z)(function*(){if(null===$t._heartbeatsCache&&(yield $t._heartbeatsCachePromise),null===$t._heartbeatsCache||0===$t._heartbeatsCache.heartbeats.length)return"";const gn=Dr(),{heartbeatsToSend:Tn,unsentEntries:On}=function di(en,$t=1024){const gn=[];let Tn=en.slice();for(const On of en){const Vn=gn.find(xr=>xr.agent===On.agent);if(Vn){if(Vn.dates.push(On.date),Nn(gn)>$t){Vn.dates.pop();break}}else if(gn.push({agent:On.agent,dates:[On.date]}),Nn(gn)>$t){gn.pop();break}Tn=Tn.slice(1)}return{heartbeatsToSend:gn,unsentEntries:Tn}}($t._heartbeatsCache.heartbeats),Vn=(0,De.L)(JSON.stringify({version:2,heartbeats:Tn}));return $t._heartbeatsCache.lastSentHeartbeatDate=gn,On.length>0?($t._heartbeatsCache.heartbeats=On,yield $t._storage.overwrite($t._heartbeatsCache)):($t._heartbeatsCache.heartbeats=[],$t._storage.overwrite($t._heartbeatsCache)),Vn})()}}function Dr(){return(new Date).toISOString().substring(0,10)}class rr{constructor($t){this.app=$t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,a.Z)(function*(){return!!(0,De.hl)()&&(0,De.eu)().then(()=>!0).catch(()=>!1)})()}read(){var $t=this;return(0,a.Z)(function*(){return(yield $t._canUseIndexedDBPromise)&&(yield function yn(en){return In.apply(this,arguments)}($t.app))||{heartbeats:[]}})()}overwrite($t){var gn=this;return(0,a.Z)(function*(){var Tn;if(yield gn._canUseIndexedDBPromise){const Vn=yield gn.read();return An(gn.app,{lastSentHeartbeatDate:null!==(Tn=$t.lastSentHeartbeatDate)&&void 0!==Tn?Tn:Vn.lastSentHeartbeatDate,heartbeats:$t.heartbeats})}})()}add($t){var gn=this;return(0,a.Z)(function*(){var Tn;if(yield gn._canUseIndexedDBPromise){const Vn=yield gn.read();return An(gn.app,{lastSentHeartbeatDate:null!==(Tn=$t.lastSentHeartbeatDate)&&void 0!==Tn?Tn:Vn.lastSentHeartbeatDate,heartbeats:[...Vn.heartbeats,...$t.heartbeats]})}})()}}function Nn(en){return(0,De.L)(JSON.stringify({version:2,heartbeats:en})).length}!function hi(en){Pt(new J.wA("platform-logger",$t=>new Ae($t),"PRIVATE")),Pt(new J.wA("heartbeat",$t=>new Li($t),"PRIVATE")),_r(xe,"0.9.5",en),_r(xe,"0.9.5","esm2017"),_r("fire-js","")}("")},4859:(sn,ht,B)=>{"use strict";B.d(ht,{H0:()=>xe,wA:()=>G,zt:()=>Me});var a=B(5861),J=B(2090);class G{constructor(ge,ce,de){this.name=ge,this.instanceFactory=ce,this.type=de,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ge){return this.instantiationMode=ge,this}setMultipleInstances(ge){return this.multipleInstances=ge,this}setServiceProps(ge){return this.serviceProps=ge,this}setInstanceCreatedCallback(ge){return this.onInstanceCreated=ge,this}}const De="[DEFAULT]";class Me{constructor(ge,ce){this.name=ge,this.container=ce,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ge){const ce=this.normalizeInstanceIdentifier(ge);if(!this.instancesDeferred.has(ce)){const de=new J.BH;if(this.instancesDeferred.set(ce,de),this.isInitialized(ce)||this.shouldAutoInitialize())try{const Ce=this.getOrInitializeService({instanceIdentifier:ce});Ce&&de.resolve(Ce)}catch(Ce){}}return this.instancesDeferred.get(ce).promise}getImmediate(ge){var ce;const de=this.normalizeInstanceIdentifier(null==ge?void 0:ge.identifier),Ce=null!==(ce=null==ge?void 0:ge.optional)&&void 0!==ce&&ce;if(!this.isInitialized(de)&&!this.shouldAutoInitialize()){if(Ce)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:de})}catch(Fe){if(Ce)return null;throw Fe}}getComponent(){return this.component}setComponent(ge){if(ge.name!==this.name)throw Error(`Mismatching Component ${ge.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ge,this.shouldAutoInitialize()){if(function he(Ve){return"EAGER"===Ve.instantiationMode}(ge))try{this.getOrInitializeService({instanceIdentifier:De})}catch(ce){}for(const[ce,de]of this.instancesDeferred.entries()){const Ce=this.normalizeInstanceIdentifier(ce);try{const Fe=this.getOrInitializeService({instanceIdentifier:Ce});de.resolve(Fe)}catch(Fe){}}}}clearInstance(ge=De){this.instancesDeferred.delete(ge),this.instancesOptions.delete(ge),this.instances.delete(ge)}delete(){var ge=this;return(0,a.Z)(function*(){const ce=Array.from(ge.instances.values());yield Promise.all([...ce.filter(de=>"INTERNAL"in de).map(de=>de.INTERNAL.delete()),...ce.filter(de=>"_delete"in de).map(de=>de._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ge=De){return this.instances.has(ge)}getOptions(ge=De){return this.instancesOptions.get(ge)||{}}initialize(ge={}){const{options:ce={}}=ge,de=this.normalizeInstanceIdentifier(ge.instanceIdentifier);if(this.isInitialized(de))throw Error(`${this.name}(${de}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ce=this.getOrInitializeService({instanceIdentifier:de,options:ce});for(const[Fe,it]of this.instancesDeferred.entries())de===this.normalizeInstanceIdentifier(Fe)&&it.resolve(Ce);return Ce}onInit(ge,ce){var de;const Ce=this.normalizeInstanceIdentifier(ce),Fe=null!==(de=this.onInitCallbacks.get(Ce))&&void 0!==de?de:new Set;Fe.add(ge),this.onInitCallbacks.set(Ce,Fe);const it=this.instances.get(Ce);return it&&ge(it,Ce),()=>{Fe.delete(ge)}}invokeOnInitCallbacks(ge,ce){const de=this.onInitCallbacks.get(ce);if(de)for(const Ce of de)try{Ce(ge,ce)}catch(Fe){}}getOrInitializeService({instanceIdentifier:ge,options:ce={}}){let de=this.instances.get(ge);if(!de&&this.component&&(de=this.component.instanceFactory(this.container,{instanceIdentifier:(Ve=ge,Ve===De?void 0:Ve),options:ce}),this.instances.set(ge,de),this.instancesOptions.set(ge,ce),this.invokeOnInitCallbacks(de,ge),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ge,de)}catch(Ce){}var Ve;return de||null}normalizeInstanceIdentifier(ge=De){return this.component?this.component.multipleInstances?ge:De:ge}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class xe{constructor(ge){this.name=ge,this.providers=new Map}addComponent(ge){const ce=this.getProvider(ge.name);if(ce.isComponentSet())throw new Error(`Component ${ge.name} has already been registered with ${this.name}`);ce.setComponent(ge)}addOrOverwriteComponent(ge){this.getProvider(ge.name).isComponentSet()&&this.providers.delete(ge.name),this.addComponent(ge)}getProvider(ge){if(this.providers.has(ge))return this.providers.get(ge);const ce=new Me(ge,this);return this.providers.set(ge,ce),ce}getProviders(){return Array.from(this.providers.values())}}},1877:(sn,ht,B)=>{"use strict";B.d(ht,{Am:()=>Ve,Ub:()=>xe,Yd:()=>he,in:()=>J});const a=[];var J=(()=>{return(ge=J||(J={}))[ge.DEBUG=0]="DEBUG",ge[ge.VERBOSE=1]="VERBOSE",ge[ge.INFO=2]="INFO",ge[ge.WARN=3]="WARN",ge[ge.ERROR=4]="ERROR",ge[ge.SILENT=5]="SILENT",J;var ge})();const G={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},De=J.INFO,Me={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},Ae=(ge,ce,...de)=>{if(ce<ge.logLevel)return;const Ce=(new Date).toISOString(),Fe=Me[ce];if(!Fe)throw new Error(`Attempted to log a message with an invalid logType (value: ${ce})`);console[Fe](`[${Ce}]  ${ge.name}:`,...de)};class he{constructor(ce){this.name=ce,this._logLevel=De,this._logHandler=Ae,this._userLogHandler=null,a.push(this)}get logLevel(){return this._logLevel}set logLevel(ce){if(!(ce in J))throw new TypeError(`Invalid value "${ce}" assigned to \`logLevel\``);this._logLevel=ce}setLogLevel(ce){this._logLevel="string"==typeof ce?G[ce]:ce}get logHandler(){return this._logHandler}set logHandler(ce){if("function"!=typeof ce)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ce}get userLogHandler(){return this._userLogHandler}set userLogHandler(ce){this._userLogHandler=ce}debug(...ce){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...ce),this._logHandler(this,J.DEBUG,...ce)}log(...ce){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...ce),this._logHandler(this,J.VERBOSE,...ce)}info(...ce){this._userLogHandler&&this._userLogHandler(this,J.INFO,...ce),this._logHandler(this,J.INFO,...ce)}warn(...ce){this._userLogHandler&&this._userLogHandler(this,J.WARN,...ce),this._logHandler(this,J.WARN,...ce)}error(...ce){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...ce),this._logHandler(this,J.ERROR,...ce)}}function xe(ge){a.forEach(ce=>{ce.setLogLevel(ge)})}function Ve(ge,ce){for(const de of a){let Ce=null;ce&&ce.level&&(Ce=G[ce.level]),de.userLogHandler=null===ge?null:(Fe,it,...Ct)=>{const Te=Ct.map(ye=>{if(null==ye)return null;if("string"==typeof ye)return ye;if("number"==typeof ye||"boolean"==typeof ye)return ye.toString();if(ye instanceof Error)return ye.message;try{return JSON.stringify(ye)}catch(le){return null}}).filter(ye=>ye).join(" ");it>=(null!=Ce?Ce:Fe.logLevel)&&ge({level:J[it].toLowerCase(),message:Te,args:Ct,type:Fe.name})}}}},259:(sn,ht,B)=>{"use strict";B.d(ht,{C6:()=>a.getApps,Mq:()=>a.getApp});var a=B(9681);(0,a.registerVersion)("firebase","9.18.0","app")},9260:(sn,ht,B)=>{"use strict";B.d(ht,{Z:()=>a.Z});var a=B(3942);a.Z.registerVersion("firebase","9.18.0","app-compat")},8971:(sn,ht,B)=>{"use strict";B.r(ht);var a=B(5861),J=B(3942),G=B(2090),De=B(9681),Me=B(1877),Ae=B(655),he=B(4859);const Ve={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},de_EMAIL_SIGNIN="EMAIL_SIGNIN",de_PASSWORD_RESET="PASSWORD_RESET",de_RECOVER_EMAIL="RECOVER_EMAIL",de_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",de_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",de_VERIFY_EMAIL="VERIFY_EMAIL";const it=function Ce(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ct=function Fe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Te=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),le=new Me.Yd("@firebase/auth");function at(b,...m){le.logLevel<=Me.in.ERROR&&le.error(`Auth (${De.SDK_VERSION}): ${b}`,...m)}function st(b,...m){throw Oe(b,...m)}function Xe(b,...m){return Oe(b,...m)}function Ze(b,m,I){const M=Object.assign(Object.assign({},Ct()),{[m]:I});return new G.LL("auth","Firebase",M).create(m,{appName:b.name})}function Pe(b,m,I){if(!(m instanceof I))throw I.name!==m.constructor.name&&st(b,"argument-error"),Ze(b,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Oe(b,...m){if("string"!=typeof b){const I=m[0],M=[...m.slice(1)];return M[0]&&(M[0].appName=b.name),b._errorFactory.create(I,...M)}return Te.create(b,...m)}function Q(b,m,...I){if(!b)throw Oe(m,...I)}function et(b){const m="INTERNAL ASSERTION FAILED: "+b;throw at(m),new Error(m)}function ke(b,m){b||et(m)}const He=new Map;function Ge(b){ke(b instanceof Function,"Expected a class definition");let m=He.get(b);return m?(ke(m instanceof b,"Instance stored in cache mismatched with class"),m):(m=new b,He.set(b,m),m)}function ft(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function nt(){return"http:"===Ie()||"https:"===Ie()}function Ie(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class tt{constructor(m,I){this.shortDelay=m,this.longDelay=I,ke(I>m,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function Ee(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(nt()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function $e(b,m){ke(b.emulator,"Emulator should always be set here");const{url:I}=b.emulator;return m?`${I}${m.startsWith("/")?m.slice(1):m}`:I}class Je{static initialize(m,I,M){this.fetchImpl=m,I&&(this.headersImpl=I),M&&(this.responseImpl=M)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void et("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void et("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void et("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ke={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Pt=new tt(3e4,6e4);function At(b,m){return b.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:b.tenantId}):m}function Nt(b,m,I,M){return vt.apply(this,arguments)}function vt(){return(vt=(0,a.Z)(function*(b,m,I,M,Y={}){return Sn(b,Y,(0,a.Z)(function*(){let oe={},dt={};M&&("GET"===m?dt=M:oe={body:JSON.stringify(M)});const Vt=(0,G.xO)(Object.assign({key:b.config.apiKey},dt)).slice(1),vn=yield b._getAdditionalHeaders();return vn["Content-Type"]="application/json",b.languageCode&&(vn["X-Firebase-Locale"]=b.languageCode),Je.fetch()(Zt(b,b.config.apiHost,I,Vt),Object.assign({method:m,headers:vn,referrerPolicy:"no-referrer"},oe))}))})).apply(this,arguments)}function Sn(b,m,I){return En.apply(this,arguments)}function En(){return(En=(0,a.Z)(function*(b,m,I){b._canInitEmulator=!1;const M=Object.assign(Object.assign({},Ke),m);try{const Y=new Qn(b),oe=yield Promise.race([I(),Y.promise]);Y.clearNetworkTimeout();const dt=yield oe.json();if("needConfirmation"in dt)throw vr(b,"account-exists-with-different-credential",dt);if(oe.ok&&!("errorMessage"in dt))return dt;{const Vt=oe.ok?dt.errorMessage:dt.error.message,[vn,Un]=Vt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===vn)throw vr(b,"credential-already-in-use",dt);if("EMAIL_EXISTS"===vn)throw vr(b,"email-already-in-use",dt);if("USER_DISABLED"===vn)throw vr(b,"user-disabled",dt);const wr=M[vn]||vn.toLowerCase().replace(/[_\s]+/g,"-");if(Un)throw Ze(b,wr,Un);st(b,wr)}}catch(Y){if(Y instanceof G.ZR)throw Y;st(b,"internal-error",{message:String(Y)})}})).apply(this,arguments)}function Fn(b,m,I,M){return $n.apply(this,arguments)}function $n(){return($n=(0,a.Z)(function*(b,m,I,M,Y={}){const oe=yield Nt(b,m,I,M,Y);return"mfaPendingCredential"in oe&&st(b,"multi-factor-auth-required",{_serverResponse:oe}),oe})).apply(this,arguments)}function Zt(b,m,I,M){const Y=`${m}${I}?${M}`;return b.config.emulator?$e(b.config,Y):`${b.config.apiScheme}://${Y}`}class Qn{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((I,M)=>{this.timer=setTimeout(()=>M(Xe(this.auth,"network-request-failed")),Pt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vr(b,m,I){const M={appName:b.name};I.email&&(M.email=I.email),I.phoneNumber&&(M.phoneNumber=I.phoneNumber);const Y=Xe(b,m,M);return Y.customData._tokenResponse=I,Y}function hn(){return(hn=(0,a.Z)(function*(b,m){return Nt(b,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Wt(){return(Wt=(0,a.Z)(function*(b,m){return Nt(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Cr(){return(Cr=(0,a.Z)(function*(b,m){return Nt(b,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Er(b){if(b)try{const m=new Date(Number(b));if(!isNaN(m.getTime()))return m.toUTCString()}catch(m){}}function Dn(){return(Dn=(0,a.Z)(function*(b,m=!1){const I=(0,G.m9)(b),M=yield I.getIdToken(m),Y=In(M);Q(Y&&Y.exp&&Y.auth_time&&Y.iat,I.auth,"internal-error");const oe="object"==typeof Y.firebase?Y.firebase:void 0,dt=null==oe?void 0:oe.sign_in_provider;return{claims:Y,token:M,authTime:Er(yn(Y.auth_time)),issuedAtTime:Er(yn(Y.iat)),expirationTime:Er(yn(Y.exp)),signInProvider:dt||null,signInSecondFactor:(null==oe?void 0:oe.sign_in_second_factor)||null}})).apply(this,arguments)}function yn(b){return 1e3*Number(b)}function In(b){const[m,I,M]=b.split(".");if(void 0===m||void 0===I||void 0===M)return at("JWT malformed, contained fewer than 3 sections"),null;try{const Y=(0,G.tV)(I);return Y?JSON.parse(Y):(at("Failed to decode base64 JWT payload"),null)}catch(Y){return at("Caught error parsing JWT payload as JSON",null==Y?void 0:Y.toString()),null}}function mr(b,m){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,a.Z)(function*(b,m,I=!1){if(I)return m;try{return yield m}catch(M){throw M instanceof G.ZR&&function Ar({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}(M)&&b.auth.currentUser===b&&(yield b.auth.signOut()),M}})).apply(this,arguments)}class yi{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var I;if(m){const M=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),M}{this.errorBackoff=3e4;const Y=(null!==(I=this.user.stsTokenManager.expirationTime)&&void 0!==I?I:0)-Date.now()-3e5;return Math.max(0,Y)}}schedule(m=!1){var I=this;if(!this.isRunning)return;const M=this.getInterval(m);this.timerId=setTimeout((0,a.Z)(function*(){yield I.iteration()}),M)}iteration(){var m=this;return(0,a.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(I){return void("auth/network-request-failed"===(null==I?void 0:I.code)&&m.schedule(!0))}m.schedule()})()}}class Li{constructor(m,I){this.createdAt=m,this.lastLoginAt=I,this._initializeTime()}_initializeTime(){this.lastSignInTime=Er(this.lastLoginAt),this.creationTime=Er(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Dr(b){return di.apply(this,arguments)}function di(){return di=(0,a.Z)(function*(b){var m;const I=b.auth,M=yield b.getIdToken(),Y=yield mr(b,function Jr(b,m){return Cr.apply(this,arguments)}(I,{idToken:M}));Q(null==Y?void 0:Y.users.length,I,"internal-error");const oe=Y.users[0];b._notifyReloadListener(oe);const dt=null!==(m=oe.providerUserInfo)&&void 0!==m&&m.length?function en(b){return b.map(m=>{var{providerId:I}=m,M=(0,Ae._T)(m,["providerId"]);return{providerId:I,uid:M.rawId||"",displayName:M.displayName||null,email:M.email||null,phoneNumber:M.phoneNumber||null,photoURL:M.photoUrl||null}})}(oe.providerUserInfo):[],Vt=function hi(b,m){return[...b.filter(M=>!m.some(Y=>Y.providerId===M.providerId)),...m]}(b.providerData,dt),wr=!!b.isAnonymous&&!(b.email&&oe.passwordHash||null!=Vt&&Vt.length),yr={uid:oe.localId,displayName:oe.displayName||null,photoURL:oe.photoUrl||null,email:oe.email||null,emailVerified:oe.emailVerified||!1,phoneNumber:oe.phoneNumber||null,tenantId:oe.tenantId||null,providerData:Vt,metadata:new Li(oe.createdAt,oe.lastLoginAt),isAnonymous:wr};Object.assign(b,yr)}),di.apply(this,arguments)}function Nn(){return(Nn=(0,a.Z)(function*(b){const m=(0,G.m9)(b);yield Dr(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function gn(){return(gn=(0,a.Z)(function*(b,m){const I=yield Sn(b,{},(0,a.Z)(function*(){const M=(0,G.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:Y,apiKey:oe}=b.config,dt=Zt(b,Y,"/v1/token",`key=${oe}`),Vt=yield b._getAdditionalHeaders();return Vt["Content-Type"]="application/x-www-form-urlencoded",Je.fetch()(dt,{method:"POST",headers:Vt,body:M})}));return{accessToken:I.access_token,expiresIn:I.expires_in,refreshToken:I.refresh_token}})).apply(this,arguments)}class Tn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){Q(m.idToken,"internal-error"),Q(typeof m.idToken<"u","internal-error"),Q(typeof m.refreshToken<"u","internal-error");const I="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function An(b){const m=In(b);return Q(m,"internal-error"),Q(typeof m.exp<"u","internal-error"),Q(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,I)}getToken(m,I=!1){var M=this;return(0,a.Z)(function*(){return Q(!M.accessToken||M.refreshToken,m,"user-token-expired"),I||!M.accessToken||M.isExpired?M.refreshToken?(yield M.refresh(m,M.refreshToken),M.accessToken):null:M.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,I){var M=this;return(0,a.Z)(function*(){const{accessToken:Y,refreshToken:oe,expiresIn:dt}=yield function $t(b,m){return gn.apply(this,arguments)}(m,I);M.updateTokensAndExpiration(Y,oe,Number(dt))})()}updateTokensAndExpiration(m,I,M){this.refreshToken=I||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*M}static fromJSON(m,I){const{refreshToken:M,accessToken:Y,expirationTime:oe}=I,dt=new Tn;return M&&(Q("string"==typeof M,"internal-error",{appName:m}),dt.refreshToken=M),Y&&(Q("string"==typeof Y,"internal-error",{appName:m}),dt.accessToken=Y),oe&&(Q("number"==typeof oe,"internal-error",{appName:m}),dt.expirationTime=oe),dt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Tn,this.toJSON())}_performRefresh(){return et("not implemented")}}function On(b,m){Q("string"==typeof b||typeof b>"u","internal-error",{appName:m})}class Vn{constructor(m){var{uid:I,auth:M,stsTokenManager:Y}=m,oe=(0,Ae._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=I,this.auth=M,this.stsTokenManager=Y,this.accessToken=Y.accessToken,this.displayName=oe.displayName||null,this.email=oe.email||null,this.emailVerified=oe.emailVerified||!1,this.phoneNumber=oe.phoneNumber||null,this.photoURL=oe.photoURL||null,this.isAnonymous=oe.isAnonymous||!1,this.tenantId=oe.tenantId||null,this.providerData=oe.providerData?[...oe.providerData]:[],this.metadata=new Li(oe.createdAt||void 0,oe.lastLoginAt||void 0)}getIdToken(m){var I=this;return(0,a.Z)(function*(){const M=yield mr(I,I.stsTokenManager.getToken(I.auth,m));return Q(M,I.auth,"internal-error"),I.accessToken!==M&&(I.accessToken=M,yield I.auth._persistUserIfCurrent(I),I.auth._notifyListenersIfCurrent(I)),M})()}getIdTokenResult(m){return function Sr(b){return Dn.apply(this,arguments)}(this,m)}reload(){return function rr(b){return Nn.apply(this,arguments)}(this)}_assign(m){this!==m&&(Q(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(I=>Object.assign({},I)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const I=new Vn(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return I.metadata._copy(this.metadata),I}_onReload(m){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,I=!1){var M=this;return(0,a.Z)(function*(){let Y=!1;m.idToken&&m.idToken!==M.stsTokenManager.accessToken&&(M.stsTokenManager.updateFromServerResponse(m),Y=!0),I&&(yield Dr(M)),yield M.auth._persistUserIfCurrent(M),Y&&M.auth._notifyListenersIfCurrent(M)})()}delete(){var m=this;return(0,a.Z)(function*(){const I=yield m.getIdToken();return yield mr(m,function lr(b,m){return hn.apply(this,arguments)}(m.auth,{idToken:I})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,I){var M,Y,oe,dt,Vt,vn,Un,wr;const yr=null!==(M=I.displayName)&&void 0!==M?M:void 0,Fs=null!==(Y=I.email)&&void 0!==Y?Y:void 0,Ea=null!==(oe=I.phoneNumber)&&void 0!==oe?oe:void 0,hc=null!==(dt=I.photoURL)&&void 0!==dt?dt:void 0,ka=null!==(Vt=I.tenantId)&&void 0!==Vt?Vt:void 0,jc=null!==(vn=I._redirectEventId)&&void 0!==vn?vn:void 0,$u=null!==(Un=I.createdAt)&&void 0!==Un?Un:void 0,Ga=null!==(wr=I.lastLoginAt)&&void 0!==wr?wr:void 0,{uid:gu,emailVerified:za,isAnonymous:Kl,providerData:fc,stsTokenManager:Lh}=I;Q(gu&&Lh,m,"internal-error");const $h=Tn.fromJSON(this.name,Lh);Q("string"==typeof gu,m,"internal-error"),On(yr,m.name),On(Fs,m.name),Q("boolean"==typeof za,m,"internal-error"),Q("boolean"==typeof Kl,m,"internal-error"),On(Ea,m.name),On(hc,m.name),On(ka,m.name),On(jc,m.name),On($u,m.name),On(Ga,m.name);const Po=new Vn({uid:gu,auth:m,email:Fs,emailVerified:za,displayName:yr,isAnonymous:Kl,photoURL:hc,phoneNumber:Ea,tenantId:ka,stsTokenManager:$h,createdAt:$u,lastLoginAt:Ga});return fc&&Array.isArray(fc)&&(Po.providerData=fc.map(_d=>Object.assign({},_d))),jc&&(Po._redirectEventId=jc),Po}static _fromIdTokenResponse(m,I,M=!1){return(0,a.Z)(function*(){const Y=new Tn;Y.updateFromServerResponse(I);const oe=new Vn({uid:I.localId,auth:m,stsTokenManager:Y,isAnonymous:M});return yield Dr(oe),oe})()}}const Re=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,a.Z)(function*(){return!0})()}_set(I,M){var Y=this;return(0,a.Z)(function*(){Y.storage[I]=M})()}_get(I){var M=this;return(0,a.Z)(function*(){const Y=M.storage[I];return void 0===Y?null:Y})()}_remove(I){var M=this;return(0,a.Z)(function*(){delete M.storage[I]})()}_addListener(I,M){}_removeListener(I,M){}}return b.type="NONE",b})();function _e(b,m,I){return`firebase:${b}:${m}:${I}`}class ze{constructor(m,I,M){this.persistence=m,this.auth=I,this.userKey=M;const{config:Y,name:oe}=this.auth;this.fullUserKey=_e(this.userKey,Y.apiKey,oe),this.fullPersistenceKey=_e("persistence",Y.apiKey,oe),this.boundEventHandler=I._onStorageEvent.bind(I),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,a.Z)(function*(){const I=yield m.persistence._get(m.fullUserKey);return I?Vn._fromJSON(m.auth,I):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var I=this;return(0,a.Z)(function*(){if(I.persistence===m)return;const M=yield I.getCurrentUser();return yield I.removeCurrentUser(),I.persistence=m,M?I.setCurrentUser(M):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,I,M="authUser"){return(0,a.Z)(function*(){if(!I.length)return new ze(Ge(Re),m,M);const Y=(yield Promise.all(I.map(function(){var Un=(0,a.Z)(function*(wr){if(yield wr._isAvailable())return wr});return function(wr){return Un.apply(this,arguments)}}()))).filter(Un=>Un);let oe=Y[0]||Ge(Re);const dt=_e(M,m.config.apiKey,m.name);let Vt=null;for(const Un of I)try{const wr=yield Un._get(dt);if(wr){const yr=Vn._fromJSON(m,wr);Un!==oe&&(Vt=yr),oe=Un;break}}catch(wr){}const vn=Y.filter(Un=>Un._shouldAllowMigration);return oe._shouldAllowMigration&&vn.length?(oe=vn[0],Vt&&(yield oe._set(dt,Vt.toJSON())),yield Promise.all(I.map(function(){var Un=(0,a.Z)(function*(wr){if(wr!==oe)try{yield wr._remove(dt)}catch(yr){}});return function(wr){return Un.apply(this,arguments)}}())),new ze(oe,m,M)):new ze(oe,m,M)})()}}function Mt(b){const m=b.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Be(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(gt(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(mt(m))return"Blackberry";if(Rt(m))return"Webos";if(dn(m))return"Safari";if((m.includes("chrome/")||Le(m))&&!m.includes("edge/"))return"Chrome";if(me(m))return"Android";{const M=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==M?void 0:M.length))return M[1]}return"Other"}function gt(b=(0,G.z$)()){return/firefox\//i.test(b)}function dn(b=(0,G.z$)()){const m=b.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function Le(b=(0,G.z$)()){return/crios\//i.test(b)}function Be(b=(0,G.z$)()){return/iemobile/i.test(b)}function me(b=(0,G.z$)()){return/android/i.test(b)}function mt(b=(0,G.z$)()){return/blackberry/i.test(b)}function Rt(b=(0,G.z$)()){return/webos/i.test(b)}function jt(b=(0,G.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function $i(b=(0,G.z$)()){return jt(b)||me(b)||Rt(b)||mt(b)||/windows phone/i.test(b)||Be(b)}function Yi(b,m=[]){let I;switch(b){case"Browser":I=Mt((0,G.z$)());break;case"Worker":I=`${Mt((0,G.z$)())}-${b}`;break;default:I=b}const M=m.length?m.join(","):"FirebaseCore-web";return`${I}/JsCore/${De.SDK_VERSION}/${M}`}class fi{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,I){const M=oe=>new Promise((dt,Vt)=>{try{dt(m(oe))}catch(vn){Vt(vn)}});M.onAbort=I,this.queue.push(M);const Y=this.queue.length-1;return()=>{this.queue[Y]=()=>Promise.resolve()}}runMiddleware(m){var I=this;return(0,a.Z)(function*(){if(I.auth.currentUser===m)return;const M=[];try{for(const Y of I.queue)yield Y(m),Y.onAbort&&M.push(Y.onAbort)}catch(Y){M.reverse();for(const oe of M)try{oe()}catch(dt){}throw I.auth._errorFactory.create("login-blocked",{originalMessage:null==Y?void 0:Y.message})}})()}}class Oi{constructor(m,I,M){this.app=m,this.heartbeatServiceProvider=I,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new is(this),this.idTokenSubscription=new is(this),this.beforeStateQueue=new fi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Te,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(m,I){var M=this;return I&&(this._popupRedirectResolver=Ge(I)),this._initializationPromise=this.queue((0,a.Z)(function*(){var Y,oe;if(!M._deleted&&(M.persistenceManager=yield ze.create(M,m),!M._deleted)){if(null!==(Y=M._popupRedirectResolver)&&void 0!==Y&&Y._shouldInitProactively)try{yield M._popupRedirectResolver._initialize(M)}catch(dt){}yield M.initializeCurrentUser(I),M.lastNotifiedUid=(null===(oe=M.currentUser)||void 0===oe?void 0:oe.uid)||null,!M._deleted&&(M._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,a.Z)(function*(){if(m._deleted)return;const I=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||I){if(m.currentUser&&I&&m.currentUser.uid===I.uid)return m._currentUser._assign(I),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(I,!0)}})()}initializeCurrentUser(m){var I=this;return(0,a.Z)(function*(){var M;const Y=yield I.assertedPersistence.getCurrentUser();let oe=Y,dt=!1;if(m&&I.config.authDomain){yield I.getOrInitRedirectPersistenceManager();const Vt=null===(M=I.redirectUser)||void 0===M?void 0:M._redirectEventId,vn=null==oe?void 0:oe._redirectEventId,Un=yield I.tryRedirectSignIn(m);(!Vt||Vt===vn)&&null!=Un&&Un.user&&(oe=Un.user,dt=!0)}if(!oe)return I.directlySetCurrentUser(null);if(!oe._redirectEventId){if(dt)try{yield I.beforeStateQueue.runMiddleware(oe)}catch(Vt){oe=Y,I._popupRedirectResolver._overrideRedirectResult(I,()=>Promise.reject(Vt))}return oe?I.reloadAndSetCurrentUserOrClear(oe):I.directlySetCurrentUser(null)}return Q(I._popupRedirectResolver,I,"argument-error"),yield I.getOrInitRedirectPersistenceManager(),I.redirectUser&&I.redirectUser._redirectEventId===oe._redirectEventId?I.directlySetCurrentUser(oe):I.reloadAndSetCurrentUserOrClear(oe)})()}tryRedirectSignIn(m){var I=this;return(0,a.Z)(function*(){let M=null;try{M=yield I._popupRedirectResolver._completeRedirectFn(I,m,!0)}catch(Y){yield I._setRedirectUser(null)}return M})()}reloadAndSetCurrentUserOrClear(m){var I=this;return(0,a.Z)(function*(){try{yield Dr(m)}catch(M){if("auth/network-request-failed"!==(null==M?void 0:M.code))return I.directlySetCurrentUser(null)}return I.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function be(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var m=this;return(0,a.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var I=this;return(0,a.Z)(function*(){const M=m?(0,G.m9)(m):null;return M&&Q(M.auth.config.apiKey===I.config.apiKey,I,"invalid-user-token"),I._updateCurrentUser(M&&M._clone(I))})()}_updateCurrentUser(m,I=!1){var M=this;return(0,a.Z)(function*(){if(!M._deleted)return m&&Q(M.tenantId===m.tenantId,M,"tenant-id-mismatch"),I||(yield M.beforeStateQueue.runMiddleware(m)),M.queue((0,a.Z)(function*(){yield M.directlySetCurrentUser(m),M.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,a.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var I=this;return this.queue((0,a.Z)(function*(){yield I.assertedPersistence.setPersistence(Ge(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new G.LL("auth","Firebase",m())}onAuthStateChanged(m,I,M){return this.registerStateListener(this.authStateSubscription,m,I,M)}beforeAuthStateChanged(m,I){return this.beforeStateQueue.pushCallback(m,I)}onIdTokenChanged(m,I,M){return this.registerStateListener(this.idTokenSubscription,m,I,M)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,I){var M=this;return(0,a.Z)(function*(){const Y=yield M.getOrInitRedirectPersistenceManager(I);return null===m?Y.removeCurrentUser():Y.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var I=this;return(0,a.Z)(function*(){if(!I.redirectPersistenceManager){const M=m&&Ge(m)||I._popupRedirectResolver;Q(M,I,"argument-error"),I.redirectPersistenceManager=yield ze.create(I,[Ge(M._redirectPersistence)],"redirectUser"),I.redirectUser=yield I.redirectPersistenceManager.getCurrentUser()}return I.redirectPersistenceManager})()}_redirectUserForId(m){var I=this;return(0,a.Z)(function*(){var M,Y;return I._isInitialized&&(yield I.queue((0,a.Z)(function*(){}))),(null===(M=I._currentUser)||void 0===M?void 0:M._redirectEventId)===m?I._currentUser:(null===(Y=I.redirectUser)||void 0===Y?void 0:Y._redirectEventId)===m?I.redirectUser:null})()}_persistUserIfCurrent(m){var I=this;return(0,a.Z)(function*(){if(m===I.currentUser)return I.queue((0,a.Z)(function*(){return I.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,I;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const M=null!==(I=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==I?I:null;this.lastNotifiedUid!==M&&(this.lastNotifiedUid=M,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,I,M,Y){if(this._deleted)return()=>{};const oe="function"==typeof I?I:I.next.bind(I),dt=this._isInitialized?Promise.resolve():this._initializationPromise;return Q(dt,this,"internal-error"),dt.then(()=>oe(this.currentUser)),"function"==typeof I?m.addObserver(I,M,Y):m.addObserver(I)}directlySetCurrentUser(m){var I=this;return(0,a.Z)(function*(){I.currentUser&&I.currentUser!==m&&I._currentUser._stopProactiveRefresh(),m&&I.isProactiveRefreshEnabled&&m._startProactiveRefresh(),I.currentUser=m,m?yield I.assertedPersistence.setCurrentUser(m):yield I.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Yi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,a.Z)(function*(){var I;const M={"X-Client-Version":m.clientVersion};m.app.options.appId&&(M["X-Firebase-gmpid"]=m.app.options.appId);const Y=yield null===(I=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===I?void 0:I.getHeartbeatsHeader();return Y&&(M["X-Firebase-Client"]=Y),M})()}}function Rr(b){return(0,G.m9)(b)}class is{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,G.ne)(I=>this.observer=I)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Zn(b){const m=b.indexOf(":");return m<0?"":b.substr(0,m+1)}function kr(b){if(!b)return null;const m=Number(b);return isNaN(m)?null:m}class ei{constructor(m,I){this.providerId=m,this.signInMethod=I}toJSON(){return et("not implemented")}_getIdTokenResponse(m){return et("not implemented")}_linkToIdToken(m,I){return et("not implemented")}_getReauthenticationResolver(m){return et("not implemented")}}function jr(b,m){return ji.apply(this,arguments)}function ji(){return(ji=(0,a.Z)(function*(b,m){return Nt(b,"POST","/v1/accounts:resetPassword",At(b,m))})).apply(this,arguments)}function Ji(b,m){return Si.apply(this,arguments)}function Si(){return(Si=(0,a.Z)(function*(b,m){return Nt(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Kn(){return(Kn=(0,a.Z)(function*(b,m){return Nt(b,"POST","/v1/accounts:update",At(b,m))})).apply(this,arguments)}function ti(){return(ti=(0,a.Z)(function*(b,m){return Fn(b,"POST","/v1/accounts:signInWithPassword",At(b,m))})).apply(this,arguments)}function Hi(b,m){return ee.apply(this,arguments)}function ee(){return(ee=(0,a.Z)(function*(b,m){return Nt(b,"POST","/v1/accounts:sendOobCode",At(b,m))})).apply(this,arguments)}function We(){return(We=(0,a.Z)(function*(b,m){return Hi(b,m)})).apply(this,arguments)}function xt(){return(xt=(0,a.Z)(function*(b,m){return Hi(b,m)})).apply(this,arguments)}function qe(){return(qe=(0,a.Z)(function*(b,m){return Hi(b,m)})).apply(this,arguments)}function Dt(){return(Dt=(0,a.Z)(function*(b,m){return Hi(b,m)})).apply(this,arguments)}function Xt(){return(Xt=(0,a.Z)(function*(b,m){return Fn(b,"POST","/v1/accounts:signInWithEmailLink",At(b,m))})).apply(this,arguments)}function Mn(){return(Mn=(0,a.Z)(function*(b,m){return Fn(b,"POST","/v1/accounts:signInWithEmailLink",At(b,m))})).apply(this,arguments)}class Ir extends ei{constructor(m,I,M,Y=null){super("password",M),this._email=m,this._password=I,this._tenantId=Y}static _fromEmailAndPassword(m,I){return new Ir(m,I,"password")}static _fromEmailAndCode(m,I,M=null){return new Ir(m,I,"emailLink",M)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const I="string"==typeof m?JSON.parse(m):m;if(null!=I&&I.email&&null!=I&&I.password){if("password"===I.signInMethod)return this._fromEmailAndPassword(I.email,I.password);if("emailLink"===I.signInMethod)return this._fromEmailAndCode(I.email,I.password,I.tenantId)}return null}_getIdTokenResponse(m){var I=this;return(0,a.Z)(function*(){switch(I.signInMethod){case"password":return function Tr(b,m){return ti.apply(this,arguments)}(m,{returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Ft(b,m){return Xt.apply(this,arguments)}(m,{email:I._email,oobCode:I._password});default:st(m,"internal-error")}})()}_linkToIdToken(m,I){var M=this;return(0,a.Z)(function*(){switch(M.signInMethod){case"password":return Ji(m,{idToken:I,returnSecureToken:!0,email:M._email,password:M._password});case"emailLink":return function wn(b,m){return Mn.apply(this,arguments)}(m,{idToken:I,email:M._email,oobCode:M._password});default:st(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Kr(b,m){return ot.apply(this,arguments)}function ot(){return(ot=(0,a.Z)(function*(b,m){return Fn(b,"POST","/v1/accounts:signInWithIdp",At(b,m))})).apply(this,arguments)}class yt extends ei{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const I=new yt(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(I.idToken=m.idToken),m.accessToken&&(I.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(I.nonce=m.nonce),m.pendingToken&&(I.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(I.accessToken=m.oauthToken,I.secret=m.oauthTokenSecret):st("argument-error"),I}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const I="string"==typeof m?JSON.parse(m):m,{providerId:M,signInMethod:Y}=I,oe=(0,Ae._T)(I,["providerId","signInMethod"]);if(!M||!Y)return null;const dt=new yt(M,Y);return dt.idToken=oe.idToken||void 0,dt.accessToken=oe.accessToken||void 0,dt.secret=oe.secret,dt.nonce=oe.nonce,dt.pendingToken=oe.pendingToken||null,dt}_getIdTokenResponse(m){return Kr(m,this.buildRequest())}_linkToIdToken(m,I){const M=this.buildRequest();return M.idToken=I,Kr(m,M)}_getReauthenticationResolver(m){const I=this.buildRequest();return I.autoCreate=!1,Kr(m,I)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const I={};this.idToken&&(I.id_token=this.idToken),this.accessToken&&(I.access_token=this.accessToken),this.secret&&(I.oauth_token_secret=this.secret),I.providerId=this.providerId,this.nonce&&!this.pendingToken&&(I.nonce=this.nonce),m.postBody=(0,G.xO)(I)}return m}}function tn(){return(tn=(0,a.Z)(function*(b,m){return Nt(b,"POST","/v1/accounts:sendVerificationCode",At(b,m))})).apply(this,arguments)}function zn(){return(zn=(0,a.Z)(function*(b,m){return Fn(b,"POST","/v1/accounts:signInWithPhoneNumber",At(b,m))})).apply(this,arguments)}function sr(){return(sr=(0,a.Z)(function*(b,m){const I=yield Fn(b,"POST","/v1/accounts:signInWithPhoneNumber",At(b,m));if(I.temporaryProof)throw vr(b,"account-exists-with-different-credential",I);return I})).apply(this,arguments)}const br={USER_NOT_FOUND:"user-not-found"};function Bn(){return(Bn=(0,a.Z)(function*(b,m){return Fn(b,"POST","/v1/accounts:signInWithPhoneNumber",At(b,Object.assign(Object.assign({},m),{operation:"REAUTH"})),br)})).apply(this,arguments)}class qi extends ei{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,I){return new qi({verificationId:m,verificationCode:I})}static _fromTokenResponse(m,I){return new qi({phoneNumber:m,temporaryProof:I})}_getIdTokenResponse(m){return function kn(b,m){return zn.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,I){return function Qr(b,m){return sr.apply(this,arguments)}(m,Object.assign({idToken:I},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Yn(b,m){return Bn.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:I,verificationId:M,verificationCode:Y}=this.params;return m&&I?{temporaryProof:m,phoneNumber:I}:{sessionInfo:M,code:Y}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:I,verificationCode:M,phoneNumber:Y,temporaryProof:oe}=m;return M||I||Y||oe?new qi({verificationId:I,verificationCode:M,phoneNumber:Y,temporaryProof:oe}):null}}class Gi{constructor(m){var I,M,Y,oe,dt,Vt;const vn=(0,G.zd)((0,G.pd)(m)),Un=null!==(I=vn.apiKey)&&void 0!==I?I:null,wr=null!==(M=vn.oobCode)&&void 0!==M?M:null,yr=function Br(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(Y=vn.mode)&&void 0!==Y?Y:null);Q(Un&&wr&&yr,"argument-error"),this.apiKey=Un,this.operation=yr,this.code=wr,this.continueUrl=null!==(oe=vn.continueUrl)&&void 0!==oe?oe:null,this.languageCode=null!==(dt=vn.languageCode)&&void 0!==dt?dt:null,this.tenantId=null!==(Vt=vn.tenantId)&&void 0!==Vt?Vt:null}static parseLink(m){const I=function ds(b){const m=(0,G.zd)((0,G.pd)(b)).link,I=m?(0,G.zd)((0,G.pd)(m)).deep_link_id:null,M=(0,G.zd)((0,G.pd)(b)).deep_link_id;return(M?(0,G.zd)((0,G.pd)(M)).link:null)||M||I||m||b}(m);try{return new Gi(I)}catch(M){return null}}}let Eo=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(I,M){return Ir._fromEmailAndPassword(I,M)}static credentialWithLink(I,M){const Y=Gi.parseLink(M);return Q(Y,"argument-error"),Ir._fromEmailAndCode(I,Y.code,Y.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Fr{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class qn extends Fr{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class ni extends qn{static credentialFromJSON(m){const I="string"==typeof m?JSON.parse(m):m;return Q("providerId"in I&&"signInMethod"in I,"argument-error"),yt._fromParams(I)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return Q(m.idToken||m.accessToken,"argument-error"),yt._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return ni.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return ni.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:I,oauthAccessToken:M,oauthTokenSecret:Y,pendingToken:oe,nonce:dt,providerId:Vt}=m;if(!M&&!Y&&!I&&!oe||!Vt)return null;try{return new ni(Vt)._credential({idToken:I,accessToken:M,nonce:dt,pendingToken:oe})}catch(vn){return null}}}let Io=(()=>{class b extends qn{constructor(){super("facebook.com")}static credential(I){return yt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:I})}static credentialFromResult(I){return b.credentialFromTaggedObject(I)}static credentialFromError(I){return b.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I||!("oauthAccessToken"in I)||!I.oauthAccessToken)return null;try{return b.credential(I.oauthAccessToken)}catch(M){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),qs=(()=>{class b extends qn{constructor(){super("google.com"),this.addScope("profile")}static credential(I,M){return yt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:I,accessToken:M})}static credentialFromResult(I){return b.credentialFromTaggedObject(I)}static credentialFromError(I){return b.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthIdToken:M,oauthAccessToken:Y}=I;if(!M&&!Y)return null;try{return b.credential(M,Y)}catch(oe){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),zi=(()=>{class b extends qn{constructor(){super("github.com")}static credential(I){return yt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:I})}static credentialFromResult(I){return b.credentialFromTaggedObject(I)}static credentialFromError(I){return b.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I||!("oauthAccessToken"in I)||!I.oauthAccessToken)return null;try{return b.credential(I.oauthAccessToken)}catch(M){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class Is extends ei{constructor(m,I){super(m,m),this.pendingToken=I}_getIdTokenResponse(m){return Kr(m,this.buildRequest())}_linkToIdToken(m,I){const M=this.buildRequest();return M.idToken=I,Kr(m,M)}_getReauthenticationResolver(m){const I=this.buildRequest();return I.autoCreate=!1,Kr(m,I)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const I="string"==typeof m?JSON.parse(m):m,{providerId:M,signInMethod:Y,pendingToken:oe}=I;return M&&Y&&oe&&M===Y?new Is(M,oe):null}static _create(m,I){return new Is(m,I)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ss extends Fr{constructor(m){Q(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return ss.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return ss.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const I=Is.fromJSON(m);return Q(I,"argument-error"),I}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:I,providerId:M}=m;if(!I||!M)return null;try{return Is._create(M,I)}catch(Y){return null}}}let Qs=(()=>{class b extends qn{constructor(){super("twitter.com")}static credential(I,M){return yt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:I,oauthTokenSecret:M})}static credentialFromResult(I){return b.credentialFromTaggedObject(I)}static credentialFromError(I){return b.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthAccessToken:M,oauthTokenSecret:Y}=I;if(!M||!Y)return null;try{return b.credential(M,Y)}catch(oe){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function Xs(b,m){return $s.apply(this,arguments)}function $s(){return($s=(0,a.Z)(function*(b,m){return Fn(b,"POST","/v1/accounts:signUp",At(b,m))})).apply(this,arguments)}class Ai{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,I,M,Y=!1){return(0,a.Z)(function*(){const oe=yield Vn._fromIdTokenResponse(m,M,Y),dt=Wi(M);return new Ai({user:oe,providerId:dt,_tokenResponse:M,operationType:I})})()}static _forOperation(m,I,M){return(0,a.Z)(function*(){yield m._updateTokensIfNecessary(M,!0);const Y=Wi(M);return new Ai({user:m,providerId:Y,_tokenResponse:M,operationType:I})})()}}function Wi(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function oo(){return(oo=(0,a.Z)(function*(b){var m;const I=Rr(b);if(yield I._initializationPromise,null!==(m=I.currentUser)&&void 0!==m&&m.isAnonymous)return new Ai({user:I.currentUser,providerId:null,operationType:"signIn"});const M=yield Xs(I,{returnSecureToken:!0}),Y=yield Ai._fromIdTokenResponse(I,"signIn",M,!0);return yield I._updateCurrentUser(Y.user),Y})).apply(this,arguments)}class Bs extends G.ZR{constructor(m,I,M,Y){var oe;super(I.code,I.message),this.operationType=M,this.user=Y,Object.setPrototypeOf(this,Bs.prototype),this.customData={appName:m.name,tenantId:null!==(oe=m.tenantId)&&void 0!==oe?oe:void 0,_serverResponse:I.customData._serverResponse,operationType:M}}static _fromErrorAndOperation(m,I,M,Y){return new Bs(m,I,M,Y)}}function ri(b,m,I,M){return("reauthenticate"===m?I._getReauthenticationResolver(b):I._getIdTokenResponse(b)).catch(oe=>{throw"auth/multi-factor-auth-required"===oe.code?Bs._fromErrorAndOperation(b,oe,m,M):oe})}function Ii(b){return new Set(b.map(({providerId:m})=>m).filter(m=>!!m))}function es(){return es=(0,a.Z)(function*(b,m){const I=(0,G.m9)(b);yield xi(!0,I,m);const{providerUserInfo:M}=yield function _r(b,m){return Wt.apply(this,arguments)}(I.auth,{idToken:yield I.getIdToken(),deleteProvider:[m]}),Y=Ii(M||[]);return I.providerData=I.providerData.filter(oe=>Y.has(oe.providerId)),Y.has("phone")||(I.phoneNumber=null),yield I.auth._persistUserIfCurrent(I),I}),es.apply(this,arguments)}function os(b,m){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,a.Z)(function*(b,m,I=!1){const M=yield mr(b,m._linkToIdToken(b.auth,yield b.getIdToken()),I);return Ai._forOperation(b,"link",M)})).apply(this,arguments)}function xi(b,m,I){return hs.apply(this,arguments)}function hs(){return(hs=(0,a.Z)(function*(b,m,I){yield Dr(m);const Y=!1===b?"provider-already-linked":"no-such-provider";Q(Ii(m.providerData).has(I)===b,m.auth,Y)})).apply(this,arguments)}function Zi(b,m){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,a.Z)(function*(b,m,I=!1){const{auth:M}=b,Y="reauthenticate";try{const oe=yield mr(b,ri(M,Y,m,b),I);Q(oe.idToken,M,"internal-error");const dt=In(oe.idToken);Q(dt,M,"internal-error");const{sub:Vt}=dt;return Q(b.uid===Vt,M,"user-mismatch"),Ai._forOperation(b,Y,oe)}catch(oe){throw"auth/user-not-found"===(null==oe?void 0:oe.code)&&st(M,"user-mismatch"),oe}})).apply(this,arguments)}function li(b,m){return Us.apply(this,arguments)}function Us(){return(Us=(0,a.Z)(function*(b,m,I=!1){const M="signIn",Y=yield ri(b,M,m),oe=yield Ai._fromIdTokenResponse(b,M,Y);return I||(yield b._updateCurrentUser(oe.user)),oe})).apply(this,arguments)}function Or(b,m){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,a.Z)(function*(b,m){return li(Rr(b),m)})).apply(this,arguments)}function Lo(b,m){return oi.apply(this,arguments)}function oi(){return(oi=(0,a.Z)(function*(b,m){const I=(0,G.m9)(b);return yield xi(!1,I,m.providerId),os(I,m)})).apply(this,arguments)}function qo(b,m){return js.apply(this,arguments)}function js(){return(js=(0,a.Z)(function*(b,m){return Zi((0,G.m9)(b),m)})).apply(this,arguments)}function $o(){return($o=(0,a.Z)(function*(b,m){return Fn(b,"POST","/v1/accounts:signInWithCustomToken",At(b,m))})).apply(this,arguments)}function Hs(){return Hs=(0,a.Z)(function*(b,m){const I=Rr(b),M=yield function ui(b,m){return $o.apply(this,arguments)}(I,{token:m,returnSecureToken:!0}),Y=yield Ai._fromIdTokenResponse(I,"signIn",M);return yield I._updateCurrentUser(Y.user),Y}),Hs.apply(this,arguments)}class Mi{constructor(m,I){this.factorId=m,this.uid=I.mfaEnrollmentId,this.enrollmentTime=new Date(I.enrolledAt).toUTCString(),this.displayName=I.displayName}static _fromServerResponse(m,I){return"phoneInfo"in I?as._fromServerResponse(m,I):st(m,"internal-error")}}class as extends Mi{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,I){return new as(I)}}function Lr(b,m,I){var M;Q((null===(M=I.url)||void 0===M?void 0:M.length)>0,b,"invalid-continue-uri"),Q(typeof I.dynamicLinkDomain>"u"||I.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),m.continueUrl=I.url,m.dynamicLinkDomain=I.dynamicLinkDomain,m.canHandleCodeInApp=I.handleCodeInApp,I.iOS&&(Q(I.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),m.iOSBundleId=I.iOS.bundleId),I.android&&(Q(I.android.packageName.length>0,b,"missing-android-pkg-name"),m.androidInstallApp=I.android.installApp,m.androidMinimumVersionCode=I.android.minimumVersion,m.androidPackageName=I.android.packageName)}function fs(){return fs=(0,a.Z)(function*(b,m,I){const M=(0,G.m9)(b),Y={requestType:"PASSWORD_RESET",email:m};I&&Lr(M,Y,I),yield function lt(b,m){return xt.apply(this,arguments)}(M,Y)}),fs.apply(this,arguments)}function Vo(){return(Vo=(0,a.Z)(function*(b,m,I){yield jr((0,G.m9)(b),{oobCode:m,newPassword:I})})).apply(this,arguments)}function ps(){return ps=(0,a.Z)(function*(b,m){yield function ln(b,m){return Kn.apply(this,arguments)}((0,G.m9)(b),{oobCode:m})}),ps.apply(this,arguments)}function Js(b,m){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,a.Z)(function*(b,m){const I=(0,G.m9)(b),M=yield jr(I,{oobCode:m}),Y=M.requestType;switch(Q(Y,I,"internal-error"),Y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Q(M.newEmail,I,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Q(M.mfaInfo,I,"internal-error");default:Q(M.email,I,"internal-error")}let oe=null;return M.mfaInfo&&(oe=Mi._fromServerResponse(Rr(I),M.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.newEmail:M.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.email:M.newEmail)||null,multiFactorInfo:oe},operation:Y}})).apply(this,arguments)}function Uo(){return(Uo=(0,a.Z)(function*(b,m){const{data:I}=yield Js((0,G.m9)(b),m);return I.email})).apply(this,arguments)}function Vr(){return(Vr=(0,a.Z)(function*(b,m,I){const M=Rr(b),Y=yield Xs(M,{returnSecureToken:!0,email:m,password:I}),oe=yield Ai._fromIdTokenResponse(M,"signIn",Y);return yield M._updateCurrentUser(oe.user),oe})).apply(this,arguments)}function h(){return h=(0,a.Z)(function*(b,m,I){const M=(0,G.m9)(b),Y={requestType:"EMAIL_SIGNIN",email:m};Q(I.handleCodeInApp,M,"argument-error"),I&&Lr(M,Y,I),yield function ae(b,m){return qe.apply(this,arguments)}(M,Y)}),h.apply(this,arguments)}function Ue(){return(Ue=(0,a.Z)(function*(b,m,I){const M=(0,G.m9)(b),Y=Eo.credentialWithLink(m,I||ft());return Q(Y._tenantId===(M.tenantId||null),M,"tenant-id-mismatch"),Or(M,Y)})).apply(this,arguments)}function an(){return(an=(0,a.Z)(function*(b,m){return Nt(b,"POST","/v1/accounts:createAuthUri",At(b,m))})).apply(this,arguments)}function cr(){return cr=(0,a.Z)(function*(b,m){const M={identifier:m,continueUri:nt()?ft():"http://localhost"},{signinMethods:Y}=yield function Gt(b,m){return an.apply(this,arguments)}((0,G.m9)(b),M);return Y||[]}),cr.apply(this,arguments)}function pr(){return pr=(0,a.Z)(function*(b,m){const I=(0,G.m9)(b),Y={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};m&&Lr(I.auth,Y,m);const{email:oe}=yield function fe(b,m){return We.apply(this,arguments)}(I.auth,Y);oe!==b.email&&(yield b.reload())}),pr.apply(this,arguments)}function gs(){return gs=(0,a.Z)(function*(b,m,I){const M=(0,G.m9)(b),oe={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:m};I&&Lr(M.auth,oe,I);const{email:dt}=yield function pt(b,m){return Dt.apply(this,arguments)}(M.auth,oe);dt!==b.email&&(yield b.reload())}),gs.apply(this,arguments)}function Ci(){return(Ci=(0,a.Z)(function*(b,m){return Nt(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Do(){return Do=(0,a.Z)(function*(b,{displayName:m,photoURL:I}){if(void 0===m&&void 0===I)return;const M=(0,G.m9)(b),oe={idToken:yield M.getIdToken(),displayName:m,photoUrl:I,returnSecureToken:!0},dt=yield mr(M,function ii(b,m){return Ci.apply(this,arguments)}(M.auth,oe));M.displayName=dt.displayName||null,M.photoURL=dt.photoUrl||null;const Vt=M.providerData.find(({providerId:vn})=>"password"===vn);Vt&&(Vt.displayName=M.displayName,Vt.photoURL=M.photoURL),yield M._updateTokensIfNecessary(dt)}),Do.apply(this,arguments)}function ha(b,m,I){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,a.Z)(function*(b,m,I){const{auth:M}=b,oe={idToken:yield b.getIdToken(),returnSecureToken:!0};m&&(oe.email=m),I&&(oe.password=I);const dt=yield mr(b,Ji(M,oe));yield b._updateTokensIfNecessary(dt,!0)})).apply(this,arguments)}class Os{constructor(m,I,M={}){this.isNewUser=m,this.providerId=I,this.profile=M}}class sa extends Os{constructor(m,I,M,Y){super(m,I,M),this.username=Y}}class jo extends Os{constructor(m,I){super(m,"facebook.com",I)}}class To extends sa{constructor(m,I){super(m,"github.com",I,"string"==typeof(null==I?void 0:I.login)?null==I?void 0:I.login:null)}}class Za extends Os{constructor(m,I){super(m,"google.com",I)}}class Qa extends sa{constructor(m,I,M){super(m,"twitter.com",I,M)}}function $a(b){const{user:m,_tokenResponse:I}=b;return m.isAnonymous&&!I?{providerId:null,isNewUser:!1,profile:null}:function La(b){var m,I;if(!b)return null;const{providerId:M}=b,Y=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},oe=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!M&&null!=b&&b.idToken){const dt=null===(I=null===(m=In(b.idToken))||void 0===m?void 0:m.firebase)||void 0===I?void 0:I.sign_in_provider;if(dt)return new Os(oe,"anonymous"!==dt&&"custom"!==dt?dt:null)}if(!M)return null;switch(M){case"facebook.com":return new jo(oe,Y);case"github.com":return new To(oe,Y);case"google.com":return new Za(oe,Y);case"twitter.com":return new Qa(oe,Y,b.screenName||null);case"custom":case"anonymous":return new Os(oe,null);default:return new Os(oe,M,Y)}}(I)}class Xr{constructor(m,I,M){this.type=m,this.credential=I,this.auth=M}static _fromIdtoken(m,I){return new Xr("enroll",m,I)}static _fromMfaPendingCredential(m){return new Xr("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var I,M;if(null!=m&&m.multiFactorSession){if(null!==(I=m.multiFactorSession)&&void 0!==I&&I.pendingCredential)return Xr._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(M=m.multiFactorSession)&&void 0!==M&&M.idToken)return Xr._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Go{constructor(m,I,M){this.session=m,this.hints=I,this.signInResolver=M}static _fromError(m,I){const M=Rr(m),Y=I.customData._serverResponse,oe=(Y.mfaInfo||[]).map(Vt=>Mi._fromServerResponse(M,Vt));Q(Y.mfaPendingCredential,M,"internal-error");const dt=Xr._fromMfaPendingCredential(Y.mfaPendingCredential);return new Go(dt,oe,function(){var Vt=(0,a.Z)(function*(vn){const Un=yield vn._process(M,dt);delete Y.mfaInfo,delete Y.mfaPendingCredential;const wr=Object.assign(Object.assign({},Y),{idToken:Un.idToken,refreshToken:Un.refreshToken});switch(I.operationType){case"signIn":const yr=yield Ai._fromIdTokenResponse(M,I.operationType,wr);return yield M._updateCurrentUser(yr.user),yr;case"reauthenticate":return Q(I.user,M,"internal-error"),Ai._forOperation(I.user,I.operationType,wr);default:st(M,"internal-error")}});return function(vn){return Vt.apply(this,arguments)}}())}resolveSignIn(m){var I=this;return(0,a.Z)(function*(){return I.signInResolver(m)})()}}class Ca{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(I=>{I.mfaInfo&&(this.enrolledFactors=I.mfaInfo.map(M=>Mi._fromServerResponse(m.auth,M)))})}static _fromUser(m){return new Ca(m)}getSession(){var m=this;return(0,a.Z)(function*(){return Xr._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,I){var M=this;return(0,a.Z)(function*(){const Y=m,oe=yield M.getSession(),dt=yield mr(M.user,Y._process(M.user.auth,oe,I));return yield M.user._updateTokensIfNecessary(dt),M.user.reload()})()}unenroll(m){var I=this;return(0,a.Z)(function*(){const M="string"==typeof m?m:m.uid,Y=yield I.user.getIdToken();try{const oe=yield mr(I.user,function vl(b,m){return Nt(b,"POST","/v2/accounts/mfaEnrollment:withdraw",At(b,m))}(I.user.auth,{idToken:Y,mfaEnrollmentId:M}));I.enrolledFactors=I.enrolledFactors.filter(({uid:dt})=>dt!==M),yield I.user._updateTokensIfNecessary(oe),yield I.user.reload()}catch(oe){throw oe}})()}}const fa=new WeakMap,N="__sak";class K{constructor(m,I){this.storageRetriever=m,this.type=I}_isAvailable(){try{return this.storage?(this.storage.setItem(N,"1"),this.storage.removeItem(N),Promise.resolve(!0)):Promise.resolve(!1)}catch(m){return Promise.resolve(!1)}}_set(m,I){return this.storage.setItem(m,JSON.stringify(I)),Promise.resolve()}_get(m){const I=this.storage.getItem(m);return Promise.resolve(I?JSON.parse(I):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Bt=(()=>{class b extends K{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(I,M)=>this.onStorageEvent(I,M),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function $(){const b=(0,G.z$)();return dn(b)||jt(b)}()&&function Bi(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=$i(),this._shouldAllowMigration=!0}forAllChangedKeys(I){for(const M of Object.keys(this.listeners)){const Y=this.storage.getItem(M),oe=this.localCache[M];Y!==oe&&I(M,oe,Y)}}onStorageEvent(I,M=!1){if(!I.key)return void this.forAllChangedKeys((Vt,vn,Un)=>{this.notifyListeners(Vt,Un)});const Y=I.key;if(M?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Vt=this.storage.getItem(Y);if(I.newValue!==Vt)null!==I.newValue?this.storage.setItem(Y,I.newValue):this.storage.removeItem(Y);else if(this.localCache[Y]===I.newValue&&!M)return}const oe=()=>{const Vt=this.storage.getItem(Y);!M&&this.localCache[Y]===Vt||this.notifyListeners(Y,Vt)},dt=this.storage.getItem(Y);!function fr(){return(0,G.w1)()&&10===document.documentMode}()||dt===I.newValue||I.newValue===I.oldValue?oe():setTimeout(oe,10)}notifyListeners(I,M){this.localCache[I]=M;const Y=this.listeners[I];if(Y)for(const oe of Array.from(Y))oe(M&&JSON.parse(M))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((I,M,Y)=>{this.onStorageEvent(new StorageEvent("storage",{key:I,oldValue:M,newValue:Y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(I,M){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[I]||(this.listeners[I]=new Set,this.localCache[I]=this.storage.getItem(I)),this.listeners[I].add(M)}_removeListener(I,M){this.listeners[I]&&(this.listeners[I].delete(M),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(I,M){var Y=()=>super._set,oe=this;return(0,a.Z)(function*(){yield Y().call(oe,I,M),oe.localCache[I]=JSON.stringify(M)})()}_get(I){var M=()=>super._get,Y=this;return(0,a.Z)(function*(){const oe=yield M().call(Y,I);return Y.localCache[I]=JSON.stringify(oe),oe})()}_remove(I){var M=()=>super._remove,Y=this;return(0,a.Z)(function*(){yield M().call(Y,I),delete Y.localCache[I]})()}}return b.type="LOCAL",b})(),or=(()=>{class b extends K{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(I,M){}_removeListener(I,M){}}return b.type="SESSION",b})();let er=(()=>{class b{constructor(I){this.eventTarget=I,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(I){const M=this.receivers.find(oe=>oe.isListeningto(I));if(M)return M;const Y=new b(I);return this.receivers.push(Y),Y}isListeningto(I){return this.eventTarget===I}handleEvent(I){var M=this;return(0,a.Z)(function*(){const Y=I,{eventId:oe,eventType:dt,data:Vt}=Y.data,vn=M.handlersMap[dt];if(null==vn||!vn.size)return;Y.ports[0].postMessage({status:"ack",eventId:oe,eventType:dt});const Un=Array.from(vn).map(function(){var yr=(0,a.Z)(function*(Fs){return Fs(Y.origin,Vt)});return function(Fs){return yr.apply(this,arguments)}}()),wr=yield function kt(b){return Promise.all(b.map(function(){var m=(0,a.Z)(function*(I){try{return{fulfilled:!0,value:yield I}}catch(M){return{fulfilled:!1,reason:M}}});return function(I){return m.apply(this,arguments)}}()))}(Un);Y.ports[0].postMessage({status:"done",eventId:oe,eventType:dt,response:wr})})()}_subscribe(I,M){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[I]||(this.handlersMap[I]=new Set),this.handlersMap[I].add(M)}_unsubscribe(I,M){this.handlersMap[I]&&M&&this.handlersMap[I].delete(M),(!M||0===this.handlersMap[I].size)&&delete this.handlersMap[I],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function dr(b="",m=10){let I="";for(let M=0;M<m;M++)I+=Math.floor(10*Math.random());return b+I}class Di{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,I,M=50){var Y=this;return(0,a.Z)(function*(){const oe=typeof MessageChannel<"u"?new MessageChannel:null;if(!oe)throw new Error("connection_unavailable");let dt,Vt;return new Promise((vn,Un)=>{const wr=dr("",20);oe.port1.start();const yr=setTimeout(()=>{Un(new Error("unsupported_event"))},M);Vt={messageChannel:oe,onMessage(Fs){const Ea=Fs;if(Ea.data.eventId===wr)switch(Ea.data.status){case"ack":clearTimeout(yr),dt=setTimeout(()=>{Un(new Error("timeout"))},3e3);break;case"done":clearTimeout(dt),vn(Ea.data.response);break;default:clearTimeout(yr),clearTimeout(dt),Un(new Error("invalid_response"))}}},Y.handlers.add(Vt),oe.port1.addEventListener("message",Vt.onMessage),Y.target.postMessage({eventType:m,eventId:wr,data:I},[oe.port2])}).finally(()=>{Vt&&Y.removeMessageHandler(Vt)})})()}}function Yt(){return window}function ls(){return typeof Yt().WorkerGlobalScope<"u"&&"function"==typeof Yt().importScripts}function wt(){return(wt=(0,a.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const Ps="firebaseLocalStorageDb",tl=1,pa="firebaseLocalStorage",_l="fbase_key";class So{constructor(m){this.request=m}toPromise(){return new Promise((m,I)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{I(this.request.error)})})}}function nl(b,m){return b.transaction([pa],m?"readwrite":"readonly").objectStore(pa)}function il(){const b=indexedDB.open(Ps,tl);return new Promise((m,I)=>{b.addEventListener("error",()=>{I(b.error)}),b.addEventListener("upgradeneeded",()=>{const M=b.result;try{M.createObjectStore(pa,{keyPath:_l})}catch(Y){I(Y)}}),b.addEventListener("success",(0,a.Z)(function*(){const M=b.result;M.objectStoreNames.contains(pa)?m(M):(M.close(),yield function rl(){const b=indexedDB.deleteDatabase(Ps);return new So(b).toPromise()}(),m(yield il()))}))})}function kl(b,m,I){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,a.Z)(function*(b,m,I){const M=nl(b,!0).put({[_l]:m,value:I});return new So(M).toPromise()})).apply(this,arguments)}function hr(){return(hr=(0,a.Z)(function*(b,m){const I=nl(b,!1).get(m),M=yield new So(I).toPromise();return void 0===M?null:M.value})).apply(this,arguments)}function la(b,m){const I=nl(b,!0).delete(m);return new So(I).toPromise()}const lo=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var I=this;return(0,a.Z)(function*(){return I.db||(I.db=yield il()),I.db})()}_withRetries(I){var M=this;return(0,a.Z)(function*(){let Y=0;for(;;)try{const oe=yield M._openDb();return yield I(oe)}catch(oe){if(Y++>3)throw oe;M.db&&(M.db.close(),M.db=void 0)}})()}initializeServiceWorkerMessaging(){var I=this;return(0,a.Z)(function*(){return ls()?I.initializeReceiver():I.initializeSender()})()}initializeReceiver(){var I=this;return(0,a.Z)(function*(){I.receiver=er._getInstance(function wi(){return ls()?self:null}()),I.receiver._subscribe("keyChanged",function(){var M=(0,a.Z)(function*(Y,oe){return{keyProcessed:(yield I._poll()).includes(oe.key)}});return function(Y,oe){return M.apply(this,arguments)}}()),I.receiver._subscribe("ping",function(){var M=(0,a.Z)(function*(Y,oe){return["keyChanged"]});return function(Y,oe){return M.apply(this,arguments)}}())})()}initializeSender(){var I=this;return(0,a.Z)(function*(){var M,Y;if(I.activeServiceWorker=yield function cn(){return wt.apply(this,arguments)}(),!I.activeServiceWorker)return;I.sender=new Di(I.activeServiceWorker);const oe=yield I.sender._send("ping",{},800);oe&&null!==(M=oe[0])&&void 0!==M&&M.fulfilled&&null!==(Y=oe[0])&&void 0!==Y&&Y.value.includes("keyChanged")&&(I.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(I){var M=this;return(0,a.Z)(function*(){if(M.sender&&M.activeServiceWorker&&function zt(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===M.activeServiceWorker)try{yield M.sender._send("keyChanged",{key:I},M.serviceWorkerReceiverAvailable?800:50)}catch(Y){}})()}_isAvailable(){return(0,a.Z)(function*(){try{if(!indexedDB)return!1;const I=yield il();return yield kl(I,N,"1"),yield la(I,N),!0}catch(I){}return!1})()}_withPendingWrite(I){var M=this;return(0,a.Z)(function*(){M.pendingWrites++;try{yield I()}finally{M.pendingWrites--}})()}_set(I,M){var Y=this;return(0,a.Z)(function*(){return Y._withPendingWrite((0,a.Z)(function*(){return yield Y._withRetries(oe=>kl(oe,I,M)),Y.localCache[I]=M,Y.notifyServiceWorker(I)}))})()}_get(I){var M=this;return(0,a.Z)(function*(){const Y=yield M._withRetries(oe=>function Fl(b,m){return hr.apply(this,arguments)}(oe,I));return M.localCache[I]=Y,Y})()}_remove(I){var M=this;return(0,a.Z)(function*(){return M._withPendingWrite((0,a.Z)(function*(){return yield M._withRetries(Y=>la(Y,I)),delete M.localCache[I],M.notifyServiceWorker(I)}))})()}_poll(){var I=this;return(0,a.Z)(function*(){const M=yield I._withRetries(dt=>{const Vt=nl(dt,!1).getAll();return new So(Vt).toPromise()});if(!M)return[];if(0!==I.pendingWrites)return[];const Y=[],oe=new Set;for(const{fbase_key:dt,value:Vt}of M)oe.add(dt),JSON.stringify(I.localCache[dt])!==JSON.stringify(Vt)&&(I.notifyListeners(dt,Vt),Y.push(dt));for(const dt of Object.keys(I.localCache))I.localCache[dt]&&!oe.has(dt)&&(I.notifyListeners(dt,null),Y.push(dt));return Y})()}notifyListeners(I,M){this.localCache[I]=M;const Y=this.listeners[I];if(Y)for(const oe of Array.from(Y))oe(M)}startPolling(){var I=this;this.stopPolling(),this.pollTimer=setInterval((0,a.Z)(function*(){return I._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(I,M){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[I]||(this.listeners[I]=new Set,this._get(I)),this.listeners[I].add(M)}_removeListener(I,M){this.listeners[I]&&(this.listeners[I].delete(M),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function pn(){return(pn=(0,a.Z)(function*(b){return(yield Nt(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Xo(b){return new Promise((m,I)=>{const M=document.createElement("script");M.setAttribute("src",b),M.onload=m,M.onerror=Y=>{const oe=Xe("internal-error");oe.customData=Y,I(oe)},M.type="text/javascript",M.charset="UTF-8",function ms(){var b,m;return null!==(m=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==m?m:document}().appendChild(M)})}function Cs(b){return`__${b}${Math.floor(1e6*Math.random())}`}const ua=1e12;class ga{constructor(m){this.auth=m,this.counter=ua,this._widgets=new Map}render(m,I){const M=this.counter;return this._widgets.set(M,new qu(m,this.auth.name,I||{})),this.counter++,M}reset(m){var I;const M=m||ua;null===(I=this._widgets.get(M))||void 0===I||I.delete(),this._widgets.delete(M)}getResponse(m){var I;return(null===(I=this._widgets.get(m||ua))||void 0===I?void 0:I.getResponse())||""}execute(m){var I=this;return(0,a.Z)(function*(){var M;return null===(M=I._widgets.get(m||ua))||void 0===M||M.execute(),""})()}}class qu{constructor(m,I,M){this.params=M,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const Y="string"==typeof m?document.getElementById(m):m;Q(Y,"argument-error",{appName:I}),this.container=Y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ru(b){const m=[],I="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let M=0;M<b;M++)m.push(I.charAt(Math.floor(Math.random()*I.length)));return m.join("")}(50);const{callback:m,"expired-callback":I}=this.params;if(m)try{m(this.responseToken)}catch(M){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,I)try{I()}catch(M){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const bs=Cs("rcb"),Il=new tt(3e4,6e4);class ba{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Yt().grecaptcha)||void 0===m||!m.render)}load(m,I=""){return Q(function Ts(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(I),m,"argument-error"),this.shouldResolveImmediately(I)?Promise.resolve(Yt().grecaptcha):new Promise((M,Y)=>{const oe=Yt().setTimeout(()=>{Y(Xe(m,"network-request-failed"))},Il.get());Yt()[bs]=()=>{Yt().clearTimeout(oe),delete Yt()[bs];const Vt=Yt().grecaptcha;if(!Vt)return void Y(Xe(m,"internal-error"));const vn=Vt.render;Vt.render=(Un,wr)=>{const yr=vn(Un,wr);return this.counter++,yr},this.hostLanguage=I,M(Vt)},Xo(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:bs,render:"explicit",hl:I})}`).catch(()=>{clearTimeout(oe),Y(Xe(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var I;return!(null===(I=Yt().grecaptcha)||void 0===I||!I.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class sl{load(m){return(0,a.Z)(function*(){return new ga(m)})()}clearedOneInstance(){}}const bt="recaptcha",xo={theme:"light",type:"image"};class co{constructor(m,I=Object.assign({},xo),M){this.parameters=I,this.type=bt,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Rr(M),this.isInvisible="invisible"===this.parameters.size,Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const Y="string"==typeof m?document.getElementById(m):m;Q(Y,this.auth,"argument-error"),this.container=Y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new sl:new ba,this.validateStartingState()}verify(){var m=this;return(0,a.Z)(function*(){m.assertNotDestroyed();const I=yield m.render(),M=m.getAssertedRecaptcha();return M.getResponse(I)||new Promise(oe=>{const dt=Vt=>{Vt&&(m.tokenChangeListeners.delete(dt),oe(Vt))};m.tokenChangeListeners.add(dt),m.isInvisible&&M.execute(I)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){Q(!this.parameters.sitekey,this.auth,"argument-error"),Q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return I=>{if(this.tokenChangeListeners.forEach(M=>M(I)),"function"==typeof m)m(I);else if("string"==typeof m){const M=Yt()[m];"function"==typeof M&&M(I)}}}assertNotDestroyed(){Q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,a.Z)(function*(){if(yield m.init(),!m.widgetId){let I=m.container;if(!m.isInvisible){const M=document.createElement("div");I.appendChild(M),I=M}m.widgetId=m.getAssertedRecaptcha().render(I,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,a.Z)(function*(){Q(nt()&&!ls(),m.auth,"internal-error"),yield function ol(){let b=null;return new Promise(m=>{"complete"!==document.readyState?(b=()=>m(),window.addEventListener("load",b)):m()}).catch(m=>{throw b&&window.removeEventListener("load",b),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const I=yield function pi(b){return pn.apply(this,arguments)}(m.auth);Q(I,m.auth,"internal-error"),m.parameters.sitekey=I})()}getAssertedRecaptcha(){return Q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ll{constructor(m,I){this.verificationId=m,this.onConfirmation=I}confirm(m){const I=qi._fromVerification(this.verificationId,m);return this.onConfirmation(I)}}function vi(){return(vi=(0,a.Z)(function*(b,m,I){const M=Rr(b),Y=yield $l(M,m,(0,G.m9)(I));return new Ll(Y,oe=>Or(M,oe))})).apply(this,arguments)}function wl(){return(wl=(0,a.Z)(function*(b,m,I){const M=(0,G.m9)(b);yield xi(!1,M,"phone");const Y=yield $l(M.auth,m,(0,G.m9)(I));return new Ll(Y,oe=>Lo(M,oe))})).apply(this,arguments)}function Du(){return(Du=(0,a.Z)(function*(b,m,I){const M=(0,G.m9)(b),Y=yield $l(M.auth,m,(0,G.m9)(I));return new Ll(Y,oe=>qo(M,oe))})).apply(this,arguments)}function $l(b,m,I){return Gs.apply(this,arguments)}function Gs(){return Gs=(0,a.Z)(function*(b,m,I){var M;const Y=yield I.verify();try{let oe;if(Q("string"==typeof Y,b,"argument-error"),Q(I.type===bt,b,"argument-error"),oe="string"==typeof m?{phoneNumber:m}:m,"session"in oe){const dt=oe.session;if("phoneNumber"in oe)return Q("enroll"===dt.type,b,"internal-error"),(yield function aa(b,m){return Nt(b,"POST","/v2/accounts/mfaEnrollment:start",At(b,m))}(b,{idToken:dt.credential,phoneEnrollmentInfo:{phoneNumber:oe.phoneNumber,recaptchaToken:Y}})).phoneSessionInfo.sessionInfo;{Q("signin"===dt.type,b,"internal-error");const Vt=(null===(M=oe.multiFactorHint)||void 0===M?void 0:M.uid)||oe.multiFactorUid;return Q(Vt,b,"missing-multi-factor-info"),(yield function Ur(b,m){return Nt(b,"POST","/v2/accounts/mfaSignIn:start",At(b,m))}(b,{mfaPendingCredential:dt.credential,mfaEnrollmentId:Vt,phoneSignInInfo:{recaptchaToken:Y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:dt}=yield function Ut(b,m){return tn.apply(this,arguments)}(b,{phoneNumber:oe.phoneNumber,recaptchaToken:Y});return dt}}finally{I._reset()}}),Gs.apply(this,arguments)}function ma(){return(ma=(0,a.Z)(function*(b,m){yield os((0,G.m9)(b),m)})).apply(this,arguments)}let al=(()=>{class b{constructor(I){this.providerId=b.PROVIDER_ID,this.auth=Rr(I)}verifyPhoneNumber(I,M){return $l(this.auth,I,(0,G.m9)(M))}static credential(I,M){return qi._fromVerification(I,M)}static credentialFromResult(I){return b.credentialFromTaggedObject(I)}static credentialFromError(I){return b.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{phoneNumber:M,temporaryProof:Y}=I;return M&&Y?qi._fromTokenResponse(M,Y):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function ll(b,m){return m?Ge(m):(Q(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class ci extends ei{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Kr(m,this._buildIdpRequest())}_linkToIdToken(m,I){return Kr(m,this._buildIdpRequest(I))}_getReauthenticationResolver(m){return Kr(m,this._buildIdpRequest())}_buildIdpRequest(m){const I={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(I.idToken=m),I}}function su(b){return li(b.auth,new ci(b),b.bypassAuthState)}function ho(b){const{auth:m,user:I}=b;return Q(I,m,"internal-error"),Zi(I,new ci(b),b.bypassAuthState)}function ul(b){return rs.apply(this,arguments)}function rs(){return(rs=(0,a.Z)(function*(b){const{auth:m,user:I}=b;return Q(I,m,"internal-error"),os(I,new ci(b),b.bypassAuthState)})).apply(this,arguments)}class fo{constructor(m,I,M,Y,oe=!1){this.auth=m,this.resolver=M,this.user=Y,this.bypassAuthState=oe,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(I)?I:[I]}execute(){var m=this;return new Promise(function(){var I=(0,a.Z)(function*(M,Y){m.pendingPromise={resolve:M,reject:Y};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(oe){m.reject(oe)}});return function(M,Y){return I.apply(this,arguments)}}())}onAuthEvent(m){var I=this;return(0,a.Z)(function*(){const{urlResponse:M,sessionId:Y,postBody:oe,tenantId:dt,error:Vt,type:vn}=m;if(Vt)return void I.reject(Vt);const Un={auth:I.auth,requestUri:M,sessionId:Y,tenantId:dt||void 0,postBody:oe||void 0,user:I.user,bypassAuthState:I.bypassAuthState};try{I.resolve(yield I.getIdpTask(vn)(Un))}catch(wr){I.reject(wr)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return su;case"linkViaPopup":case"linkViaRedirect":return ul;case"reauthViaPopup":case"reauthViaRedirect":return ho;default:st(this.auth,"internal-error")}}resolve(m){ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Cl=new tt(2e3,1e4);function zs(){return(zs=(0,a.Z)(function*(b,m,I){const M=Rr(b);Pe(b,m,Fr);const Y=ll(M,I);return new Qi(M,"signInViaPopup",m,Y).executeNotNull()})).apply(this,arguments)}function Tu(){return(Tu=(0,a.Z)(function*(b,m,I){const M=(0,G.m9)(b);Pe(M.auth,m,Fr);const Y=ll(M.auth,I);return new Qi(M.auth,"reauthViaPopup",m,Y,M).executeNotNull()})).apply(this,arguments)}function ki(){return(ki=(0,a.Z)(function*(b,m,I){const M=(0,G.m9)(b);Pe(M.auth,m,Fr);const Y=ll(M.auth,I);return new Qi(M.auth,"linkViaPopup",m,Y,M).executeNotNull()})).apply(this,arguments)}let Qi=(()=>{class b extends fo{constructor(I,M,Y,oe,dt){super(I,M,oe,dt),this.provider=Y,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var I=this;return(0,a.Z)(function*(){const M=yield I.execute();return Q(M,I.auth,"internal-error"),M})()}onExecution(){var I=this;return(0,a.Z)(function*(){ke(1===I.filter.length,"Popup operations only handle one event");const M=dr();I.authWindow=yield I.resolver._openPopup(I.auth,I.provider,I.filter[0],M),I.authWindow.associatedEvent=M,I.resolver._originValidation(I.auth).catch(Y=>{I.reject(Y)}),I.resolver._isIframeWebStorageSupported(I.auth,Y=>{Y||I.reject(Xe(I.auth,"web-storage-unsupported"))}),I.pollUserCancellation()})()}get eventId(){var I;return(null===(I=this.authWindow)||void 0===I?void 0:I.associatedEvent)||null}cancel(){this.reject(Xe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const I=()=>{var M,Y;this.pollId=null!==(Y=null===(M=this.authWindow)||void 0===M?void 0:M.window)&&void 0!==Y&&Y.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Xe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(I,Cl.get())};I()}}return b.currentPopupAction=null,b})();const S="pendingRedirect",x=new Map;class w extends fo{constructor(m,I,M=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],I,void 0,M),this.eventId=null}execute(){var m=()=>super.execute,I=this;return(0,a.Z)(function*(){let M=x.get(I.auth._key());if(!M){try{const oe=(yield function R(b,m){return V.apply(this,arguments)}(I.resolver,I.auth))?yield m().call(I):null;M=()=>Promise.resolve(oe)}catch(Y){M=()=>Promise.reject(Y)}x.set(I.auth._key(),M)}return I.bypassAuthState||x.set(I.auth._key(),()=>Promise.resolve(null)),M()})()}onAuthEvent(m){var I=()=>super.onAuthEvent,M=this;return(0,a.Z)(function*(){if("signInViaRedirect"===m.type)return I().call(M,m);if("unknown"!==m.type){if(m.eventId){const Y=yield M.auth._redirectUserForId(m.eventId);if(Y)return M.user=Y,I().call(M,m);M.resolve(null)}}else M.resolve(null)})()}onExecution(){return(0,a.Z)(function*(){})()}cleanUp(){}}function V(){return(V=(0,a.Z)(function*(b,m){const I=Cn(m),M=on(b);if(!(yield M._isAvailable()))return!1;const Y="true"===(yield M._get(I));return yield M._remove(I),Y})).apply(this,arguments)}function X(b,m){return ne.apply(this,arguments)}function ne(){return(ne=(0,a.Z)(function*(b,m){return on(b)._set(Cn(m),"true")})).apply(this,arguments)}function Tt(b,m){x.set(b._key(),m)}function on(b){return Ge(b._redirectPersistence)}function Cn(b){return _e(S,b.config.apiKey,b.name)}function _n(b,m,I){return function Hr(b,m,I){return F.apply(this,arguments)}(b,m,I)}function F(){return(F=(0,a.Z)(function*(b,m,I){const M=Rr(b);Pe(b,m,Fr),yield M._initializationPromise;const Y=ll(M,I);return yield X(Y,M),Y._openRedirect(M,m,"signInViaRedirect")})).apply(this,arguments)}function U(b,m,I){return function te(b,m,I){return Se.apply(this,arguments)}(b,m,I)}function Se(){return(Se=(0,a.Z)(function*(b,m,I){const M=(0,G.m9)(b);Pe(M.auth,m,Fr),yield M.auth._initializationPromise;const Y=ll(M.auth,I);yield X(Y,M.auth);const oe=yield nr(M);return Y._openRedirect(M.auth,m,"reauthViaRedirect",oe)})).apply(this,arguments)}function ut(b,m,I){return function Et(b,m,I){return Jt.apply(this,arguments)}(b,m,I)}function Jt(){return(Jt=(0,a.Z)(function*(b,m,I){const M=(0,G.m9)(b);Pe(M.auth,m,Fr),yield M.auth._initializationPromise;const Y=ll(M.auth,I);yield xi(!1,M,m.providerId),yield X(Y,M.auth);const oe=yield nr(M);return Y._openRedirect(M.auth,m,"linkViaRedirect",oe)})).apply(this,arguments)}function Wn(){return(Wn=(0,a.Z)(function*(b,m){return yield Rr(b)._initializationPromise,tr(b,m,!1)})).apply(this,arguments)}function tr(b,m){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,a.Z)(function*(b,m,I=!1){const M=Rr(b),Y=ll(M,m),dt=yield new w(M,Y,I).execute();return dt&&!I&&(delete dt.user._redirectEventId,yield M._persistUserIfCurrent(dt.user),yield M._setRedirectUser(null,m)),dt})).apply(this,arguments)}function nr(b){return no.apply(this,arguments)}function no(){return(no=(0,a.Z)(function*(b){const m=dr(`${b.uid}:::`);return b._redirectEventId=m,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),m})).apply(this,arguments)}class ya{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let I=!1;return this.consumers.forEach(M=>{this.isEventForConsumer(m,M)&&(I=!0,this.sendToConsumer(m,M),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function po(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gi(b);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,I||(this.queuedRedirectEvent=m,I=!0)),I}sendToConsumer(m,I){var M;if(m.error&&!gi(m)){const Y=(null===(M=m.error.code)||void 0===M?void 0:M.split("auth/")[1])||"internal-error";I.onError(Xe(this.auth,Y))}else I.onAuthEvent(m)}isEventForConsumer(m,I){const M=null===I.eventId||!!m.eventId&&m.eventId===I.eventId;return I.filter.includes(m.type)&&M}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gr(m))}saveEventToCache(m){this.cachedEventUids.add(Gr(m)),this.lastProcessedEventTime=Date.now()}}function Gr(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(m=>m).join("-")}function gi({type:b,error:m}){return"unknown"===b&&"auth/no-auth-event"===(null==m?void 0:m.code)}function Jo(b){return cl.apply(this,arguments)}function cl(){return(cl=(0,a.Z)(function*(b,m={}){return Nt(b,"GET","/v1/projects",m)})).apply(this,arguments)}const Zu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qu=/^https?/;function Xu(){return(Xu=(0,a.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:m}=yield Jo(b);for(const I of m)try{if(zd(I))return}catch(M){}st(b,"unauthorized-domain")})).apply(this,arguments)}function zd(b){const m=ft(),{protocol:I,hostname:M}=new URL(m);if(b.startsWith("chrome-extension://")){const dt=new URL(b);return""===dt.hostname&&""===M?"chrome-extension:"===I&&b.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===I&&dt.hostname===M}if(!Qu.test(I))return!1;if(Zu.test(b))return M===b;const Y=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Y+"|"+Y+")$","i").test(M)}const Mc=new tt(3e4,6e4);function ad(){const b=Yt().___jsl;if(null!=b&&b.H)for(const m of Object.keys(b.H))if(b.H[m].r=b.H[m].r||[],b.H[m].L=b.H[m].L||[],b.H[m].r=[...b.H[m].L],b.CP)for(let I=0;I<b.CP.length;I++)b.CP[I]=null}let Bl=null;const ud=new tt(5e3,15e3),Ph="__/auth/iframe",cd="emulator/auth/iframe",Vl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ns(b){const m=b.config;Q(m.authDomain,b,"auth-domain-config-required");const I=m.emulator?$e(m,cd):`https://${b.config.authDomain}/${Ph}`,M={apiKey:m.apiKey,appName:b.name,v:De.SDK_VERSION},Y=Nh.get(b.config.apiHost);Y&&(M.eid=Y);const oe=b._getFrameworks();return oe.length&&(M.fw=oe.join(",")),`${I}?${(0,G.xO)(M).slice(1)}`}function Ws(){return Ws=(0,a.Z)(function*(b){const m=yield function bl(b){return Bl=Bl||function ld(b){return new Promise((m,I)=>{var M,Y,oe;function dt(){ad(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{ad(),I(Xe(b,"network-request-failed"))},timeout:Mc.get()})}if(null!==(Y=null===(M=Yt().gapi)||void 0===M?void 0:M.iframes)&&void 0!==Y&&Y.Iframe)m(gapi.iframes.getContext());else{if(null===(oe=Yt().gapi)||void 0===oe||!oe.load){const Vt=Cs("iframefcb");return Yt()[Vt]=()=>{gapi.load?dt():I(Xe(b,"network-request-failed"))},Xo(`https://apis.google.com/js/api.js?onload=${Vt}`).catch(vn=>I(vn))}dt()}}).catch(m=>{throw Bl=null,m})}(b),Bl}(b),I=Yt().gapi;return Q(I,b,"internal-error"),m.open({where:document.body,url:Ns(b),messageHandlersFilter:I.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vl,dontclear:!0},M=>new Promise(function(){var Y=(0,a.Z)(function*(oe,dt){yield M.restyle({setHideOnLeave:!1});const Vt=Xe(b,"network-request-failed"),vn=Yt().setTimeout(()=>{dt(Vt)},ud.get());function Un(){Yt().clearTimeout(vn),oe(M)}M.ping(Un).then(Un,()=>{dt(Vt)})});return function(oe,dt){return Y.apply(this,arguments)}}()))}),Ws.apply(this,arguments)}const Ki={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dd=500,Ul=600,Mo="_blank",Ss="http://localhost";class Ju{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(m){}}}const Ta="__/auth/handler",ja="emulator/auth/handler";function jl(b,m,I,M,Y,oe){Q(b.config.authDomain,b,"auth-domain-config-required"),Q(b.config.apiKey,b,"invalid-api-key");const dt={apiKey:b.config.apiKey,appName:b.name,authType:I,redirectUrl:M,v:De.SDK_VERSION,eventId:Y};if(m instanceof Fr){m.setDefaultLanguage(b.languageCode),dt.providerId=m.providerId||"",(0,G.xb)(m.getCustomParameters())||(dt.customParameters=JSON.stringify(m.getCustomParameters()));for(const[vn,Un]of Object.entries(oe||{}))dt[vn]=Un}if(m instanceof qn){const vn=m.getScopes().filter(Un=>""!==Un);vn.length>0&&(dt.scopes=vn.join(","))}b.tenantId&&(dt.tid=b.tenantId);const Vt=dt;for(const vn of Object.keys(Vt))void 0===Vt[vn]&&delete Vt[vn];return`${function au({config:b}){return b.emulator?$e(b,ja):`https://${b.authDomain}/${Ta}`}(b)}?${(0,G.xO)(Vt).slice(1)}`}const Hl="webStorageSupport",lu=class Su{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=or,this._completeRedirectFn=tr,this._overrideRedirectResult=Tt}_openPopup(m,I,M,Y){var oe=this;return(0,a.Z)(function*(){var dt;ke(null===(dt=oe.eventManagers[m._key()])||void 0===dt?void 0:dt.manager,"_initialize() not called before _openPopup()");const Vt=jl(m,I,M,ft(),Y);return function _i(b,m,I,M=dd,Y=Ul){const oe=Math.max((window.screen.availHeight-Y)/2,0).toString(),dt=Math.max((window.screen.availWidth-M)/2,0).toString();let Vt="";const vn=Object.assign(Object.assign({},Ki),{width:M.toString(),height:Y.toString(),top:oe,left:dt}),Un=(0,G.z$)().toLowerCase();I&&(Vt=Le(Un)?Mo:I),gt(Un)&&(m=m||Ss,vn.scrollbars="yes");const wr=Object.entries(vn).reduce((Fs,[Ea,hc])=>`${Fs}${Ea}=${hc},`,"");if(function Hn(b=(0,G.z$)()){var m;return jt(b)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(Un)&&"_self"!==Vt)return function ec(b,m){const I=document.createElement("a");I.href=b,I.target=m;const M=document.createEvent("MouseEvent");M.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),I.dispatchEvent(M)}(m||"",Vt),new Ju(null);const yr=window.open(m||"",Vt,wr);Q(yr,b,"popup-blocked");try{yr.focus()}catch(Fs){}return new Ju(yr)}(m,Vt,dr())})()}_openRedirect(m,I,M,Y){var oe=this;return(0,a.Z)(function*(){return yield oe._originValidation(m),function mn(b){Yt().location.href=b}(jl(m,I,M,ft(),Y)),new Promise(()=>{})})()}_initialize(m){const I=m._key();if(this.eventManagers[I]){const{manager:Y,promise:oe}=this.eventManagers[I];return Y?Promise.resolve(Y):(ke(oe,"If manager is not set, promise should be"),oe)}const M=this.initAndGetManager(m);return this.eventManagers[I]={promise:M},M.catch(()=>{delete this.eventManagers[I]}),M}initAndGetManager(m){var I=this;return(0,a.Z)(function*(){const M=yield function ou(b){return Ws.apply(this,arguments)}(m),Y=new ya(m);return M.register("authEvent",oe=>(Q(null==oe?void 0:oe.authEvent,m,"invalid-auth-event"),{status:Y.onEvent(oe.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),I.eventManagers[m._key()]={manager:Y},I.iframes[m._key()]=M,Y})()}_isIframeWebStorageSupported(m,I){this.iframes[m._key()].send(Hl,{type:Hl},Y=>{var oe;const dt=null===(oe=null==Y?void 0:Y[0])||void 0===oe?void 0:oe[Hl];void 0!==dt&&I(!!dt),st(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const I=m._key();return this.originValidationPromises[I]||(this.originValidationPromises[I]=function Gd(b){return Xu.apply(this,arguments)}(m)),this.originValidationPromises[I]}get _shouldInitProactively(){return $i()||dn()||jt()}};class dl{constructor(m){this.factorId=m}_process(m,I,M){switch(I.type){case"enroll":return this._finalizeEnroll(m,I.credential,M);case"signin":return this._finalizeSignIn(m,I.credential);default:return et("unexpected MultiFactorSessionType")}}}class ea extends dl{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new ea(m)}_finalizeEnroll(m,I,M){return function Cu(b,m){return Nt(b,"POST","/v2/accounts/mfaEnrollment:finalize",At(b,m))}(m,{idToken:I,displayName:M,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,I){return function El(b,m){return Nt(b,"POST","/v2/accounts/mfaSignIn:finalize",At(b,m))}(m,{mfaPendingCredential:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let uu=(()=>{class b{constructor(){}static assertion(I){return ea._fromCredential(I)}}return b.FACTOR_ID="phone",b})();var zo="@firebase/auth";class Au{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var I=this;return(0,a.Z)(function*(){return I.assertAuthConfigured(),yield I.auth._initializationPromise,I.auth.currentUser?{accessToken:yield I.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const I=this.auth.onIdTokenChanged(M=>{m((null==M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,I),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const I=this.internalListeners.get(m);I&&(this.internalListeners.delete(m),I(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function hl(){return window}(0,G.Pz)("authIdTokenMaxAge"),function vs(b){(0,De._registerComponent)(new he.wA("auth",(m,{options:I})=>{const M=m.getProvider("app").getImmediate(),Y=m.getProvider("heartbeat"),{apiKey:oe,authDomain:dt}=M.options;return((Vt,vn)=>{Q(oe&&!oe.includes(":"),"invalid-api-key",{appName:Vt.name}),Q(!(null!=dt&&dt.includes(":")),"argument-error",{appName:Vt.name});const Un={apiKey:oe,authDomain:dt,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yi(b)},wr=new Oi(Vt,vn,Un);return function z(b,m){const I=(null==m?void 0:m.persistence)||[],M=(Array.isArray(I)?I:[I]).map(Ge);null!=m&&m.errorMap&&b._updateErrorMap(m.errorMap),b._initializeWithPersistence(M,null==m?void 0:m.popupRedirectResolver)}(wr,I),wr})(M,Y)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,I,M)=>{m.getProvider("auth-internal").initialize()})),(0,De._registerComponent)(new he.wA("auth-internal",m=>{const I=Rr(m.getProvider("auth").getImmediate());return new Au(I)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,De.registerVersion)(zo,"0.21.5",function Ro(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,De.registerVersion)(zo,"0.21.5","esm2017")}("Browser");const fl=2e3;function Mu(){return Mu=(0,a.Z)(function*(b,m,I){var M;const{BuildInfo:Y}=hl();ke(m.sessionId,"AuthEvent did not contain a session ID");const oe=yield function Fh(b){return Oc.apply(this,arguments)}(m.sessionId),dt={};return jt()?dt.ibi=Y.packageName:me()?dt.apn=Y.packageName:st(b,"operation-not-supported-in-this-environment"),Y.displayName&&(dt.appDisplayName=Y.displayName),dt.sessionId=oe,jl(b,I,m.type,void 0,null!==(M=m.eventId)&&void 0!==M?M:void 0,dt)}),Mu.apply(this,arguments)}function Ru(){return(Ru=(0,a.Z)(function*(b){const{BuildInfo:m}=hl(),I={};jt()?I.iosBundleId=m.packageName:me()?I.androidPackageName=m.packageName:st(b,"operation-not-supported-in-this-environment"),yield Jo(b,I)})).apply(this,arguments)}function Gl(){return(Gl=(0,a.Z)(function*(b,m,I){const{cordova:M}=hl();let Y=()=>{};try{yield new Promise((oe,dt)=>{let Vt=null;function vn(){var yr;oe();const Fs=null===(yr=M.plugins.browsertab)||void 0===yr?void 0:yr.close;"function"==typeof Fs&&Fs(),"function"==typeof(null==I?void 0:I.close)&&I.close()}function Un(){Vt||(Vt=window.setTimeout(()=>{dt(Xe(b,"redirect-cancelled-by-user"))},fl))}function wr(){"visible"===(null==document?void 0:document.visibilityState)&&Un()}m.addPassiveListener(vn),document.addEventListener("resume",Un,!1),me()&&document.addEventListener("visibilitychange",wr,!1),Y=()=>{m.removePassiveListener(vn),document.removeEventListener("resume",Un,!1),document.removeEventListener("visibilitychange",wr,!1),Vt&&window.clearTimeout(Vt)}})}finally{Y()}})).apply(this,arguments)}function Oc(){return(Oc=(0,a.Z)(function*(b){const m=function Tl(b){if(ke(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(b);const m=new ArrayBuffer(b.length),I=new Uint8Array(m);for(let M=0;M<b.length;M++)I[M]=b.charCodeAt(M);return I}(b),I=yield crypto.subtle.digest("SHA-256",m);return Array.from(new Uint8Array(I)).map(Y=>Y.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Sl=20;class fd extends ya{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(m=>{this.resolveInialized=m})}addPassiveListener(m){this.passiveListeners.add(m)}removePassiveListener(m){this.passiveListeners.delete(m)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(m){return this.resolveInialized(),this.passiveListeners.forEach(I=>I(m)),super.onEvent(m)}initialized(){var m=this;return(0,a.Z)(function*(){yield m.initPromise})()}}function Al(b){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,a.Z)(function*(b){const m=yield pd()._get(ic(b));return m&&(yield pd()._remove(ic(b))),m})).apply(this,arguments)}function Aa(){const b=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<Sl;I++){const M=Math.floor(Math.random()*m.length);b.push(m.charAt(M))}return b.join("")}function pd(){return Ge(Bt)}function ic(b){return _e("authEvent",b.config.apiKey,b.name)}function xa(b){if(null==b||!b.includes("?"))return{};const[m,...I]=b.split("?");return(0,G.zd)(I.join("?"))}const du=class kc{constructor(){this._redirectPersistence=or,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=tr,this._overrideRedirectResult=Tt}_initialize(m){var I=this;return(0,a.Z)(function*(){const M=m._key();let Y=I.eventManagers.get(M);return Y||(Y=new fd(m),I.eventManagers.set(M,Y),I.attachCallbackListeners(m,Y)),Y})()}_openPopup(m){st(m,"operation-not-supported-in-this-environment")}_openRedirect(m,I,M,Y){var oe=this;return(0,a.Z)(function*(){!function rc(b){var m,I,M,Y,oe,dt,Vt,vn,Un,wr;const yr=hl();Q("function"==typeof(null===(m=null==yr?void 0:yr.universalLinks)||void 0===m?void 0:m.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Q(typeof(null===(I=null==yr?void 0:yr.BuildInfo)||void 0===I?void 0:I.packageName)<"u",b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Q("function"==typeof(null===(oe=null===(Y=null===(M=null==yr?void 0:yr.cordova)||void 0===M?void 0:M.plugins)||void 0===Y?void 0:Y.browsertab)||void 0===oe?void 0:oe.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Q("function"==typeof(null===(vn=null===(Vt=null===(dt=null==yr?void 0:yr.cordova)||void 0===dt?void 0:dt.plugins)||void 0===Vt?void 0:Vt.browsertab)||void 0===vn?void 0:vn.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Q("function"==typeof(null===(wr=null===(Un=null==yr?void 0:yr.cordova)||void 0===Un?void 0:Un.InAppBrowser)||void 0===wr?void 0:wr.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(m);const dt=yield oe._initialize(m);yield dt.initialized(),dt.resetRedirect(),function Qe(){x.clear()}(),yield oe._originValidation(m);const Vt=function Sa(b,m,I=null){return{type:m,eventId:I,urlResponse:null,sessionId:Aa(),postBody:null,tenantId:b.tenantId,error:Xe(b,"no-auth-event")}}(m,M,Y);yield function Ou(b,m){return pd()._set(ic(b),m)}(m,Vt);const vn=yield function hd(b,m,I){return Mu.apply(this,arguments)}(m,Vt,I),Un=yield function cu(b){const{cordova:m}=hl();return new Promise(I=>{m.plugins.browsertab.isAvailable(M=>{let Y=null;M?m.plugins.browsertab.openUrl(b):Y=m.InAppBrowser.open(b,function xn(b=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),I(Y)})})}(vn);return function Rc(b,m,I){return Gl.apply(this,arguments)}(m,dt,Un)})()}_isIframeWebStorageSupported(m,I){throw new Error("Method not implemented.")}_originValidation(m){const I=m._key();return this.originValidationPromises[I]||(this.originValidationPromises[I]=function kh(b){return Ru.apply(this,arguments)}(m)),this.originValidationPromises[I]}attachCallbackListeners(m,I){const{universalLinks:M,handleOpenURL:Y,BuildInfo:oe}=hl(),dt=setTimeout((0,a.Z)(function*(){yield Al(m),I.onEvent(sc())}),500),Vt=function(){var wr=(0,a.Z)(function*(yr){clearTimeout(dt);const Fs=yield Al(m);let Ea=null;Fs&&null!=yr&&yr.url&&(Ea=function xl(b,m){var I,M;const Y=function Nc(b){const m=xa(b),I=m.link?decodeURIComponent(m.link):void 0,M=xa(I).link,Y=m.deep_link_id?decodeURIComponent(m.deep_link_id):void 0;return xa(Y).link||Y||M||I||b}(m);if(Y.includes("/__/auth/callback")){const oe=xa(Y),dt=oe.firebaseError?function Xi(b){try{return JSON.parse(b)}catch(m){return null}}(decodeURIComponent(oe.firebaseError)):null,Vt=null===(M=null===(I=null==dt?void 0:dt.code)||void 0===I?void 0:I.split("auth/"))||void 0===M?void 0:M[1],vn=Vt?Xe(Vt):null;return vn?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:vn,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:Y,postBody:null}}return null}(Fs,yr.url)),I.onEvent(Ea||sc())});return function(Fs){return wr.apply(this,arguments)}}();typeof M<"u"&&"function"==typeof M.subscribe&&M.subscribe(null,Vt);const vn=Y,Un=`${oe.packageName.toLowerCase()}://`;hl().handleOpenURL=function(){var wr=(0,a.Z)(function*(yr){if(yr.toLowerCase().startsWith(Un)&&Vt({url:yr}),"function"==typeof vn)try{vn(yr)}catch(Fs){console.error(Fs)}});return function(yr){return wr.apply(this,arguments)}}()}};function sc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Xe("no-auth-event")}}const md=1e3;function Ra(){var b;return(null===(b=null==self?void 0:self.location)||void 0===b?void 0:b.protocol)||null}function Wl(b=(0,G.z$)()){return!("file:"!==Ra()&&"ionic:"!==Ra()&&"capacitor:"!==Ra()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function Pu(){try{const b=self.localStorage,m=dr();if(b)return b.setItem(m,"1"),b.removeItem(m),!function mi(b=(0,G.z$)()){return function xf(){return(0,G.w1)()&&11===(null==document?void 0:document.documentMode)}()||function us(b=(0,G.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,G.hl)()}catch(b){return Nu()&&(0,G.hl)()}return!1}function Nu(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function cs(){return(function ac(){return"http:"===Ra()||"https:"===Ra()}()||(0,G.ru)()||Wl())&&!function Fc(){return(0,G.b$)()||(0,G.UG)()}()&&Pu()&&!Nu()}function hu(){return Wl()&&typeof document<"u"}function pl(){return(pl=(0,a.Z)(function*(){return!!hu()&&new Promise(b=>{const m=setTimeout(()=>{b(!1)},md);document.addEventListener("deviceready",()=>{clearTimeout(m),b(!0)})})})).apply(this,arguments)}const ks={LOCAL:"local",NONE:"none",SESSION:"session"},Oo=Q,ku="persistence";function Fu(b){return yd.apply(this,arguments)}function yd(){return(yd=(0,a.Z)(function*(b){yield b._initializationPromise;const m=Lc(),I=_e(ku,b.config.apiKey,b.name);m&&m.setItem(I,b._getPersistence())})).apply(this,arguments)}function Lc(){var b;try{return(null===(b=function so(){return typeof window<"u"?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch(m){return null}}const $c=Q;class Oa{constructor(){this.browserResolver=Ge(lu),this.cordovaResolver=Ge(du),this.underlyingResolver=null,this._redirectPersistence=or,this._completeRedirectFn=tr,this._overrideRedirectResult=Tt}_initialize(m){var I=this;return(0,a.Z)(function*(){return yield I.selectUnderlyingResolver(),I.assertedUnderlyingResolver._initialize(m)})()}_openPopup(m,I,M,Y){var oe=this;return(0,a.Z)(function*(){return yield oe.selectUnderlyingResolver(),oe.assertedUnderlyingResolver._openPopup(m,I,M,Y)})()}_openRedirect(m,I,M,Y){var oe=this;return(0,a.Z)(function*(){return yield oe.selectUnderlyingResolver(),oe.assertedUnderlyingResolver._openRedirect(m,I,M,Y)})()}_isIframeWebStorageSupported(m,I){this.assertedUnderlyingResolver._isIframeWebStorageSupported(m,I)}_originValidation(m){return this.assertedUnderlyingResolver._originValidation(m)}get _shouldInitProactively(){return hu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return $c(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var m=this;return(0,a.Z)(function*(){if(m.underlyingResolver)return;const I=yield function As(){return pl.apply(this,arguments)}();m.underlyingResolver=I?m.cordovaResolver:m.browserResolver})()}}function fu(b){return b.unwrap()}function Ml(b){return Pa(b)}function Pa(b){const{_tokenResponse:m}=b instanceof G.ZR?b.customData:b;if(!m)return null;if(!(b instanceof G.ZR)&&"temporaryProof"in m&&"phoneNumber"in m)return al.credentialFromResult(b);const I=m.providerId;if(!I||I===Ve.PASSWORD)return null;let M;switch(I){case Ve.GOOGLE:M=qs;break;case Ve.FACEBOOK:M=Io;break;case Ve.GITHUB:M=zi;break;case Ve.TWITTER:M=Qs;break;default:const{oauthIdToken:Y,oauthAccessToken:oe,oauthTokenSecret:dt,pendingToken:Vt,nonce:vn}=m;return oe||dt||Y||Vt?Vt?I.startsWith("saml.")?Is._create(I,Vt):yt._fromParams({providerId:I,signInMethod:I,pendingToken:Vt,idToken:Y,accessToken:oe}):new ni(I).credential({idToken:Y,accessToken:oe,rawNonce:vn}):null}return b instanceof G.ZR?M.credentialFromError(b):M.credentialFromResult(b)}function Wo(b,m){return m.catch(I=>{throw I instanceof G.ZR&&function pu(b,m){var I;const M=null===(I=m.customData)||void 0===I?void 0:I._tokenResponse;if("auth/multi-factor-auth-required"===(null==m?void 0:m.code))m.resolver=new Kd(b,function bi(b,m){var I;const M=(0,G.m9)(b),Y=m;return Q(m.customData.operationType,M,"argument-error"),Q(null===(I=Y.customData._serverResponse)||void 0===I?void 0:I.mfaPendingCredential,M,"argument-error"),Go._fromError(M,Y)}(b,m));else if(M){const Y=Pa(m),oe=m;Y&&(oe.credential=Y,oe.tenantId=M.tenantId||void 0,oe.email=M.email||void 0,oe.phoneNumber=M.phoneNumber||void 0)}}(b,I),I}).then(I=>{const Y=I.user;return{operationType:I.operationType,credential:Ml(I),additionalUserInfo:$a(I),user:Na.getOrCreate(Y)}})}function uc(b,m){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,a.Z)(function*(b,m){const I=yield m;return{verificationId:I.verificationId,confirm:M=>Wo(b,I.confirm(M))}})).apply(this,arguments)}class Kd{constructor(m,I){this.resolver=I,this.auth=function lc(b){return b.wrapped()}(m)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(m){return Wo(fu(this.auth),this.resolver.resolveSignIn(m))}}class Na{constructor(m){this._delegate=m,this.multiFactor=function el(b){const m=(0,G.m9)(b);return fa.has(m)||fa.set(m,Ca._fromUser(m)),fa.get(m)}(m)}static getOrCreate(m){return Na.USER_MAP.has(m)||Na.USER_MAP.set(m,new Na(m)),Na.USER_MAP.get(m)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(m){return this._delegate.getIdTokenResult(m)}getIdToken(m){return this._delegate.getIdToken(m)}linkAndRetrieveDataWithCredential(m){return this.linkWithCredential(m)}linkWithCredential(m){var I=this;return(0,a.Z)(function*(){return Wo(I.auth,Lo(I._delegate,m))})()}linkWithPhoneNumber(m,I){var M=this;return(0,a.Z)(function*(){return uc(M.auth,function Va(b,m,I){return wl.apply(this,arguments)}(M._delegate,m,I))})()}linkWithPopup(m){var I=this;return(0,a.Z)(function*(){return Wo(I.auth,function to(b,m,I){return ki.apply(this,arguments)}(I._delegate,m,Oa))})()}linkWithRedirect(m){var I=this;return(0,a.Z)(function*(){return yield Fu(Rr(I.auth)),ut(I._delegate,m,Oa)})()}reauthenticateAndRetrieveDataWithCredential(m){return this.reauthenticateWithCredential(m)}reauthenticateWithCredential(m){var I=this;return(0,a.Z)(function*(){return Wo(I.auth,qo(I._delegate,m))})()}reauthenticateWithPhoneNumber(m,I){return uc(this.auth,function iu(b,m,I){return Du.apply(this,arguments)}(this._delegate,m,I))}reauthenticateWithPopup(m){return Wo(this.auth,function ys(b,m,I){return Tu.apply(this,arguments)}(this._delegate,m,Oa))}reauthenticateWithRedirect(m){var I=this;return(0,a.Z)(function*(){return yield Fu(Rr(I.auth)),U(I._delegate,m,Oa)})()}sendEmailVerification(m){return function Yr(b,m){return pr.apply(this,arguments)}(this._delegate,m)}unlink(m){var I=this;return(0,a.Z)(function*(){return yield function ur(b,m){return es.apply(this,arguments)}(I._delegate,m),I})()}updateEmail(m){return function eo(b,m){return ha((0,G.m9)(b),m,null)}(this._delegate,m)}updatePassword(m){return function ia(b,m){return ha((0,G.m9)(b),null,m)}(this._delegate,m)}updatePhoneNumber(m){return function od(b,m){return ma.apply(this,arguments)}(this._delegate,m)}updateProfile(m){return function bo(b,m){return Do.apply(this,arguments)}(this._delegate,m)}verifyBeforeUpdateEmail(m,I){return function ns(b,m,I){return gs.apply(this,arguments)}(this._delegate,m,I)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Na.USER_MAP=new WeakMap;const Lu=Q;let _a=(()=>{class b{constructor(I,M){if(this.app=I,M.isInitialized())return this._delegate=M.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Y}=I.options;Lu(Y,"invalid-api-key",{appName:I.name}),Lu(Y,"invalid-api-key",{appName:I.name});const oe=typeof window<"u"?Oa:void 0;this._delegate=M.initialize({options:{persistence:Vc(Y,I.name),popupRedirectResolver:oe}}),this._delegate._updateErrorMap(it),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Na.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(I){this._delegate.languageCode=I}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(I){this._delegate.tenantId=I}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(I,M){!function Ui(b,m,I){const M=Rr(b);Q(M._canInitEmulator,M,"emulator-config-failed"),Q(/^https?:\/\//.test(m),M,"invalid-emulator-scheme");const Y=!(null==I||!I.disableWarnings),oe=Zn(m),{host:dt,port:Vt}=function Wr(b){const m=Zn(b),I=/(\/\/)?([^?#/]+)/.exec(b.substr(m.length));if(!I)return{host:"",port:null};const M=I[2].split("@").pop()||"",Y=/^(\[[^\]]+\])(:|$)/.exec(M);if(Y){const oe=Y[1];return{host:oe,port:kr(M.substr(oe.length+1))}}{const[oe,dt]=M.split(":");return{host:oe,port:kr(dt)}}}(m);M.config.emulator={url:`${oe}//${dt}${null===Vt?"":`:${Vt}`}/`},M.settings.appVerificationDisabledForTesting=!0,M.emulatorConfig=Object.freeze({host:dt,port:Vt,protocol:oe.replace(":",""),options:Object.freeze({disableWarnings:Y})}),Y||function Ei(){function b(){const m=document.createElement("p"),I=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",I.position="fixed",I.width="100%",I.backgroundColor="#ffffff",I.border=".1em solid #000000",I.color="#b50000",I.bottom="0px",I.left="0px",I.margin="0px",I.zIndex="10000",I.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,I,M)}applyActionCode(I){return function Xn(b,m){return ps.apply(this,arguments)}(this._delegate,I)}checkActionCode(I){return Js(this._delegate,I)}confirmPasswordReset(I,M){return function Bo(b,m,I){return Vo.apply(this,arguments)}(this._delegate,I,M)}createUserWithEmailAndPassword(I,M){var Y=this;return(0,a.Z)(function*(){return Wo(Y._delegate,function Qo(b,m,I){return Vr.apply(this,arguments)}(Y._delegate,I,M))})()}fetchProvidersForEmail(I){return this.fetchSignInMethodsForEmail(I)}fetchSignInMethodsForEmail(I){return function Pn(b,m){return cr.apply(this,arguments)}(this._delegate,I)}isSignInWithEmailLink(I){return function D(b,m){const I=Gi.parseLink(m);return"EMAIL_SIGNIN"===(null==I?void 0:I.operation)}(0,I)}getRedirectResult(){var I=this;return(0,a.Z)(function*(){Lu(cs(),I._delegate,"operation-not-supported-in-this-environment");const M=yield function bn(b,m){return Wn.apply(this,arguments)}(I._delegate,Oa);return M?Wo(I._delegate,Promise.resolve(M)):{credential:null,user:null}})()}addFrameworkForLogging(I){!function oc(b,m){Rr(b)._logFramework(m)}(this._delegate,I)}onAuthStateChanged(I,M,Y){const{next:oe,error:dt,complete:Vt}=Ha(I,M,Y);return this._delegate.onAuthStateChanged(oe,dt,Vt)}onIdTokenChanged(I,M,Y){const{next:oe,error:dt,complete:Vt}=Ha(I,M,Y);return this._delegate.onIdTokenChanged(oe,dt,Vt)}sendSignInLinkToEmail(I,M){return function E(b,m,I){return h.apply(this,arguments)}(this._delegate,I,M)}sendPasswordResetEmail(I,M){return function Co(b,m,I){return fs.apply(this,arguments)}(this._delegate,I,M||void 0)}setPersistence(I){var M=this;return(0,a.Z)(function*(){let Y;switch(function va(b,m){Oo(Object.values(ks).includes(m),b,"invalid-persistence-type"),(0,G.b$)()?Oo(m!==ks.SESSION,b,"unsupported-persistence-type"):(0,G.UG)()?Oo(m===ks.NONE,b,"unsupported-persistence-type"):Nu()?Oo(m===ks.NONE||m===ks.LOCAL&&(0,G.hl)(),b,"unsupported-persistence-type"):Oo(m===ks.NONE||Pu(),b,"unsupported-persistence-type")}(M._delegate,I),I){case ks.SESSION:Y=or;break;case ks.LOCAL:Y=(yield Ge(lo)._isAvailable())?lo:Bt;break;case ks.NONE:Y=Re;break;default:return st("argument-error",{appName:M._delegate.name})}return M._delegate.setPersistence(Y)})()}signInAndRetrieveDataWithCredential(I){return this.signInWithCredential(I)}signInAnonymously(){return Wo(this._delegate,function wo(b){return oo.apply(this,arguments)}(this._delegate))}signInWithCredential(I){return Wo(this._delegate,Or(this._delegate,I))}signInWithCustomToken(I){return Wo(this._delegate,function Zo(b,m){return Hs.apply(this,arguments)}(this._delegate,I))}signInWithEmailAndPassword(I,M){return Wo(this._delegate,function g(b,m,I){return Or((0,G.m9)(b),Eo.credential(m,I))}(this._delegate,I,M))}signInWithEmailLink(I,M){return Wo(this._delegate,function W(b,m,I){return Ue.apply(this,arguments)}(this._delegate,I,M))}signInWithPhoneNumber(I,M){return uc(this._delegate,function Da(b,m,I){return vi.apply(this,arguments)}(this._delegate,I,M))}signInWithPopup(I){var M=this;return(0,a.Z)(function*(){return Lu(cs(),M._delegate,"operation-not-supported-in-this-environment"),Wo(M._delegate,function Ua(b,m,I){return zs.apply(this,arguments)}(M._delegate,I,Oa))})()}signInWithRedirect(I){var M=this;return(0,a.Z)(function*(){return Lu(cs(),M._delegate,"operation-not-supported-in-this-environment"),yield Fu(M._delegate),_n(M._delegate,I,Oa)})()}updateCurrentUser(I){return this._delegate.updateCurrentUser(I)}verifyPasswordResetCode(I){return function ao(b,m){return Uo.apply(this,arguments)}(this._delegate,I)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=ks,b})();function Ha(b,m,I){let M=b;"function"!=typeof b&&({next:M,error:m,complete:I}=b);const Y=M;return{next:dt=>Y(dt&&Na.getOrCreate(dt)),error:m,complete:I}}function Vc(b,m){const I=function $r(b,m){const I=Lc();if(!I)return[];const M=_e(ku,b,m);switch(I.getItem(M)){case ks.NONE:return[Re];case ks.LOCAL:return[lo,or];case ks.SESSION:return[or];default:return[]}}(b,m);if(typeof self<"u"&&!I.includes(lo)&&I.push(lo),typeof window<"u")for(const M of[Bt,or])I.includes(M)||I.push(M);return I.includes(Re)||I.push(Re),I}class Uc{constructor(){this.providerId="phone",this._delegate=new al(fu(J.Z.auth()))}static credential(m,I){return al.credential(m,I)}verifyPhoneNumber(m,I){return this._delegate.verifyPhoneNumber(m,I)}unwrap(){return this._delegate}}Uc.PHONE_SIGN_IN_METHOD=al.PHONE_SIGN_IN_METHOD,Uc.PROVIDER_ID=al.PROVIDER_ID;const xs=Q;class cc{constructor(m,I,M=J.Z.app()){var Y;xs(null===(Y=M.options)||void 0===Y?void 0:Y.apiKey,"invalid-api-key",{appName:M.name}),this._delegate=new co(m,I,M.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function dc(b){b.INTERNAL.registerComponent(new he.wA("auth-compat",m=>{const I=m.getProvider("app-compat").getImmediate(),M=m.getProvider("auth");return new _a(I,M)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:de_EMAIL_SIGNIN,PASSWORD_RESET:de_PASSWORD_RESET,RECOVER_EMAIL:de_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:de_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:de_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:de_VERIFY_EMAIL}},EmailAuthProvider:Eo,FacebookAuthProvider:Io,GithubAuthProvider:zi,GoogleAuthProvider:qs,OAuthProvider:ni,SAMLAuthProvider:ss,PhoneAuthProvider:Uc,PhoneMultiFactorGenerator:uu,RecaptchaVerifier:cc,TwitterAuthProvider:Qs,Auth:_a,AuthCredential:ei,Error:G.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.3.5")}(J.Z)},8766:(sn,ht,B)=>{"use strict";B.d(ht,{Lj:()=>st,X3:()=>at});var a=B(5861);const J=(Q,et)=>et.some(ke=>Q instanceof ke);let G,De;const he=new WeakMap,xe=new WeakMap,Ve=new WeakMap,ge=new WeakMap,ce=new WeakMap;let Fe={get(Q,et,ke){if(Q instanceof IDBTransaction){if("done"===et)return xe.get(Q);if("objectStoreNames"===et)return Q.objectStoreNames||Ve.get(Q);if("store"===et)return ke.objectStoreNames[1]?void 0:ke.objectStore(ke.objectStoreNames[0])}return ye(Q[et])},set:(Q,et,ke)=>(Q[et]=ke,!0),has:(Q,et)=>Q instanceof IDBTransaction&&("done"===et||"store"===et)||et in Q};function Te(Q){return"function"==typeof Q?function Ct(Q){return Q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ae(){return De||(De=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Q)?function(...et){return Q.apply(le(this),et),ye(he.get(this))}:function(...et){return ye(Q.apply(le(this),et))}:function(et,...ke){const He=Q.call(le(this),et,...ke);return Ve.set(He,et.sort?et.sort():[et]),ye(He)}}(Q):(Q instanceof IDBTransaction&&function Ce(Q){if(xe.has(Q))return;const et=new Promise((ke,He)=>{const Ge=()=>{Q.removeEventListener("complete",rt),Q.removeEventListener("error",z),Q.removeEventListener("abort",z)},rt=()=>{ke(),Ge()},z=()=>{He(Q.error||new DOMException("AbortError","AbortError")),Ge()};Q.addEventListener("complete",rt),Q.addEventListener("error",z),Q.addEventListener("abort",z)});xe.set(Q,et)}(Q),J(Q,function Me(){return G||(G=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Q,Fe):Q)}function ye(Q){if(Q instanceof IDBRequest)return function de(Q){const et=new Promise((ke,He)=>{const Ge=()=>{Q.removeEventListener("success",rt),Q.removeEventListener("error",z)},rt=()=>{ke(ye(Q.result)),Ge()},z=()=>{He(Q.error),Ge()};Q.addEventListener("success",rt),Q.addEventListener("error",z)});return et.then(ke=>{ke instanceof IDBCursor&&he.set(ke,Q)}).catch(()=>{}),ce.set(et,Q),et}(Q);if(ge.has(Q))return ge.get(Q);const et=Te(Q);return et!==Q&&(ge.set(Q,et),ce.set(et,Q)),et}const le=Q=>ce.get(Q);function at(Q,et,{blocked:ke,upgrade:He,blocking:Ge,terminated:rt}={}){const z=indexedDB.open(Q,et),ft=ye(z);return He&&z.addEventListener("upgradeneeded",nt=>{He(ye(z.result),nt.oldVersion,nt.newVersion,ye(z.transaction))}),ke&&z.addEventListener("blocked",()=>ke()),ft.then(nt=>{rt&&nt.addEventListener("close",()=>rt()),Ge&&nt.addEventListener("versionchange",()=>Ge())}).catch(()=>{}),ft}function st(Q,{blocked:et}={}){const ke=indexedDB.deleteDatabase(Q);return et&&ke.addEventListener("blocked",()=>et()),ye(ke).then(()=>{})}const Xe=["get","getKey","getAll","getAllKeys","count"],Ze=["put","add","delete","clear"],Pe=new Map;function Oe(Q,et){if(!(Q instanceof IDBDatabase)||et in Q||"string"!=typeof et)return;if(Pe.get(et))return Pe.get(et);const ke=et.replace(/FromIndex$/,""),He=et!==ke,Ge=Ze.includes(ke);if(!(ke in(He?IDBIndex:IDBObjectStore).prototype)||!Ge&&!Xe.includes(ke))return;const rt=function(){var z=(0,a.Z)(function*(ft,...nt){const Ie=this.transaction(ft,Ge?"readwrite":"readonly");let Ee=Ie.store;return He&&(Ee=Ee.index(nt.shift())),(yield Promise.all([Ee[ke](...nt),Ge&&Ie.done]))[0]});return function(nt){return z.apply(this,arguments)}}();return Pe.set(et,rt),rt}!function it(Q){Fe=Q(Fe)}(Q=>({...Q,get:(et,ke,He)=>Oe(et,ke)||Q.get(et,ke,He),has:(et,ke)=>!!Oe(et,ke)||Q.has(et,ke)}))},5861:(sn,ht,B)=>{"use strict";function a(G,De,Me,Ae,he,xe,Ve){try{var ge=G[xe](Ve),ce=ge.value}catch(de){return void Me(de)}ge.done?De(ce):Promise.resolve(ce).then(Ae,he)}function J(G){return function(){var De=this,Me=arguments;return new Promise(function(Ae,he){var xe=G.apply(De,Me);function Ve(ce){a(xe,Ae,he,Ve,ge,"next",ce)}function ge(ce){a(xe,Ae,he,Ve,ge,"throw",ce)}Ve(void 0)})}}B.d(ht,{Z:()=>J})}},sn=>{sn(sn.s=5061)}]);